2021-02-22 09:43:31,258-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.52.46.169', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-02-22 09:43:31,549-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-02-22 09:43:31,607-INFO-lib.common.db_operation.redis_operation-33-连接redis集群[{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]成功
2021-02-22 09:43:31,607-INFO-lib.common.db_operation.redis_operation-74-connection list: [{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]
2021-02-22 09:43:34,819-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no, plan_id FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=1
2021-02-22 09:43:34,823-INFO-lib.common_biz.find_merchant_info-41-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601', 'plan_id': '120877'}
2021-02-22 09:43:34,824-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-02-22 09:43:34,827-INFO-lib.common_biz.find_key-108-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-02-22 09:43:34,835-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 09:43:34,836-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTI0MzIzNTkxNzUsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTHFLUlgvNDgxVm4wTlBnMHRsRTBoekt0UWlkOTU4Y1paT3JjWFVaaWdCbGc9In0.MEQCIDNerQ91ofjYoUWHcxjmBpIwDBFkoANGJahYcnZLFr3OAiAYXRHenkKELTRtELmqHC0KEG5WiDIP86ORppeeUp1gcA"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "6.0"
appKey: "1234"
count: 10000
order: "04280382472121"
ip: "121.13.218.236"
type: "1"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "NgFdab9zHCVmOJXc7PREeDWjMALKYyx3"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-02-22 09:43:35,047-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "a981bfb30bee41ccb2a10516add6f814"
s_p: "UVBiT052M040V2xNa0J1VklMcERqQmFNNVRoUFl5dUNnV1RwTmFEbllrenhTSFFaeDhlUWpVcnBYT1lpdEZ5NFhqTkw4ZDdLbzhIbFRWTnU3YktsQWVyZ29laElUUEptRnNOMW9vSFBoaTBYOXlsMnByUVY2Z1FnZDJ2WUtiZWl3dldQdFlMUTBGRUt5UVpWeERhbFhXdVFEeFVlcUgzazEyRGlYRFpqMXlWblVCbHZOZHpZSW93NGpwZmhYbGFWdUJZY1Q1STR0eklQbkZWVTF4eWtQdmNwMnV2a1FYRmpNZGU4SlE1bUlsb0ZhcDhhRG5uOVg0RUs2cE9TM05RZEdIV052NEVkMjZZdUxFVWNxcmJXQVZaTHlKZnozZ1dudjlFZWhUcFN2SktyOGt0djZEdmw0QVJSdGlYNVpnYW41VGhrUndxbEJuVDZMbDVKY3M1aWVIV2V5MTZwNndjN3pXc2dGdFI3N3FXa0FKUk45RThtQ2YxdVlCM2MzR1VLNkRmUk1tU081cjFIUUJkV3o4ZmRQcmF2VVpOQXE4SzJuMVRzQ2pzb0QwVnpFdUh3dk5DSUxmZlpDT1lsdVppa2xnWGtmTHMxMUwzWHV3T3E4Sk0yNlREUERhdFNQTG43ck10dXREb3BJcmVWTk84aXh0Q293RWl0RUZUNmpGaERtSXV4SzlDWWtQZ1hPNGxFenNqRVNUMGhnWDZnMDhSTjBCRm9KV2N5WVNiRTk0UXlUQzJVRXUyZjhiTk1uMXJFMkxqaUVPWEpsT1Nybm5QYXM5VEIzMVFxTTdyMW14SmNQVTlSalBwSlNsTkw3N2lZTXF5S29Da29iaU9OT2JBNU5kWlUwMDBjZVE4YnRUc1NHOFVHZ1U0ZlVzYmhNRHdoZk5WU1ZoNWF0bXJPVksxTzNwWVVMODRYTUE1aGo3clV0eDhJeGZVZXdlZlJwZFBBUmxkQUtzQjhnSnBTV1ZWTXJ4VG9BNVhHRjRyd1B0cEloemxPWEV1OVN2RVZyTEdmWUR0M1M0U1RTY0VMOEwzVzNPSFRrSmxxOUg0Zk5SRFM="
m_p: "6F71GibHJw9T9l7CrCgoX95KdaO0f981esEFCo9u3v74yayQ2Ymbw3JH4j9VWk01"
e_t: "1614066217420"
balanceResult {
  baseresult {
    code: "0000"
    msg: ""
  }
  balance: "0"
  vouBalance: "0"
  vouNum: 0
}
userinfo {
  username: "156******06"
}

2021-02-22 09:43:35,051-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 09:43:35,051-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "1.0"
  t_p: "a981bfb30bee41ccb2a10516add6f814"
  imei: ""
  model: "PCRM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "hi0X9yl2"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: ""
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
transType: "SIGN"
renewProductCode: "20310001"
signPartnerOrder: "B57z0qpPk61tmxLRyhGr8vNQD23wJf4c"
type: "wxpay"
amount: "0.0"
oriAmount: "0.0"
ip: "58.252.5.75"
sign: "ZUMbPdrqLSMfJe8YTBpVGbT6kdVqOCBUBf/pqrSHQ8wqOFME3NRBOdskBnhh+USLgCrOsSjBdv12tc+Lzmriu+eRzYXImZGCOrfNVUF6tHMMQI3d1Vtxav4DGfk7zQGj+uqMfqSvB9rD9ip+vczCH2+qM/NtACDFNw5OldFsloqRi10uVa7CFOO4imx151/D6AGraCh/wBTnCV1gTJwDoaixUaoyQ0rGxiYtuC9ejBazXDZQqjYKp08Ihn40SSz7xTwwEjhwELCwpN0A9AlwEA/7fSCxHY8po60WvdwNbmHHPoFmuFSRL3IFZA2LFjbvybeK89/2RnIAU0zQXe2jcF5pEjWUyaXM3znVpEguAcr+ortz9CXy/IZIphveNA2qoZ9pRV2FBOAX8/HQvBRxXAZP8Uq/SKdvLIsQ+zGK/SY/lC6/8wCroGSg8i7OtsgvEgZNq7xCVU7WcryVQqemX69+hQQsaMd71RTYJXj/nguS7YdvF7E8gOsSfQiWHPb9"
signAgreementNotifyUrl: "http://secure.pay-test3.wanyol.com/notify/receiver"
appId: ""
isNeedExpend: "0"
basepay {
  channelId: ""
  notifyurl: "http://secure.pay-test3.wanyol.com/notify/receiver"
  productName: "ONLY_SIGN"
  productDesc: "ONLY_SIGN"
  partnercode: "2031"
  appversion: "260"
  currencyName: "\344\272\272\346\260\221\345\270\201"
  rate: 1.0
  partnerorder: "uKqIENDBogFsylCOG63c2JhHr0kVevAw"
}
screenInfo: "FULL"

2021-02-22 09:43:35,149-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0010"
  msg: "\350\207\252\345\212\250\347\273\255\350\264\271\345\267\262\347\255\276\347\272\246"
}
payrequestid: ""
transType: "SIGN"
signType: "APP"

2021-02-22 09:43:38,151-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT contract_code from `db_order_0`.`autorenew_sign_record` where pay_req_id = ""
2021-02-22 09:43:38,155-INFO-lib.common.db_operation.mysql_operation-51-查询数据为空
2021-02-22 09:44:27,672-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.52.46.169', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-02-22 09:44:27,948-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-02-22 09:44:27,990-INFO-lib.common.db_operation.redis_operation-33-连接redis集群[{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]成功
2021-02-22 09:44:27,990-INFO-lib.common.db_operation.redis_operation-74-connection list: [{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]
2021-02-22 09:44:28,353-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no, plan_id FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=1
2021-02-22 09:44:28,356-INFO-lib.common_biz.find_merchant_info-41-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601', 'plan_id': '120877'}
2021-02-22 09:44:28,357-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-02-22 09:44:28,360-INFO-lib.common_biz.find_key-108-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-02-22 09:44:28,368-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 09:44:28,368-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTI0MzIzNTkxNzUsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTHFLUlgvNDgxVm4wTlBnMHRsRTBoekt0UWlkOTU4Y1paT3JjWFVaaWdCbGc9In0.MEQCIDNerQ91ofjYoUWHcxjmBpIwDBFkoANGJahYcnZLFr3OAiAYXRHenkKELTRtELmqHC0KEG5WiDIP86ORppeeUp1gcA"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "6.0"
appKey: "1234"
count: 10000
order: "18934579764156"
ip: "121.13.218.236"
type: "1"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "0At7hjLTgvXYo96JEUDcHbk1aGMBxPON"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-02-22 09:44:28,429-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "2677527cc4714201b0ccb4647938caa8"
s_p: "azhYYmtuS1FvMFd6REFsNnBWZ0ZIV1pNRFNBUlQzR0tTa1FsaXlmMGR4R3JWQTJ4R0RLQUREOVdJTHNSQ1JMbWtHQ3RhS25xSUdhb3dsZFJ5UUdrdFVIUEpnRHIzSlJrNDA3UWZ1WUJuaE04aDVSc0hmNlNIU3ZPbkhqbms3OFE4TktxNEtMSXVsNENsbkpENUF6OFV1TGFqRXdEbExsN3FPTk5KY3gzWndtakphVE1aSTRsaldGMFlWNU1SQU9xMEpQb2RGNTdLRFZOQ1pveUpoTHJPUTFKdjBRT1NWdlNQSTJUSHNZVU85UWZyZUx4RTVzaTZkMUlHekRRSDluUUxZUXo4UjJkTzB3RHJ2QTRKYk5HbGwzT2VHN0xaV1hTcWkyU3pDWjhBaU5RWXRLTkJHa2xKN0dUVmJDSkFJMTBPRXdjVG1vT25qTGtEcmNPZHVlSFhFczU5d09qUHdHWkZ1dUI2YzVBcWdhSUxvM1dCZlRHaWE5ajZEOUVScHJNQW9pVnJsVVRITEJTMjIzQk9JZDhHMlFzSkJBQ1BkQk9SaHlHdEJ0RTdCV2NoOUtIdWhKem5xOEw2bUM5Z0VTelkzMXd0ZUxXOWo1MmZXUzBKaGxkRFB0S3hTT2RWVjc0WkpVa0FzenFSc0ZDNUl3SU5DY3M1YkVDa0FJazdEbHp3NkFTZTVJelo1U1VpcGVFTzZHTU9iNjZUbGJ5a2gwY0NCOWhBQmdzU2ZJMHRMY2d6dzFVc09BelRyV0x2WGhLNzFaWk5GNmtsV1ZDTmZmbTJGWXNaZU9UQmdKVG56THA3eHNrTTc5TTh1d1QwZ1k3bER1WGNZN3k3Y1dhSkNlTE0xeEhxQ3ZLQUtkamxBRzY4b21jN2ltNzZNNmhDVExIZWRwQ0FOYjFYUjJmTFVnWXh0alRqMUxmYmR5RWtjWHFTV2w0azI4QkpwNGY5eGtsdjQ2WEhuUGxPeFFHczllck1mN0dadHNOdEF0MWNiSE9TM2lYcnlyaTZFVTVSa0ZacXU1c3lYY0hkc3NzSzRDRnlCSFJBMjRPSDNrUXlaUFQ="
m_p: "CTTkx4CsFnPyAn4ioz46rC9J0cNfyS4gkGwhM8932Z4B9sJ733yh567DH5UV52QI"
e_t: "1614066270816"
balanceResult {
  baseresult {
    code: "0000"
    msg: ""
  }
  balance: "0"
  vouBalance: "0"
  vouNum: 0
}
userinfo {
  username: "156******06"
}

2021-02-22 09:44:28,433-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 09:44:28,433-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "1.0"
  t_p: "2677527cc4714201b0ccb4647938caa8"
  imei: ""
  model: "PCRM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "NNJcx3Zw"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: ""
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
transType: "SIGN"
renewProductCode: "20310001"
signPartnerOrder: "186PtRDU5AOjylCIGKBsWQfXomMvVLZN"
type: "wxpay"
amount: "0.0"
oriAmount: "0.0"
ip: "58.252.5.75"
sign: "uGMoyZwA5O/Jz38VSYORDH75rr6zyJpZTDUXiv9x6AiKUau71lNyEnVREad/TTc/fvMwxRGd6fwgcVchsbIUizV+JwIaeiXFF4bVYzKSml8QQL6roPw8XzewZoGuI77KqrFs58A+iUs+3FZYMvNncHS0RODu1ghjd3l2DmEHcLxppuSxYNHuUXFtkvCoc+/LiFUG6gnZpFbfWNJkBakehCPV3w86JAZIWJICy0m0q6g/huTuxhF9/AZdIuim3C4VN4CX+PjkoJodjeIt9MLBSWu58qn6CZ+ihd+w2muT0SJ7nVUTF0TUToqgg+zYlAZtFzNIZOOaoAHQD0t59VxpndffXcDGlghAq+GdrXAt5ig0y2owlm2i4NRLjav9K+ZEdVdOZMJQ5PE7IfSrJvnQ5D04qrV5H6SVsbKJUNEzcOahkn9KmNHYxPWdeoP0Wm9dvpW2OFj5YNDSgzcVesOsiLEOIUe4D0NuHrz7oAGZYCKcDPGQOLLGht4szVquVsC7"
signAgreementNotifyUrl: "http://secure.pay-test3.wanyol.com/notify/receiver"
appId: ""
isNeedExpend: "0"
basepay {
  channelId: ""
  notifyurl: "http://secure.pay-test3.wanyol.com/notify/receiver"
  productName: "ONLY_SIGN"
  productDesc: "ONLY_SIGN"
  partnercode: "2031"
  appversion: "260"
  currencyName: "\344\272\272\346\260\221\345\270\201"
  rate: 1.0
  partnerorder: "PXlJu9Cs2TfFt1kL0xpwc57gSnmUWDqi"
}
screenInfo: "FULL"

2021-02-22 09:44:28,715-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "f41bb6e3354d8472bf3eb4b2bd68fac30562a5cf699cdbc5a4994d48d3643d3c1613958271T5RxuUqrpLTDARhoCvXZ2yhkJXcAzjYT"
}
payrequestid: "SN202102220944305876434263117781"
transType: "SIGN"
signType: "APP"

2021-02-22 09:44:31,717-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT contract_code from `db_order_0`.`autorenew_sign_record` where pay_req_id = "SN202102220944305876434263117781"
2021-02-22 09:44:31,743-INFO-wxpay-scarlet-96-回调参数：<xml><change_type>ADD</change_type>
<contract_code>SN202102220944306422657574365588</contract_code>
<contract_expired_time>2022-02-22 09:44:31</contract_expired_time>
<contract_id>7927704178</contract_id>
<mch_id>1259634601</mch_id>
<openid>oCg6Xt8NvRi7jGuap_5B6XdY4oYk</openid>
<operate_time>2021-02-22 09:44:31</operate_time>
<plan_id>120877</plan_id>
<request_serial>235174105936114600</request_serial>
<result_code>SUCCESS</result_code>
<return_code>SUCCESS</return_code>
<return_msg>OK</return_msg>
<sign>D692E4277446490791B02A0E7AB2C25F</sign>
</xml>
2021-02-22 09:44:33,149-INFO-wxpay-scarlet-100-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-02-22 09:44:33,149-INFO-wxpay-scarlet-102-回调解析成功
2021-02-22 09:45:25,301-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.52.46.169', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-02-22 09:45:25,614-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-02-22 09:45:25,656-INFO-lib.common.db_operation.redis_operation-33-连接redis集群[{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]成功
2021-02-22 09:45:25,656-INFO-lib.common.db_operation.redis_operation-74-connection list: [{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]
2021-02-22 09:45:26,020-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no, plan_id FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=1
2021-02-22 09:45:26,024-INFO-lib.common_biz.find_merchant_info-41-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601', 'plan_id': '120877'}
2021-02-22 09:45:26,025-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-02-22 09:45:26,028-INFO-lib.common_biz.find_key-108-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-02-22 09:45:26,036-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 09:45:26,036-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTI0MzIzNTkxNzUsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTHFLUlgvNDgxVm4wTlBnMHRsRTBoekt0UWlkOTU4Y1paT3JjWFVaaWdCbGc9In0.MEQCIDNerQ91ofjYoUWHcxjmBpIwDBFkoANGJahYcnZLFr3OAiAYXRHenkKELTRtELmqHC0KEG5WiDIP86ORppeeUp1gcA"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "6.0"
appKey: "1234"
count: 10000
order: "05739978755056"
ip: "121.13.218.236"
type: "1"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "NTHK8vRgD1lswEytBdC7YqzWxOMbhaIG"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-02-22 09:45:26,101-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "637b63ec5c29441699361efdba183585"
s_p: "T0YzV2VuNDhON2U2eGlNOTNWQ3lrcUVJUTlTYTIwbzFPdzkzOGUwdjdwSjB1YjFRYndHMEFnYm5aVVlYMTRsRlF5QkZ5bTBlMWQ0aGdwdExGRnhvam9ZUFpiekJKdnNXd3pESzd0WjNyUmM3bktpem1wenVCbHB3c3NqdWlPNEFLY29tdEtpTTUxMlg0bHFYZjhETWlEUlN4cWt6OUVkTFBET1dXQ3BWclFTelBZOUZQVktGeGp6V202WkNrS0NxUmh4T2VaYjBKSkhYVlRrTUJwY1BPMHBQUVM5WkdqY1NIdGFlQXIzeFdldlVXWUM3Q0todXdtTThEbmFuSGhmUlljSWtzOFZNc3E2U3ZsREkyVW1KeHptV2Zoakk4ZkMyREZuRHRKWW0xWmVwRmY0V00wRlFYR2ZSak8wZm5ZVDd5YWZJREIweW1BNnp1TXdla2U2TU85SkdkcmpBQUMwZFJxTDZiQ1IwWXA5ckx4ckJyQ1duZ3hrZ0hXQmxCQ1BSWHhEdnRVcjVDRmQ0cDVXVTdtU1prWFNOS1E2aUVtVWVEbE1uUTV5VFVsNlRhdnFKbGF1Q3dMdGJMaUJwdG1COExpV3FZU3lCUDVsdzhKZFVqV2FLUHFEWk1keDlVZ1U4UktKWHZHTVM4WERRbzg1V2tLenFCOHdKVldEUWprNXRDU1VWcFhOYk95Nkl4bUNhMlJCMEVGUm43UmNyRVRNOVgyT3o5dmhxZmd1RW5URjlzak14dmtzN1UxOVV6OVVEYm0zZFIyV3FIbGN3cVpxd3ZnWGxTRzZGdXdoclRaN1FTbXB2ZXRYS2R4MldBTEhOMjhUdVVQYU4wR0RkNDY0MXB1WnhDMXRrNmUyT0U3VXlzdlN0NjhBOVNmV0VuNzRxeXhCSHVVenBGb1pwNERjSTR3MkdRc3V4dGcwQzBkTFpPcjlxZ2docUI3S0VydTFaQkJjNXJncGxaMUMxbXViZnZtT3pPZWoxRHdCYmIza1JVVVdNWUxHdGhGM2FUVHpLQUFCdkdFdzdFRGdsYkFSY3VQbkx6YTN4aE4wTFlaU1M="
m_p: "6C05kBvvQ300i196Z374CpC0eF592T7r49l745XYlgJ4q53zruWT8571Y1XMxD66"
e_t: "1614066328486"
balanceResult {
  baseresult {
    code: "0000"
    msg: ""
  }
  balance: "0"
  vouBalance: "0"
  vouNum: 0
}
userinfo {
  username: "156******06"
}

2021-02-22 09:45:26,104-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 09:45:26,104-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "1.0"
  t_p: "637b63ec5c29441699361efdba183585"
  imei: ""
  model: "PCRM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "14lFQyBF"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: ""
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
transType: "SIGN"
renewProductCode: "20310001"
signPartnerOrder: "LUma4ZP9HXneyVQwCR07gix68hlApWKu"
type: "wxpay"
amount: "0.0"
oriAmount: "0.0"
ip: "58.252.5.75"
sign: "v8c4GYTQe9xlWh5UKEYO7t4lT5JChIv+1H3dpXhrdZVAdKIw+xvu0E72QJgBERbtAyvHM98Q2U/osg98aBEVCyvZZNkp+UYeyTpsB5nyFne8BizNpmXyNyLO3gaE5FRnauVxE4OhIQ1IEgO/tjtTgSeJa36FNRJmexi8njKzNEMlvUIl6aUwCIhUAvU9qVTnvN43uf1gMN8MP6gMq8nt/ZqwjYgKQtuTjnpnEMcpYm9gOLnP8gFXU+a3IREwD7IJ0q0Xrz2ftPvYjrcBxJDgSyS1kfKdc6e6y+BQ+7kNwaZdemXpmhULXcyryPzXsI59z455JKnDtzPvEc0ZlySmMcCv1mIaYRNpKh0CQY2JANoR2ihN008HTg1VZU87Tuom24tZMqiHiBplGgMbmuzkviK34OnTQE4sJ9Hkel3+BlvlQ6i9zjh8mlBwIqBUviSFr2lRD2Cg6BHniaTccZdAuNGkT62bfjAcNEUmv/0d3jXWw8riVKe70WvwfLLTdJKR"
signAgreementNotifyUrl: "http://secure.pay-test3.wanyol.com/notify/receiver"
appId: ""
isNeedExpend: "0"
basepay {
  channelId: ""
  notifyurl: "http://secure.pay-test3.wanyol.com/notify/receiver"
  productName: "ONLY_SIGN"
  productDesc: "ONLY_SIGN"
  partnercode: "2031"
  appversion: "260"
  currencyName: "\344\272\272\346\260\221\345\270\201"
  rate: 1.0
  partnerorder: "hA9a4f1BoCmvlgy5sPer0RdOKSVbXnxT"
}
screenInfo: "FULL"

2021-02-22 09:45:26,380-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "e082f3d35bdab2ce7d864de550663e1df3d58fceb3fad69591b0ea0e596d91c91613958328fseH6Nkt3SNzzj3JRgOR9A4Z2Sp7HLWX"
}
payrequestid: "SN202102220945287843620464788003"
transType: "SIGN"
signType: "APP"

2021-02-22 09:45:26,380-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT contract_code from `db_order_0`.`autorenew_sign_record` where pay_req_id = "SN202102220945287843620464788003"
2021-02-22 09:45:26,384-INFO-wxpay-scarlet-96-回调参数：<xml><change_type>ADD</change_type>
<contract_code>SN202102220945287816641734033201</contract_code>
<contract_expired_time>2022-02-22 09:45:26</contract_expired_time>
<contract_id>3073118237</contract_id>
<mch_id>1259634601</mch_id>
<openid>oCg6Xt8NvRi7jGuap_5B6XdY4oYk</openid>
<operate_time>2021-02-22 09:45:26</operate_time>
<plan_id>120877</plan_id>
<request_serial>948320537166715608</request_serial>
<result_code>SUCCESS</result_code>
<return_code>SUCCESS</return_code>
<return_msg>OK</return_msg>
<sign>8CE6C4FFEB2C1B510BC7EA4B5BA2D5B6</sign>
</xml>
2021-02-22 09:45:26,470-INFO-wxpay-scarlet-100-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-02-22 09:45:26,470-INFO-wxpay-scarlet-102-回调解析成功
2021-02-22 10:23:20,210-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.52.46.169', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-02-22 10:23:20,530-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-02-22 10:23:20,574-INFO-lib.common.db_operation.redis_operation-33-连接redis集群[{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]成功
2021-02-22 10:23:20,574-INFO-lib.common.db_operation.redis_operation-74-connection list: [{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]
2021-02-22 10:23:20,945-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no, plan_id FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=1
2021-02-22 10:23:20,948-INFO-lib.common_biz.find_merchant_info-41-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601', 'plan_id': '120877'}
2021-02-22 10:23:20,949-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-02-22 10:23:20,952-INFO-lib.common_biz.find_key-108-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-02-22 10:23:20,960-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 10:23:20,960-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTI0MzIzNTkxNzUsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTHFLUlgvNDgxVm4wTlBnMHRsRTBoekt0UWlkOTU4Y1paT3JjWFVaaWdCbGc9In0.MEQCIDNerQ91ofjYoUWHcxjmBpIwDBFkoANGJahYcnZLFr3OAiAYXRHenkKELTRtELmqHC0KEG5WiDIP86ORppeeUp1gcA"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "6.0"
appKey: "1234"
count: 10000
order: "67479100694743"
ip: "121.13.218.236"
type: "1"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "J9nwIsGYDpBOuH5hcrR6M4zxkQSdlm8a"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-02-22 10:23:21,071-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "021ac0eab3ca47c0919748af3536dca1"
s_p: "VTl5SFFDUFM4d3VjZG90NnpEanNRRTRQYXFLeVZwUk9BOUxCUGNPU0lzbm51MzRacE9iUmdxeW53YW9vMkFTY0oxUEhQT201a1N2UUU0bWZjSXFCMUlhbnNncWtYVkU2VUszM2I2Rzh5bmtmZzd3VG00N2RWU1hyaTllVkxwVVo1dzVvYmJBQlV1cnN4N2NLNHkxRVZXclNJQWhLZ2tPSjJwZGM4aFdrakdUTXlzS0QzVkNoTTh1QWo5dVJ0aVVCTmNoM1c2emJNWVFYMm9oRHgzUWs3T0ZMOFhnMWNidnpvSFI5ZVBBQ2YwV0pDOWJEU3ZpV0RlSnE3eGp6OGRpcDl0ZmVjY3Z1blg3UmpOZFZIU2RDQ25jcnJkbElyZ2pMb2lhaVNObWxMQVBlMjloVGZDYjIzemlSck16dVI2bVJScEcxWEVGRlY4NHhyREpZODJockVzOGU3YUttWlNFQ2pST1puN3oxTUVQMlJBaUlPOWJzeXlWQ0VSamppU1JQWVM3b2lLTm5VMlBRd1BLV2I4RWg0Wkh0b2Y4dm5PcmlqTmRJdEpSYWxoa3dWNU0wc3lSdFRtMDV4QTlCTlp6UGVkZlJOb0JNMEVRU2lTVHViZ2c5SG5YN0ZUekVkWllXWTM0aXpXQ0pKYTFoc1BKek1NbHNKcW9wZ3didWFNQVJ0dXl2ZW5PWTVLbDZEaVUxMEZEUzh0dmdWS2JPMFM5WldITHdLVnBqdVRlSVBrQ1FWaU5CbHluR0VTVkp2dnV3d04wWXNuT0FzUU5GSmFFSVl1M3pKeFViWnJxMldaVFBKaUVVR1JxaFRwTzlJUWRKckFBMVJKV0NLUUZYbWUwVzk1ZDZ6RnhHeGJRVjVqOWVXQWdqS0FKcmFqd29za1B6V0ZWRFpIUnFEQjJIbFFTU3h4a2pEYWxnbDFTNTJneXJxUUhvbER2T3o3cW5aM1lzQ1d0ZVZWeXI1RDBaeERhOEYxbzBMUEdyTW1OYjJNNFB4d05URmRQZGNjYWtvTUdjNUV5MFNYY3RJQlpFa1hSdTZZaHo2WEFVVTFJcXd0Uko="
m_p: "9UfIf56TUL9wOQv8CJEZKEY629N171Fb251Vs3rrDJ0Xr6Pl6Ps76PhRFc7qWW6t"
e_t: "1614068603454"
balanceResult {
  baseresult {
    code: "0000"
    msg: ""
  }
  balance: "0"
  vouBalance: "0"
  vouNum: 0
}
userinfo {
  username: "156******06"
}

2021-02-22 10:23:21,074-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 10:23:21,074-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "1.0"
  t_p: "021ac0eab3ca47c0919748af3536dca1"
  imei: ""
  model: "PCRM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "ROA9LBPc"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: ""
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
transType: "SIGN"
renewProductCode: "20310001"
signPartnerOrder: "mKelkz1y4WtfdSQbjYB2OgP3h0ornGLZ"
type: "wxpay"
amount: "0.0"
oriAmount: "0.0"
ip: "58.252.5.75"
sign: "aI8PYM5nKsRqDiUqkM+SiouMA8wBnZXfgSZr6U9n/te5E7X/Fz1ZsxyS+WtYg442sR7qQicWcXDyozzAjm2U+dAmJjL5wUq5bm6hAtvpbrxijT5tSKvuE7qOLiyQNNF28oHoKxCRVAMNYOC7QBT65XAPHCwgWdE2HQmH6DM25zgYHsoVBLW1EwJKxFSy7BXeEle5GNZgaWIWNqdstDqjFkpVGGiKt6DEEMTHj1K2sYQhlvyCnIu/meqzPtUX47K9o16QtY1PqfFgfkVrtHtBNor72M51z3CHKoBtAgrXtZUcw8k5o64SZup8e3mSnacH/Y7VWiR1oiV5s8oscnc537vroRB0tYe1uw4CuxNIQFOGY26B30eTFov2DXijEjs8h8y7F9zXacoLCobUQ+4cxik61En4VR3IOi8Ey+CJvJg1O4BQMdl20lPWuU+bcjvrqXJ6PBo2kkzQ9ejDNN/BE2hIecu+vqo5btOobpvmVUr/uvaPAdQD7vIX6vLaAUwf"
signAgreementNotifyUrl: "http://secure.pay-test3.wanyol.com/notify/receiver"
appId: ""
isNeedExpend: "0"
basepay {
  channelId: ""
  notifyurl: "http://secure.pay-test3.wanyol.com/notify/receiver"
  productName: "ONLY_SIGN"
  productDesc: "ONLY_SIGN"
  partnercode: "2031"
  appversion: "260"
  currencyName: "\344\272\272\346\260\221\345\270\201"
  rate: 1.0
  partnerorder: "8UkWdCuZmphN1A2HlcR6fTqaneOysEvF"
}
screenInfo: "FULL"

2021-02-22 10:23:21,149-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0010"
  msg: "\350\207\252\345\212\250\347\273\255\350\264\271\345\267\262\347\255\276\347\272\246"
}
payrequestid: ""
transType: "SIGN"
signType: "APP"

2021-02-22 10:23:21,150-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT contract_code from `db_order_0`.`autorenew_sign_record` where pay_req_id = ""
2021-02-22 10:23:21,153-INFO-lib.common.db_operation.mysql_operation-51-查询数据为空
2021-02-22 10:33:04,021-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.52.46.169', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-02-22 10:33:04,260-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-02-22 10:33:04,310-INFO-lib.common.db_operation.redis_operation-33-连接redis集群[{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]成功
2021-02-22 10:33:04,310-INFO-lib.common.db_operation.redis_operation-74-connection list: [{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]
2021-02-22 10:33:04,317-INFO-lib.common.db_operation.mysql_operation-59-执行sql语句：update `db_order_0`.`autorenew_sign_info` set status = "UNSIGN" where ssoid = "2076075925" and partner_code = "2031" and renew_product_code = "20310001" and pay_type = "wxpay"
2021-02-22 10:53:39,885-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.52.46.169', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-02-22 10:53:40,161-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-02-22 10:53:40,209-INFO-lib.common.db_operation.redis_operation-33-连接redis集群[{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]成功
2021-02-22 10:53:40,209-INFO-lib.common.db_operation.redis_operation-74-connection list: [{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]
2021-02-22 10:53:40,644-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no, plan_id FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=1
2021-02-22 10:53:40,648-INFO-lib.common_biz.find_merchant_info-41-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601', 'plan_id': '120877'}
2021-02-22 10:53:40,649-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-02-22 10:53:40,652-INFO-lib.common_biz.find_key-108-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-02-22 10:53:40,655-INFO-lib.common.db_operation.mysql_operation-59-执行sql语句：update `db_order_0`.`autorenew_sign_info` set status = "UNSIGN" where ssoid = "2076075925" and partner_code = "2031" and renew_product_code = "20310001" and pay_type = "wxpay"
2021-02-22 10:53:40,666-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 10:53:40,667-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTI0MzIzNTkxNzUsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTHFLUlgvNDgxVm4wTlBnMHRsRTBoekt0UWlkOTU4Y1paT3JjWFVaaWdCbGc9In0.MEQCIDNerQ91ofjYoUWHcxjmBpIwDBFkoANGJahYcnZLFr3OAiAYXRHenkKELTRtELmqHC0KEG5WiDIP86ORppeeUp1gcA"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "6.0"
appKey: "1234"
count: 10000
order: "90874219598452"
ip: "121.13.218.236"
type: "1"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "nwQbkILSq8Vc3CAxNUB6s4DO5PtjFp7m"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-02-22 10:53:40,754-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "eead1512ab0d4579baf74b22ba4ed1fc"
s_p: "UW04dGVLVEZnTW1ia1NGRm1YN1p6eTVwZkFEU2lRTGhUNWswTjA1ZGVUSlhteHlaMEZyMEZvWDA5Q2pWWkdya01SYnRNMGdyN1BNNUM0b3VsdGlhb2NsdXNHalR0ZnAzWEtIWEw3QW14T2p2dTE1U0FMekRKSEM4SDdOc0pMdDhYdFVHMnQ0WDR2WUJ6UmhpdWNzeDJYUVJvUjZUVHY4OHBVTk1Gd3dQekRLaGhFOEp3dlpBWmZ5N1REdDk5V1hyQ2pYbzBuUTluRTZPME1pbGFtSFlESlYxNUlGYWtnSWRBNlpnVkt5Q1c5MWNhY0JvUWs0aThYamUxQ0l2Rm42bVRZc3BBRnNDcnFXSFJ1eDJEMVVNcUNNVUFvTDRhdjVDQ2l6bVBGUU1IV2NnaFRaOEg2UmNLSXdpUXlTYXg2TkFnUkZNOEVDajJNQ2dWSmZwTkt1clhUZEV6TDFWdEhpUVU1aG1jd09YelBRdm40dTM2Q0xNSEpHR21vMXltS0VuWTNTVzdxQUxtb2k2VEdTa2lJNHBxSmVuNm1LbUV5U3NBU212ZG1VOTlkZkZRYnBMNGhzNWtkOTRObTR5QzNzZ3o2aFJkVWNmR1FrV0F5U3lFV0k0MnRhbk4wYUhuUmwwd0dFOHdmQnNIT3NVbFFEYjJSbEFkYTI2RGJUVFA5VXU1aHh5c1paRlNQSkJ3aGV1WlBzZVpnVkZZY1FKeXozdmVKYndGb1B3V0xXNjZuTE9LSlFPYXBXb2M3NmREbnVjZTM2MEpPSDNNU3VneEdySkdQR0hweHh0a21qTkVmYlRtQ0d2QlhBWTlIY0xmcVRTSGVsV2YzZzNqRUJYaXFIcEtNaTJ1Q1dXMzlPTjNLWmFueGFYSWFTZExOVlBuQzdXZEVFWXltQjRDakgxc1doY09rNVNpVmhSYWRQNG5ockJlQjhFVHRkQ1V6Um44ZHhjb1lkbzdzR0VuNjkwcHFYZUR0eFNpVkhNYzhmWExwTlhwb3NqQUJscERsVTVFMU1mME5RdExBYUhUOW9ENGtTaGFaVkRvVVdpUVpZcnNJbnU="
m_p: "6oytdg428t1NTu8OGTI62esAcShb6x16PKyqK98fxILl7i938ZC6Iej0jgzMks05"
e_t: "1614070423153"
balanceResult {
  baseresult {
    code: "0000"
    msg: ""
  }
  balance: "0"
  vouBalance: "0"
  vouNum: 0
}
userinfo {
  username: "156******06"
}

2021-02-22 10:53:40,757-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 10:53:40,757-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "1.0"
  t_p: "eead1512ab0d4579baf74b22ba4ed1fc"
  imei: ""
  model: "PCRM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "gMmbkSFF"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: ""
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
transType: "SIGN"
renewProductCode: "20310001"
signPartnerOrder: "Eq6pfP7KV8OM3N1nBrH2ZvDtF5LmJYiU"
type: "wxpay"
amount: "0.0"
oriAmount: "0.0"
ip: "58.252.5.75"
sign: "SeVzIFYwW2Ce1bD0AIccBY+258n3UFhK+AXBsBI+po+9Dgpv9f05Ue8ftpykmhecQhy8zuf0pH4CGVhY3Cu139ZTFky2wQbxDi+g69fveiRH345ok0Fu48j+PQT0tG6WbTc1LBnOynXI/q/IOg3bodk0AB6nzHkob/XgokOq/zaOuM7qR1WE+sfY0zxMNG/PQIwCev4pcDVfV1102HPAicFlENmse2qJ6PFItUy58g3bhf+GODSfRDvHcKv9DXWTFkGj4i27XN5aVC4InFMM8IfEpiTUBtvahVeCUTRhawDFSBv+9pAgUGqrGg0GjtbLeM5Jv4ME9o8woeGRhGdAQqOZr1u2Np01nCAZRqu2uHebPr3HELfHdKI8Wrr38BNL/iQ0GXNVCpqe1QaApIqjcw3VHYVG8cBLn37LlaikrZV6blRNPV583N/m8cuw30b8ai+B0Bx+dkqMwviLqTPpqrXPN/lKoZlYl133HnQk8nF9yeOx13YbJDnqkfpN0Rlg"
signAgreementNotifyUrl: "http://secure.pay-test3.wanyol.com/notify/receiver"
appId: ""
isNeedExpend: "0"
basepay {
  channelId: ""
  notifyurl: "http://secure.pay-test3.wanyol.com/notify/receiver"
  productName: "ONLY_SIGN"
  productDesc: "ONLY_SIGN"
  partnercode: "2031"
  appversion: "260"
  currencyName: "\344\272\272\346\260\221\345\270\201"
  rate: 1.0
  partnerorder: "031op5Kgq7Tsify4QCwIxFmzrP6NMAZ8"
}
screenInfo: "FULL"

2021-02-22 10:53:41,052-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "87eb0b583290cb3ee2852cb808b0d043def6b082dec3cc812f7bb48bec16e9791613962423EC8RSqceRBDyBY6pq8f4JxtIgZULrsuk"
}
payrequestid: "SN202102221053437674362078470646"
transType: "SIGN"
signType: "APP"

2021-02-22 10:53:41,052-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT contract_code from `db_order_0`.`autorenew_sign_record` where pay_req_id = "SN202102221053437674362078470646"
2021-02-22 10:53:41,056-INFO-wxpay-scarlet-96-回调参数：<xml><change_type>ADD</change_type>
<contract_code>SN202102221053437071218150121105</contract_code>
<contract_expired_time>2022-02-22 10:53:41</contract_expired_time>
<contract_id>9528304616</contract_id>
<mch_id>1259634601</mch_id>
<openid>oCg6Xt8NvRi7jGuap_5B6XdY4oYk</openid>
<operate_time>2021-02-22 10:53:41</operate_time>
<plan_id>120877</plan_id>
<request_serial>514642453779280195</request_serial>
<result_code>SUCCESS</result_code>
<return_code>SUCCESS</return_code>
<return_msg>OK</return_msg>
<sign>3B0F917190A780A4DEE7E1CB9BBEC7BC</sign>
</xml>
2021-02-22 10:53:41,304-INFO-wxpay-scarlet-100-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-02-22 10:53:41,304-INFO-wxpay-scarlet-102-回调解析成功
2021-02-22 10:53:41,312-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 10:53:41,312-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTI0MzIzNTkxNzUsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTHFLUlgvNDgxVm4wTlBnMHRsRTBoekt0UWlkOTU4Y1paT3JjWFVaaWdCbGc9In0.MEQCIDNerQ91ofjYoUWHcxjmBpIwDBFkoANGJahYcnZLFr3OAiAYXRHenkKELTRtELmqHC0KEG5WiDIP86ORppeeUp1gcA"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "11909158480440"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "2L1fu8PpCiDWwE7YqG9MT0SjKnJOZgUA"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-02-22 10:53:41,408-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "80f6b3344f2b4ed495102472daebc1fb"
s_p: "RUdibU5WeEUzd1JvODF6NlB2Mk5mOTA2Y254VGhOY0JGdVUyTDNqSHh1VGt5SERIRU9JRnBCa0RNS2tZR3Ixc1Z3QTNuN251TDBKTjkweUgyanVqckFWN3g2Nkt6VTRRR09aaTFZSXJWN0ppbnhYRUh1YVRPc1ZMekJRQlN0eHBKMEw0WDdiR2NlT3RJMUtxaUpRd3NkSjlzcjBzWTVPSGF4dHhvd2h3YWFRUkNrT21uTVdmUnpFekc4THdPcEFKZk5hQTFTZWZnQ2tjVEZLRTZLMXFjaWxCN2w1cFNRN3BOTWNSdjZuekRKdVdqVjVNWGVMSmFGdWhmNmJaa3VYUFVxWUVpSzByS2F4akJPWVlvaVI5MTZCMUg2TkY1Rnp4eHVsdm9qZ3BVYUxqcnJ3WVZpVjJlM0M2d3RTcFlBZnBKYTVxQ3lIcnc2c2RpSjRQR3d3WGczUnN6ajhZVHlrSzB3Rkd6SktkQzlFcEpZekozMFFwOWZYZnpBNzliZ3BVNDE3RGJOV1hPbVhzU3ZHMFlSMkNYdEppSkVQWUZIVlpmdnBFZEJZTGxXNW56dDVteFZMaGxvZ2FENmFjNzlJZG1XVG9OMUduY0ppdlhDclh3Um5XSTc3WEFsS0F0QmV3QkY1M0IyRW9UM0dmdGR5UlV2TkZDdmZZV0JIbG11NnJqc0cyekhGNllSeEIxWGh0YlR1dFJxeVhUc0ZJZFlYQzkxU3g3amVIWlpodXM5czlybWl4QWlWZ1dRTW8wWm9kOG5FdUY5eTFMT3lUak5RTHRpRkQ2TEp0UEo1Z3hvNGkxR1hDVnpFT0xlMExVTVJIczVnaTNRZjV4NkdPM0xiVmxTZEVGTFluQkY4UERob3pNRmdYVVZiS0FCcWJGWUxmYUdiS3RDOE9aSEVWQjRycXZjN1hZNzhlSUxudzFQRnNxS1o3S3RqSk15aEl4NEpFSnREREhZdTk1c0M1U2lraXVJZEdPVmtxZ2ZUa1ZNbkJWcFE4dDVHeGZnM1RKRlYzM1JSY2t0WXJ6SlRGRWFveFMyOWlSZnQzVDJ4T3lBRUY="
m_p: "av8g97ZMl8tDUpR7aW6ZT8E9FM8oIwdvs7yn231E3z8MTqO7I8ZkbsW439e3XigZ"
e_t: "1614070423764"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "1379.85"
  vouBalance: "0"
  vouList {
    id: 64234430
    type: 2
    minCousume: 100
    vouCount: 99
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64234429
    type: 2
    minCousume: 100
    vouCount: 99
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64234428
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 3
}
userinfo {
  username: "156******06"
}

2021-02-22 10:53:41,409-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 10:53:41,409-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "5.0"
  t_p: "80f6b3344f2b4ed495102472daebc1fb"
  imei: ""
  model: "PBDM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "zBQBStxp"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
payrequestid: "SN202102221053437674362078470646"
version: "260"
queryType: "PAY"

2021-02-22 10:53:41,502-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "2004"
  msg: "\350\277\233\350\241\214\346\266\210\350\264\271\350\260\203\347\224\250\357\274\214\344\275\206\346\230\257\345\205\205\345\200\274\347\273\223\346\236\234\346\234\252\347\237\245"
}
discountAmount: ""

2021-02-22 10:54:58,087-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.52.46.169', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-02-22 10:54:58,364-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-02-22 10:54:58,407-INFO-lib.common.db_operation.redis_operation-33-连接redis集群[{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]成功
2021-02-22 10:54:58,407-INFO-lib.common.db_operation.redis_operation-74-connection list: [{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]
2021-02-22 10:54:58,913-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no, plan_id FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=1
2021-02-22 10:54:58,917-INFO-lib.common_biz.find_merchant_info-41-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601', 'plan_id': '120877'}
2021-02-22 10:54:58,918-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-02-22 10:54:58,921-INFO-lib.common_biz.find_key-108-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-02-22 10:54:58,927-INFO-lib.common.db_operation.mysql_operation-59-执行sql语句：update `db_order_0`.`autorenew_sign_info` set status = "UNSIGN" where ssoid = "2076075925" and partner_code = "2031" and renew_product_code = "20310001" and pay_type = "wxpay"
2021-02-22 10:54:58,938-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 10:54:58,938-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTI0MzIzNTkxNzUsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTHFLUlgvNDgxVm4wTlBnMHRsRTBoekt0UWlkOTU4Y1paT3JjWFVaaWdCbGc9In0.MEQCIDNerQ91ofjYoUWHcxjmBpIwDBFkoANGJahYcnZLFr3OAiAYXRHenkKELTRtELmqHC0KEG5WiDIP86ORppeeUp1gcA"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "6.0"
appKey: "1234"
count: 10000
order: "70892080265866"
ip: "121.13.218.236"
type: "1"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "ZVgvFxANJlqOKa02yehQW4EC5UHPj7tn"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-02-22 10:54:59,093-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "ee679e8bafe4464f833ce988a6226384"
s_p: "eHNVMVloNHg2RDBLV3NkazAxajNSb2UxZVhHNmVab3FnM2dXQjlnZXNoWW5YT1pGZEdSRFVXaElReUVLT2x3UGFZb3FZQXFwd01yWG95eUZEazZQOTh6RXNqSVpjMUYzWHJKZ3VaMFVXdlVrVUxUa3N3aEUzTkVyMjh6c0k0bmh6V0x1ell2SHJjYnRvNUZ1ZkVKUGtWNmZPMGRraGNFcFQxaE56cUlpVzFqQWNnUlhrbU84S0ZvdDRmSjhrT3RoazI3TGxYR2o5S2pheEpvWEhGUjNtNnZZajdsUWI3QUZLdUJJbk1CQ2tsUHdicHBJWmxldVpGS1UzN3B0NFZvWWhINGxLOHc0OUZ1QU5wTE1wRWdHcGtTcUVEVG1DZG44dERDTURWTkJUQnoxUzRwMDFEbEN6ck9pY2d5YVFRaTA5WDhBbWd5SlhnV3NLS0FjQklNeUNmUFVyc0RRUHlONDBUVGhzWXdSbEl2bzRaN2FFdlJLV2N6Zm5aa1dGcTdxc1BEejFXbEt0TFMydUF5Q0t0VXNYMGZ4YnpMTmtEZmJwa1RyMEMxRXA1SkhBUmF3b3NkRmFkVEZScUJDenFJcHVXSXBMYkZNMkI0ZmJZaGQ0WTgwdUJHZzFMbjJSSGYwVUZhNlpjU0NCZ3JiUzlZUk1GWjlocWNEcXd4Z3d0N3lSNFAycnRWOXFOUkRIamJXRnlnS0MyV2hXNEhDQ2JWTHpSR29YQkxiUThONUJ2clVyUnBBVXRRaUx6MVYzWnY5WXFhN1VWV0hyRjNScENUTXpvOGw1UE92blpZMEhxVmdSRXoxa1Q5U3RhZUFYMk9hbzY3TTNPaGFVQklteUNXVFRKeHJ4U1NLakdzZnltdTNhMXFhRk01RE1INkFQd21pTW44dVd2d1p6WE05SXJMMkQxYmo0WDRDZHBBYWdKSk53UUI3SXVBd1FOc0puOUNpWGRWMnFqWDhFdGZka3llNFdwNUxVR0R1cTc3WVZ4TThSdG1RNHNqeGtNVjR1a0hmV0FXRUVTWkRoTFJWNFk2OG1WTG1hZ3NGR3NHaXFiVjE="
m_p: "Ps63m2yQT7uze2uqJdVp3E1icL0652R5SLOJ392M5t1MaxsWEb5Vftt0U7sfywvf"
e_t: "1614070501488"
balanceResult {
  baseresult {
    code: "0000"
    msg: ""
  }
  balance: "0"
  vouBalance: "0"
  vouNum: 0
}
userinfo {
  username: "156******06"
}

2021-02-22 10:54:59,096-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 10:54:59,097-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "1.0"
  t_p: "ee679e8bafe4464f833ce988a6226384"
  imei: ""
  model: "PCRM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "Er28zsI4"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: ""
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
transType: "SIGN"
renewProductCode: "20310001"
signPartnerOrder: "s1P8ZcGiJwTVDCIeg9zSHmKvEM6R3jBb"
type: "wxpay"
amount: "0.0"
oriAmount: "0.0"
ip: "58.252.5.75"
sign: "wZLXr9iCE1UXlHvgp6eGDmdsZUWwsB3DIGZxGcUfkA4sAtw2XphXskUte7j6t0bmPeH2CT4OcpGhKuKSyEX3LkguMnqhHD3udrofOpj0iPnnsyHwN5MN5TfPhNVQmPizd+RJYjf5/U6vzQtr/j+7kkzevIctg7GhRVy7bwAOZObJ3NZxok5sLehPYUHkYDxwLHP0lJO+HIGEa+K60CAiA3wSftP0iXKNfvKBntZIv98S+tQRHLENE1mFT6/20yuauye2WVIyCkmkWRMmFx0GVJ/OV27wXb0Yn2ChgMTJ1YXQjtiiA01IcSFEJVVXhkptjKkBXfW0pLmT1PHJybP/iXaqSeCxilUdQckpLGW3pAVaWi9rVry3QuDSZY2WThKGrxgHQNLaUe79ohIBhWDEM5xiMlt4bhegN+zbk6dD8CrcenTCYr7dlTgPzi04WpsyKcT1ZLYa++DgbxHaUVTewgbdgqsh+ja5y8d/yKEP0IRcgfMLcKRYBQszPRG/G1qi"
signAgreementNotifyUrl: "http://secure.pay-test3.wanyol.com/notify/receiver"
appId: ""
isNeedExpend: "0"
basepay {
  channelId: ""
  notifyurl: "http://secure.pay-test3.wanyol.com/notify/receiver"
  productName: "ONLY_SIGN"
  productDesc: "ONLY_SIGN"
  partnercode: "2031"
  appversion: "260"
  currencyName: "\344\272\272\346\260\221\345\270\201"
  rate: 1.0
  partnerorder: "atnx034jrNRCkAbZKMUyucTmE9IPLgd7"
}
screenInfo: "FULL"

2021-02-22 10:54:59,411-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "34615807aa22f71a6cf80133b932d7746bbd85578f456392d1e6d2706bd06b931613962501eTPKXEYoZ0S2nBgd6IzygtFcR9ALDkEE"
}
payrequestid: "SN202102221055012720753438743721"
transType: "SIGN"
signType: "APP"

2021-02-22 10:54:59,412-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT contract_code from `db_order_0`.`autorenew_sign_record` where pay_req_id = "SN202102221055012720753438743721"
2021-02-22 10:54:59,416-INFO-wxpay-scarlet-96-回调参数：<xml><change_type>ADD</change_type>
<contract_code>SN202102221055017875300276506781</contract_code>
<contract_expired_time>2022-02-22 10:54:59</contract_expired_time>
<contract_id>1003018453</contract_id>
<mch_id>1259634601</mch_id>
<openid>oCg6Xt8NvRi7jGuap_5B6XdY4oYk</openid>
<operate_time>2021-02-22 10:54:59</operate_time>
<plan_id>120877</plan_id>
<request_serial>557678835644267282</request_serial>
<result_code>SUCCESS</result_code>
<return_code>SUCCESS</return_code>
<return_msg>OK</return_msg>
<sign>2C2023BFBC44C8B6082C59B7AEC259EC</sign>
</xml>
2021-02-22 10:54:59,542-INFO-wxpay-scarlet-100-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-02-22 10:54:59,542-INFO-wxpay-scarlet-102-回调解析成功
2021-02-22 10:54:59,550-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 10:54:59,550-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTI0MzIzNTkxNzUsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTHFLUlgvNDgxVm4wTlBnMHRsRTBoekt0UWlkOTU4Y1paT3JjWFVaaWdCbGc9In0.MEQCIDNerQ91ofjYoUWHcxjmBpIwDBFkoANGJahYcnZLFr3OAiAYXRHenkKELTRtELmqHC0KEG5WiDIP86ORppeeUp1gcA"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "10707392675180"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "ieMpaE4zhGdnXtBDOfkNgm68cYLF02S1"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-02-22 10:54:59,635-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "d1fbb5c47a9940a18e54d1e8658797b4"
s_p: "b0RLVnZYMjlYOUZKT1BPMWlGZVdSWWNlQ2Zoc2Q2MlZDb0FqZGdCbmZhdDlTOVBleVJESlNqNXVsRHpBTmRnT2VmUm51ZzRBMUhDZk91YWtUaWhIMUJVMzhwMTBjQkY0Njl2dmt6WW1xZGdTM1V1TEZLcWVDaFhoNElOQWlQdHIyYXNZZzhQWnYyR2gwVlJCUnFRa2E3dkE2eTFDaEZabnhGeWhSaVJqZUN2eU5NZDZGQ1JnZW9Qc2lqRjA0SDg5djVEUDdkUGNOMmpzcUxmYmxESENwZkV2Y2VRQWlVbktjbGRURjhlR3BXVEVjV0hzUWpBNTF1SktiOXF6Zzc1MEFubVZINDFBaTRXcnVXbFhuNXFBNkVGSDZvRXBnSjF4RDk4OEdiVzI4SmNLclVLTzhBamJsd0xvUk04ekdVZ0wzeGhuUXVXOENiZlNiVmFwUnRrblhCY1o4UHBFSDlyT2hVaGpBR3FLUjZLOXVuaURsa2JXUkR0SWFWNXhPRGhGcEdSTnBNRHV6c1dHUnJ6czhEdm92eFQ2UFFUWEh1cVFIcFpWVDl6SFVUaFFSb1lxTWxLYjl3YkhydERTYTV5QjFLT1FsckFCRXVESGE2bTlFOHhWUVlCWjFmdHh0cjBHRTdDaGJ5VHVHSzJDRVF3WDUyUUZEMFFReGZyWGE2cWhwb0FiZFo1Z0xmWG5lcnpWWkNRekVWQWc1ZG5CN0QwMUdVaUpHTkpGSnZVQlI4ODdlSWEydEpJcmxITThEckpPNEZuelQ5QzgyaVNNN2xVVFhBV3JoNWM4aDlla0QyckNWM013MXllakRjWEVaWDBSV09xeGJxVExsTVVvYzF4eGh4N2Zpa0wzN1dDWXF1RHQybWticElHZ0dQeFg2WEF0M0xNTmlkTTFvRW5DUUZzdmpCRVBXOHVWc3hkMEJyVjVjWFhESjBZZ3VZZXRwOXlkanE4dXp2NjY1S1c2aFpOQkF2d1VoYkFNVjNmZHd3VmNyNUU1RUt2QzRpMnhoTXZGbFNPNThTOG1jdFk3V2lvMDJJRUxoUlNuYlZkZ2l6YTM="
m_p: "3b4NHb9uQJLEAfX5w7y5nB870W3jUMOqTPxI5PXjt4U9kn9kXxwcOf161T8MTp11"
e_t: "1614070501997"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "1379.85"
  vouBalance: "0"
  vouList {
    id: 64234430
    type: 2
    minCousume: 100
    vouCount: 99
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64234429
    type: 2
    minCousume: 100
    vouCount: 99
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64234428
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 3
}
userinfo {
  username: "156******06"
}

2021-02-22 10:54:59,636-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 10:54:59,636-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "5.0"
  t_p: "d1fbb5c47a9940a18e54d1e8658797b4"
  imei: ""
  model: "PBDM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "NdgOefRn"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
payrequestid: "SN202102221055012720753438743721"
version: "260"
queryType: "PAY"

2021-02-22 10:54:59,697-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "2004"
  msg: "\350\277\233\350\241\214\346\266\210\350\264\271\350\260\203\347\224\250\357\274\214\344\275\206\346\230\257\345\205\205\345\200\274\347\273\223\346\236\234\346\234\252\347\237\245"
}
discountAmount: ""

2021-02-22 10:55:19,456-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.52.46.169', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-02-22 10:55:19,708-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-02-22 10:55:19,750-INFO-lib.common.db_operation.redis_operation-33-连接redis集群[{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]成功
2021-02-22 10:55:19,750-INFO-lib.common.db_operation.redis_operation-74-connection list: [{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]
2021-02-22 10:55:19,930-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 10:55:19,930-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTI0MzIzNTkxNzUsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTHFLUlgvNDgxVm4wTlBnMHRsRTBoekt0UWlkOTU4Y1paT3JjWFVaaWdCbGc9In0.MEQCIDNerQ91ofjYoUWHcxjmBpIwDBFkoANGJahYcnZLFr3OAiAYXRHenkKELTRtELmqHC0KEG5WiDIP86ORppeeUp1gcA"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "46416174795458"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "hnBymQeb2kHLgui8jWMaoTtPJ5rOFlU4"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-02-22 10:55:20,016-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "f900bbdb86974671a54dc03ed93afe0f"
s_p: "Q056cGdxZGhNbjhpSkRTbUhzcFhVU2VlRm9CNVlpU1NsMFZ2bzlGdG81REpWc2dEb0h4UXlKbGZYQk5NNmtEUXY2OERQTmg0YXllTTlqRGNTNWxHdk1CU1RqbDNESk0wSHJ0VDFrQkVYaTVRVnhvSU1MbE1zVzVYQjZoRnNMVVNlZGFoSlAwcmFuQTRvY3NFUHY1WE8xWnVxSHBlQzZzUTNya0VLZnFPUjBicHhjU3JKSnQxbGV4WHV2cHFaQlZBbkM3QlNXVUlheFVDbXdReWFZSXBKcVNQWm5yZk5aRXM1WWRZTzgxMWNSWktPc2ZSNk1FQVpHRG13NXB5NWFpcnVweWx6dDhlSkNjSzJtdFpDN0NuSTI5d0FuVmlrRmNuVFhjbkRya0p2bWdFbU1YVVZUMGZ5dmdsTHJROTR4M0d6NkQ2Q0RlZHJrT0hVZEpxUGRTRTZlcm4xUmQxRHJHZXd6YnFObU5ha1dHODdPWTF3RkMzZVZWalZjd3dKcGVQRkpHTWJERWZHa3YzNDJwSkRyTDVSblYzMVlBUGFwY1BLVHkyaU1vRHhnVXhueEhaUmdudDJsTVZPbjFaSUYzaEpYV2xwaUx3V2FQb2c0S053b1RXeHhwWmFjRWFRaXdwWFZkRFdreWlqTGpFMHEyVDJ2TGdQUUFOZHQ1VXdRUmxGUEhIU0ZmNjNzSTNxREk3YmE5S3FEQmpHSmpvYlBqZ3JBSldrUEQxSnhtZjJZUEY2enVjR0RwMlJxdzB3VUs5UGpJV3k2a3RXZWx2YmtvT3E2aWkwQUhxTGtnenYySG1XaE9FQkV6dkhoVVJ1dHNzMXdJc3BrM3JaMmIyam1hZXV5QzBQb0ZmakVmcVBxWlJ4cG9ZRVozdlppekpqMThuaG04RU9XdlVMR3JSZzJQQjhqWEpyRVd3SkVrcGhIUzNJWFkyNXFqbzY1U3h3cXp1eElUZndQcGxaR1FsOVh6N29lMmt2cjVrclZqekFPakl4NTZkSW16Y1lTOXd3SWMzRlA4TGFHU3JFN1FwRTJzV1FKR3NNeTBCdFAzWHQ2d1M="
m_p: "q1FC1L4oe1dPvxg796ALv37Jn9A8Fo0UkJ5Sg5uRU5T7FZM1r7cndiyYrj44wJN9"
e_t: "1614070522389"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "1379.85"
  vouBalance: "0"
  vouList {
    id: 64234430
    type: 2
    minCousume: 100
    vouCount: 99
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64234429
    type: 2
    minCousume: 100
    vouCount: 99
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64234428
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 3
}
userinfo {
  username: "156******06"
}

2021-02-22 10:55:20,017-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 10:55:20,017-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "5.0"
  t_p: "f900bbdb86974671a54dc03ed93afe0f"
  imei: ""
  model: "PBDM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "tT1kBEXi"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
payrequestid: "SN202102221055012720753438743721"
version: "260"
queryType: "SIGN"

2021-02-22 10:55:20,051-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "succ"
}

2021-02-22 10:55:55,263-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.52.46.169', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-02-22 10:55:55,560-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-02-22 10:55:55,603-INFO-lib.common.db_operation.redis_operation-33-连接redis集群[{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]成功
2021-02-22 10:55:55,603-INFO-lib.common.db_operation.redis_operation-74-connection list: [{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]
2021-02-22 10:55:55,978-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no, plan_id FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=1
2021-02-22 10:55:55,982-INFO-lib.common_biz.find_merchant_info-41-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601', 'plan_id': '120877'}
2021-02-22 10:55:55,983-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-02-22 10:55:55,986-INFO-lib.common_biz.find_key-108-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-02-22 10:55:55,992-INFO-lib.common.db_operation.mysql_operation-59-执行sql语句：update `db_order_0`.`autorenew_sign_info` set status = "UNSIGN" where ssoid = "2076075925" and partner_code = "2031" and renew_product_code = "20310001" and pay_type = "wxpay"
2021-02-22 10:55:56,004-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 10:55:56,004-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTI0MzIzNTkxNzUsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTHFLUlgvNDgxVm4wTlBnMHRsRTBoekt0UWlkOTU4Y1paT3JjWFVaaWdCbGc9In0.MEQCIDNerQ91ofjYoUWHcxjmBpIwDBFkoANGJahYcnZLFr3OAiAYXRHenkKELTRtELmqHC0KEG5WiDIP86ORppeeUp1gcA"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "6.0"
appKey: "1234"
count: 10000
order: "70252129548759"
ip: "121.13.218.236"
type: "1"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "0z4dlTcQam8D2NuIiqe6Af7Jo1SULOKM"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-02-22 10:55:56,066-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "d1e6ac1d11824d36889f034ea17bdc15"
s_p: "VVNPcFZnSXBXamZkdVJDZWpLeXNoUkpQV3JPRzZ0NVo1U0laVFRJYlJkU2pvTFJNMlgydjIxV3k1N0p5R1dvOHZqTnp1OXA3M1NTbkwwa0lRMDVRdm05NnlSZmNjeWE1d256aE9HeTRSd0JlaTVoY1BHQ3BjOGxHTzU0Y3k1TjdRMkRqM09OTlVCZVE3enpRbEpRZ21nUU5McHM4SHVHMWNBbkQ5QUFVOXZjTG5xUDZWWHFlYmg3OEFmaTh6S29YNVJMZGxJeEx2SUpRUFJIaVB1anA0QVBoZmVDbXpQV2NnYlFvVHE5NzNidExyam5DQ0JOM0RXZ29KMDBYdG5DM21PZjF3dFNpT1lWQXlQUVcyT3Z1Zlh1MmdsdmlQN00yaVRld2dFTmdiTlRySFlsZ1U4V2R1VWNMOTN3Z2g5aElCc1pRU3hpbEZ1WThJZEVvcWF0WXBHN0p3NmRkWjBHODNscnN5Y1Vzdk8wUWRjVTdwNzNyeFc3YzNoVUhGeHRPdXJjVEV3dW1FcnBPSzJLZDRtcnBnZmJkOUlHUUJ3VGxIMVJ2NEpXcW9xdVNyQTh5QWphRUtMeVBuN3ZYQmVrQU8zWTRnUnJjdWtXdUk5TUw4TlRBREpjUmVvMzlQejdvY0tWOHFYRnY0cDFhWkNYWDdDQm90bWYxYjFydmlkblpQY25tRWYzeUU5VHd6bFFZbXlhVzBOR2tlb3NueHllR1M5Y1A0b0hualhOTklwdlJJSEZhNGxpeG5uQ1o4Z3dPOUtuWVl1QnBWOXJNVHR6TlFhY2hsSHRlWHIzbkVHbWRuQkpWNDhsamszWXlZb1BkWWxudkpGQzZGc09tZm9udUZPdTFzaFdUSEZxeklUOW9kNG55VEliZ0N3bGFrVjNPR2RHWjY5RXdWWEI3aHR0NkRGREFFUHE4VU81WFhVcjNWQXBqQlh0aDVkaXlXOGc3VllYOHVEUkpnQXpPN0NYT0hiVTdOR0xTV091VlhsVG1aWUI2ZUhkQ3FNbFZPc1FZdGNLcnZ4RGd4VWpiclRhNE1Ic2EyTGRXZjBCZ3dndEY="
m_p: "A40IM2pl6YKM68oBm2WpErcR1G1oUrJ4oxB8dM036y87iJ0lDz4hz2rnVgGu13kw"
e_t: "1614070558464"
balanceResult {
  baseresult {
    code: "0000"
    msg: ""
  }
  balance: "0"
  vouBalance: "0"
  vouNum: 0
}
userinfo {
  username: "156******06"
}

2021-02-22 10:55:56,069-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 10:55:56,069-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "1.0"
  t_p: "d1e6ac1d11824d36889f034ea17bdc15"
  imei: ""
  model: "PCRM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "fccya5wn"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: ""
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
transType: "SIGN"
renewProductCode: "20310001"
signPartnerOrder: "vS2yFJjPor0lNa43ueEf8d6psCM1txUR"
type: "wxpay"
amount: "0.0"
oriAmount: "0.0"
ip: "58.252.5.75"
sign: "kWjOkIYHlNcUrUM1Ce3RXwfhC3qIgbjLJ1ycQjrTbExNO+I4Zdrb02hx+YpoASmDkQigoU2YRUkx1rTth3V2FDEUsxXT3i2EV1Z3pgOJWfG76uvRJLQ67QkX9z3Xh4lniWe0sH/wRhioyQB7PlMmkQi7jVogaK3eceTlV3Qw3jdPR7kDHhxtb/g1/nZ2s72f2YaWPaOH0n9qDH90hDPJWg4qwB1ypo2M7WZsrYNU1FX5XPeiZtzvJZ9/3imY4I1a/SpRKW9ZotUlSVg1ZOr+dqRc4hDK9XfrgAk5WbBaBcsHhWzPwfDe6XkeSVyLyLX/1rb9mxF8GSJUYoRRrxmGRmyGaRONbZiC6aKPk3xFrC75zP4FEmwn8JJ498z/3G7S9nLPwLGIo3bNagD9Z5275zgKIWOo8OdXSv0ELUfugTrNoOmWOuYrqFGXJLbi2QjdvAWhgU6GsuMmjSU70XAbPI6PX4dNGm1FqKVZqKx7ujxHSzkMJgUMOQuGDQGhswZI"
signAgreementNotifyUrl: "http://secure.pay-test3.wanyol.com/notify/receiver"
appId: ""
isNeedExpend: "0"
basepay {
  channelId: ""
  notifyurl: "http://secure.pay-test3.wanyol.com/notify/receiver"
  productName: "ONLY_SIGN"
  productDesc: "ONLY_SIGN"
  partnercode: "2031"
  appversion: "260"
  currencyName: "\344\272\272\346\260\221\345\270\201"
  rate: 1.0
  partnerorder: "pL3CgQnct7HGJZoUbYuVq9B41ROfElDW"
}
screenInfo: "FULL"

2021-02-22 10:55:56,395-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "24cb73d452c5dc7c1590e5c591a2aaa7cdabbba93585eea68492f333b90d8d731613962558p14gpCOGJ3dzAaDXoMrKoiK5bN1YtdEf"
}
payrequestid: "SN202102221055582286274161532605"
transType: "SIGN"
signType: "APP"

2021-02-22 10:55:56,395-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT contract_code from `db_order_0`.`autorenew_sign_record` where pay_req_id = "SN202102221055582286274161532605"
2021-02-22 10:55:56,399-INFO-wxpay-scarlet-96-回调参数：<xml><change_type>ADD</change_type>
<contract_code>SN202102221055584317332375360054</contract_code>
<contract_expired_time>2022-02-22 10:55:56</contract_expired_time>
<contract_id>1644446150</contract_id>
<mch_id>1259634601</mch_id>
<openid>oCg6Xt8NvRi7jGuap_5B6XdY4oYk</openid>
<operate_time>2021-02-22 10:55:56</operate_time>
<plan_id>120877</plan_id>
<request_serial>548736542626550239</request_serial>
<result_code>SUCCESS</result_code>
<return_code>SUCCESS</return_code>
<return_msg>OK</return_msg>
<sign>1EB4F60077D0A9C23F20988D89935799</sign>
</xml>
2021-02-22 10:55:56,513-INFO-wxpay-scarlet-100-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-02-22 10:55:56,514-INFO-wxpay-scarlet-102-回调解析成功
2021-02-22 10:55:56,521-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 10:55:56,522-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTI0MzIzNTkxNzUsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTHFLUlgvNDgxVm4wTlBnMHRsRTBoekt0UWlkOTU4Y1paT3JjWFVaaWdCbGc9In0.MEQCIDNerQ91ofjYoUWHcxjmBpIwDBFkoANGJahYcnZLFr3OAiAYXRHenkKELTRtELmqHC0KEG5WiDIP86ORppeeUp1gcA"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "14794786452688"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "M5l2RhacGW7SIJOzw1EPypT34Q9g0KrC"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-02-22 10:55:56,582-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "2e503f1b6dc44621811e2bf36c673a1c"
s_p: "UGJPNTdoUzhQcG1FcldmNmZBanFoOEl2cmFrWTNWaTh3eVd0UU94U3dpRDlBWW16TmVubkcwOE12ZHZacTZZaGFmSnhtdWtsQkdSNlY3RUtOeDg1WGtOd3htNWE5djVXb1ZLRTg0aHluenZBVTdzVHRmMEU1cmliSDkwT1laNGVRZzN6Zmw1WFRVdGQ5RmppMktFUlBoMnVqdUF3YTd4N0cxbkY3YjJSSjFmZ29XWkZkZktjN2NTWjNmRDNjZDZ0cWg0TndwSlU3cVhPYjIxWTJwamxPMTlBdVFPSEF4QWZ0cnBGaks0ZkhpYzBHZUxXTFFlVEpINHI2dUY3bk9ZVjVGMFdGNkVDWEpDVHFEc1o2c25zVUpJQnJFOWtGTkFod1ZqcktpN292dzROaThHdEd4UlBiMGk5T2FDejk5a2g4cmV5OFJNaTd0WXBSM2VHQW5aTzdlWDdmbGg5Y0RYZHpFVHl6RnRjQk1OUXgxZjRzNzU0MzEyTk82YzBrOW9oeFN3VmJsdkFXeExMbXdBZWdWdm1Cc0ZWZnVSQmRzaVg5aHhTRWlWM3BpZ1htQk1jUWVXOG90WGY0TmFmVUZmY0hzeVJuNVF4UFNNUXd6T2VudWZqMnF1UUo3Ukh1Z0VtRHpWNkY2N3RKb0xiTm1SNmE1RXJySGxZQlNHQ2xhM0RBVU9nWm9YSGU2aGRlYUUwQnFkYW50dUJNaExRR1k1R2U0MVpmYTV6MlNnQmRaUU1qQk9ZZ2pHdkFNT09mRVVuNUJ4R2JnTXRDc0dLMFIwREtPa2JBb1AzcDlycGJacDZ2OWlmdmhidXFTaG1ucUZ4RUhybVU2RG5BTm9DN09GUHNkOVhFTllQOGhqNmtjV08wa0VYMW1QQzRFVDIzVmZNZ2RXOUoxMGtsektnNVQ2QWVVRGJ5dFo3OWVUZm12MmZudkduck9kZk1wdlNkQlhmZnNiakRCaDFvbW91YUpuR2NmUGFnVE1POWxjME9iVzBwNGVrYU5qRnpVSkRCbmJMS3lINzZ4dEhHWlVPN2RsZktZQXZPQ0xoV3NXS0dXYjk="
m_p: "k4599ks43Y9xqxmJ11Wj72L6Gru7P0c0Ux2G294z2lC4D6SrVe6P7XEhCumFX3t3"
e_t: "1614070558964"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "1379.85"
  vouBalance: "0"
  vouList {
    id: 64234430
    type: 2
    minCousume: 100
    vouCount: 99
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64234429
    type: 2
    minCousume: 100
    vouCount: 99
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64234428
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 3
}
userinfo {
  username: "156******06"
}

2021-02-22 10:55:56,582-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 10:55:56,582-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "5.0"
  t_p: "2e503f1b6dc44621811e2bf36c673a1c"
  imei: ""
  model: "PBDM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "tf0E5rib"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
payrequestid: "SN202102221055582286274161532605"
version: "260"
queryType: "SIGN"

2021-02-22 10:55:56,614-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "succ"
}

2021-02-22 11:17:40,628-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.52.46.169', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-02-22 11:17:40,866-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-02-22 11:17:40,909-INFO-lib.common.db_operation.redis_operation-33-连接redis集群[{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]成功
2021-02-22 11:17:40,909-INFO-lib.common.db_operation.redis_operation-74-connection list: [{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]
2021-02-22 11:17:41,309-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no, plan_id FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=1
2021-02-22 11:17:41,313-INFO-lib.common_biz.find_merchant_info-41-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601', 'plan_id': '120877'}
2021-02-22 11:17:41,315-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-02-22 11:17:41,319-INFO-lib.common_biz.find_key-108-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-02-22 11:17:41,323-INFO-lib.common.db_operation.mysql_operation-59-执行sql语句：update `db_order_0`.`autorenew_sign_info` set status = "UNSIGN" where ssoid = "2076075925" and partner_code = "2031" and renew_product_code = "20310001" and pay_type = "wxpay"
2021-02-22 11:17:41,335-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 11:17:41,335-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTI0MzIzNTkxNzUsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTHFLUlgvNDgxVm4wTlBnMHRsRTBoekt0UWlkOTU4Y1paT3JjWFVaaWdCbGc9In0.MEQCIDNerQ91ofjYoUWHcxjmBpIwDBFkoANGJahYcnZLFr3OAiAYXRHenkKELTRtELmqHC0KEG5WiDIP86ORppeeUp1gcA"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "6.0"
appKey: "1234"
count: 10000
order: "30303698361375"
ip: "121.13.218.236"
type: "1"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "lXoELgY6Bui2MvhybZTNsnOWU4z1jQkG"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-02-22 11:17:41,466-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "399d264ef12a466ab55a13bc1ee86878"
s_p: "MXBCdnpJTWlyeDNJNXp0TXZUenJ6M212dU02SDYySnhNWEhycjk4Z2dtbHZaeDhybEs1TFhjNnNTMnN5elpkU1d6cXd2UnhkTlBQdjZTNkoxVUtWbWxVM1l1ejliTXFwSFRFaTIyQmxPbnZyZHhjam5NNXMzNnF2TW1HcnptZmJXY3VrQklhVThFMGEwNHNINmZyWGxOS1k4dEFCUG9EeEtPdGpZeGx0MFdwZmE3bVBVSmUyblZsSW1ERDVncEVpUkRWNHFVaGkzTkdQWjl0WUNqTVNPbzhja1BIVkRzZXVNYURQdkpxa3dUZWlvZGlhYXl3d09CMWprUmpwakhHSjRkcUhNeVdUWmRVcjlMbTU2cnZXT2RZSm1wR2VUZHhweDlXZHFwaWxrTlNkWk80M2lidEpLeUtVazJRTXlZOWViaVpKbktlaGZhczBFMm1WcVVsQU5VSnd1MlBKZHNVRjRqbXdGcEdGWFJ2RFpSOEZXakxuVHd4RlZJTmNsdlVPdVZtem5zYkpkd0lUTVlROWtmSTVuZzBobm9pMmpvcWZ5TWhjZDJxdmxRSnFBTnV3OGROYlc2QWNSRkV1SExMMUx0NFl0clJmeXJReE1TVklqSUM5aDhoUkxDWW0wNFZUZEY1ZzZIVUVJZk96WFB0SmJQMGUxUzZnSzVPM29uQ3p2RGZRZUhSSE5kOG02V1pLTmJYZEpyTkkwNWhBSUljOHd5VkZTUHhrNDBpM01mam5ab1pLU3JtVEZYQ3J5Z09SMnl2OGdWTDdycUpMNG1KeUE1UHdYRkx6Mzh2Uk5GdEZHbUFWMzNwZWxaR29QU21vQVZrV0RpOVFvbkhGNVZEaWl3VTVobGZGU3B4RHNuYzVvSWhNMWhOQ3lxajhEa2Q2a3dQVGJKc1B1ZHFMWTNlcFZiMmRNWmRiSkN6b1pjcHBBcHdLUUwxaU5JZVlFV2hxUlBiVU1VS3h0bmhicXIxTHFlVVlKcUVXNTJxZDhGQVhQTlh3Y0w2NVE1dUE5NW9yRlRaSUpTdGFRM1VKTmFxS0VtQjhnMno2eUk1TUx6VVk="
m_p: "UU7XQ0n2S876z8N2kBw6jaB49PKF3M0MbJqrCcb489ysK7507Sz6yK77EpkcRaKM"
e_t: "1614071863869"
balanceResult {
  baseresult {
    code: "0000"
    msg: ""
  }
  balance: "0"
  vouBalance: "0"
  vouNum: 0
}
userinfo {
  username: "156******06"
}

2021-02-22 11:17:41,469-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 11:17:41,469-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "1.0"
  t_p: "399d264ef12a466ab55a13bc1ee86878"
  imei: ""
  model: "PCRM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "1pBvzIMi"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: ""
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
transType: "SIGN"
renewProductCode: "20310001"
signPartnerOrder: "u2q7Hyt9zhXxsU46jwIoV1MvGOEdB53Z"
type: "wxpay"
amount: "0.0"
oriAmount: "0.0"
ip: "58.252.5.75"
sign: "bhRJBHcCCcoufa/bYDT/jR1pBC+JtAF5PukJXTA9qg/BlBcgkAKgHNoQRIrTXr3mgLP6fR7Ic0UayB+TTSBtYqso83r+esx4fYGoKFLnc4ny+jitMAnonyMiDkF/+LuMFxUuPjB/8i8b+n0Ved7NVFa6jLdjO26NwHc74eVPyH0XUDfmOqbsX5HQX0tjKeS+icO9BH5C2AxAL3YFeWIarmMfhRkt9ZHtQ2Lj+cxKncDsT781/SKJtG+D71KclvnDMIZ6TglzFsACk741H0N4VltYWplLMZRX8lTVZiExxatCdDbhdiXqTim7eYRwrMdGmgQQwJ5XxRidE2a2jCWvlCXmfFe2oWrz0sd2zxdP0neRKs1DJepNqhLw4Tx30urobJWA6JNSyMq3aDy0azJ7N7tSfQ4m6yPd/ltXFrFQS6zHImhwYNd4qYHTt6ZcvRPlmUiuxGDKbqGnq0mL/27WX9Gs+p11Mm1pmGJY+7PHTcLaNrLBrWanlfX4Q6cPYyRO"
signAgreementNotifyUrl: "http://secure.pay-test3.wanyol.com/notify/receiver"
appId: ""
isNeedExpend: "0"
basepay {
  channelId: ""
  notifyurl: "http://secure.pay-test3.wanyol.com/notify/receiver"
  productName: "ONLY_SIGN"
  productDesc: "ONLY_SIGN"
  partnercode: "2031"
  appversion: "260"
  currencyName: "\344\272\272\346\260\221\345\270\201"
  rate: 1.0
  partnerorder: "al9X6Mh1RAPWSKG03LjV5wrcTHy4mzE2"
}
screenInfo: "FULL"

2021-02-22 11:17:41,859-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "01be0c469b73c244b2c3f2e522e77c0036fa45caca92784795cdaa682b57fa6516139638640EDQEXIHxgGqu452GiBVb3GJZewFRH3G"
}
payrequestid: "SN202102221117437661416763556862"
transType: "SIGN"
signType: "APP"

2021-02-22 11:17:41,860-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT contract_code from `db_order_0`.`autorenew_sign_record` where pay_req_id = "SN202102221117437661416763556862"
2021-02-22 11:17:41,864-INFO-wxpay-scarlet-96-回调参数：<xml><change_type>ADD</change_type>
<contract_code>SN202102221117437627122786481537</contract_code>
<contract_expired_time>2022-02-22 11:17:41</contract_expired_time>
<contract_id>8756422701</contract_id>
<mch_id>1259634601</mch_id>
<openid>oCg6Xt8NvRi7jGuap_5B6XdY4oYk</openid>
<operate_time>2021-02-22 11:17:41</operate_time>
<plan_id>120877</plan_id>
<request_serial>613201078017231485</request_serial>
<result_code>SUCCESS</result_code>
<return_code>SUCCESS</return_code>
<return_msg>OK</return_msg>
<sign>8073263D9D3332DBA8016A6C17015234</sign>
</xml>
2021-02-22 11:17:42,065-INFO-wxpay-scarlet-100-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-02-22 11:17:42,066-INFO-wxpay-scarlet-102-回调解析成功
2021-02-22 11:17:42,073-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 11:17:42,074-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTI0MzIzNTkxNzUsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTHFLUlgvNDgxVm4wTlBnMHRsRTBoekt0UWlkOTU4Y1paT3JjWFVaaWdCbGc9In0.MEQCIDNerQ91ofjYoUWHcxjmBpIwDBFkoANGJahYcnZLFr3OAiAYXRHenkKELTRtELmqHC0KEG5WiDIP86ORppeeUp1gcA"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "42285674156725"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "Ju2lOYoIyGCBNmWvKZtf4qpATMeV86sc"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-02-22 11:17:42,208-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "066f9389e2bd4fe682bbafad17931dfa"
s_p: "eUZHVlYwMFlJZnE1blNVVmVGVkxCa0NSN1VUb2RQZno3Mkt6M0hyVWZlektJYnozVXpTZXhmVTVBZ2RZZ3hFWHBLQzBHREVHUFRGMHQ0MTdsWXFhNHhRb2hNTE5hOTJSSGI3QzZKTVcyNHdXa3RCbXVuaW9UU0lmVnM0bDlOZUxmYUNjTVBJMEFseG5YT1lSR1JTMEhOaTAwdXhzYUZpVVdxcGxBWFh1cDM5SG5scGRwVzZvdDNQMUU1WGRidEJUeGtVdlVPcHJlMWlvb0t3b1FQV25hUXN3ZnBzZzZUOE1oZjdlRDBiVVdXZFZTTElvOEFjQ3FNTjd3NjcyRFJod2lvNE81R21ISWFqMHlTVTBKS0ZQenZBYzJURVNGQkR3d0hFa0tDdDJNNk92Mm41UGNXQnFEY0NzMEg1akNScHVnSmJSMlNiVkZpSVFJZThYazFFVXVTUk1PUndFQ0VXTTZ5cGhTWUFJT1IwdVhxRFl3TTJIaDR6MkpXSDA2MXpQU3NzYzR1VGozTmxDVDB6VUh6aExQVldxbXdIOUVXTlN5d1RuT2lwcHB0bnVLUW45aHg0empscHFqRXlWNkVKMWlxMnVSYjNPbjBiTHpSR3Z5d0hVNXFHa3ZpWUM1OFZLU1VnM0pUbWZaM1JsRVR4aEZCdWVyaXdXRnBOS3B1dWV5amczTTVMdGlmQ2Vyb2NmdnpqclZZNDdIMkg1Z1pkQUk0VHY1OW0yOVhPaEl4cVVoRHlzaUlQTDYyUEZoaEJLOFlJTG1kYWwyY29wRzJyeDhyZ2wzbnJSNUZoaFdleGpvTUJIRDJJVjJmdFVmRWRtcTIyU05oZkU3NEozdlFMU0U3WlNaVTVvcUhuSTk5S1lYbkUzMjc1Nk1DWmpUVG14YTZ3cFFJc09QcnlLYjVlZ1VMWk1PamRpZUt2Q1NwQlEyYnNDTURUYTlDMTBmOHE0TXBjdExuSmo5NTBZU3FmSzRyTExwcFJEc0swV1YyZWVXdWg2NUxIVFlXUXR3VVZjRHNzcjBZTlIyVUdyd2RQNWZhYlZUVkt5TjNLVFNyUEc="
m_p: "pb4j6Cx543Go062Rae6K7ohKhDN8aKoMb2djGj5m9Mtb57SF724ci3i42V0kjy7C"
e_t: "1614071864561"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "1379.85"
  vouBalance: "0"
  vouList {
    id: 64234430
    type: 2
    minCousume: 100
    vouCount: 99
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64234429
    type: 2
    minCousume: 100
    vouCount: 99
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64234428
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 3
}
userinfo {
  username: "156******06"
}

2021-02-22 11:17:42,208-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 11:17:42,208-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "5.0"
  t_p: "066f9389e2bd4fe682bbafad17931dfa"
  imei: ""
  model: "PBDM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "9NeLfaCc"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
payrequestid: "SN202102221117437661416763556862"
version: "260"
queryType: "SIGN"

2021-02-22 11:17:42,269-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "succ"
}

2021-02-22 11:17:42,270-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select status from  `db_order_0`.`autorenew_sign_info` where ssoid = "2076075925" and partner_code = "2031" and renew_product_code = "20310001" and pay_type = "wxpay"
2021-02-22 11:30:59,674-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.52.46.169', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-02-22 11:30:59,913-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-02-22 11:30:59,957-INFO-lib.common.db_operation.redis_operation-33-连接redis集群[{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]成功
2021-02-22 11:30:59,957-INFO-lib.common.db_operation.redis_operation-74-connection list: [{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]
2021-02-22 11:31:00,337-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no, plan_id FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=1
2021-02-22 11:31:00,340-INFO-lib.common_biz.find_merchant_info-41-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601', 'plan_id': '120877'}
2021-02-22 11:31:00,341-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-02-22 11:31:00,344-INFO-lib.common_biz.find_key-108-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-02-22 11:31:00,351-INFO-lib.common.db_operation.mysql_operation-59-执行sql语句：update `db_order_0`.`autorenew_sign_info` set status = "UNSIGN" where ssoid = "2076075925" and partner_code = "2031" and renew_product_code = "20310001" and pay_type = "wxpay"
2021-02-22 11:31:00,362-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 11:31:00,362-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTI0MzIzNTkxNzUsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTHFLUlgvNDgxVm4wTlBnMHRsRTBoekt0UWlkOTU4Y1paT3JjWFVaaWdCbGc9In0.MEQCIDNerQ91ofjYoUWHcxjmBpIwDBFkoANGJahYcnZLFr3OAiAYXRHenkKELTRtELmqHC0KEG5WiDIP86ORppeeUp1gcA"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "6.0"
appKey: "1234"
count: 10000
order: "05694438458974"
ip: "121.13.218.236"
type: "1"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "j73KDtx0uWHSodrPiz8UsnLkea1w492M"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-02-22 11:31:00,469-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "b3b320c04d064e5fa7a8d264785295b0"
s_p: "MkNJVU1JSzFNQkQwd1FLbUFIYjQ3dWYyQTJEUW42QzVaNGFYeTFNWlViV2JaR25MRmVxc1p0YnJSZEVsSXVXbThUVU5vNjVpUVUwNFpuWTBvNVkzY3duQkZKTmVhb1YwS1hNTXFDWEVMZzZMWjBSdW5iUDRSWmZkOW9zQkRQVHNDb2VLSG91b1VSYlluT0VRUm1BNFFoTW1LQ3JJZU5GQkw4ZDJJa3RUWnJKYUhZakkyamRuTTdKR2hKdjI0RlFTUTZLS3JKaG5aZWU1TXpCUU5QcEJDNUtqZGMzVjdLRWQyaXowZHNhOWJ2NGhvWER6SVdRbWtzZjhGZG5tQ3pZRnFlRWFab1IyOFdjUDIzb1hrWTJveWxMT3Y5WHhiYjdKOUEwOXRzN2U0Sm4yNVlLY1BOVTBHN0xvaGZzc29zemoyZVR6RnVqaW9JWEZORnJDVUZtc3c1cGpnQUkydDNJdEFmRGdmaGExcWZjV2xUOTBhQlYzMk1TYjBLckplSmhVUnJWcGprbE45WG5VaXFWcnVoMDVPU1EzeDJVbkg3UjRJVWswOGM1MXNzaklLNUNNZjc1eXZtbHFLdWV3V01pM0hTTWQ1bWR5aVFDaU52eGQ2cjJ2MlZGb25kVmRSV1gzclBWR0NBenZpWG9iM25jeFllN2JaS1M4akdSU1FzWElPWXUydzFibWVMTmFtQXQxdUVGamZ3dTN0aGo3SGhhODlCSmU4bVJvWHFHcTdWdWhyc21vdEpicjZOU25vZXNuTjZDMlFvZUl2M0lEbnMzMDd2eURod2pQaGgybU51bzN0WGVxejh0NmZVWmhLSzZaN3FSVnlrY01sRlB5czhkb0tZMGN0b0JKa0hkNlhnY0twUTVib3NYdTlUZHd3b3JPTFRZbVM3Nk9mcFJKM2V0ZVk1Nk81aEN3c005OGxoS0xIYjBJVlljUE1CamZXc213Z3FiRzNzeVBabFlHeW1uR0IyVmwyWU5UTUhiYkw3T3ZxSnlmakpReEhXNlZ2d0YxY3VHYUtRSEh5MlFGU256cEVFWkpmSnk5UkdSVHhzblc="
m_p: "rg8k34Y5U6Ts3696is65VI9cw49Y7xnMp1w44DFQ7nEleI5j8ypiv6P7x74s6562"
e_t: "1614072662864"
balanceResult {
  baseresult {
    code: "0000"
    msg: ""
  }
  balance: "0"
  vouBalance: "0"
  vouNum: 0
}
userinfo {
  username: "156******06"
}

2021-02-22 11:31:00,472-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 11:31:00,472-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "1.0"
  t_p: "b3b320c04d064e5fa7a8d264785295b0"
  imei: ""
  model: "PCRM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "qCXELg6L"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: ""
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
transType: "SIGN"
renewProductCode: "20310001"
signPartnerOrder: "CB0PTntHiJcOWeusg8vMhAFLy53Yw7ES"
type: "wxpay"
amount: "0.0"
oriAmount: "0.0"
ip: "58.252.5.75"
sign: "mKJXWFxIvEvz2Z5tMmt+nU8yVGAKgqmwYWtrzQQT9nCWnMJAsleQSlI8/cgCLjWhaeeu0YWvqjAGaVe7HZcoe2wF4q8TQ7BvzFC0NAqKZF/U6tUnT5XIbr88E2RO2bNvFdOUcsVJkaeMPnS9KE7PMmW5H3XsfDMsLC/5KbFl2UoiKUqfs8AA0Gv/sRnTohhlusD9M6DMLgby/TatokDhUqruJSDJuYIxI1BWgySQ5+wlXL5TVtYNutNO2Q99TWrZ6hcqjtaPFCJGVo1XkBWRgK0MVn98CgiaFj66h5xElOQtx0X+fFSu5xlTQLPnaPk8WDamsMek0cW/0meZ1H5LKp46llWMlCR1zlW2T4AZMCK5FOJ+lvNbZ6RI5vXZLob+BDUUuSTaTBY5EMLmDTkKu4ej3nVFuAc8AdBGUjVfnmVU/CR2IePqnwyKLQ3ANkiEyaHlqCgnEUE6O35p/E61rbcZCbtPV4FGeE9kvkUIjBQAg6fzTnrR1bXpuiTBzefa"
signAgreementNotifyUrl: "http://secure.pay-test3.wanyol.com/notify/receiver"
appId: ""
isNeedExpend: "0"
basepay {
  channelId: ""
  notifyurl: "http://secure.pay-test3.wanyol.com/notify/receiver"
  productName: "ONLY_SIGN"
  productDesc: "ONLY_SIGN"
  partnercode: "2031"
  appversion: "260"
  currencyName: "\344\272\272\346\260\221\345\270\201"
  rate: 1.0
  partnerorder: "faYXMTr18uCxFqyPeNOJ0ghIi4kdZ9nA"
}
screenInfo: "FULL"

2021-02-22 11:31:00,877-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "37f44666037972510784f6e0cffe4ed9d607ae5fca46892cb26efa8ecb3d9b9716139646637EWz9IvWMr3KWG0Ds6BMe73GCculDF83"
}
payrequestid: "SN202102221131022103745410655484"
transType: "SIGN"
signType: "APP"

2021-02-22 11:31:00,878-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT contract_code from `db_order_0`.`autorenew_sign_record` where pay_req_id = "SN202102221131022103745410655484"
2021-02-22 11:31:00,882-INFO-wxpay-scarlet-96-回调参数：<xml><change_type>ADD</change_type>
<contract_code>SN202102221131027571156144630234</contract_code>
<contract_expired_time>2022-02-22 11:31:00</contract_expired_time>
<contract_id>5576186655</contract_id>
<mch_id>1259634601</mch_id>
<openid>oCg6Xt8NvRi7jGuap_5B6XdY4oYk</openid>
<operate_time>2021-02-22 11:31:00</operate_time>
<plan_id>120877</plan_id>
<request_serial>490247383791486901</request_serial>
<result_code>SUCCESS</result_code>
<return_code>SUCCESS</return_code>
<return_msg>OK</return_msg>
<sign>C53E8A1804BFB1A40F30019480E99BAF</sign>
</xml>
2021-02-22 11:31:26,572-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.52.46.169', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-02-22 11:31:26,811-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-02-22 11:31:26,853-INFO-lib.common.db_operation.redis_operation-33-连接redis集群[{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]成功
2021-02-22 11:31:26,853-INFO-lib.common.db_operation.redis_operation-74-connection list: [{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]
2021-02-22 11:31:27,213-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no, plan_id FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=1
2021-02-22 11:31:27,216-INFO-lib.common_biz.find_merchant_info-41-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601', 'plan_id': '120877'}
2021-02-22 11:31:27,217-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-02-22 11:31:27,220-INFO-lib.common_biz.find_key-108-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-02-22 11:31:27,224-INFO-lib.common.db_operation.mysql_operation-59-执行sql语句：update `db_order_0`.`autorenew_sign_info` set status = "UNSIGN" where ssoid = "2076075925" and partner_code = "2031" and renew_product_code = "20310001" and pay_type = "wxpay"
2021-02-22 11:31:27,235-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 11:31:27,235-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTI0MzIzNTkxNzUsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTHFLUlgvNDgxVm4wTlBnMHRsRTBoekt0UWlkOTU4Y1paT3JjWFVaaWdCbGc9In0.MEQCIDNerQ91ofjYoUWHcxjmBpIwDBFkoANGJahYcnZLFr3OAiAYXRHenkKELTRtELmqHC0KEG5WiDIP86ORppeeUp1gcA"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "6.0"
appKey: "1234"
count: 10000
order: "98692733686975"
ip: "121.13.218.236"
type: "1"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "Wx6s3eyaV4RYgh7CKMZiB8b29oSPnNkq"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-02-22 11:31:27,317-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "60c064de0bd5462e8b778331d1b2dc85"
s_p: "bXJDdWdXT1NremI5MUNCWVVUdFVjYkJubzQyY3drelBjOHNwbjhsbDFyME16NHpCblNYbktOanRIZFBibHVHTDM0dUJXMlc2TmJ0VGRheUJPRER6VnJQUWN2UTlhb2lvd2VRdHhBSjl6V1pMcXhXcnpYa0plejBsY3NBbVZnZVlSQTVweENyS2lyYTF2OXZWTXZ6Nnp3S0JYWnlBRHpIaFVaQ0E5SkR2TURIUFNuamt4OGhVOEJRQ2N2UmJiNUdVZThEdTY3Vk5rVVRTTjNzZ1ZaUWdrMHhPM1JGeEJFR0hnSUFnUGNsVjFwWUYzdkxwVG92dmJXMDVFa0VHUzhRUzRtYTVGMktYTHBVY2pMVVk1eUFid1hESWJxYVl3anZJdDRVN3BWa2xjVjhtRmpoSm5ZVXM2ZzZsaUd1cHJxQ0oyNTRuU2xrSmh3dm9ob1JjRlNreHY5REVkbVhydUgxakhzdHlOaUs1em5uY1FTcmgwZElZdUx1V2w2ME1NNk5SSjR1QlM1YUltaDdWUGxYTzhEYm56dldQMmtYS2F2eXpMaUpUMGlGRXo0Y1NuWDVNQjJ4VTlkSnd2MDZqR09HRjk2Z01CalQ0aGE2ZG95WXVHZWVaYk5vOXdGZDVjTks5VU51bXM0OU9hM1pKVkJ1aXpiOGFhb3o5ajlrczJ2bjJDaTZ3ZGZDaXZtQ3JZNGZnWjRmVkJCNmZmcmppR0NQOHpVZUJITE02YUptbnl2aW9XYjFDUXlRb0djbG14b1FyUElGMEtFRmthOUJVM1NJNG1MeHV2d0ZTUkdhcFV0M1NHdEdzWm92czNkNUJTdEJ2cmpDVGpmT1R6T0g5R2hNSjQ4dm40dGZPMk1wdHdUNVI5WWRuNkVBcTY1Unh3aHJxN0hpTUNpb1pUek94UVNaa2FKb1ZReEdMMkEybE5WZFlUM0FrNkpFdUFkOWZOajdEazZscW1uNVVaQ1RLTGx6UmlQb1AxeDNsRGlJUGlUaU9kNkM4ZWZxNEJDbXBEUEh0UWJFWGNISGFnekpDc2JrMG95VzB0MUpROER6cFdWMTc="
m_p: "zlV04mpHG55f088Ti39q7YA4J31586BRT09o2c627i56WsG7xTMADwx715pIdb2X"
e_t: "1614072689693"
balanceResult {
  baseresult {
    code: "0000"
    msg: ""
  }
  balance: "0"
  vouBalance: "0"
  vouNum: 0
}
userinfo {
  username: "156******06"
}

2021-02-22 11:31:27,320-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 11:31:27,320-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "1.0"
  t_p: "60c064de0bd5462e8b778331d1b2dc85"
  imei: ""
  model: "PCRM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "HdPbluGL"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: ""
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
transType: "SIGN"
renewProductCode: "20310001"
signPartnerOrder: "TM7QSicWD6hsn5JzajRwBVmeKUEZ1Aud"
type: "wxpay"
amount: "0.0"
oriAmount: "0.0"
ip: "58.252.5.75"
sign: "RTrKJ92bvm90NQ2Fdar7rM+PQGWOZ8jNH+7sWNrB5zIHOHIoAtQkaFHc+leY/ED4Q722Yla7ZZ5ZxHY/q3hf/A5YTl4o07XjP7ilasX5JO7YErE8XpEKtPTVKBqncnlDptJYoeeAY4JPRFIS/KG0hEip2za8JhcCMUsHuw5OIaHlj90Ldb0UY7RYqxWFqjvUbk029Ygar+PiF9oaucPYM5jIk5KoRArCZ7BYAYo5gVTdJYKAO42vi5X5YW5YLNz41i4xX8V/zhMCdOx3DpHztGFfoeEmGG/yCXnGn04j924r2v2o/z6tYT4Yqejmv5aUp7AlR42pdt5lkSiA3GYa5zlYVbxYlUseTVQ2vA9f62/qUbsNhBpKEFFvxoJfxUuyupJayLkjD90wdCdnhlaHqtp+GTxqv4ulkTgI42XPbCewQUhwsYKBLV72+JVUfS8XG+bSPXPIkKVAaU6YqK7JTHpMEhxMRlSdPT4Ak2Qcsdd0chPuTLAZzWJ1MaAQNfIH"
signAgreementNotifyUrl: "http://secure.pay-test3.wanyol.com/notify/receiver"
appId: ""
isNeedExpend: "0"
basepay {
  channelId: ""
  notifyurl: "http://secure.pay-test3.wanyol.com/notify/receiver"
  productName: "ONLY_SIGN"
  productDesc: "ONLY_SIGN"
  partnercode: "2031"
  appversion: "260"
  currencyName: "\344\272\272\346\260\221\345\270\201"
  rate: 1.0
  partnerorder: "EdkOg1zyUlV5LTxnQWBtr9fMoqKJ72wN"
}
screenInfo: "FULL"

2021-02-22 11:31:27,623-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "acddd49cc423fbb3f808bb564c31aa432d3a7213fb3bf2ee46be75a951148eb51613964689Mv1UVkqKPQ8hV6yQmhXyrFmEAGe2UpRW"
}
payrequestid: "SN202102221131296815008512058827"
transType: "SIGN"
signType: "APP"

2021-02-22 11:31:27,624-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT contract_code from `db_order_0`.`autorenew_sign_record` where pay_req_id = "SN202102221131296815008512058827"
2021-02-22 11:31:27,628-INFO-wxpay-scarlet-96-回调参数：<xml><change_type>ADD</change_type>
<contract_code>SN202102221131295835475503370152</contract_code>
<contract_expired_time>2022-02-22 11:31:27</contract_expired_time>
<contract_id>8606683541</contract_id>
<mch_id>1259634601</mch_id>
<openid>oCg6Xt8NvRi7jGuap_5B6XdY4oYk</openid>
<operate_time>2021-02-22 11:31:27</operate_time>
<plan_id>120877</plan_id>
<request_serial>869839444227001729</request_serial>
<result_code>SUCCESS</result_code>
<return_code>SUCCESS</return_code>
<return_msg>OK</return_msg>
<sign>3C83E86AF2B47F8B6227179B28298F0D</sign>
</xml>
2021-02-22 11:31:27,821-INFO-wxpay-scarlet-100-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-02-22 11:31:27,821-INFO-wxpay-scarlet-102-回调解析成功
2021-02-22 11:31:27,831-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 11:31:27,831-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTI0MzIzNTkxNzUsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTHFLUlgvNDgxVm4wTlBnMHRsRTBoekt0UWlkOTU4Y1paT3JjWFVaaWdCbGc9In0.MEQCIDNerQ91ofjYoUWHcxjmBpIwDBFkoANGJahYcnZLFr3OAiAYXRHenkKELTRtELmqHC0KEG5WiDIP86ORppeeUp1gcA"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "05340152044093"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "AHsPyRmu0oLwhGTVKXbrczlnt7DCQU8I"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-02-22 11:31:27,925-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "b74136196114440a8a1e64f5b694a080"
s_p: "ZkVpQjNGTm9rdGUxQXFaZTRlVnNOeXUzRHRZamNVZ3RETVE4TFdITVpJNld0Njl2RUQ1WThEb1l1T1czU1hQQXpNM292dGVmM1ZDS25oalhqVGFsN2pzdjBRWFBCMXZNanU0M0VLckk0d2RPd0ZwUnNUNDVZZlJKM1pIcGFUREtabmNOTlhiWDY1M2JyejBPY1o0R3k5N2lIMjJYQzF6YWxNbjJYRjBUeFVidkVZYkg3azdtT1ByZ0FiNVBCM0tDMm4zV2RITHVMd0wxNTZQMzhVM0w5SXdZOUx3d1U3TFRxWWZQZmpaUHRSZHdIbk02dEwyN1lmR0xJdFI0YkxobUhyVmRDSUZXaHphYXp5bWYyNkc4NmNiV2pvM2dJejljSlBBUVpWek1wVnFIcENoalhydHRBajJPRzkwUEluYm1tUGFvWHllVnRDSGFFUHVYaHoySThGM2pQbkE3ZzExZ1JsZm9WbkZ1bnlmMkJpbG5hR0JvWmhtN0Jha0JXZjJzc25ySW5YaUZ1aEUzQldYR1dpbDFzRlpQV21LaHBFMzNKWTg1RWpNbnd0MWxQUlF5TG5FazF1NHlzc21CWUU5UTBLcnJ5cG1WMVp6a28zellkOU9MUDdkYmQ1ZmZNMGh3VFpubERzR3V6ZU1EWUxUN3JiY0pVb2NBWFp0U003MXJ4VHVKVkRqenVLeWdVUVVXZDJRRk9pYmdLT004WEw0ZWM0Q2xpa01sM2hqbXZaamt0dFc5V0pXTFZnbVdaSVR1b1lQbFJmNzVJZVpwVVlkUFoxZ3ZsakpYdTBWY05UY1V2ZlJjY2RmcW44SDZ5RFRUajBQYlg4Z3hENUNuZWJ4dVplRmJnVEZ4SzNFcEgxSlRMNjd0RUNlMTAzd1BqMHZ5TDJqODBiU29kSER3RTF1ZmRzNjl3elZwVndKUWR0cWZ6bTBCNHZtRVpvSVZrclJIazBuemFTbHNqdGR1RTN1d2pUQWw1R1g1bzF0c2tCU0dJeTJ6UkVEN0s5OGRybzk4ZlFkZElSZ2FtRHE1Ylkwd1BhOURaM0tMMms0N2U2bGU="
m_p: "PdVxU6w9VDO7r24RnBxamTwu7hz0uv0GZhhK27sa8AE3VU380N9W7Zm9n6N1p1yV"
e_t: "1614072690276"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "1379.85"
  vouBalance: "0"
  vouList {
    id: 64234430
    type: 2
    minCousume: 100
    vouCount: 99
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64234429
    type: 2
    minCousume: 100
    vouCount: 99
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64234428
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 3
}
userinfo {
  username: "156******06"
}

2021-02-22 11:31:27,925-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 11:31:27,925-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "5.0"
  t_p: "b74136196114440a8a1e64f5b694a080"
  imei: ""
  model: "PBDM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "W3SXPAzM"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
payrequestid: "SN202102221131296815008512058827"
version: "260"
queryType: "SIGN"

2021-02-22 11:31:27,954-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "succ"
}

2021-02-22 11:31:27,955-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select status from  `db_order_0`.`autorenew_sign_info` where ssoid = "2076075925" and partner_code = "2031" and renew_product_code = "20310001" and pay_type = "wxpay"
2021-02-22 11:31:27,958-INFO-lib.common_biz.fiz_assert-121-签约记录表记录正确
2021-02-22 11:31:27,959-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select status from `db_order_0`.`autorenew_sign_record` where pay_req_id = "sign_request_id"
2021-02-22 11:31:27,962-INFO-lib.common.db_operation.mysql_operation-51-查询数据为空
2021-02-22 11:31:45,394-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.52.46.169', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-02-22 11:31:45,632-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-02-22 11:31:45,673-INFO-lib.common.db_operation.redis_operation-33-连接redis集群[{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]成功
2021-02-22 11:31:45,673-INFO-lib.common.db_operation.redis_operation-74-connection list: [{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]
2021-02-22 11:31:46,042-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no, plan_id FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=1
2021-02-22 11:31:46,045-INFO-lib.common_biz.find_merchant_info-41-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601', 'plan_id': '120877'}
2021-02-22 11:31:46,046-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-02-22 11:31:46,049-INFO-lib.common_biz.find_key-108-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-02-22 11:31:46,054-INFO-lib.common.db_operation.mysql_operation-59-执行sql语句：update `db_order_0`.`autorenew_sign_info` set status = "UNSIGN" where ssoid = "2076075925" and partner_code = "2031" and renew_product_code = "20310001" and pay_type = "wxpay"
2021-02-22 11:31:46,065-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 11:31:46,065-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTI0MzIzNTkxNzUsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTHFLUlgvNDgxVm4wTlBnMHRsRTBoekt0UWlkOTU4Y1paT3JjWFVaaWdCbGc9In0.MEQCIDNerQ91ofjYoUWHcxjmBpIwDBFkoANGJahYcnZLFr3OAiAYXRHenkKELTRtELmqHC0KEG5WiDIP86ORppeeUp1gcA"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "6.0"
appKey: "1234"
count: 10000
order: "60425386318295"
ip: "121.13.218.236"
type: "1"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "LF6XOCmITlPrVzKoG7jtaqguipnbUQJN"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-02-22 11:31:46,156-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "df8a5be1efe44f65a6bd80075007ea8d"
s_p: "WFJiVnppaXM1U3FYcmxUMFhlMThWVXNVczBDNWNJTzdENTRhbkEzdUR3bGZ3eVo4Z2pnaW52VGV2RmdBdFYzNUpHa0hYWkZqTFJZUXRPa2ZKeVRtV3M5bHNHcWo2QTl4VVV2NWlVblJZNEpQZ1dRdVRaMFI0Q3dCdWdpSWVNaG9uaGJvb3RjUjV0RFhmSXcwenlhOUV5WFhDMDVCSlZCQnBrQ2cwUDM0YmlneHdpTlBVMW9lbXlaMHNremlBdVRtNG84Rk1wQ0dYYjVFSWJiajVvZW9oOWdMWE1iMFdTVk9COVh6RDJIV3E0b2JmcEhxbGVFYXRXRW5COU1vYnY5a0tFaTlySFBIZjZidTZwNlVGUDNSMGtDb0JCVVpna3QwSER0MndnZWJmQkp0aGU4eWVGNUlHeXZranFKOWpRdFQ1eW0yWVNOSEJma1B2WUhYNThDamZvOEFRVXpTeWVmbXVWaVlGaVR1aWtqMXUyMGxGRXNRQmxOQVpUNVdwRjVlZ2hGMUZORVFmWUpoUW1nekdHdEQ0bmdvM2RPWFZNQWd1RWZPV2V4UUFSM29wc052TnFabVNrSXNqOEVXa2tDWXBneXZpdDZMd0NneFlJSjh5ZVl5TkVNNzR4Rnk1MVEwYzVndzVaYVdMekJKT1lKTGdPbVdMWkNLRFdEVEtBVDFTdmIxTDc4cjh5Y0E5VnVuOWFiNFVZWFlKcDVqSU9qMEtYODd2NElaUlN0cVpycTE2ZFh3blRoSExyY2F6ODNXMXdoV2xOUU4za3dUelJTWDVkeUdzQjBJSUFPNGFRRDFQaXlBQ0FaSjNrZFlPYUhoZVFGWVNqRXdQWHYwTmIxa2xnaXFZR0dnQWJnOWkxYnE4ZUFCYklaeklFNEV1VmRXRkZsRW9vYkpYeFprc1Z4ZjFqeFg4QnRNdVBDMkxDN0JzRFJxMGhQQXBJYll2Nkpadm1CZXJlcnF0YzlaQUlSc3N4MUJWTzhPUnlxblB2elB5OVJacGN5aHF5MzdvNFFXTU1rdFVqTThpUU0xUGx2N3FzYlFYQ1ppSFRHQkh3NW8="
m_p: "qW30m7B38ZQhdZ442RE5w648fjAjbp1IuN4F03Lng7j2u11u1r60G9VqVw2Vv03s"
e_t: "1614072708551"
balanceResult {
  baseresult {
    code: "0000"
    msg: ""
  }
  balance: "0"
  vouBalance: "0"
  vouNum: 0
}
userinfo {
  username: "156******06"
}

2021-02-22 11:31:46,159-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 11:31:46,159-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "1.0"
  t_p: "df8a5be1efe44f65a6bd80075007ea8d"
  imei: ""
  model: "PCRM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "tV35JGkH"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: ""
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
transType: "SIGN"
renewProductCode: "20310001"
signPartnerOrder: "Lrn7EqKRiJIMVZgwN3FoGWyDUBv6Xe21"
type: "wxpay"
amount: "0.0"
oriAmount: "0.0"
ip: "58.252.5.75"
sign: "l3NLKPWaQLnkn4lSu1rUPlC+P6/Adi/waz40KgHXz2WDnhsUl6f8N5HoW/AusDESeAY9wsG15sSjSrIa9Q5KjWP8nbXDRtLoVxOP7Bg9XpRGAemloOxn9KDO47L0iHpFQ/UOUd6HFL16L1fhb73B0oMfpo14khKM/bJ+tfZakM0Ksq0sMZ0Xr8nfCUyt8ctt09xwD/AHi3l+F4z5obC1xwMqB3IlDp2VEX66hG7F6SHMp6XuK8GEkVDUIn2jW6oGLhxE6fL4MYuZj8ZJ+n6pd964K7O9zNVrKiarBLJmrkU7RAjq3lSE7Cb3iqXqwshPh/9yvUCG1AWcGoSYrVXTS0oMtrj9ee7SPX3VpytGjUWpCdlVw3Fuvna41miyKRwwLuXx2h4zEkFXHQbKpD+IMth3ZZomD9SPkRowvNwfA9yjJUegOCJodzUjJdYn28zlC4Az9COKXfyYCkh1reLiOQ2tPLNsbMUp11Ysxj8ice72LjUXJ+SmuRm8aEtx3irS"
signAgreementNotifyUrl: "http://secure.pay-test3.wanyol.com/notify/receiver"
appId: ""
isNeedExpend: "0"
basepay {
  channelId: ""
  notifyurl: "http://secure.pay-test3.wanyol.com/notify/receiver"
  productName: "ONLY_SIGN"
  productDesc: "ONLY_SIGN"
  partnercode: "2031"
  appversion: "260"
  currencyName: "\344\272\272\346\260\221\345\270\201"
  rate: 1.0
  partnerorder: "1UzWRHT9XYjKbOmGSoceCyB4tMkqhn5f"
}
screenInfo: "FULL"

2021-02-22 11:31:46,487-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "ded96367f2ea6d906e69da4df83d8eb0c7b9dfceaeeb39e67b131aeb5e5fbe4e16139647087jYfwBDQrKC2OvTL3PswVLSWjcaYy0vx"
}
payrequestid: "SN202102221131480080826500372576"
transType: "SIGN"
signType: "APP"

2021-02-22 11:31:46,488-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT contract_code from `db_order_0`.`autorenew_sign_record` where pay_req_id = "SN202102221131480080826500372576"
2021-02-22 11:31:46,492-INFO-wxpay-scarlet-96-回调参数：<xml><change_type>ADD</change_type>
<contract_code>SN202102221131481238341070085853</contract_code>
<contract_expired_time>2022-02-22 11:31:46</contract_expired_time>
<contract_id>7298466466</contract_id>
<mch_id>1259634601</mch_id>
<openid>oCg6Xt8NvRi7jGuap_5B6XdY4oYk</openid>
<operate_time>2021-02-22 11:31:46</operate_time>
<plan_id>120877</plan_id>
<request_serial>548280581462460474</request_serial>
<result_code>SUCCESS</result_code>
<return_code>SUCCESS</return_code>
<return_msg>OK</return_msg>
<sign>71C9A9C44B6913173B7F60B3BF0FEC2F</sign>
</xml>
2021-02-22 11:31:46,573-INFO-wxpay-scarlet-100-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-02-22 11:31:46,573-INFO-wxpay-scarlet-102-回调解析成功
2021-02-22 11:31:46,581-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 11:31:46,581-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTI0MzIzNTkxNzUsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTHFLUlgvNDgxVm4wTlBnMHRsRTBoekt0UWlkOTU4Y1paT3JjWFVaaWdCbGc9In0.MEQCIDNerQ91ofjYoUWHcxjmBpIwDBFkoANGJahYcnZLFr3OAiAYXRHenkKELTRtELmqHC0KEG5WiDIP86ORppeeUp1gcA"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "54220630987061"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "FNyhc3B7qEY4pUmAj6nI8ZPHVTCoQ1Ja"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-02-22 11:31:46,643-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "0c33fc8de0254918a95862eac6046750"
s_p: "VHpVcnlBN3pWaVQ2S3dJSUJZT1NoQlFNS05OTHhyaGFhMVRmYVZTZlQxdnBPZUg3U3I3VUtaSjZpeElpSFVvaDBKZ011MXViOGtDREVvZnhTMFI0dXB3TGZNNE0xUnRla1JIY200WGtialNiekh4S3hZRHg3eUZQRkd1V0xnVGpqWnR0YkJVbjJ5eENpTlBUcjRqelRXQ2hVenZlWGRwN2pJbXJjbFVoVmZyNGRET0t1OEhneENBZElLNHlCYU04M2hBUWFsSVQwb0lPZlVWeDNUcDRiNWljM2o0RzVhbUhyTWEycWhJcmVBRHI5WTVyb0JuVGM1bk5NYThJc3h3bEtodExZam1hZjEwQmNDc28xRzRLcHdUemxUcFFzbXZmeGVhUHBaT0F1WFRnN3ByVktqTDdNcGZIMDR5bWN1amdIYWFzbXN6MHFsVGlWZjMwdjhNWlNUcnRyajMwbHBKMm1HZ0Q2NTdJUzJzUkFVZ1lKRTlzTjVDaENQa21hd2J4VnFCdUdoT2xpODJSRjJGeDIxc1FubDl5NHdmT2VkbzhVd0VlV3hKVXBUZ3dWR3BPQ2RSR3k1RThCVVFtREt2ajMzcmp2MEphTnpLSkY4ZXlCUU5heWFIbGhtSjhjcm5DNFg0NjgzbnNNbGV6bmFKZzVxMmplT0dhSzVzTFVNTGNMVW5QdWZmVDBJWFdTT1J4RFFFeXlTOXAwTFlsQWR4WEZFWTM2Q1VjTllITEdsQ2k0Tk9wMzc4ZnpFaGh6bENZZWx3ZkFqektWejRHNVJaaWs4VTdjbHJZS21yTEpiZmx2bm05bGY0ZTEyYnhyZDF1RmJ4RjRMd0pOYWZpTnhXYTNhNzlqbUVETmNFTjNqM0xoOXJIV2ZoTUkxdG9lSG5VUmU2N2lZbU12TmQ2alF2ZHpqQUpPUU53NzliT2Zicjk5Rm9Wb3NMN3VoRExpcGU3dHFlbGxWTzhXNDBONXY4eGNERUpMZnpoUzhNZzA4TnRnTDNGb08wNVNwQ3oycm1kYThRbks0ckFpdnVORUVxWWV4OFdXOTZhWGpIb3BjSnE="
m_p: "I569lVA6Q9MGlRdED7D6t119wyhDp2uzBG47VwsEJXQ494j6U92G7IMzR4ngOdw0"
e_t: "1614072709026"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "1379.85"
  vouBalance: "0"
  vouList {
    id: 64234430
    type: 2
    minCousume: 100
    vouCount: 99
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64234429
    type: 2
    minCousume: 100
    vouCount: 99
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64234428
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 3
}
userinfo {
  username: "156******06"
}

2021-02-22 11:31:46,644-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 11:31:46,644-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "5.0"
  t_p: "0c33fc8de0254918a95862eac6046750"
  imei: ""
  model: "PBDM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "4M1RtekR"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
payrequestid: "SN202102221131480080826500372576"
version: "260"
queryType: "SIGN"

2021-02-22 11:31:46,671-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "succ"
}

2021-02-22 11:31:46,672-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select status from  `db_order_0`.`autorenew_sign_info` where ssoid = "2076075925" and partner_code = "2031" and renew_product_code = "20310001" and pay_type = "wxpay"
2021-02-22 11:31:46,675-INFO-lib.common_biz.fiz_assert-121-签约记录表记录正确
2021-02-22 11:31:46,676-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select status from `db_order_0`.`autorenew_sign_record` where pay_req_id = "SN202102221131480080826500372576"
2021-02-22 14:19:35,294-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.52.46.169', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-02-22 14:19:35,567-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-02-22 14:19:35,619-INFO-lib.common.db_operation.redis_operation-33-连接redis集群[{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]成功
2021-02-22 14:19:35,619-INFO-lib.common.db_operation.redis_operation-74-connection list: [{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]
2021-02-22 14:19:38,481-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no, plan_id FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=1
2021-02-22 14:19:38,484-INFO-lib.common_biz.find_merchant_info-41-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601', 'plan_id': '120877'}
2021-02-22 14:19:38,485-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-02-22 14:19:38,488-INFO-lib.common_biz.find_key-108-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-02-22 14:19:38,492-INFO-lib.common.db_operation.mysql_operation-59-执行sql语句：update `db_order_0`.`autorenew_sign_info` set status = "UNSIGN" where ssoid = "2076075925" and partner_code = "2031" and renew_product_code = "20310001" and pay_type = "wxpay"
2021-02-22 14:19:38,504-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 14:19:38,528-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTI0MzIzNTkxNzUsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTHFLUlgvNDgxVm4wTlBnMHRsRTBoekt0UWlkOTU4Y1paT3JjWFVaaWdCbGc9In0.MEQCIDNerQ91ofjYoUWHcxjmBpIwDBFkoANGJahYcnZLFr3OAiAYXRHenkKELTRtELmqHC0KEG5WiDIP86ORppeeUp1gcA"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "6.0"
appKey: "1234"
count: 10000
order: "78588515924121"
ip: "121.13.218.236"
type: "1"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "SQWE17majVIiCxZzflsB8T4XyLbvd2Pw"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-02-22 14:19:38,692-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "5a4a39896d0040e1ba4f7cd1d5ced37e"
s_p: "ZjgwbVJqblVLZzNyeG42cmdjRldRU0NrZG9tTElZbjlja2t2SkNzMWQ1VFp0bXlsRXhxc25tSmtSdTdxQ3dqSXVnbGhIWlZCTGwwdGE0Uk4wYTQwUlNkTWVlNTBtZVl0MW9iQmd0QUN1T0tzOWJVRFBUZm9wQ3lWelgzZ1dHRm01YlBWb2I0d2Rtc2JTUGU1MGVtcmJ4WTgzSGZ1Y1lhc3VuUGpmam12aHdRWlJwbnBYYXVDMUN5bGM4MkN6UUJKY003ZHNZMW5wVFREM0E2TnA4UDllRm8ySkRMUkpkMnUzbnJ5VkFTTjBlMFY0b0dyeHpwOFNiZm1icE1CYUI1Mkx2enhvWXNYR3JCbjFNUVVIQkQwNVltc0tsZEV6dnRQMzc3eVoyeGlmSllaWXJkZ28xWW5TS0U4YllCUmVUb1VhU2VYWGJXWFc4STFWQkFVVkxrejFEYTVUZko3bEIxMGVIMDFtWFlHNjViWVByUDVrR1c5bW5XTVNwZkExR0xKaTF6d3kwcm9XZ0xHR3R0VlFjQVFlRVhwWHljdWlZbXY4ajNFY1lkWVhDVW5NcjFkUzB0d2wyQXNad3VVaXRsQkJBWUhLQmRhdm9jVWg0SVdtdG56SjdnV2NpTW1ITkhNVWNQUGVUZGV4TmZpekVobXhLRGM3NXdJdkJnbU16bGlzNjJ3YnFNWjZtaVJmZ2NEbU1hdnZLMm1id0RwSjBBanIySEE3MHB5UUtYWEtJRXU0ZXNYWldEWGJMYUNxY3JHMTNtbkdaa3JQT3B0eXU0M0E1eDRWWkVzNTFQZkNMWmN3djVKZmlPa1NEMVA5NHpSNDYwb285Q2RxdEtPajdzY1ZUQ21NWmJpOVdjbHhyU1YwNlZvQ1FrUVpPc0FXNnpHdzA2cUx2N0M4RUlFdU5ZYlI0UTFkRlVnYUFCcnJsZkdITEYwMndKNURzbmpmSHZVNjdKYjh1SmV1aGxNYU45ZDVGdk1NeDZWRVlWZ2NuS2dDN093bGNXT2FvbWhYY1VzVUg1NmZNcTRiQkNMUjNhZ01qQm5rR1dKRXV3cUN4Q0I="
m_p: "Er1uU04DLCa55cVLyQm3LiM66JkG7Ixg762avsgDeu64KNpik092k2XJZ6k59m9k"
e_t: "1614082781100"
balanceResult {
  baseresult {
    code: "0000"
    msg: ""
  }
  balance: "0"
  vouBalance: "0"
  vouNum: 0
}
userinfo {
  username: "156******06"
}

2021-02-22 14:19:38,695-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 14:19:38,695-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "1.0"
  t_p: "5a4a39896d0040e1ba4f7cd1d5ced37e"
  imei: ""
  model: "PCRM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "5bPVob4w"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: ""
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
transType: "SIGN"
renewProductCode: "20310001"
signPartnerOrder: "5BHkylhVEt3grFC9MKm2G4zviP6oaSXw"
type: "wxpay"
amount: "0.0"
oriAmount: "0.0"
ip: "58.252.5.75"
sign: "j4xHiBRajex+m0O3R+kjmOhYnX7uvF+ddv+KAOqtg2yzCWpyR7gNaHClj8wncpYRacs9DhJa1GUPiAafY5XL6Matv29XMsUDlSOE7hrm6JhC9AZV+WkoNT5WfT1mSVwO+qUO+wKG/A9UiScG2BiFr8FRfQPdU8YHTGzm1VGAIBAo34uo0OqX4GYCKG4zQCYL1+dXShc0a5R+DchX/AWdCFXFIkGpqVZteFEI3Q/x8s3V5pO6fWELkqrKrkG/Y3Jproyln17dDdwfjmIY+kU2a0lvePmKfRdXntsbEe++XnXaVqQRE/U3tNPYCZzAv5qWkugW9abb16dytYVs7/xhLHLbA8UIAkKGH01DxIqG/Hta1vN1ufGe0xKYMup5OYx4a4GsKuEfqAdzsqkyf+SepzbjlzXDMerJOQkWNtp93vOZr1dUmwbjiUFjHrVThkrkBOH7GBthomS3AXyLk83WU+lwvuJmVP4oKswtlXJm8fdaY6655TLOSAoTO1QUgFQx"
signAgreementNotifyUrl: "http://secure.pay-test3.wanyol.com/notify/receiver"
appId: ""
isNeedExpend: "0"
basepay {
  channelId: ""
  notifyurl: "http://secure.pay-test3.wanyol.com/notify/receiver"
  productName: "ONLY_SIGN"
  productDesc: "ONLY_SIGN"
  partnercode: "2031"
  appversion: "260"
  currencyName: "\344\272\272\346\260\221\345\270\201"
  rate: 1.0
  partnerorder: "3aK2W1b5fcMTghzy0tHmR7Ciu9sGXdxZ"
}
screenInfo: "FULL"

2021-02-22 14:19:39,053-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "643e5c42bf46084f424e2777fd9dae4e71f1924abbb863075849730e005a0e721613974781v6GpVEEmgkk04xd7GCBX15Az1XmW5z3O"
}
payrequestid: "SN202102221419412826635062342071"
transType: "SIGN"
signType: "APP"

2021-02-22 14:19:39,054-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT contract_code from `db_order_0`.`autorenew_sign_record` where pay_req_id = "SN202102221419412826635062342071"
2021-02-22 14:19:39,077-INFO-wxpay-scarlet-96-回调参数：<xml><change_type>ADD</change_type>
<contract_code>SN202102221419415852872517785340</contract_code>
<contract_expired_time>2022-02-22 14:19:39</contract_expired_time>
<contract_id>4787232730</contract_id>
<mch_id>1259634601</mch_id>
<openid>oCg6Xt8NvRi7jGuap_5B6XdY4oYk</openid>
<operate_time>2021-02-22 14:19:39</operate_time>
<plan_id>120877</plan_id>
<request_serial>466443586258985797</request_serial>
<result_code>SUCCESS</result_code>
<return_code>SUCCESS</return_code>
<return_msg>OK</return_msg>
<sign>B683C6B5C98692AF7DD26F69ADC7CF1E</sign>
</xml>
2021-02-22 14:19:39,324-INFO-wxpay-scarlet-100-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-02-22 14:19:39,324-INFO-wxpay-scarlet-102-回调解析成功
2021-02-22 14:19:39,333-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 14:19:39,333-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTI0MzIzNTkxNzUsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTHFLUlgvNDgxVm4wTlBnMHRsRTBoekt0UWlkOTU4Y1paT3JjWFVaaWdCbGc9In0.MEQCIDNerQ91ofjYoUWHcxjmBpIwDBFkoANGJahYcnZLFr3OAiAYXRHenkKELTRtELmqHC0KEG5WiDIP86ORppeeUp1gcA"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "67505180125325"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "r3PlIdnTx9QNz0mfSAkBs1iWOY8hJgbC"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-02-22 14:19:39,409-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "75e67f60aa9840e9bf3436415e709723"
s_p: "S0dMOE5Vb2NNZ2tvOVFrZ1gzUmtZdU16SjUwUEkyU3lmb1RURWZyS244SGlFQ09RZVp0aEg1V1Q1b1VPWDJaZnJ5MHE1Uk9SNmVHZ0tCVnpoSXBkMmUyVHc3M3loTTdaRWxYZ2ZYVEp6d3EzN1V3dmRkbldCeTVGOFVsOFpGTzN5anBoV3l5dDJRbVFZcHo0dkV2Z2xsTmVIZFJabjJEYzA1TktFNTdGYllWZlc1Mzk5NnBPcVFFTlVkcFBtY3E5T2xlanB4UTAzZ01HSnRQOWhOaTVhNHVrSDdRMkZ5cEg2SnNWR2tkNk1NeHZNYWE0RXluckRPZGRnRGQ0dktOUWJEcWx3bjI1V3FibHNUelF4QXF4S2NBYUZodXAwdmpERDdkZks0NjhXY1BocWRLS0JkdkVFY1RxenFBRjNGRlVRVnNxR01MOHdDaW1xWG9RUHBPbUlGd2Vncnk1UlpBTlc3WXd6SGRkbWlSTHFBUnVXUU9sVVVSZTBBZlgwWm9qYWZoa1FzamxrdWFzMkp4NHowcWVCMUp4R0syNjhHaHJ1MVdhWGZBSmw1UWhmVG1PUVF3TzIwZ0JxNjh6NmpjdjJyUWEzemdueWZ3VUZKTHVSYnM1UjhseTJRMEkwTGRQN3B1azlxWXRsSk5TRU9ndko1TlVycWZMN2o0QXF3TE96M2Z4aDVjUW1SNnd2ZkxYZUVybkZEdG9UelZ0d1Ezd1FibEc2Qm5uTDhOZDljV0MzMkRLVnA4QTRzQ1hxb0s3UkNWc3BKWm9pYWxsUnV2dVN3YzlFWENwN3ppWU1CeG1PSzEyYXFUUmpOZHlRSDFPVDhjSUZOOGp1c2RnV1dTSTNTcFd3VDRUOWxvWXdhOE41cHFMZjZtVE5nNm5RZzZyREdwejhqc1I3T2hmSG5XMTRoaGt5WTBvbG5Cc3c1N3pNekhGQjQ1UFRzZjN5blozTXJRbkRzY2FJYmFJTnpOdHNsT1RodW1EdmJQYnhCdGpyTFdRQkRmQmdvajZlTjRIQmlRWTNhTjlSQmRaNkNPTHo3Q2VPVVhTU3E3MlROaGI="
m_p: "kO44ZNL5Ix29wrRAImyPS0EAVW42Dv14J4809EL1Yyf4Y2LjGFexCpjqaeb4900o"
e_t: "1614082781792"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "1379.85"
  vouBalance: "0"
  vouList {
    id: 64234430
    type: 2
    minCousume: 100
    vouCount: 99
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64234429
    type: 2
    minCousume: 100
    vouCount: 99
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64234428
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 3
}
userinfo {
  username: "156******06"
}

2021-02-22 14:19:39,410-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 14:19:39,411-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "5.0"
  t_p: "75e67f60aa9840e9bf3436415e709723"
  imei: ""
  model: "PBDM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "NKE57FbY"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
payrequestid: "SN202102221419412826635062342071"
version: "260"
queryType: "SIGN"

2021-02-22 14:19:39,447-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "succ"
}

2021-02-22 14:19:39,448-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select status from  `db_order_0`.`autorenew_sign_info` where ssoid = "2076075925" and partner_code = "2031" and renew_product_code = "20310001" and pay_type = "wxpay"
2021-02-22 14:19:39,451-INFO-lib.common_biz.fiz_assert-121-签约信息表记录正确
2021-02-22 14:19:39,451-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select status from `db_order_0`.`autorenew_sign_record` where pay_req_id = "SN202102221419412826635062342071"
2021-02-22 14:19:39,454-INFO-lib.common_biz.fiz_assert-135-签约记录表记录正确
2021-02-22 14:19:39,455-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select * from `db_pay_notify_1`.`notify_info` where request_id = "2031"
2021-02-22 14:19:39,458-INFO-lib.common.db_operation.mysql_operation-51-查询数据为空
2021-02-22 14:19:39,458-INFO-lib.common_biz.fiz_assert-98-通知表信息详情：None
2021-02-22 14:19:39,458-INFO-lib.common_biz.fiz_assert-105-通知异常
2021-02-22 14:21:29,302-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.52.46.169', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-02-22 14:21:29,576-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-02-22 14:21:29,618-INFO-lib.common.db_operation.redis_operation-33-连接redis集群[{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]成功
2021-02-22 14:21:29,618-INFO-lib.common.db_operation.redis_operation-74-connection list: [{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]
2021-02-22 14:21:29,970-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no, plan_id FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=1
2021-02-22 14:21:29,973-INFO-lib.common_biz.find_merchant_info-41-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601', 'plan_id': '120877'}
2021-02-22 14:21:29,974-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-02-22 14:21:29,977-INFO-lib.common_biz.find_key-108-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-02-22 14:21:29,982-INFO-lib.common.db_operation.mysql_operation-59-执行sql语句：update `db_order_0`.`autorenew_sign_info` set status = "UNSIGN" where ssoid = "2076075925" and partner_code = "2031" and renew_product_code = "20310001" and pay_type = "wxpay"
2021-02-22 14:21:29,993-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 14:21:29,993-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTI0MzIzNTkxNzUsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTHFLUlgvNDgxVm4wTlBnMHRsRTBoekt0UWlkOTU4Y1paT3JjWFVaaWdCbGc9In0.MEQCIDNerQ91ofjYoUWHcxjmBpIwDBFkoANGJahYcnZLFr3OAiAYXRHenkKELTRtELmqHC0KEG5WiDIP86ORppeeUp1gcA"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "6.0"
appKey: "1234"
count: 10000
order: "56339210693387"
ip: "121.13.218.236"
type: "1"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "Kui5JIXCLYrxQn8wEtaBq3GlDvpUWNoZ"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-02-22 14:21:30,050-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "1270eaa8bf42489e91a07ba186a77b4b"
s_p: "a2V1RGRLRjZMQlRJYTZ6UDNVV0NLcmREN1JGVXhQUDlJMGdXZ3k1N3VqVUE2NUZnb0VCUnI4QWtPVWloMUkyZTlQN21DYW94ekNQaWhkM3Y1N0x4a1Vpc1hqTHJmR0xyZVVvckNuQnp3aW1SQlJZem1Ba1p4N2hmc3NMbXFKd3l1RFBodEkwN1lKUnpHVW1GQlZ0WkNxU2NRcmprN2xCZGt6QnF5WkFWTllmY3NDRmhaSHNTZDFkQ3J5ZHllUFFob090cEVBT0VYODg3SG9KdjZTV0NZSEVQelEzTFdzUEJLclR1Um9Vbk0xNUhwd2dKYVVnRG45eHFERnNGbVZZZGM4Z3FwbGdDcFVWSnl0UGlnZ3hmMkUyNzdjaXZBQmM1bkc1YWRNdmI1R0FmYWhtQlM0cWF0cDBFbjlzOU5iSGVpM3ZLc29Gdk5qeGZYcFhrV3JQeUE3M3V3Wlh6UTBOQm83bjlYWlNxaGc2TUVSdUxKWGwwTDV2Z1FVRkxOVGtVN1NWMjNNaU9BRGhaN0hqTHZNeGZzTlltSDFkMUx6NHQ0dzZWTXpERXYwaXhJdzFsMEtVeWZNa1FEZkJEWEF1NnkzOFFCbkRKazVUMkExUzN0bE5iUmV2TFJDUDVVVHlTRmpWRTYxdTVIODdLQ1JIYlFCYWlpRVEzdzR3cFowZVU3MDVLYTRUR0UxNmVOUGJwYkRNWlltMzhMUHBqNEd1NmthNmlNMWk1Qmc3djl1VnV5dklMVzFFSEdiQ3dqNXFXNDRua0VySndQckJaSFBBclZxaFhyMW5id1ljb2pDTFlLY1VQc3J6ekNVTlVJR01Fdm9VODgyR1cyOGNjbG1uSjZ2YVVDdGt0ZkRZRnNQeXBoOU5SSlptdUFxWEZVWWthempLWU0wMzFhbW9yNmhZclJBdEN3SXh6QVRjNW5mSXBQNUYzaUlJM3I5NldGUkNjQnBSajdSYk9ZQjJzWTRyZ2tCV1pNRXh4ZFJUck80OXNUbHVHZGZxS0ViMURKY29LMUtYSE1FOGdpOExISHVWN1RCbG9tSnNaSGtXZDFxREs="
m_p: "04fu597Vdm4bKminHu6Ubkc42T970CUSqEP349Wa093us07768POvpl95a44vy9q"
e_t: "1614082892462"
balanceResult {
  baseresult {
    code: "0000"
    msg: ""
  }
  balance: "0"
  vouBalance: "0"
  vouNum: 0
}
userinfo {
  username: "156******06"
}

2021-02-22 14:21:30,053-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 14:21:30,053-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "1.0"
  t_p: "1270eaa8bf42489e91a07ba186a77b4b"
  imei: ""
  model: "PCRM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "xPP9I0gW"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: ""
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
transType: "SIGN"
renewProductCode: "20310001"
signPartnerOrder: "2rpXKE3dVZeOHRYWuJ7hINymM0LQS5ox"
type: "wxpay"
amount: "0.0"
oriAmount: "0.0"
ip: "58.252.5.75"
sign: "kM0TB/oi6yX9wbcjyd7f8nQSrHdMTkQS5LRI1jleTBYZ5Lsy5o1O1Fr8tr43uKH4BeFmnlV4xCgF4uvU4QZOPZCtgStEpzzvGI5JIc2t5ueuRL+WcchdvazNFcJyvTy+AmEvruoRkTdmzgIDlfpMuTeNN5nRZTq+18fvYdyMm5lyLAMwwN1rn/Jl0QL+MyCId+qb9eRmtnU77+9i03UMTbZffN7K5oeOBSwjhxiwaaYNmnvFgguUsbY3LWRAsikZZtGniJD+4W//RuWDFcMe1esX64HSB3ot11LRyOWtNBx9iVRK8n2NWh80nMQuWRYhcUScH3AQ4q/srxIY7MYIw22KpRcuzNO5cpspAZiv8l0I4j/rRc/aucYrLTNJKjbE+JwKERnP7SJRriSQa5Qjt2Bw4GZVuwEp4sp1M3pi8RpWpWp9zEk6NhpyJBYWwuNt2fdU0x6rgIKFttS7llt1xGAa2sjEedB9ebZ4SEMqmqzn2O6SYLcZB96eWX3MwBDX"
signAgreementNotifyUrl: "http://secure.pay-test3.wanyol.com/notify/receiver"
appId: ""
isNeedExpend: "0"
basepay {
  channelId: ""
  notifyurl: "http://secure.pay-test3.wanyol.com/notify/receiver"
  productName: "ONLY_SIGN"
  productDesc: "ONLY_SIGN"
  partnercode: "2031"
  appversion: "260"
  currencyName: "\344\272\272\346\260\221\345\270\201"
  rate: 1.0
  partnerorder: "Blztr14UgXMf5EdpkOoIeRZTHh7C0wLu"
}
screenInfo: "FULL"

2021-02-22 14:21:30,396-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "0f29a33d6320bb386d7fdf286f3be090c8d67ad0c594aa03e05cd7784e1ec22c1613974892kPFNByzlXKPWOUXQQbxXT49MghF69k4G"
}
payrequestid: "SN202102221421328805353444314063"
transType: "SIGN"
signType: "APP"

2021-02-22 14:21:30,397-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT contract_code from `db_order_0`.`autorenew_sign_record` where pay_req_id = "SN202102221421328805353444314063"
2021-02-22 14:21:30,400-INFO-wxpay-scarlet-96-回调参数：<xml><change_type>ADD</change_type>
<contract_code>SN202102221421327556525834033322</contract_code>
<contract_expired_time>2022-02-22 14:21:30</contract_expired_time>
<contract_id>8353253838</contract_id>
<mch_id>1259634601</mch_id>
<openid>oCg6Xt8NvRi7jGuap_5B6XdY4oYk</openid>
<operate_time>2021-02-22 14:21:30</operate_time>
<plan_id>120877</plan_id>
<request_serial>861058779836480363</request_serial>
<result_code>SUCCESS</result_code>
<return_code>SUCCESS</return_code>
<return_msg>OK</return_msg>
<sign>DB36C78015411D8B422B06B5C0E91A04</sign>
</xml>
2021-02-22 14:21:30,500-INFO-wxpay-scarlet-100-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-02-22 14:21:30,500-INFO-wxpay-scarlet-102-回调解析成功
2021-02-22 14:21:30,508-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 14:21:30,508-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTI0MzIzNTkxNzUsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTHFLUlgvNDgxVm4wTlBnMHRsRTBoekt0UWlkOTU4Y1paT3JjWFVaaWdCbGc9In0.MEQCIDNerQ91ofjYoUWHcxjmBpIwDBFkoANGJahYcnZLFr3OAiAYXRHenkKELTRtELmqHC0KEG5WiDIP86ORppeeUp1gcA"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "04564400884815"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "X3uHOJ0oM67UQfwKI1LYTmqEWi84bcgD"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-02-22 14:21:30,584-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "7e81d882c83a41a48c759f5803669a14"
s_p: "RGZKRTgxc2VwZ1ZBbDNhNnNyc1FycTNKdGlYRU1VaUVZb2Jaa2V5NnpuVHVLaU1wdjdqNjBCWGdnMnphT0hTWFFCbm9ZNWJWbW15eEUzOWFBMHBpSzlibWNRU01HTWNqZmRsalpEeUdJeEtyMDdWVVBnU1c1NTlLMWQ5ZXNMM0dqNFZndXdxZTNKdTJiVkdpZVlpb3AzQ3N0VDBlczZleHplOG1YWlFlSHV3Q2dKTWRzZmtPQTZOREFvZHE1UkZhWFFpSWRlaWJNTmdJVTFiRzVuWTk0RkRCNGZqS2hSbEZzS3hpQnFOemtzblo0UmhNNHVRVkdTNExHcjVrN3NKbnVoUXY0OU9tMFg1RDZIdTVTZFJSSWV4cFdpNFM4ejc4ZlZEZkJDYkIyZjZ5VjcwYW1NOXpianBpSXNKS01aQUd6UVdaaDJ0Y29HYXVvUXRUdDBlT3NhRUg2TEo5eXlIV3pIMVhRVkRTQ1BpQVJRdGxiV3JZZXlkSmdBN2JwOUwxWjBya1BDM2xNUEEyV004T3BqRzlJTWY5dEExakV2ODVzV0tPZnpRT1RxTTVnYkVuQnlwYjZKcUxsVFhiZW1NTWlHTTlXVUZwSG9qcFBuSXVOS05TeDZiVjJmYWFzV1ZoNTI4VDYwdVZLRGZyVzcwY2Qyc284MnowQVlJZWJPZUVjU0dhVVE4Ulk4dmZZd210ZzEwbm0wakd0VkVwbmpKYkJ5NkFnTld5bzQ3dEFjcFE2SW1mVVU1aDc3T0o1ZnFKMmxidGYzQmxDVlRCVXhDdXJuU1dHQ3pZSG1VSDA2QXVmMEQxNnFIbDFQTHpkNkdDckY2V1pGTlhUdTFnOHZTM3lQc0FQWmRWMFlObGJkQlhnYnVKbTlPQlRNdmJlbDFBSG1CZmZIR01mWFNkOEwwVFY4Tk5xZkt1blRnN3NZbDZPbHNpR2prVmV0MExFMTZ5V1k5SDBDRnNKVnMydWZKckloRGMwWjEzc1lhRjJEVko0TjhQU2kyb2lhQTg0ck9VcHpvN0VuUVRMczJobWFlbVlwamNyMEdzTUZRcGE4ZW0="
m_p: "KJSD48v2r1UDPpUa79LPwV2mx9n500L39qY5RGtbmk5C4Q0SX3h2XMoaqmMMFFNf"
e_t: "1614082892974"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "1379.85"
  vouBalance: "0"
  vouList {
    id: 64234430
    type: 2
    minCousume: 100
    vouCount: 99
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64234429
    type: 2
    minCousume: 100
    vouCount: 99
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64234428
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 3
}
userinfo {
  username: "156******06"
}

2021-02-22 14:21:30,584-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 14:21:30,584-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "5.0"
  t_p: "7e81d882c83a41a48c759f5803669a14"
  imei: ""
  model: "PBDM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "0BXgg2za"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
payrequestid: "SN202102221421328805353444314063"
version: "260"
queryType: "SIGN"

2021-02-22 14:21:30,615-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "succ"
}

2021-02-22 14:21:30,615-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select status from  `db_order_0`.`autorenew_sign_info` where ssoid = "2076075925" and partner_code = "2031" and renew_product_code = "20310001" and pay_type = "wxpay"
2021-02-22 14:21:30,618-INFO-lib.common_biz.fiz_assert-121-签约信息表记录正确
2021-02-22 14:21:30,619-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select status from `db_order_0`.`autorenew_sign_record` where pay_req_id = "SN202102221421328805353444314063"
2021-02-22 14:21:30,622-INFO-lib.common_biz.fiz_assert-135-签约记录表记录正确
2021-02-22 14:21:30,623-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select * from `db_pay_notify_1`.`notify_info` where request_id = "Blztr14UgXMf5EdpkOoIeRZTHh7C0wLu"
2021-02-22 14:21:30,626-INFO-lib.common.db_operation.mysql_operation-51-查询数据为空
2021-02-22 14:21:30,626-INFO-lib.common_biz.fiz_assert-98-通知表信息详情：None
2021-02-22 14:21:30,627-INFO-lib.common_biz.fiz_assert-105-通知异常
2021-02-22 14:25:33,799-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.52.46.169', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-02-22 14:25:34,073-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-02-22 14:25:34,114-INFO-lib.common.db_operation.redis_operation-33-连接redis集群[{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]成功
2021-02-22 14:25:34,114-INFO-lib.common.db_operation.redis_operation-74-connection list: [{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]
2021-02-22 14:25:34,504-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no, plan_id FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=1
2021-02-22 14:25:34,511-INFO-lib.common_biz.find_merchant_info-41-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601', 'plan_id': '120877'}
2021-02-22 14:25:34,512-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-02-22 14:25:34,519-INFO-lib.common_biz.find_key-108-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-02-22 14:25:34,528-INFO-lib.common.db_operation.mysql_operation-59-执行sql语句：update `db_order_0`.`autorenew_sign_info` set status = "UNSIGN" where ssoid = "2076075925" and partner_code = "2031" and renew_product_code = "20310001" and pay_type = "wxpay"
2021-02-22 14:25:34,542-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 14:25:34,542-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTI0MzIzNTkxNzUsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTHFLUlgvNDgxVm4wTlBnMHRsRTBoekt0UWlkOTU4Y1paT3JjWFVaaWdCbGc9In0.MEQCIDNerQ91ofjYoUWHcxjmBpIwDBFkoANGJahYcnZLFr3OAiAYXRHenkKELTRtELmqHC0KEG5WiDIP86ORppeeUp1gcA"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "6.0"
appKey: "1234"
count: 10000
order: "13627249651099"
ip: "121.13.218.236"
type: "1"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "A9neIStzaMv6fGN7TLlkW8YJmqDUbCRK"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-02-22 14:25:34,613-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "2c20147d96334a3da6da05f2c21ea936"
s_p: "Q2taenRDOEQxQVRmMTlXaHJwRGdzaWZjZWM0bXBOUklFZHBJZGI3SDU5c0czYjgzNG9kTm1tMXpDUk8wemoyNEExOWx3QTUwTWtDWklxWnVtUW13UE55RFBOWkJvQ0ljVUk3YXFJWU81VmhFaXNxck56c09QVFZTTTV1V0RsbmRGbFVPUnZjOVR2ME1hRXpzTElOWFZXMkxud3ZqdUlSQVBiZ1lldTRWR1NFY1NTVWdZcGwwVFZQeTJHMFRSUVJ1OXF2azg5RERYVnhMTGtLWFNmU3duRzExMzZ0TnJSUEIxNHJENnRWZTlSOEdOU2dIYTFRUk9rS0FRRXdpTlhZVDhibVpPUG16SzdBakJxME9FZkRGdjJibEpLMU83d082ZWV5M1pCQjhpbkJVbEFXdTFXbkxVbEJyR0FhWUpvZDdyNlFxeTkxZ0NhTE9TeUo0UHN1ajN5YmtCc0ZEeUdHUkg1SDU4V1FFTldZQVdsTElFOXB4bEY2REM3a1RsNE85WGpmUWhFcWduclRMMjdBSmZ1NGw4UERzWlJBSkxLWmpocWEwWGxtUWlCNGc5TXpiWUcyRDhDeEh6WGRpNEFodlVINzZqMzJ1Z1I3ckdTcnNtUk9WbXViQnNjb2hYMHRQNmI3eW1ZSVN1UE9lNEg0UHc0NjdFRjhpNUZ3NjRmSGZVd0p4QnFISmdsMmthQ3lXNmljQmppR01hdlJoODdGZUVDWFduaDRVdmtGVExCY3o5RWo3WGZzRGdpdHJmZ0c3RzhYcnhXSnJ2bnE5Y2FHNFluMmJsSDdrcDNiR0lTRmxBSXVsR2h5eHZ3cG80aHpkcm9MSE5OZzk4UjB3UDVpd3VaZjlJQWl4ZlZaM09GTkZjZDc4bzZlWXVkZzV1bXYyZ0dTdFJXcnNKNVo5SHcwTlpCekVEVmtrSmdxU3k5aHZ3VlV3YW1NTUpHclR0WlZob0RYOWJlSHZOZXJhMDhvZXExZHRyNFozenlFZnJ0SFhicVpPVDJNWm84WnMxUEc4RUFFM0JuTTl4b0k2cHljbG1yMDBNVnVCOEJhU1FRa0M="
m_p: "PK3jlS0a950N08z48N8oC4dGYl9Xn76o4806S7qjp1GmxbH96sWC57w2b21SrE16"
e_t: "1614083137016"
balanceResult {
  baseresult {
    code: "0000"
    msg: ""
  }
  balance: "0"
  vouBalance: "0"
  vouNum: 0
}
userinfo {
  username: "156******06"
}

2021-02-22 14:25:34,616-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 14:25:34,616-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "1.0"
  t_p: "2c20147d96334a3da6da05f2c21ea936"
  imei: ""
  model: "PCRM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "Tf19Whrp"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: ""
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
transType: "SIGN"
renewProductCode: "20310001"
signPartnerOrder: "MeuwrLoN06OPmaAySCqBZGs3Vzih1Dvn"
type: "wxpay"
amount: "0.0"
oriAmount: "0.0"
ip: "58.252.5.75"
sign: "0T43helxqMRYmJ05tPhL79/OpU0nDr4vzAXSmdzhpvNXpVJhfTSZeaQwuZHjzupR8S/3ZoSusgyRyYR99UuZ4SG0Qdl+mn0LipGdzyPwccqmWkWxa0hBKq0DLFzm37CnAJmwsHMmaCNtH7uUeLhfU2OjGyvlCzXj/hi6K2UorMOZFgYq+Xmbj/6rwi2D9QYVAZCMLFZPFd6KqUfN828YtbYVjHHxLtlPL4QTWxsrRAb4vEsXdqcpF1w3x5EK+7ouyp/NanHOi7Teaoj/tlRZm6Tq/TP+0KMvNcYxxvmAwEYLFKMAPW+qvUyxw5FtIDQfBrc51K2uTi1eLTFy/NhBabvKFIq5LNvh9J3uPNYVn/jk1076C/eUDfSMfscH3wpCqO6CG3nHcMaqjyfCm/HtxRsKxWFXOrQmnSbRVKVezdYcR82Wr7GNzbSYdwfLqWs5EKdU+5AldbfeqOwVncTvQIhKx8608vEtJRjqi7P6NixBCmK3CDJVUsVCAXld/BUB"
signAgreementNotifyUrl: "http://secure.pay-test3.wanyol.com/notify/receiver"
appId: ""
isNeedExpend: "0"
basepay {
  channelId: ""
  notifyurl: "http://secure.pay-test3.wanyol.com/notify/receiver"
  productName: "ONLY_SIGN"
  productDesc: "ONLY_SIGN"
  partnercode: "2031"
  appversion: "260"
  currencyName: "\344\272\272\346\260\221\345\270\201"
  rate: 1.0
  partnerorder: "MeuwrLoN06OPmaAySCqBZGs3Vzih1Dvn"
}
screenInfo: "FULL"

2021-02-22 14:25:35,246-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "5e4f817189548c582b33d1aceedb5a2cc9dab84e1e33537c89b47af42e1e26001613975137TXTW0WxoASewWQk9IVaO2YWlQmNdPjAs"
}
payrequestid: "SN202102221425370581000206802066"
transType: "SIGN"
signType: "APP"

2021-02-22 14:25:35,246-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT contract_code from `db_order_0`.`autorenew_sign_record` where pay_req_id = "SN202102221425370581000206802066"
2021-02-22 14:25:35,250-INFO-wxpay-scarlet-96-回调参数：<xml><change_type>ADD</change_type>
<contract_code>SN202102221425375830080772167531</contract_code>
<contract_expired_time>2022-02-22 14:25:35</contract_expired_time>
<contract_id>7545235962</contract_id>
<mch_id>1259634601</mch_id>
<openid>oCg6Xt8NvRi7jGuap_5B6XdY4oYk</openid>
<operate_time>2021-02-22 14:25:35</operate_time>
<plan_id>120877</plan_id>
<request_serial>718735550836749801</request_serial>
<result_code>SUCCESS</result_code>
<return_code>SUCCESS</return_code>
<return_msg>OK</return_msg>
<sign>99DF6E3A02B060996B3EA50424500875</sign>
</xml>
2021-02-22 14:25:35,421-INFO-wxpay-scarlet-100-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-02-22 14:25:35,421-INFO-wxpay-scarlet-102-回调解析成功
2021-02-22 14:25:35,429-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 14:25:35,429-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTI0MzIzNTkxNzUsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTHFLUlgvNDgxVm4wTlBnMHRsRTBoekt0UWlkOTU4Y1paT3JjWFVaaWdCbGc9In0.MEQCIDNerQ91ofjYoUWHcxjmBpIwDBFkoANGJahYcnZLFr3OAiAYXRHenkKELTRtELmqHC0KEG5WiDIP86ORppeeUp1gcA"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "38845424327525"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "F8SNJBu10m2TIOwDQVAlMWqnXj6oG4fE"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-02-22 14:25:35,500-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "a363c75ca7324ef3890f2bccf749d135"
s_p: "WE1TSzRCV2IyOU1YbklZODg1M2ZZMml2Q3kxZFFHT2podUpOU3BmUTVkMXJyT3JiZHA4ejEzajVnN2NQOHZrRFBMTExLYjlqUXBMVTdFUm80dFl5WENLUjZzclY0OVdrTzVNdzRVWnZtWVNIcGt2bHZWcmdYSkFrRWxKY2ZDQmNjb0dFODFMd1RhNUpsYjJDRUxOcmRJeVk2ZEdhR085MVJGWjdwSElRSWx1UDNBZkRLYU1YMzk1WFFram94dWRQT2c1TUVhSjV2cExlRmk1RXQ4aTR5c2tyMGQ1Y1V3YmY4WllwNEhoSjI2T3RTMVp5OTdsQmZJN0JEb2tNcXdlcDdoU256dWhIY0hMYlVDdFR1MmRLY3RIZjNId1FLcHdCaGNiejdvYVZOSFc4bVFieGtsd09vUEdUS1ZIc1lvZ1JqV2hiWnVweG1KbEhOZjNMRkxZUm03Sk5mTUhCOTQ2UDR5T1c0aVI3SEVvWkhRWDAzTzNKMnVlNVZnQVBoVmQyQ0dNT2xnekRBdnpJaTJDRVI2UXM4RVM2dUZTTlRxWGlWazBqYXlHQ3diWVI1NVJXZWliV3RxbVBtejZFeWszOFl6d3pSMnZ5RXpmR1AyN01WYm5OUVpMZzN4TGxzOW1YdmZmbzdXV1ZRZkdNbjRndWxXYU0xaTZnODZmM1BFOVVPWUxEdndHaEVyUXZabExEOU0xYWRFQzRpOEJnZVc1dUdLN281YWIydkFWbEI4aVBIWTJOeGhjcTNCbTFHaXpMM1RQa1hRcW1mQzJOb1NxdFNKUzc5UUZkdFRBVlZNVUFQWDc0VzZUbzMzWFRkMFJ1bVZ3RGRGU01ENnc3c2JMbnlrM0I3S1RncG83cUtRQzh0d1VMRVIwNzBuRWVtcHJCY3RaUUVJM0tqdUM4N0I5RjhOcVNEMXc0d1NvZ2hGd2NIRjVad0FPNmNnVDVtMzg2aGtrdlVEc0xSUjhlYmNhdEdUWmo4UHN1eG9qMGpqMFZUR1lrMHczaVh6NloxNDRUNVB4em1lVHRXalduQUdBT2I3N01OSlphYjA4TWk3S0c="
m_p: "06Gi427tlGMq66aR0ee56Fq7fe63gWji8Z107wyjDPvz1t3Xuh7xCHz578w42X0f"
e_t: "1614083137885"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "1379.85"
  vouBalance: "0"
  vouList {
    id: 64234430
    type: 2
    minCousume: 100
    vouCount: 99
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64234429
    type: 2
    minCousume: 100
    vouCount: 99
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64234428
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 3
}
userinfo {
  username: "156******06"
}

2021-02-22 14:25:35,501-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 14:25:35,501-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "5.0"
  t_p: "a363c75ca7324ef3890f2bccf749d135"
  imei: ""
  model: "PBDM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "rbdp8z13"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
payrequestid: "SN202102221425370581000206802066"
version: "260"
queryType: "SIGN"

2021-02-22 14:25:35,524-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "succ"
}

2021-02-22 14:25:35,525-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select status from  `db_order_0`.`autorenew_sign_info` where ssoid = "2076075925" and partner_code = "2031" and renew_product_code = "20310001" and pay_type = "wxpay"
2021-02-22 14:25:35,529-INFO-lib.common_biz.fiz_assert-121-签约信息表记录正确
2021-02-22 14:25:35,529-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select status from `db_order_0`.`autorenew_sign_record` where pay_req_id = "SN202102221425370581000206802066"
2021-02-22 14:25:35,533-INFO-lib.common_biz.fiz_assert-135-签约记录表记录正确
2021-02-22 14:25:35,533-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select * from `db_pay_notify_1`.`notify_info` where request_id = "MeuwrLoN06OPmaAySCqBZGs3Vzih1Dvn"
2021-02-22 14:25:35,537-INFO-lib.common_biz.fiz_assert-98-通知表信息详情：{'id': 140440, 'app_id': 10003, 'app_name': 'opaycenter(测试环境)', 'app_sub_id': '2031', 'notify_id': '4631a8bb44cb4afeb48a4d527ec752fa', 'request_id': 'MeuwrLoN06OPmaAySCqBZGs3Vzih1Dvn', 'notify_protocol': 'HTTP', 'notity_detail': '{"appId":10003,"appSubId":"2031","httpReqType":"POST","reqContent":"{\\"ssoid\\":\\"2076075925\\",\\"country\\":\\"CN\\",\\"partnerOrder\\":\\"MeuwrLoN06OPmaAySCqBZGs3Vzih1Dvn\\",\\"notifyType\\":\\"SIGN\\",\\"payType\\":\\"wxpay\\",\\"agreementNo\\":\\"7545235962\\",\\"sign\\":\\"hY5qv5BqvZ+ZBXVUPe01NWKe87dmKzcE3N9dFvRW5vtLEU8y7lt5nL20wwjeru4R1PgTdzif+YH3iXBtFGx3CXfGZqnSWDqGyonsuFC5gBeXVUB2Rz7QRu7WBjy00nRIlwevi/Nkk6OpymeIo+PgHpQKKExSbTcWwAT9k8vTy5w=\\",\\"notifyId\\":\\"IM20210222142537738\\",\\"currency\\":\\"CNY\\",\\"partnerId\\":\\"2031\\",\\"renewProductCode\\":\\"20310001\\",\\"status\\":\\"OK\\"}","reqUrl":"http://secure.pay-test3.wanyol.com/notify/receiver","requestId":"MeuwrLoN06OPmaAySCqBZGs3Vzih1Dvn","signType":"MD5","successResult":"OK","timeStamp":1613975137744,"version":"1.0"}', 'notify_count': 1, 'notify_response': 'OK', 'notify_handler': 'httpNotifyJsonHandler', 'fail_strategy': 'failStrategyHashImpl', 'status': 'SUCCESS', 'success_time': datetime.datetime(2021, 2, 22, 14, 25, 38), 'insert_time': datetime.datetime(2021, 2, 22, 14, 25, 38), 'update_time': datetime.datetime(2021, 2, 22, 14, 25, 38), 'extra_json': None, 'remark': None}
2021-02-22 14:25:35,537-INFO-lib.common_biz.fiz_assert-103-通知成功
2021-02-22 14:26:07,912-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.52.46.169', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-02-22 14:26:08,149-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-02-22 14:26:08,196-INFO-lib.common.db_operation.redis_operation-33-连接redis集群[{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]成功
2021-02-22 14:26:08,197-INFO-lib.common.db_operation.redis_operation-74-connection list: [{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]
2021-02-22 14:26:08,566-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=0
2021-02-22 14:26:08,570-INFO-lib.common_biz.find_merchant_info-28-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1603465160'}
2021-02-22 14:26:08,570-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1603465160' AND pay_channel = 'wxpay'
2021-02-22 14:26:08,574-INFO-lib.common_biz.find_key-108-查询到秘钥信息：g4rTCeoBJFG4KyWCjTQCqltfEDma3yxR
2021-02-22 14:26:08,575-DEBUG-lib.common.session.http.protobuf-35-无需加入随机字节，标志位：1
2021-02-22 14:26:08,575-INFO-lib.common.session.http.protobuf-36-传入的参数：header {
  version: "16.0"
  token: ""
  model: "PAAM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "RvDf0ABC"
  sign: "CC955D1FC09386124482A6FCFD00E6BA"
  sdkVer: "220"
  appVerison: "260"
  ip: "0.0.0.0"
  openId: "E28C3DF751C14EFAB2D9893DC83058B6c7ab335d8d6d240bca10fdf35c0be85e"
  brandType: "OPPO"
  mobileos: "12"
  androidVersion: "28"
}
partnerOrder: "oiPOyg0cVJBh6pum3Lb1dIQkUKRZXx7C"
partnerId: "72724313"
country: "CN"
payType: "wxpay"
channel: "wxpay"
payAmount: "0.01"
currency: "CNY"
product {
  name: "NO_LOGIN_PAY"
  desc: "\350\257\235\350\264\271\345\205\205\345\200\274"
  count: "1"
  priceLocal: "0.01"
}
returnUrl: "finzpay://nearme.atlas.com"
notifyUrl: "http://secure.pay-test3.wanyol.com/notify/receiver"
partnerParams: ""
extendParams: ""
businessChannelId: ""
walletVersion: "0"
oppoucVersion: "80407"
screenInfo: "FULL"

2021-02-22 14:26:09,139-INFO-lib.common.session.http.protobuf-58-返回的参数isSuccess: true
code: "0000"
msg: "{\"appid\":\"wx93eea96ecc33f168\",\"noncestr\":\"8b75a3cd132a40fbacf540f331376eb2\",\"packageNm\":\"Sign=WXPay\",\"partnerid\":\"1259634601\",\"prepayid\":\"wx221426114868843135c8643d33a72f0000\",\"sign\":\"050DEB97FB595FC9A8FEE9D6F7DDB06E\",\"timestamp\":\"1613975171\"}"
data {
  payRequestId: "RM202102221426115XD9ANTW3X013442"
  payUrl: "{\"appid\":\"wx93eea96ecc33f168\",\"noncestr\":\"8b75a3cd132a40fbacf540f331376eb2\",\"packageNm\":\"Sign=WXPay\",\"partnerid\":\"1259634601\",\"prepayid\":\"wx221426114868843135c8643d33a72f0000\",\"sign\":\"050DEB97FB595FC9A8FEE9D6F7DDB06E\",\"timestamp\":\"1613975171\"}"
  parameters: "0000"
}

2021-02-22 14:26:09,140-INFO-wxpay-scarlet-51-回调参数：<xml><transaction_id><![CDATA[1366030301805144395520450944]]></transaction_id>
<nonce_str><![CDATA[uIkn9wyX71DefmRLEvSbVQWoAstB5zqx]]></nonce_str>
<bank_type><![CDATA[OTHERS]]></bank_type>
<openid><![CDATA[oCg6Xt8NvRi7jGuap_5B6XdY4oYk]]></openid>
<sign><![CDATA[C32D3ECA43A9DBA115B92DAD9A233A64]]></sign>
<fee_type><![CDATA[CNY]]></fee_type>
<mch_id><![CDATA[1603465160]]></mch_id>
<cash_fee><![CDATA[1]]></cash_fee>
<out_trade_no><![CDATA[RM202102221426115XD9ANTW3X013442]]></out_trade_no>
<appid><![CDATA[wx93eea96ecc33f168]]></appid>
<total_fee>1</total_fee>
<trade_type><![CDATA[APP]]></trade_type>
<result_code><![CDATA[SUCCESS]]></result_code>
<attach><![CDATA[TEST]]></attach>
<time_end><![CDATA[20210222142609]]></time_end>
<is_subscribe><![CDATA[N]]></is_subscribe>
<return_code><![CDATA[SUCCESS]]></return_code>
</xml>
2021-02-22 14:26:09,249-INFO-wxpay-scarlet-55-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-02-22 14:26:09,249-INFO-wxpay-scarlet-57-回调解析成功
2021-02-22 16:14:46,846-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.52.46.169', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-02-22 16:14:47,125-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-02-22 16:14:47,190-INFO-lib.common.db_operation.redis_operation-33-连接redis集群[{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]成功
2021-02-22 16:14:47,191-INFO-lib.common.db_operation.redis_operation-74-connection list: [{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]
2021-02-22 16:14:51,352-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=0
2021-02-22 16:14:51,355-INFO-lib.common_biz.find_merchant_info-28-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1603465160'}
2021-02-22 16:14:51,356-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1603465160' AND pay_channel = 'wxpay'
2021-02-22 16:14:51,359-INFO-lib.common_biz.find_key-108-查询到秘钥信息：g4rTCeoBJFG4KyWCjTQCqltfEDma3yxR
2021-02-22 16:14:51,384-DEBUG-lib.common.session.http.protobuf-35-无需加入随机字节，标志位：1
2021-02-22 16:14:51,384-INFO-lib.common.session.http.protobuf-36-传入的参数：header {
  version: "16.0"
  token: ""
  model: "PAAM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "RvDf0ABC"
  sign: "CC955D1FC09386124482A6FCFD00E6BA"
  sdkVer: "220"
  appVerison: "260"
  ip: "0.0.0.0"
  openId: "E28C3DF751C14EFAB2D9893DC83058B6c7ab335d8d6d240bca10fdf35c0be85e"
  brandType: "OPPO"
  mobileos: "12"
  androidVersion: "28"
}
partnerOrder: "G6lf2vas0e9NCkLTrOMFKjSJVZcuAXt3"
partnerId: "72724313"
country: "CN"
payType: "wxpay"
channel: "wxpay"
payAmount: "0.01"
currency: "CNY"
product {
  name: "NO_LOGIN_PAY"
  desc: "\350\257\235\350\264\271\345\205\205\345\200\274"
  count: "1"
  priceLocal: "0.01"
}
returnUrl: "finzpay://nearme.atlas.com"
notifyUrl: "http://secure.pay-test3.wanyol.com/notify/receiver"
partnerParams: ""
extendParams: ""
businessChannelId: ""
walletVersion: "0"
oppoucVersion: "80407"
screenInfo: "FULL"

2021-02-22 16:14:51,901-INFO-lib.common.session.http.protobuf-58-返回的参数isSuccess: true
code: "0000"
msg: "{\"appid\":\"wx93eea96ecc33f168\",\"noncestr\":\"0aa2f808708c4c6fb55c508d24e89f96\",\"packageNm\":\"Sign=WXPay\",\"partnerid\":\"1259634601\",\"prepayid\":\"wx22161454251113ada3a02961f156390000\",\"sign\":\"3D27A817C0D222142AB16384AD40A86F\",\"timestamp\":\"1613981694\"}"
data {
  payRequestId: "RM20210222161453I9ZY09TYXD347682"
  payUrl: "{\"appid\":\"wx93eea96ecc33f168\",\"noncestr\":\"0aa2f808708c4c6fb55c508d24e89f96\",\"packageNm\":\"Sign=WXPay\",\"partnerid\":\"1259634601\",\"prepayid\":\"wx22161454251113ada3a02961f156390000\",\"sign\":\"3D27A817C0D222142AB16384AD40A86F\",\"timestamp\":\"1613981694\"}"
  parameters: "0000"
}

2021-02-22 16:14:51,901-INFO-wxpay-scarlet-51-回调参数：<xml><transaction_id><![CDATA[5797738236997004492452516732]]></transaction_id>
<nonce_str><![CDATA[bN5ksdgJYKOIDvPucTaRQBfWAHh07mo3]]></nonce_str>
<bank_type><![CDATA[OTHERS]]></bank_type>
<openid><![CDATA[oCg6Xt8NvRi7jGuap_5B6XdY4oYk]]></openid>
<sign><![CDATA[58B469ABBD7F3C03C243294670181F40]]></sign>
<fee_type><![CDATA[CNY]]></fee_type>
<mch_id><![CDATA[1603465160]]></mch_id>
<cash_fee><![CDATA[1]]></cash_fee>
<out_trade_no><![CDATA[RM20210222161453I9ZY09TYXD347682]]></out_trade_no>
<appid><![CDATA[wx93eea96ecc33f168]]></appid>
<total_fee>1</total_fee>
<trade_type><![CDATA[APP]]></trade_type>
<result_code><![CDATA[SUCCESS]]></result_code>
<attach><![CDATA[TEST]]></attach>
<time_end><![CDATA[20210222161451]]></time_end>
<is_subscribe><![CDATA[N]]></is_subscribe>
<return_code><![CDATA[SUCCESS]]></return_code>
</xml>
2021-02-22 16:14:55,718-INFO-wxpay-scarlet-55-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-02-22 16:14:55,719-INFO-wxpay-scarlet-57-回调解析成功
2021-02-22 16:14:55,727-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 16:14:55,727-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTI0MzIzNTkxNzUsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTHFLUlgvNDgxVm4wTlBnMHRsRTBoekt0UWlkOTU4Y1paT3JjWFVaaWdCbGc9In0.MEQCIDNerQ91ofjYoUWHcxjmBpIwDBFkoANGJahYcnZLFr3OAiAYXRHenkKELTRtELmqHC0KEG5WiDIP86ORppeeUp1gcA"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "10964921834337"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "Ux0VQKR8YHenOt3DdLpTzhaf96PFmoCj"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-02-22 16:14:55,821-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "5afe1ce978624a3ea1c3ebc4efe21ed3"
s_p: "VUFKM1JrSGJLQm5NY05yUW1ZVUJydnBhbWNySlQ5MlYyRWUydlQ5T1RNdndkZXNJOTVESG5QQmlBZFIxU2NaaExLTUJCRGlLejZTREhncmhiMmFIak5xaHpVaG5odEhERGJSUk8xU3YwR1p2QllsVk9GYU85bXNuVlJGWnJzcHphQUx2SlhadGVteGdIaGdWcmN5bVRDZ3NldGpaVndtOGd0N1VlSDZqbmp2T01wd1RsbUpEdk1nMXBVMWJoekIzVDZEd0NvanBTNzhLRllQS3lVa3RCU0VuMmhlMllGRmM4SmtQZ095VEJ4SWZNMVU4TVl2Mjg3MHlmN2xNYjFrbmRpeGlZSDNUU3JtU3QwaDlzV0p5dVVNU2YycUtFQWxoZnBXS0JzVWZzQkhjZkpkNG5aN2FYUVBhZ0dKTWV6NnlPS2tXUXBJajNMdW5rVDhNOTh3SndRRGRHWEhVTEJqZWVXU0FLaGx4b2pjTGdXU3BHaFBIU3pvcmdyNDR1VkVreXVSd1BvSFNybnRlN0hHUnlnMldaODJ1bWMwWDJldU51RW01RzNZNWN6c3hmdFpmUmYwV01HM1dzQUNqdHJGblUzczZtQ3BUTjFleDJGRHZsYmlwZ3dtbVREeVlmOUlXbWNPSDFJUU4wYjBsNGZ0R29hYkRVZURYdm5IdXA4MDcyWmtRb2FLOGRQYmxmbFR5ZGx5aEJaMjNDTGRzZGZXU05WaFUwZlN5d1VNZnJJS0xVQVZHdjlqSzZtRHhmS1RxU29Bc2xxSkFPdzFSWE5Hc3l3TElDMTJEQVU4WTZRdkNiQUtIbW1nNHFHSFRFM2lxbG5naHRKR09NdzA1bHZ4MEVIcUwwR0RpWUFKTk1kWnhUeFE3cG95djJJcTQ2QTlRZHI0dUxUNTE0OWJhdVNIVGd3YmlGaWl2WDY4SVV2TnV3WmhEaVNZeERkVGljSjZqZUdCb3VKWVo1UnVFZVl0UnNuUTE0TzBmQm5hT3BnVGh3QnJNWWM4MTViS2htMHFweGJKZ3Z5Ym1WMmdGc2p1cDNabFlFTnJ4eDFlcHpGQVE="
m_p: "3SQ1Ps8Elx6XVREIpAA2Dn2Fw05K3C74a8sMQ8g7K728XPp5nBXs540zsGiT5d73"
e_t: "1614089698193"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "1379.85"
  vouBalance: "0"
  vouList {
    id: 64234430
    type: 2
    minCousume: 100
    vouCount: 99
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64234429
    type: 2
    minCousume: 100
    vouCount: 99
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64234428
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 3
}
userinfo {
  username: "156******06"
}

2021-02-22 16:14:55,822-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 16:14:55,822-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "5.0"
  t_p: "5afe1ce978624a3ea1c3ebc4efe21ed3"
  imei: ""
  model: "PBDM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "gVrcymTC"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
payrequestid: "RM20210222161453I9ZY09TYXD347682"
version: "260"
queryType: "PAY"

2021-02-22 16:14:55,949-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "2002"
  msg: ""
}
successStatus: "1086"
origAmount: "0.01"

2021-02-22 16:14:55,950-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `db_order_4`.`order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "RM20210222161453I9ZY09TYXD347682"
2021-02-22 16:14:55,954-INFO-lib.common.db_operation.mysql_operation-51-查询数据为空
2021-02-22 16:14:55,954-INFO-lib.common_biz.fiz_assert-25-订单详情：None
2021-02-22 16:14:55,954-INFO-lib.common_biz.fiz_assert-36-订单表信息记录异常
2021-02-22 16:17:31,025-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.52.46.169', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-02-22 16:17:31,298-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-02-22 16:17:31,340-INFO-lib.common.db_operation.redis_operation-33-连接redis集群[{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]成功
2021-02-22 16:17:31,340-INFO-lib.common.db_operation.redis_operation-74-connection list: [{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]
2021-02-22 16:17:31,854-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=0
2021-02-22 16:17:31,858-INFO-lib.common_biz.find_merchant_info-28-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1603465160'}
2021-02-22 16:17:31,859-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1603465160' AND pay_channel = 'wxpay'
2021-02-22 16:17:31,862-INFO-lib.common_biz.find_key-108-查询到秘钥信息：g4rTCeoBJFG4KyWCjTQCqltfEDma3yxR
2021-02-22 16:17:31,863-DEBUG-lib.common.session.http.protobuf-35-无需加入随机字节，标志位：1
2021-02-22 16:17:31,863-INFO-lib.common.session.http.protobuf-36-传入的参数：header {
  version: "16.0"
  token: ""
  model: "PAAM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "RvDf0ABC"
  sign: "CC955D1FC09386124482A6FCFD00E6BA"
  sdkVer: "220"
  appVerison: "260"
  ip: "0.0.0.0"
  openId: "E28C3DF751C14EFAB2D9893DC83058B6c7ab335d8d6d240bca10fdf35c0be85e"
  brandType: "OPPO"
  mobileos: "12"
  androidVersion: "28"
}
partnerOrder: "0t6YJTh8NUVQCIK4L2zmXpowvHqg1D9l"
partnerId: "72724313"
country: "CN"
payType: "wxpay"
channel: "wxpay"
payAmount: "0.01"
currency: "CNY"
product {
  name: "NO_LOGIN_PAY"
  desc: "\350\257\235\350\264\271\345\205\205\345\200\274"
  count: "1"
  priceLocal: "0.01"
}
returnUrl: "finzpay://nearme.atlas.com"
notifyUrl: "http://secure.pay-test3.wanyol.com/notify/receiver"
partnerParams: ""
extendParams: ""
businessChannelId: ""
walletVersion: "0"
oppoucVersion: "80407"
screenInfo: "FULL"

2021-02-22 16:17:32,335-INFO-lib.common.session.http.protobuf-58-返回的参数isSuccess: true
code: "0000"
msg: "{\"appid\":\"wx93eea96ecc33f168\",\"noncestr\":\"18a7ee1f29e44a4d80a0d71b7c591aea\",\"packageNm\":\"Sign=WXPay\",\"partnerid\":\"1259634601\",\"prepayid\":\"wx2216173468706625dbd57122b99dac0000\",\"sign\":\"B77422DCE7183963455B8E35DB53C5CA\",\"timestamp\":\"1613981854\"}"
data {
  payRequestId: "RM20210222161734ACKTRLPV0E864232"
  payUrl: "{\"appid\":\"wx93eea96ecc33f168\",\"noncestr\":\"18a7ee1f29e44a4d80a0d71b7c591aea\",\"packageNm\":\"Sign=WXPay\",\"partnerid\":\"1259634601\",\"prepayid\":\"wx2216173468706625dbd57122b99dac0000\",\"sign\":\"B77422DCE7183963455B8E35DB53C5CA\",\"timestamp\":\"1613981854\"}"
  parameters: "0000"
}

2021-02-22 16:17:32,336-INFO-wxpay-scarlet-51-回调参数：<xml><transaction_id><![CDATA[8149612423726672206036360217]]></transaction_id>
<nonce_str><![CDATA[SXDPz47TVCG2Y0wlUpfkJ3iBguNjHqb1]]></nonce_str>
<bank_type><![CDATA[OTHERS]]></bank_type>
<openid><![CDATA[oCg6Xt8NvRi7jGuap_5B6XdY4oYk]]></openid>
<sign><![CDATA[AEC9086AC60A1387712938FA80EB30E3]]></sign>
<fee_type><![CDATA[CNY]]></fee_type>
<mch_id><![CDATA[1603465160]]></mch_id>
<cash_fee><![CDATA[1]]></cash_fee>
<out_trade_no><![CDATA[RM20210222161734ACKTRLPV0E864232]]></out_trade_no>
<appid><![CDATA[wx93eea96ecc33f168]]></appid>
<total_fee>1</total_fee>
<trade_type><![CDATA[APP]]></trade_type>
<result_code><![CDATA[SUCCESS]]></result_code>
<attach><![CDATA[TEST]]></attach>
<time_end><![CDATA[20210222161732]]></time_end>
<is_subscribe><![CDATA[N]]></is_subscribe>
<return_code><![CDATA[SUCCESS]]></return_code>
</xml>
2021-02-22 16:17:32,440-INFO-wxpay-scarlet-55-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-02-22 16:17:32,440-INFO-wxpay-scarlet-57-回调解析成功
2021-02-22 16:17:32,448-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 16:17:32,448-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTI0MzIzNTkxNzUsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTHFLUlgvNDgxVm4wTlBnMHRsRTBoekt0UWlkOTU4Y1paT3JjWFVaaWdCbGc9In0.MEQCIDNerQ91ofjYoUWHcxjmBpIwDBFkoANGJahYcnZLFr3OAiAYXRHenkKELTRtELmqHC0KEG5WiDIP86ORppeeUp1gcA"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "32879243620421"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "dlvMwYj9Eg4CZGfAkPmH1aiqyFLOQBnV"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-02-22 16:17:32,555-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "53e00af469ad41498d8b57bf4e962614"
s_p: "RjlQb3BYS0tDQzVzcVdTZmVlOW5sdFBiRzZDTnltdGh2MDVNQ0JNZFc1Z0c3eHdVb1lGanJlU0lMVnF0b1h4ck9ibkNZeExORzdGcTJCbW80Mlo0QVNoaTdKcnFNY1lwNzZyU0tmYUc4VEdmeUY4WWhXcDZqcWZFcThURzdQdWdvRlJoNmthSnFSWGJyd2dQRFpsMFoxM0U4d3FZS2FMODBtc1BoeWhxUzdBWTVQODhxS2FWVllLYVo0NDRMTVNqZHptbjRSODlLMmE2VFYxZkMza1JFQnVqMG9DcE5xRjZMc0JIQXU0UHE0QlJHWFVJbmsycFVpVW91OEZFVUZRQzNGRVIwa0pWckJGMTRqbkNWdVdXSTJQYW5MNU51WDk0THUzRE52eUN0ZnBHdmhuN0JGV2FmOFZWT2NhVHRpWE5tRG9oRjBseGdvMU9OMk1OVlRyQk5MMThScDJtNXY5UXZ5Z3Q5QUJyUEs2S2YwVmd6QlRYbnoxak4yVDA3TkF5RHhwUjh6N0w3aU91eWNuNzQyNkdIUUMyOFVveFo3aXlOZDVidWlhSGVrUDNzaE51UGdnbHAxUFFkSlZWNFhLelRHcnQ0NVp0Zlczcnh2TDlVbmVkYUxUcDNoYjlGelZWc3E3SlM2V2dpclVJYWhPdnVma0lCNG5CZGppTEYwMXlBc1p2MkZMTGhkTlIxSHRWUm5tSGNxbkZlQ3cwQmwzZGp6NmNEYVJYVkdOdUdEa0Fab2JoaEEyRU9PdXhiRUFBbEJ5NFk3bWdNek94TFdrcEx1RDJ1Qmx4TWxNT0l6U1NiV042QjdnVFJsR0lWNTY3WExNRk5qUU5Za2UzQmJZekJRVHNhN3hMSFdQU01Oa1ZzOENtU2xWS2l0TTJRelg5dWdZVng0MmhpdzNveG8xcXpDaXBPcVhhb0h2OFFadGZQblBSZmdFM0lJRjZuMnNkdVZoenNZNFMyY0RxSmlCVkJ4RjZSZjZpY1ZKeUx2dElOYkVPU3RDb2ZXSTJraGU1dDQybUhEVTRPWFNHbjVqd2ZtM3hGV2ZBcEd2cU5hbzg="
m_p: "JI1W6WYFPTqgAkarjk8C5seKX0Z5UbUxk0y9CiKQVC3cM41CaL6FG461784pBODE"
e_t: "1614089854936"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "1379.85"
  vouBalance: "0"
  vouList {
    id: 64234430
    type: 2
    minCousume: 100
    vouCount: 99
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64234429
    type: 2
    minCousume: 100
    vouCount: 99
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64234428
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 3
}
userinfo {
  username: "156******06"
}

2021-02-22 16:17:32,555-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 16:17:32,555-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "5.0"
  t_p: "53e00af469ad41498d8b57bf4e962614"
  imei: ""
  model: "PBDM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "7JrqMcYp"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
payrequestid: "RM20210222161734ACKTRLPV0E864232"
version: "260"
queryType: "PAY"

2021-02-22 16:17:32,609-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "2002"
  msg: ""
}
successStatus: "1086"
origAmount: "0.01"

2021-02-22 16:17:32,610-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `db_order_4`.`order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "RM20210222161734ACKTRLPV0E864232"
2021-02-22 16:17:32,614-INFO-lib.common.db_operation.mysql_operation-51-查询数据为空
2021-02-22 16:17:32,614-INFO-lib.common_biz.fiz_assert-25-订单详情：None
2021-02-22 16:17:32,614-INFO-lib.common_biz.fiz_assert-36-订单表信息记录异常
2021-02-22 16:19:13,773-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.52.46.169', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-02-22 16:19:14,047-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-02-22 16:19:14,091-INFO-lib.common.db_operation.redis_operation-33-连接redis集群[{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]成功
2021-02-22 16:19:14,091-INFO-lib.common.db_operation.redis_operation-74-connection list: [{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]
2021-02-22 16:19:14,457-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=0
2021-02-22 16:19:14,461-INFO-lib.common_biz.find_merchant_info-28-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1603465160'}
2021-02-22 16:19:14,462-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1603465160' AND pay_channel = 'wxpay'
2021-02-22 16:19:14,465-INFO-lib.common_biz.find_key-108-查询到秘钥信息：g4rTCeoBJFG4KyWCjTQCqltfEDma3yxR
2021-02-22 16:19:14,466-DEBUG-lib.common.session.http.protobuf-35-无需加入随机字节，标志位：1
2021-02-22 16:19:14,466-INFO-lib.common.session.http.protobuf-36-传入的参数：header {
  version: "16.0"
  token: ""
  model: "PAAM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "RvDf0ABC"
  sign: "CC955D1FC09386124482A6FCFD00E6BA"
  sdkVer: "220"
  appVerison: "260"
  ip: "0.0.0.0"
  openId: "E28C3DF751C14EFAB2D9893DC83058B6c7ab335d8d6d240bca10fdf35c0be85e"
  brandType: "OPPO"
  mobileos: "12"
  androidVersion: "28"
}
partnerOrder: "Xrsfkbl91RT0dCHKWEziYo8nMcjyqeGL"
partnerId: "72724313"
country: "CN"
payType: "wxpay"
channel: "wxpay"
payAmount: "0.01"
currency: "CNY"
product {
  name: "NO_LOGIN_PAY"
  desc: "\350\257\235\350\264\271\345\205\205\345\200\274"
  count: "1"
  priceLocal: "0.01"
}
returnUrl: "finzpay://nearme.atlas.com"
notifyUrl: "http://secure.pay-test3.wanyol.com/notify/receiver"
partnerParams: ""
extendParams: ""
businessChannelId: ""
walletVersion: "0"
oppoucVersion: "80407"
screenInfo: "FULL"

2021-02-22 16:19:14,944-INFO-lib.common.session.http.protobuf-58-返回的参数isSuccess: true
code: "0000"
msg: "{\"appid\":\"wx93eea96ecc33f168\",\"noncestr\":\"a171a4e4ab9f4e35a6c7b39b0e957b0f\",\"packageNm\":\"Sign=WXPay\",\"partnerid\":\"1259634601\",\"prepayid\":\"wx221619172996843ad6851142c492e20000\",\"sign\":\"E11F4A6A540528CAAE18B4FDB6124AAC\",\"timestamp\":\"1613981957\"}"
data {
  payRequestId: "RM20210222161916OWJJMQ6AO2425672"
  payUrl: "{\"appid\":\"wx93eea96ecc33f168\",\"noncestr\":\"a171a4e4ab9f4e35a6c7b39b0e957b0f\",\"packageNm\":\"Sign=WXPay\",\"partnerid\":\"1259634601\",\"prepayid\":\"wx221619172996843ad6851142c492e20000\",\"sign\":\"E11F4A6A540528CAAE18B4FDB6124AAC\",\"timestamp\":\"1613981957\"}"
  parameters: "0000"
}

2021-02-22 16:19:14,945-INFO-wxpay-scarlet-51-回调参数：<xml><transaction_id><![CDATA[5054880253518450184353611161]]></transaction_id>
<nonce_str><![CDATA[LbZUmCDMVTSWX8iIQ0x4vrdOojaJf691]]></nonce_str>
<bank_type><![CDATA[OTHERS]]></bank_type>
<openid><![CDATA[oCg6Xt8NvRi7jGuap_5B6XdY4oYk]]></openid>
<sign><![CDATA[40412F441F9DF5B5A711AFCF5E68CE53]]></sign>
<fee_type><![CDATA[CNY]]></fee_type>
<mch_id><![CDATA[1603465160]]></mch_id>
<cash_fee><![CDATA[1]]></cash_fee>
<out_trade_no><![CDATA[RM20210222161916OWJJMQ6AO2425672]]></out_trade_no>
<appid><![CDATA[wx93eea96ecc33f168]]></appid>
<total_fee>1</total_fee>
<trade_type><![CDATA[APP]]></trade_type>
<result_code><![CDATA[SUCCESS]]></result_code>
<attach><![CDATA[TEST]]></attach>
<time_end><![CDATA[20210222161914]]></time_end>
<is_subscribe><![CDATA[N]]></is_subscribe>
<return_code><![CDATA[SUCCESS]]></return_code>
</xml>
2021-02-22 16:19:15,038-INFO-wxpay-scarlet-55-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-02-22 16:19:15,039-INFO-wxpay-scarlet-57-回调解析成功
2021-02-22 16:19:15,046-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 16:19:15,046-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTI0MzIzNTkxNzUsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTHFLUlgvNDgxVm4wTlBnMHRsRTBoekt0UWlkOTU4Y1paT3JjWFVaaWdCbGc9In0.MEQCIDNerQ91ofjYoUWHcxjmBpIwDBFkoANGJahYcnZLFr3OAiAYXRHenkKELTRtELmqHC0KEG5WiDIP86ORppeeUp1gcA"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "27016686628966"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "7lBz8EWQT3mtGDYeUVaKHpcgrbqAoiCn"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-02-22 16:19:15,115-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "f9a509691a274fbaad0cca9a7bd28dbd"
s_p: "RDVaeTFUMzdzRVBPell5V3Vlc1hKU2EySU9wQ3lsRkhLRkhSNFpvZVNnbU5CYmdWWUUxTU1oTnFObUdHb2JsbEd5M2lybWdNeUlTRUxBeXQ1ZDZOMFd5Q1d2bUNONGcwNGJLT1VkUHJuQ1N0NnpqWXhROVFkaExQRFkzU0VabW11YThnenllNnROYXlja01xRUx1aXpaZTVHTUNRZ0R3emx0Tms3NGZ5b3ViNFZsd3VzUWY1TmtkTzY0enowRWwyeVBYeW1GZnYxVWdOdnFwMTNlU2JUWWhlUFE4M2pSNktGMDJ4MmZoVTBzWTZrZENmOUpqQnVJa01qYnA1TlowbVg1M05XVVd0UjdVUERwbDFPSjlReUN2S0x4Y0l0b3lJUG82Yzh0TkJ0czJ5YjJ3SHRBcVl6SmxNdmpXbTJqWHFLcU45S0FXcHI2SmlESkZwNEtVTkJGVHc3ajNydTZYQndqTUpKT2FqRHF2TmJoa0RuaUJZcUNKOTFVTkRMM0RLN2taOFZ0V3pPMjJtRHdJZkY2dGJsMnNhdVRvTngxeVNOZ2VpS0xid29sa2pENzM1dEFwNk4zRTRaUmdxYlFPRjdnb1dGYVV2NE5PZVd4OEZGMXZDMG5sWkhGZ0VUdElWTDE1a2NiRFNOdlViN3lvem9sakNzVXZERVdBUk5LNDV0YUhaZE96c0hoY1FIeXA3VkZOaVZaOFhMM29kQWhlV0cwOVhrUURXMzJjOEdOTXNOOVRJSjY3NE45UTdJQUt5Sk9TR045ZWFzMFc4cU5yNDVLN2hYR283WWhrV3JzSzk1MWkxdE5WV1pJSngzTnZLNTZ1M0ZQTWF3UDMyakhYdXRZZXE1UUlYbjhnYTZNb05OcUFhYWxxZDg5ZGZyWXI0aDhhZ1Z6dTRBTmgxdmdzVjhKMWZjVkYzNHFnaWcxWkhqaHNNelFJVll1MUtnaTBrVHcySnJod3JncUlBOVc0OGFhUEU3WXhOMnNoNGtWT2Zqb2k4RUNGMzgxZnp3NVAwM0RuZXY2YUROV1ZiSEZXVm5RWGlaNTVCa2U5VEFQYkY="
m_p: "q2yAI8FMeQ9K6qT7ASVSTu23xG2c9K49fO27Fk61914gh396T3L77GSUe5fS05X4"
e_t: "1614089957507"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "1379.85"
  vouBalance: "0"
  vouList {
    id: 64234430
    type: 2
    minCousume: 100
    vouCount: 99
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64234429
    type: 2
    minCousume: 100
    vouCount: 99
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64234428
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 3
}
userinfo {
  username: "156******06"
}

2021-02-22 16:19:15,116-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 16:19:15,116-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "5.0"
  t_p: "f9a509691a274fbaad0cca9a7bd28dbd"
  imei: ""
  model: "PBDM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "mNBbgVYE"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
payrequestid: "RM20210222161916OWJJMQ6AO2425672"
version: "260"
queryType: "PAY"

2021-02-22 16:19:15,161-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "2002"
  msg: ""
}
successStatus: "1086"
origAmount: "0.01"

2021-02-22 16:19:15,162-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select * from `db_pay_notify_1`.`notify_info` where request_id = "Xrsfkbl91RT0dCHKWEziYo8nMcjyqeGL"
2021-02-22 16:19:15,166-INFO-lib.common_biz.fiz_assert-98-通知表信息详情：{'id': 140460, 'app_id': 10003, 'app_name': 'opaycenter(测试环境)', 'app_sub_id': '72724313', 'notify_id': '566eb518257a40189b0ce4937d47c6c7', 'request_id': 'Xrsfkbl91RT0dCHKWEziYo8nMcjyqeGL', 'notify_protocol': 'HTTP', 'notity_detail': '{"appId":10003,"appSubId":"72724313","httpReqType":"POST","reqContent":"{\\"country\\":\\"CN\\",\\"partnerOrder\\":\\"Xrsfkbl91RT0dCHKWEziYo8nMcjyqeGL\\",\\"payResult\\":\\"OK\\",\\"systemOrder\\":\\"RM20210222161916OWJJMQ6AO2425672\\",\\"sign\\":\\"W0t48IHgrUXUPveLjsDdFoJCfj7UcB11xrBovuKcVbqp13o+u6y6tRel2K6xmdpzYUAmVVjlM4+w4sI0GRIvIaHNQPbkbreoJbIZR8oDFG8bLJKbFPJcATWKnSQudaGzNawjxXAeAiQKFKn9Vny5bextFxjXOhkV/YPsGCq1bjw=\\",\\"notify_url\\":\\"http://secure.pay-test3.wanyol.com/notify/receiver\\",\\"productName\\":\\"NO_LOGIN_PAY\\",\\"sendTime\\":\\"1613981957449\\",\\"productDesc\\":\\"话费充值\\",\\"price\\":\\"1\\",\\"notifyId\\":\\"IM2021022216191756\\",\\"orders\\":\\"NO_LOGIN_PAY0.0172724313Xrsfkbl91RT0dCHKWEziYo8nMcjyqeGL\\",\\"payChannel\\":\\"wxpay\\",\\"currency\\":\\"CNY\\",\\"partnerId\\":\\"72724313\\",\\"paySuccessTime\\":\\"2021-02-22 16:19:14\\"}","reqUrl":"http://secure.pay-test3.wanyol.com/notify/receiver","requestId":"Xrsfkbl91RT0dCHKWEziYo8nMcjyqeGL","signType":"MD5","successResult":"OK","timeStamp":1613981957449,"version":"1.0"}', 'notify_count': 1, 'notify_response': 'OK', 'notify_handler': 'httpNotifyJsonHandler', 'fail_strategy': 'failStrategyHashImpl', 'status': 'SUCCESS', 'success_time': datetime.datetime(2021, 2, 22, 16, 19, 17), 'insert_time': datetime.datetime(2021, 2, 22, 16, 19, 17), 'update_time': datetime.datetime(2021, 2, 22, 16, 19, 17), 'extra_json': None, 'remark': None}
2021-02-22 16:19:15,166-INFO-lib.common_biz.fiz_assert-103-通知成功
2021-02-22 17:34:38,602-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.52.46.169', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-02-22 17:34:38,849-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-02-22 17:34:38,918-INFO-lib.common.db_operation.redis_operation-33-连接redis集群[{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]成功
2021-02-22 17:34:38,919-INFO-lib.common.db_operation.redis_operation-74-connection list: [{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]
2021-02-22 17:34:42,664-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no, plan_id FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=1
2021-02-22 17:34:42,667-INFO-lib.common_biz.find_merchant_info-41-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601', 'plan_id': '120877'}
2021-02-22 17:34:42,668-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-02-22 17:34:42,672-INFO-lib.common_biz.find_key-108-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-02-22 17:34:42,677-INFO-lib.common.db_operation.mysql_operation-59-执行sql语句：update `db_order_0`.`autorenew_sign_info` set status = "UNSIGN" where ssoid = "2076075925" and partner_code = "2031" and renew_product_code = "20310001" and pay_type = "wxpay"
2021-02-22 17:34:42,688-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 17:34:42,688-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTI0MzIzNTkxNzUsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTHFLUlgvNDgxVm4wTlBnMHRsRTBoekt0UWlkOTU4Y1paT3JjWFVaaWdCbGc9In0.MEQCIDNerQ91ofjYoUWHcxjmBpIwDBFkoANGJahYcnZLFr3OAiAYXRHenkKELTRtELmqHC0KEG5WiDIP86ORppeeUp1gcA"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "6.0"
appKey: "1234"
count: 10000
order: "26524116461464"
ip: "121.13.218.236"
type: "1"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "P5YvuednDBxW1g84MoHAJfStNLksmXUh"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-02-22 17:34:42,833-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "2ede8afa24a24458a4a272f7de15fbca"
s_p: "OWNQNHVIdjBCbWNjSEtUS2ZBSWdFeTFDQkYzcE0yTUM0UmZON2ZhNVEyUmlEa0FIMkx0WjJEZ2w0SVpnV08xVG5nRzl6RnJnT256ZmxEcTh3OGVjUDFtdThEWXg0NkdjY202WVA0MklyWU1nZjJPd2NkSkFwQzVyVDg0QUxrYWcxNHhza3FqcGh0bUdBd3FFSU9vNHRTd3BiSElmY2ZsaUprU3pwRGh2U2VZamJGd3BxZTdDUFBIUHVQTzR6SGlaczB6WFVkaUpWaUdMalZQZnkyTFo3TnY4N0JXWnpIcTJvcWVhYzBVRFlBZ0dqOWdSNG8zVDFhM25RMUplZUVaVUhKSmNpeWFVSENCbXdVaTRxQzJLWWNqc0hIbnRNSThVck1ueEJlcm9OaXpGc01WbFlDMW9sMVg1cnl1Y1JpeEhkNUFwQWhUekhwdE5Ld0M4Wmo1Umx1UEQyQUJySVU1UGgyc0ozcGxhbmR6aWQ3SWtOUzV1bDVoY1JOdUNKRUFVWGk4VEJ3NHh5bHJBeVJERDZuY1pTWHRRUzZUSFlNbTNYelVBaldUc0tyN2tnN01veVNRRDFYcGlCRGRJOGFOZ0ZsMnhTblpZcHRwRWZmOFlKTXRIb0RKazJDcWdvb1dKaTJ0R1g1Nm1vYUlEQ2pHSThjdVhZbG5Sa1gyQkV6UVdvdTVTSmpFU3YxNkQwRGtyejhOa091alJucXhLU3VlbVBiNlkzUDZpVHc4Rm52QURDR2F6OXJGUGdkaldBM0NubGxOMnphYVJOTG9KYW5iVnZpQWVpWTFSQnh6aHpFWEZzSG9rbUpvQnZib2ZMdTN6OVZIRnpxQklHZ0FHSUxMclhTcmNGb3M4MWVQbkZabzB3NGQ4RE9MYkFLSWU3T2xNV0g0U2ttMVhxQjN1VWNTalA1bDdsbzF6MXc3aGk3aW45VDhhVW02VUVBdXlWempkTDhuUGFMc3Y1QzF6cFptdFk1TlFPTzhBOTFFa0hXbm8yOFpyN24yR1VnSVFiMUpuUkRuaDNXdEZQcGc0TTVtRjBhMDlvV1A1Y2k1bWZwaFM="
m_p: "23e04pbK9dme88mPF8iiSYO1M5kXK89k91F509mp4btQn018AJBQ2136w2lbz8uH"
e_t: "1614094485236"
balanceResult {
  baseresult {
    code: "0000"
    msg: ""
  }
  balance: "0"
  vouBalance: "0"
  vouNum: 0
}
userinfo {
  username: "156******06"
}

2021-02-22 17:34:42,836-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 17:34:42,837-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "1.0"
  t_p: "2ede8afa24a24458a4a272f7de15fbca"
  imei: ""
  model: "PCRM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "cm6YP42I"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: ""
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
transType: "SIGNANDPAY"
renewProductCode: "20310001"
signPartnerOrder: "ux823vD7dPhU4TbZNoESMamAQVrOXHy5"
type: "wxpay"
amount: "0.01"
oriAmount: "0.01"
ip: "58.252.5.75"
sign: "171+ovJ4abiTcgQhDyQ/0MkrJyUhugWVu9qgIDRbu0ov8FHRkMKKPL4Vh1JzUvVtECRmo+K2/S/5g+fS/NQfzQ712okYM3V2ZK6AaLaY5bqWkx2fZ51DWC4nxB+WdLhyj5HZUwMxtbmkHM4gSoo8XpctIXHI3dIcsr4wPZZg8hbRkbzF7bdbsislX/Mfx1ogzHtBEOJNY/ErAcTVGSsXDtakOMRAr5H43vjZHousGG4upyUPSzEop+P1X0YsVr5yKOmR4Vs5NnOBzKmjfqoSIvF4dlnuK8kJU+yogw87rEeU26tB+ILage35WaF1g/rEgKPQptCfw9kDlVaVbsL0/UPFxgMx3UCpC0ko1n31ykILgkBGytAdIqvBTuW4Olo5akxxPWtoncXO3LycZTbQInYXCKV83gERcAorMshstHVH5dzIon8592N1mevRjJDOexZjH3rAG2tFA7sHK/RrfPSNPlHEczw80r91cfMPY43qPXx3CdghUou7raK3Ipwr"
signAgreementNotifyUrl: "http://secure.pay-test3.wanyol.com/notify/receiver"
appId: ""
isNeedExpend: "0"
basepay {
  channelId: ""
  notifyurl: "http://secure.pay-test3.wanyol.com/notify/receiver"
  productName: "SIGN_PAY"
  productDesc: "SIGN_PAY"
  partnercode: "2031"
  appversion: "260"
  currencyName: "\344\272\272\346\260\221\345\270\201"
  rate: 1.0
  partnerorder: "ux823vD7dPhU4TbZNoESMamAQVrOXHy5"
}
screenInfo: "FULL"

2021-02-22 17:34:43,422-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "{\"appid\":\"wx93eea96ecc33f168\",\"noncestr\":\"b3da68a44a0c49568a5fd75169d884b6\",\"packageNm\":\"Sign=WXPay\",\"partnerid\":\"1259634601\",\"prepayid\":\"wx2217344577596294b8471dec56059c0000\",\"sign\":\"5F6BE5CDB70F4E60729A48179B58B51D\",\"timestamp\":\"1613986485\"}"
}
payrequestid: "RM202102221734452076075925131622"
transType: "SIGNANDPAY"
signType: "APP"

2021-02-22 17:34:43,423-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT contract_code from `db_order_0`.`autorenew_sign_record` where pay_req_id = "RM202102221734452076075925131622"
2021-02-22 17:34:43,443-INFO-wxpay-scarlet-96-回调参数：<xml><change_type>ADD</change_type>
<contract_code>SN202102221734454870584162383612</contract_code>
<contract_expired_time>2022-02-22 17:34:43</contract_expired_time>
<contract_id>7615354701</contract_id>
<mch_id>1259634601</mch_id>
<openid>oCg6Xt8NvRi7jGuap_5B6XdY4oYk</openid>
<operate_time>2021-02-22 17:34:43</operate_time>
<plan_id>120877</plan_id>
<request_serial>818460332142201540</request_serial>
<result_code>SUCCESS</result_code>
<return_code>SUCCESS</return_code>
<return_msg>OK</return_msg>
<sign>B1BA87D9DD21BBA005D5B126365CF154</sign>
</xml>
2021-02-22 17:34:43,670-INFO-wxpay-scarlet-100-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-02-22 17:34:43,670-INFO-wxpay-scarlet-102-回调解析成功
2021-02-22 17:34:43,670-INFO-wxpay-scarlet-51-回调参数：<xml><transaction_id><![CDATA[8803182914190232958525076592]]></transaction_id>
<nonce_str><![CDATA[Y4RUGC26AsfjzHWD09onPMwbJIZqrcLu]]></nonce_str>
<bank_type><![CDATA[OTHERS]]></bank_type>
<openid><![CDATA[oCg6Xt8NvRi7jGuap_5B6XdY4oYk]]></openid>
<sign><![CDATA[EE265313093A97441CFAF99D2A1DA8E5]]></sign>
<fee_type><![CDATA[CNY]]></fee_type>
<mch_id><![CDATA[1259634601]]></mch_id>
<cash_fee><![CDATA[1]]></cash_fee>
<out_trade_no><![CDATA[RM202102221734452076075925131622]]></out_trade_no>
<appid><![CDATA[wx93eea96ecc33f168]]></appid>
<total_fee>0.01</total_fee>
<trade_type><![CDATA[APP]]></trade_type>
<result_code><![CDATA[SUCCESS]]></result_code>
<attach><![CDATA[TEST]]></attach>
<time_end><![CDATA[20210222173443]]></time_end>
<is_subscribe><![CDATA[N]]></is_subscribe>
<return_code><![CDATA[SUCCESS]]></return_code>
</xml>
2021-02-22 17:34:43,770-INFO-wxpay-scarlet-55-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-02-22 17:34:43,770-INFO-wxpay-scarlet-57-回调解析成功
2021-02-22 17:34:43,779-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 17:34:43,779-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTI0MzIzNTkxNzUsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTHFLUlgvNDgxVm4wTlBnMHRsRTBoekt0UWlkOTU4Y1paT3JjWFVaaWdCbGc9In0.MEQCIDNerQ91ofjYoUWHcxjmBpIwDBFkoANGJahYcnZLFr3OAiAYXRHenkKELTRtELmqHC0KEG5WiDIP86ORppeeUp1gcA"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "51576595959154"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "Vn0fzhZF5gIdB2iHxDbSMeQ4sqPjtNpE"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-02-22 17:34:43,886-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "4ab71302cc704ea1ba2cc6ddcaa09ed5"
s_p: "Wjc5TTF5YVpGUmhWcGN4d0RtcVJoNEtYaHdLMVlSb0sxYmR3MmFvS0NoMmI4eEpPdzBYWVdRcGhPYXhrcnZBZ1dvenNLWkFTTWx5RE1jaW9hY0VPWWRvTnFmWlRJQmZBYlhtbkVGWE5uSWg0bVM0T0RuT3RPVVZEclh0Y3lFbGpZR21zdk1IZEhCcFZNN0xzV0ZaY3dJRUtybzdMRWUyWDZEWE42TVdTdTlFajludmZkWFBMbE5jb2VObnVlclh5bDVpclFNRG5RWWpZNG0xUXlheENmSWhINHpDNVg0dzNmNDY5cjNwWFJGMDFlTmRKQklpZWZIQkdCY3ZScGRWSXNmTFFJMWdFUGYwS1d1eEk4bVVheUJtckRPT1daSmRsc2JWNEJ6c1EwMU1POU1YZFhLR2l2cU9DWUp5ZTUzUG8xMWh1Umk2eGdVQVN3cXA0V0doRnBNWjlVR3UyVTFyVDFLOFhlbzkzVnc3cUlBTmVEN1BRMUtOa01PdTdJRGRBR0tYcnRpTjlNRVZTS0lZS0lDbEU0aTU0aUZRamtnbXR5UUlwbjhnTmRpcm1ONUlLWlZYZ29Rc3NIRmpUaUswTEpCamc3THZDbmlja1luUEp5Qk40NDB6dzNOR2tsRXNqUGxKMnBLSWlDQTVWcjR5U2RScng2UWhzN0RCVG9EWDZkbm5tVDBWZFZSRnF2RUdFNk8xWG5NSlViQUxwUTBrTlNKTHR1VEY0Q0pvZWFMaGZJeGhwUE9EQ1dCMDZ5ZXlSWWNYSFJDaWgzS1dVTDlYelJ6T2kxYlNqMTByQVhKa0pzNDVOWlRHU3NHSlVDeEU4b3NwYTFUdVl1T1RLV0czNnlWak1Id0JKMnRhYWNqZDVHRERtQ2FqOXI0QzJPWjR6Q2t2Um5KZkQ4RWJ5ZTV4b3g5Q3ZRUkNLU1J0c2FpQ01Bak9DQmNzQWtwSmszNWFyQzVTY0E4a1pqaVdTRWZ6WEhYZmk2SWxLNGI5V292cWRDc2p4N0dOS28wNW5CQTZQN1M2b3MxeVdaTlphS0VDYzk4eW5hbEhXM0g1S1RPNks="
m_p: "fal1Hat6472P118zHzOv607U77wXFb8HIQpoO82sjc96nHjA2645V8vCiujt0qpp"
e_t: "1614094486263"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "1379.85"
  vouBalance: "0"
  vouList {
    id: 64234430
    type: 2
    minCousume: 100
    vouCount: 99
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64234429
    type: 2
    minCousume: 100
    vouCount: 99
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64234428
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 3
}
userinfo {
  username: "156******06"
}

2021-02-22 17:34:43,887-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 17:34:43,887-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "5.0"
  t_p: "4ab71302cc704ea1ba2cc6ddcaa09ed5"
  imei: ""
  model: "PBDM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "MlyDMcio"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
payrequestid: "RM202102221734452076075925131622"
version: "260"
queryType: "PAY"

2021-02-22 17:34:43,953-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "2002"
  msg: ""
}
successStatus: "1086"
origAmount: "0.00"

2021-02-22 17:39:47,810-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.52.46.169', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-02-22 17:39:48,087-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-02-22 17:39:48,131-INFO-lib.common.db_operation.redis_operation-33-连接redis集群[{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]成功
2021-02-22 17:39:48,132-INFO-lib.common.db_operation.redis_operation-74-connection list: [{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]
2021-02-22 17:39:48,498-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no, plan_id FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=1
2021-02-22 17:39:48,501-INFO-lib.common_biz.find_merchant_info-41-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601', 'plan_id': '120877'}
2021-02-22 17:39:48,502-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-02-22 17:39:48,505-INFO-lib.common_biz.find_key-108-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-02-22 17:39:48,509-INFO-lib.common.db_operation.mysql_operation-59-执行sql语句：update `db_order_0`.`autorenew_sign_info` set status = "UNSIGN" where ssoid = "2076075925" and partner_code = "2031" and renew_product_code = "20310001" and pay_type = "wxpay"
2021-02-22 17:39:48,520-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 17:39:48,521-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTI0MzIzNTkxNzUsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTHFLUlgvNDgxVm4wTlBnMHRsRTBoekt0UWlkOTU4Y1paT3JjWFVaaWdCbGc9In0.MEQCIDNerQ91ofjYoUWHcxjmBpIwDBFkoANGJahYcnZLFr3OAiAYXRHenkKELTRtELmqHC0KEG5WiDIP86ORppeeUp1gcA"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "6.0"
appKey: "1234"
count: 10000
order: "59901553729982"
ip: "121.13.218.236"
type: "1"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "AVJMKSDYQ45hflaH0PgZev9TFtyIjNCL"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-02-22 17:39:48,642-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "3633434879b54270a9ef19448b58faf7"
s_p: "SXZ6bGJ2N1Z6N3E4OFN6bEpPbUcxT0J2THpDU1ZaRHJYSFdxalBUZFprSldyamhPd29CTXdHMTljcVlZemNuaHNCQ1J1UHFDQVNnWjM0TENVUDFrVmhTNTZRSEhaRWlLaDVCRGdPdmVlNzRWNURnZlJuZkNiRGNQTDFLbW9UYUI4Mnc1VW1uRVNWZGozTDJjVG9zMGRHTlZVZVF1VEM3WVdZQVpPQ1kzaVpJMklNV1ZYVVdiUEt1OFQybHhVQm9mSGEyZFNmYzZ2ajE5Sk9RU0VhWHZyQjBkclRYT1lvZmJNbm9TUERHb2dacW5oek91azhhRTJnaGQzSXY0RjlLUGZtY0MxQkMyOXI2b0h6MU42UWVxN0xkc1RnT1hLTFhhdzZCMWxLRU5OQWFhMGRRZmVIWk9IZVRJdVl6ZXB5NDd1em12Tml2TlZTYkNqcHpoTktVYnQ1dDc1emk0UDVweG5pVkwwNWV1OVlWNWh4T0JqUmtLUlM4RW9HN0pQRzdCeUF3SXFGOVpQbm8wckQ4TnhPbjlqTFgwOUwyQ0taaVdRZ0Z2bTR5a3pLNlF2cG5vRmVickFLVldpVkVBelRFdVJuRU9WWGdtMTV6SENBeTh2Rk4xYU16akx6bUs5YzREUGhoc01BSEpWTHhrdW83VkRuTzF5eGVDUEtyb0Zjc0hrREZBd3hKako4SmF3VndSdjlzQU1MaEliSmNsaVRtZVVTbHdhUW90eWVCcFNUYVpCMVlSYkhuSUJlWEkzbDV4WkJoeGJLOGRmYlU2dGVKNXhVbEFMVzNGY3d3UkpPc0g3anRJelJXNW9mTnpZYUNmamFMaVYydGZsdzlObENsNXFmZUh3RTFCMkw4cnVRYXNwZ1lNb2NXMGtQWlFlMmlIdW9acjlJbVRuOTJyRFNMTzFQRGtSaVd4cWloQlg4c2IyQ1hSUW9VRWtlTHZiV0ZiMnBwRFhSdDBIWUtuVzBxOXBkaXJ2TkZmWEhYSEhLVTR1eGtFYkZNdXZCUVJ3d2VFWGo4U3pwM2NQbllCbVFGUHFXekpZZFdqdzBwMFpvd1I="
m_p: "Gx7re4VJgrdbgeD7xZz6x097nan7woD6z14pOm48Vr11V8rJ9ZDziK486f7gTh94"
e_t: "1614094791050"
balanceResult {
  baseresult {
    code: "0000"
    msg: ""
  }
  balance: "0"
  vouBalance: "0"
  vouNum: 0
}
userinfo {
  username: "156******06"
}

2021-02-22 17:39:48,645-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 17:39:48,645-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "1.0"
  t_p: "3633434879b54270a9ef19448b58faf7"
  imei: ""
  model: "PCRM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "6QHHZEiK"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: ""
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
transType: "SIGNANDPAY"
renewProductCode: "20310001"
signPartnerOrder: "w8hpA3nOJjDyekKRlXBmFHYVSUEs2ocx"
type: "wxpay"
amount: "0.01"
oriAmount: "0.01"
ip: "58.252.5.75"
sign: "WYedJVm6FbEz6LiguFa+uiPrNv72Qs1NP1Z/7Zs37Rh5q+ER3kYkbIiBStEmN08phsES9ISZElB0xb5ks3BWwodMh4B912oxVzb9fDk6kPbfE2MWwHqvmDE0XgnlA6kTfuccy+UHmC3DoyUTMCAbQldohhlAcnfco/0GM4LoGbZo9a0GMWSEdxlV4YMZaIG+ekuQXLDssvNMR0WaVGYHeT09DOVIiGk5TtZ1y3P79fxXKVb2IPkkWJnH7WGWngTli2tEvUtX1vN7yIIpHAjox/WGQ8idxmhOrhz5DcwwQnXyT/rTHuzb1mcXJwmsOf9hjLZuc9kVNt3Cv408KwdfkTrdptg8WAeByxXXcs++K0mnAb5E2pY7wfDHhlPH+rR6czoTvHrfehXo8YdUNnQ7JDVQTbT/cVeMRYxKubOkTAoJ1JGkdCZ660b0jNXioE9617UZwBtswcg/7grWxoG0KN94ldi8Yn1NCRMj5O5KWLVjKXTWo02RoALvnW6ADBWV"
signAgreementNotifyUrl: "http://secure.pay-test3.wanyol.com/notify/receiver"
appId: ""
isNeedExpend: "0"
basepay {
  channelId: ""
  notifyurl: "http://secure.pay-test3.wanyol.com/notify/receiver"
  productName: "SIGN_PAY"
  productDesc: "SIGN_PAY"
  partnercode: "2031"
  appversion: "260"
  currencyName: "\344\272\272\346\260\221\345\270\201"
  rate: 1.0
  partnerorder: "w8hpA3nOJjDyekKRlXBmFHYVSUEs2ocx"
}
screenInfo: "FULL"

2021-02-22 17:39:49,090-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "{\"appid\":\"wx93eea96ecc33f168\",\"noncestr\":\"12a9f286330b4a0097558730ef3863b0\",\"packageNm\":\"Sign=WXPay\",\"partnerid\":\"1259634601\",\"prepayid\":\"wx221739514485525baa9aff7c7db2520000\",\"sign\":\"CC195592C7025F22B8052772B6FE7FCA\",\"timestamp\":\"1613986791\"}"
}
payrequestid: "RM202102221739512076075925076712"
transType: "SIGNANDPAY"
signType: "APP"

2021-02-22 17:39:49,091-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT contract_code from `db_order_0`.`autorenew_sign_record` where pay_req_id = "RM202102221739512076075925076712"
2021-02-22 17:39:49,095-INFO-wxpay-scarlet-96-回调参数：<xml><change_type>ADD</change_type>
<contract_code>SN202102221739510235115341121057</contract_code>
<contract_expired_time>2022-02-22 17:39:49</contract_expired_time>
<contract_id>9484499575</contract_id>
<mch_id>1259634601</mch_id>
<openid>oCg6Xt8NvRi7jGuap_5B6XdY4oYk</openid>
<operate_time>2021-02-22 17:39:49</operate_time>
<plan_id>120877</plan_id>
<request_serial>111031398426292142</request_serial>
<result_code>SUCCESS</result_code>
<return_code>SUCCESS</return_code>
<return_msg>OK</return_msg>
<sign>145C26034C43B531FB5EFC45380C9556</sign>
</xml>
2021-02-22 17:39:49,189-INFO-wxpay-scarlet-100-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-02-22 17:39:49,189-INFO-wxpay-scarlet-102-回调解析成功
2021-02-22 17:39:49,190-INFO-wxpay-scarlet-51-回调参数：<xml><transaction_id><![CDATA[2560664337493317299329591560]]></transaction_id>
<nonce_str><![CDATA[L2tvyA751fzhZiJ0D96QYIreNFVpSGsx]]></nonce_str>
<bank_type><![CDATA[OTHERS]]></bank_type>
<openid><![CDATA[oCg6Xt8NvRi7jGuap_5B6XdY4oYk]]></openid>
<sign><![CDATA[DB5BFEC0D0FCF09E6A9A317583945DA5]]></sign>
<fee_type><![CDATA[CNY]]></fee_type>
<mch_id><![CDATA[1259634601]]></mch_id>
<cash_fee><![CDATA[1]]></cash_fee>
<out_trade_no><![CDATA[RM202102221739512076075925076712]]></out_trade_no>
<appid><![CDATA[wx93eea96ecc33f168]]></appid>
<total_fee>0.01</total_fee>
<trade_type><![CDATA[APP]]></trade_type>
<result_code><![CDATA[SUCCESS]]></result_code>
<attach><![CDATA[TEST]]></attach>
<time_end><![CDATA[20210222173949]]></time_end>
<is_subscribe><![CDATA[N]]></is_subscribe>
<return_code><![CDATA[SUCCESS]]></return_code>
</xml>
2021-02-22 17:39:49,303-INFO-wxpay-scarlet-55-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-02-22 17:39:49,303-INFO-wxpay-scarlet-57-回调解析成功
2021-02-22 17:39:49,312-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 17:39:49,312-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTI0MzIzNTkxNzUsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTHFLUlgvNDgxVm4wTlBnMHRsRTBoekt0UWlkOTU4Y1paT3JjWFVaaWdCbGc9In0.MEQCIDNerQ91ofjYoUWHcxjmBpIwDBFkoANGJahYcnZLFr3OAiAYXRHenkKELTRtELmqHC0KEG5WiDIP86ORppeeUp1gcA"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "90763122170522"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "TKiZS89sRo1w5Wn02QENAabL3GcIfYOe"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-02-22 17:39:49,430-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "e3a7da62806748cfadba726284c6afe2"
s_p: "Q3M4NnhnTGZZN1Fmd05oWERGVVV4U2JjMXJnTDNyd3FaUk9tdXQ3VldKTnczV1Y3Z2oxd00zb0VDWU1KZUhtcEVxYjdJQVNFMUkyVHZvcmxKVFJDcVgxVlNESGdET0dta0paQWJodExvM1ZmdFp0Q0VIU3lmbXhBdXpiaEtjSnhWMnVkSjhUMDZ6cndlSnJiNXNCUXZFNEN1anpmVjVHUzF1SFFUUVBaZFh3bXJ1ZU90Q2VaVkRUbmtnQkk4OTBXaHdxMjNCZHd0R2pyNkpDbm1TSWZKa3hRN2VITXFsVXlCQm16REtHWm9GREpYUWtIaWtlMEI2ZWYwOFhBTzV2SWo0QU15dG5vWlJ0V0VBY0syTFVmY1JUZ01PSFJLVUVpUjZKcEVtUk9BdDZyUWRXWnBQZ0w4Rm1yUE5VbGNnNzVDVTRZeHFoU3ptdzZYSks1TmY5OGtWZGNVZHU4VW5wQW5nYlVhVEF2WkZPRk5MeFkzUEpNc0VaNUd6WjdDOGI0UFk5YzNjNEZwWHMwTG56N2NvZ3hzNEhEVjRsb3JoOXBBUEt3YTNVQW1BQlUzWVpZelBzbUVLWm5vcmN0WER5bHJqaWVvUTVCWmJuV3hTVzF4M3RTVVh3c3M3VEZPd2E5WjhKSkpyZ093VzdBZ0sxSldCenZGZlBDcXp5b0xiVmd5azl2VlYyb09FSnAyV1M5WUVvSlF6TEhBdXNqa3VXTXZVeEpjWWRlUXhRUHBXOG9DRHZWTE43N1MxbUpSRmlmUkMzejE1dVFTWWRHUW1LTVJTZ3dIMU9ybnZIRDdhaG5mVXpYNHhPbDhZTnBkMHhibWR0aUZXd0t0QWVPRUxaczlWQTJyMEVqUEEwM3NLVXJBQnJoS2tNSkdYQmpleVFJdjRCZEw0RnpKVlgwRmlpYUpzVFJHZzg1YVNEOGV0dHVIZUNJS25mNzZhSWlsUW02YWc3YlpFbXk4Mm1IZ29UeE9NZ1JJQkZjMGlqUVJLWWtxSW9haEF5T0gxR3hxVlN5ZWZkUmRnUUJ0T2Nlb0Y3NEhpYXNkR1V2QWdVRzUxNHA="
m_p: "1K07155E7UFqc0306g7wxl8X0i0U17309mDvgzDuRTK4A6i49vzwROQQ37Z1cAim"
e_t: "1614094791800"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "1379.85"
  vouBalance: "0"
  vouList {
    id: 64234430
    type: 2
    minCousume: 100
    vouCount: 99
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64234429
    type: 2
    minCousume: 100
    vouCount: 99
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64234428
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 3
}
userinfo {
  username: "156******06"
}

2021-02-22 17:39:49,431-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 17:39:49,431-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "5.0"
  t_p: "e3a7da62806748cfadba726284c6afe2"
  imei: ""
  model: "PBDM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "JTRCqX1V"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
payrequestid: "RM202102221739512076075925076712"
version: "260"
queryType: "PAY"

2021-02-22 17:39:49,504-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "2002"
  msg: ""
}
successStatus: "1086"
origAmount: "0.00"

2021-02-22 17:39:49,505-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `db_order_4`.`order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "RM202102221739512076075925076712"
2021-02-22 17:39:49,533-INFO-lib.common_biz.fiz_assert-25-订单详情：{'id': 21481, 'pay_req_id': 'RM202102221739512076075925076712', 'notify_id': '2560664337493317299329591560', 'partner_order': 'w8hpA3nOJjDyekKRlXBmFHYVSUEs2ocx', 'amount': 0, 'refund': 0, 'contents': 'SIGN_PAY', 'products_name': 'SIGN_PAY', 'counts': 1, 'ssoid': '2076075925', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': '1259634601', 'ip': '58.252.5.72', 'mac': '', 'model': 'PCRM00', 'app_package': 'com.example.pay_demo', 'app_ver': '260', 'sdk_ver': '1.0', 'partner_code': '2031', 'notify_url': 'http://secure.pay-test3.wanyol.com/notify/receiver', 'status': 'OK', 'channel_id': '', 'channel_type': 'NATIVE', 'pay_type': 'wxpay', 'direct_pay': 'ZHICHONG', 'game_type': 'WANGYOU', 'present_amount': 0, 'original_amount': 1, 'discount_info': '', 'extra': None, 'remark': None, 'request_time': datetime.datetime(2021, 2, 22, 17, 39, 51), 'success_time': datetime.datetime(2021, 2, 22, 17, 39, 49), 'modify_time': datetime.datetime(2021, 2, 22, 17, 39, 49), 'trade_type': 'CZ', 'kebi_spent': 0, 'voucher_amount': 0, 'voucher_info': None, 'country_code': 'CN', 'currency': 'CNY', 'openid': None, 'brand_type': 'OPPO', 'mobile_os_ver': None, 'platform': None, 'screen_info': None, 'combine_order': 'N', 'voucher_id': None, 'factor': None}
2021-02-22 17:39:49,534-INFO-lib.common_biz.fiz_assert-36-订单表信息记录异常
2021-02-22 17:40:58,813-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.52.46.169', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-02-22 17:40:59,051-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-02-22 17:40:59,093-INFO-lib.common.db_operation.redis_operation-33-连接redis集群[{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]成功
2021-02-22 17:40:59,093-INFO-lib.common.db_operation.redis_operation-74-connection list: [{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]
2021-02-22 17:40:59,452-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no, plan_id FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=1
2021-02-22 17:40:59,456-INFO-lib.common_biz.find_merchant_info-41-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601', 'plan_id': '120877'}
2021-02-22 17:40:59,456-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-02-22 17:40:59,459-INFO-lib.common_biz.find_key-108-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-02-22 17:40:59,464-INFO-lib.common.db_operation.mysql_operation-59-执行sql语句：update `db_order_0`.`autorenew_sign_info` set status = "UNSIGN" where ssoid = "2076075925" and partner_code = "2031" and renew_product_code = "20310001" and pay_type = "wxpay"
2021-02-22 19:22:19,448-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.52.46.169', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-02-22 19:22:19,751-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-02-22 19:22:19,796-INFO-lib.common.db_operation.redis_operation-33-连接redis集群[{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]成功
2021-02-22 19:22:19,797-INFO-lib.common.db_operation.redis_operation-74-connection list: [{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]
2021-02-22 19:22:22,992-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no, plan_id FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=1
2021-02-22 19:22:22,995-INFO-lib.common_biz.find_merchant_info-41-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601', 'plan_id': '120877'}
2021-02-22 19:22:22,996-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-02-22 19:22:22,999-INFO-lib.common_biz.find_key-108-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-02-22 19:22:23,003-INFO-lib.common.db_operation.mysql_operation-59-执行sql语句：update `db_order_0`.`autorenew_sign_info` set status = "UNSIGN" where ssoid = "2076075925" and partner_code = "2031" and renew_product_code = "20310001" and pay_type = "wxpay"
2021-02-22 19:22:45,911-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.52.46.169', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-02-22 19:22:46,212-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-02-22 19:22:46,262-INFO-lib.common.db_operation.redis_operation-33-连接redis集群[{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]成功
2021-02-22 19:22:46,262-INFO-lib.common.db_operation.redis_operation-74-connection list: [{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]
2021-02-22 19:22:46,611-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no, plan_id FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=1
2021-02-22 19:22:46,615-INFO-lib.common_biz.find_merchant_info-41-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601', 'plan_id': '120877'}
2021-02-22 19:22:46,616-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-02-22 19:22:46,619-INFO-lib.common_biz.find_key-108-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-02-22 19:22:46,623-INFO-lib.common.db_operation.mysql_operation-59-执行sql语句：update `db_order_0`.`autorenew_sign_info` set status = "UNSIGN" where ssoid = "2076075925" and partner_code = "2031" and renew_product_code = "20310001" and pay_type = "wxpay"
2021-02-22 19:22:46,636-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 19:22:46,637-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTI0MzIzNTkxNzUsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTHFLUlgvNDgxVm4wTlBnMHRsRTBoekt0UWlkOTU4Y1paT3JjWFVaaWdCbGc9In0.MEQCIDNerQ91ofjYoUWHcxjmBpIwDBFkoANGJahYcnZLFr3OAiAYXRHenkKELTRtELmqHC0KEG5WiDIP86ORppeeUp1gcA"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "6.0"
appKey: "1234"
count: 10000
order: "23628123160630"
ip: "121.13.218.236"
type: "1"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "xvR2NwLYPHykEgtV5dJqb8a9Ael4hs0Z"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-02-22 19:22:46,796-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "eb8bfdf847cb47f5aaa78569d27e7c85"
s_p: "SmJCaXdrdnRMcUowTVp4dzc4SWxMTW4wQnV3VlpvWkxxZjJyVmwzakRubVlRaUVXUGRqQjZheDZ3U3piNUhwaHhsbHRZcUpGcFRyM0dGQUlIVVc0SW1kVmNJQ3l4WmVXUkoxcFJ3NUNWTjdzdjVJT0U3V1BkRGJISXRYRmxIaU1nWUVGM2gzZU44eGV4Q0ZiWkNtd0w1UTN2N3J6YmsxVFJZSnJVZGtDYlBob2dJTjk3Y0w4RXNTanFFVnRSQ1pWZWo5SWU5T1ZxV1lQQm43MHIwZHNLSHBUUU5nWVNGY0dwWGRvNGJXMUVkbnJJek9PMVRIOTFYV2gyTG12U0U4bXZadm53TFlNZTNwakYzYzUwSDRHeHV6TEx1aFZqbEFMazNKQUprVU1oVHUzQU9qVjFJU0lMeXFWTnY3VE5kZXB4QVhQTzdIbldjM1dSNTNYSTdYb2xJODM1dmRZR3c4QTRJTUZud1pGSG9wb1Vyd0x3dDRkWDRwWENLTkJyR0g3Sm1nZW16WW9GTnlrRlNsVTI1N0s0azFYRk5YVGlXTzJqbkY0WVQ0VXlzbk9SUThTMUx1RWxCRGRnNnVmdWdlbUducUNKNnhoVU0zcTRlS2ZNYkgwMnlOZFFqREdNYm52eHgwYXVkUzJaOUUxcXNISW9HRUNxcHJETDZUYzFxZ3ljSDg0TVNlb0l4THc4ZUpOOE5YRkppWWh2SERJazFHRlE5S3hpdEYxdFRGc0ZIM1pJUUd4ZWdZdUlhUFdGb1I1WVlqMDczamMwcXFXSmNSTlpYbk4zZE53cjh3ZDkxMmhhdDZ1dFpvSlNZbHpaZlhYOHZFblhPckV5dUJMeVJNRmZkSFl2TGVSazh2b3ZlMVR3MURVTERzVkFyODlzdjByeU9iSVJuNHVFaERUUHJraDIzaW1YbzFEam4zb1ExTWZRSzFuUnlJWEtCOTgyejh4MFlNTlZhZFJWc2hYbkQ0SllGcWpyNmlhcTRnWW9UbkhCUjVhNlVzaTVFd2t4UTNOdEZnRmhLTHZWNUQ1QUIyblNzN0kwV1VnbklpWGhPZDE="
m_p: "AaOJL9E2fSs8Za0s438QLj1417DWL2fI1Q5HyF41oFmX4r1Gl57Y9Q21PebJb06a"
e_t: "1614100969209"
balanceResult {
  baseresult {
    code: "0000"
    msg: ""
  }
  balance: "0"
  vouBalance: "0"
  vouNum: 0
}
userinfo {
  username: "156******06"
}

2021-02-22 19:22:46,827-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 19:22:46,827-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "1.0"
  t_p: "eb8bfdf847cb47f5aaa78569d27e7c85"
  imei: ""
  model: "PCRM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "3eN8xexC"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: ""
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
transType: "SIGNANDPAY"
renewProductCode: "20310001"
signPartnerOrder: "M5ITmzXSLhtbfZieW6J20CNg7xYk4Gco"
type: "wxpay"
amount: "0.0001"
oriAmount: "0.0001"
ip: "58.252.5.75"
sign: "1KVooneE/WBC9Vslt95EAuClLD6x5JT2CLIVN75Lt7y5hhUR1rSqlMKACRjnPBpdNDQltzt9/tgL9vIiq0egj2XHniS82vytXZ0IOWGLZ1pjDxNRzevW5oTGJ3wChRPVqvvTy/G19crMRXu0fWRtY9pe7loeNx8V+c6HDZzsLO2VraTQSl/RNAGMNTKDt+nxJmjjai2rGXJZcjcURiZNhLfZzc+lK7+UOZ2p+mZFq9aDjt2Fm4OI1SKoVUFNt4a+GjMJPw/Tm/UItA9n98AGgjqxXGyrt93rFss7INSViK+rlkcSvx8LzEPTy/NBklo/DdaKUletdvKXOAh89acIDHXgvomZQ2TmlXVEyJYxwB+5I/IXmmOhbD/Ooqt/i8UpMTaSTcIxO9Bopi8Txt2KIor32uUwHiEK3Eg45Oc5CCrbiuNETeq85oSzCOjwUf9yMERD3XcL63j4kTnRpb32Wjxk1DdI4MkWRv/FNiC+DjkoaDIwc7INv9xR9cUBJRVe"
signAgreementNotifyUrl: "http://secure.pay-test3.wanyol.com/notify/receiver"
appId: ""
isNeedExpend: "0"
basepay {
  channelId: ""
  notifyurl: "http://secure.pay-test3.wanyol.com/notify/receiver"
  productName: "SIGN_PAY"
  productDesc: "SIGN_PAY"
  partnercode: "2031"
  appversion: "260"
  currencyName: "\344\272\272\346\260\221\345\270\201"
  rate: 1.0
  partnerorder: "M5ITmzXSLhtbfZieW6J20CNg7xYk4Gco"
}
screenInfo: "FULL"

2021-02-22 19:22:46,892-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "5003"
  msg: "PARAMETER ERROR"
}
payrequestid: ""

2021-02-22 19:22:46,893-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT contract_code from `db_order_0`.`autorenew_sign_record` where pay_req_id = ""
2021-02-22 19:22:46,897-INFO-lib.common.db_operation.mysql_operation-51-查询数据为空
2021-02-22 19:23:50,663-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.52.46.169', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-02-22 19:23:50,904-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-02-22 19:23:50,948-INFO-lib.common.db_operation.redis_operation-33-连接redis集群[{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]成功
2021-02-22 19:23:50,948-INFO-lib.common.db_operation.redis_operation-74-connection list: [{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]
2021-02-22 19:23:51,333-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no, plan_id FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=1
2021-02-22 19:23:51,336-INFO-lib.common_biz.find_merchant_info-41-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601', 'plan_id': '120877'}
2021-02-22 19:23:51,337-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-02-22 19:23:51,341-INFO-lib.common_biz.find_key-108-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-02-22 19:23:51,345-INFO-lib.common.db_operation.mysql_operation-59-执行sql语句：update `db_order_0`.`autorenew_sign_info` set status = "UNSIGN" where ssoid = "2076075925" and partner_code = "2031" and renew_product_code = "20310001" and pay_type = "wxpay"
2021-02-22 19:23:51,355-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 19:23:51,355-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTI0MzIzNTkxNzUsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTHFLUlgvNDgxVm4wTlBnMHRsRTBoekt0UWlkOTU4Y1paT3JjWFVaaWdCbGc9In0.MEQCIDNerQ91ofjYoUWHcxjmBpIwDBFkoANGJahYcnZLFr3OAiAYXRHenkKELTRtELmqHC0KEG5WiDIP86ORppeeUp1gcA"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "6.0"
appKey: "1234"
count: 10000
order: "58458974961568"
ip: "121.13.218.236"
type: "1"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "CQ75xF1lsHyif4crNh3B9oSRdOIgDkba"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-02-22 19:23:51,544-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "f60499c60c7b4a63927607dfa9bab0c1"
s_p: "OVZZSk40WGlWQmgxZUVqWHF2cGhyazJYSGwxVHFTOEJYUmlEUEdsMTlvMGx0dzlOQ3g4cGlyUFQ2dU1GWGR4Z1ZpTmgzWVhvbGRLZnpiWHcwOVJnMlpObjJXMzVESnRGSTlKOHR5M29Fdzgyc0lSdVdjNFd6WVUyNEsxM3ZxdWFsbzVNOWtFeVY4RHBFbUtzdXk2ZkVZMUxxbmNNTDZnOFBLR0NpMG9ZS2lHMzZ3eUF4YktGMTBXYXd1YjhHdEpuNDIwMkt2ZFg2TjZ6c1ZLOUNjZmoyYzN6bXJKRURTeG0xaWVUUjJXR1hyZlEwNmtGMVJBdHJudEMxYWk4MENsY3Z0WmhjRmpMcFdBMGdDY3Z5bFJYdTFLRjNKRjVEMXlkMVJhcGlXNEFZVTZ6NjVUWGJCSDA2d1VvaGJmU0ZENnlVN05naFZERHM3WG1EVUxaMVpyZEI5bUpibm1rSExkY3FOQjVHbFBDRWg5eHRpdWZCU041M25XR05LOWs3T0Y3ZzRYRFpYU3VNVGJmU0EwVExjZVdNR0loaWR0UmdVU0xWbjc5eDlHbVpyMUNnTVd2UkxybGFLalZTNEQweHo5S1FtaXdTSUFva1NWdHhROFZnSVV2cW16dHVaVWkwdHBRTzROSEw4MGpKcnYwVFMyakdFTUw0QVdUT1dJWWlkdmV5WlNwcHZGWkZHR21nT1ZWc09XUjRqZEE2YzkyOXFuUENOU0N3aVoxTUszZ3RENzB6NmVST0xXZ2dvQUhTTUJoYnpZank1TVA0N1Z4UUpXUTFhVnVPS2h3UEhVTHkzSnplS21VQ2ZZWWN4UUF6elBBeDhxMzI1aTgzRlN6c3RrRVZYQlNSc2JhOVlOQXoxMDhPc2RaYjAwRjNRUkhNMXRDMDIwaDdJTWRob1JhYXhqaDl5SjNwbXgzMHM3a1BZM0lxalVndm1YVnduSHJYZVRmdEJYSjYwdEtsWlNseGVFMmhZSnZZdnJHWWdmZ1NReTVSTENIODBQZWFoclppZTY0RXRqV1F2NDRRa25yaG1tZ29UYXkxT25ycVQzcWl3SDA="
m_p: "k0AUu7I03M63N2Q5KO8Mnw9X93Mhhw6Oo8Q10N6uT0DaZ636sBI06AIJ3WA2jIQt"
e_t: "1614101033964"
balanceResult {
  baseresult {
    code: "0000"
    msg: ""
  }
  balance: "0"
  vouBalance: "0"
  vouNum: 0
}
userinfo {
  username: "156******06"
}

2021-02-22 19:23:51,546-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 19:23:51,547-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "1.0"
  t_p: "f60499c60c7b4a63927607dfa9bab0c1"
  imei: ""
  model: "PCRM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "Nn2W35DJ"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: ""
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
transType: "SIGNANDPAY"
renewProductCode: "20310001"
signPartnerOrder: "H0wIhjxUZpRXDLiNtJM7EOA1mTqrcsGQ"
type: "wxpay"
amount: "0.01"
oriAmount: "0.01"
ip: "58.252.5.75"
sign: "ppp0gwsgRcI7yaUFPkXnmbrzNff4EjeZNLDR2hGqfcJ+Ucs9yzDiQ2DNJPy2AylTEFHgOSiVE76YPpUfJigit4fA2uBxaK7MsWvmQ9JMeYIpgvoIIPKVXgR90/zCYuqGUvlkB5mALmDfSKyp1UMywTuG7+1AxRnZoYvcIxdpRuaM3HoI/RgmAPNE5N72wVJGjf26rZlNe97proP3sdOuZU5rQWFpOTpRA3X9cWcdmQhdFn8MxF6Na1A9v3wjpVcoVHx/kl8I/0nvj6gbrVQXUx1PLJqtmAjpyZV4X+fU/1juU9ytV/bjPM78WbPWSET2KM3g9sfI3cfRKHptgxxpd3NdT4QWjWnsdBJ5D2WJuqu8/WZUceghfD/qWkAdMJ63yc7qDwncbQQHE77XUZQBKJvTlHnzelbrr4pacJgjcbF+ypPtE92o3AX/1SAUoBdTjf1M5SjoYBwMPrvfX6PDJ1cnDz3sa42SLvmgHnsM5oFyTgMyfh9lIUwFMNrpZBnW"
signAgreementNotifyUrl: "http://secure.pay-test3.wanyol.com/notify/receiver"
appId: ""
isNeedExpend: "0"
basepay {
  channelId: ""
  notifyurl: "http://secure.pay-test3.wanyol.com/notify/receiver"
  productName: "SIGN_PAY"
  productDesc: "SIGN_PAY"
  partnercode: "2031"
  appversion: "260"
  currencyName: "\344\272\272\346\260\221\345\270\201"
  rate: 1.0
  partnerorder: "H0wIhjxUZpRXDLiNtJM7EOA1mTqrcsGQ"
}
screenInfo: "FULL"

2021-02-22 19:23:52,009-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "{\"appid\":\"wx93eea96ecc33f168\",\"noncestr\":\"d13272cd067144f280e58cf72520b5c0\",\"packageNm\":\"Sign=WXPay\",\"partnerid\":\"1259634601\",\"prepayid\":\"wx22192354357092012240970271fb2c0000\",\"sign\":\"27FEE2285257361C77DC49CCE46C1959\",\"timestamp\":\"1613993034\"}"
}
payrequestid: "RM202102221923542076075925113362"
transType: "SIGNANDPAY"
signType: "APP"

2021-02-22 19:23:52,010-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT contract_code from `db_order_0`.`autorenew_sign_record` where pay_req_id = "RM202102221923542076075925113362"
2021-02-22 19:23:52,123-INFO-wxpay-scarlet-96-回调参数：<xml><change_type>ADD</change_type>
<contract_code>SN202102221923547457112347188045</contract_code>
<contract_expired_time>2022-02-22 19:23:52</contract_expired_time>
<contract_id>2369585116</contract_id>
<mch_id>1259634601</mch_id>
<openid>oCg6Xt8NvRi7jGuap_5B6XdY4oYk</openid>
<operate_time>2021-02-22 19:23:52</operate_time>
<plan_id>120877</plan_id>
<request_serial>473509319156420554</request_serial>
<result_code>SUCCESS</result_code>
<return_code>SUCCESS</return_code>
<return_msg>OK</return_msg>
<sign>5D68662A7F38EF4D25C4A4FC32893435</sign>
</xml>
2021-02-22 19:23:53,544-INFO-wxpay-scarlet-100-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-02-22 19:23:53,544-INFO-wxpay-scarlet-102-回调解析成功
2021-02-22 19:23:53,544-INFO-wxpay-scarlet-51-回调参数：<xml><transaction_id><![CDATA[0580771710048980518924209265]]></transaction_id>
<nonce_str><![CDATA[5JKkyWi4MdFvcpISwzamNP9Cl0XDVZ8L]]></nonce_str>
<bank_type><![CDATA[OTHERS]]></bank_type>
<openid><![CDATA[oCg6Xt8NvRi7jGuap_5B6XdY4oYk]]></openid>
<sign><![CDATA[C2BDB9FE2B2CDCBD7A1C3575EB02F61F]]></sign>
<fee_type><![CDATA[CNY]]></fee_type>
<mch_id><![CDATA[1259634601]]></mch_id>
<cash_fee><![CDATA[1]]></cash_fee>
<out_trade_no><![CDATA[RM202102221923542076075925113362]]></out_trade_no>
<appid><![CDATA[wx93eea96ecc33f168]]></appid>
<total_fee>1</total_fee>
<trade_type><![CDATA[APP]]></trade_type>
<result_code><![CDATA[SUCCESS]]></result_code>
<attach><![CDATA[TEST]]></attach>
<time_end><![CDATA[20210222192353]]></time_end>
<is_subscribe><![CDATA[N]]></is_subscribe>
<return_code><![CDATA[SUCCESS]]></return_code>
</xml>
2021-02-22 19:23:53,723-INFO-wxpay-scarlet-55-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-02-22 19:23:53,723-INFO-wxpay-scarlet-57-回调解析成功
2021-02-22 19:23:53,731-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 19:23:53,731-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTI0MzIzNTkxNzUsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTHFLUlgvNDgxVm4wTlBnMHRsRTBoekt0UWlkOTU4Y1paT3JjWFVaaWdCbGc9In0.MEQCIDNerQ91ofjYoUWHcxjmBpIwDBFkoANGJahYcnZLFr3OAiAYXRHenkKELTRtELmqHC0KEG5WiDIP86ORppeeUp1gcA"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "72221561752306"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "A6LCdspQv8EYMklbGISPq5e2i9KjuBHR"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-02-22 19:23:53,863-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "9787c07bb73c49d2b852d51860be13b0"
s_p: "eG1sZVY1VjZxZWVIcGNyYVVVRDVNQkM5bjZZQktjSzZTbHlJNTgzaHdOSHlTM2dzbWZOaVVUOVgwNzlMS3ZqRUdnTkJ2ZlZWTllKRVgxaHZDazl6WXhJbTY5am83cFAweFpqYUF2aDJSeUpVbmswZDJ5UEZ0WGx5QjRYY3RGb3k1bHpoRVZiTUlOUUJMZExOVHo4V0lPbmkzcHVKMzA1MUYydXFBc2VRNThBMFZ6ZFBEZEpTV0NMZW5STnlYS2NFWm9GNE5CSHJkNU1YbU1Fd0t1REtMMmRZT1VBNDlZVEh2OThkOWJFbmwzMXJSZVFOMld4WjBNd0tNRnNaT0xtNHczaUNYSnNHY1dCTW5xMUFwTkE4Ujl5UzlXZXcxMnprMGUyQTZoamYxaERkZ0tiRGl4MTdkd1RnRkRCYjhzak92eXZObHhLczlQU0xrd2ZXd3MycUhlU2c3d01pb01ZNmlQS1dtS3RqSm1SR3ZYandCa3VtdG1Ya2JYdjc4eEFzUlpaUm5zMUwxTXBoeXBaRU5wWWU4MWw2WjI1RXJXeFFBUzdQaXRWelZ4eldWbDdFazdtTVpFM2lhOXlYYWN0Sk5tamVDdkRwY1RjWU1SRjJ5c2Z2RnVxUUtxY0V4NmhBOU5lekRQTGpBbXdteUtZa2sweVZja1YxcExqNzJSS2hNTWR2cDVpb1ZTTWxpNDIzV3VRNjV0NlZMWUV5V3NzS0d6YXFsejRjOHNyaXRtOUNMMG1hZE9xRVQ3RkFpMkdZY3hpbGUyaDJUNU1QMHBaYjFSYnpzNVhWS2t5ajNaM2NTa3ZLWlQ1Wkd6NHFmRWtqS2h1TmxoQkZidUFFOE10Y0c1UDlTUG1ZNHRMSnNZTGFsYlBUakFPR0lGc21CTE4wZGN3emlYQWt4T0dKbzg4T0NmcDIwWHhvc2lnUG1OR3l6eld6bWFGT0g4NFVaWGxtQjV6Mzdvd1BBNTJyb3lrWjAyZ21LbmdIUmFFanZLb3dpbllneDAwdWtOU0xyRDdHcmUwcXJETnNSVWxvdXdSZE12cjVTRVF3SXViNDdIeFQ="
m_p: "sl4w9w3fMzh36efIIEo7OXj630o886gntc0Qu0yumC8Et95sqp2tO75L6Z6M8t2x"
e_t: "1614101036232"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "1379.85"
  vouBalance: "0"
  vouList {
    id: 64234430
    type: 2
    minCousume: 100
    vouCount: 99
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64234429
    type: 2
    minCousume: 100
    vouCount: 99
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64234428
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 3
}
userinfo {
  username: "156******06"
}

2021-02-22 19:23:53,864-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 19:23:53,864-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "5.0"
  t_p: "9787c07bb73c49d2b852d51860be13b0"
  imei: ""
  model: "PBDM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "mfNiUT9X"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
payrequestid: "RM202102221923542076075925113362"
version: "260"
queryType: "PAY"

2021-02-22 19:23:53,943-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "2002"
  msg: ""
}
successStatus: "1086"
origAmount: "0.01"

2021-02-22 19:23:53,943-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `db_order_4`.`order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "RM202102221923542076075925113362"
2021-02-22 19:23:53,961-INFO-lib.common_biz.fiz_assert-25-订单详情：{'id': 21482, 'pay_req_id': 'RM202102221923542076075925113362', 'notify_id': '0580771710048980518924209265', 'partner_order': 'H0wIhjxUZpRXDLiNtJM7EOA1mTqrcsGQ', 'amount': 1, 'refund': 0, 'contents': 'SIGN_PAY', 'products_name': 'SIGN_PAY', 'counts': 1, 'ssoid': '2076075925', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': '1259634601', 'ip': '58.255.79.104', 'mac': '', 'model': 'PCRM00', 'app_package': 'com.example.pay_demo', 'app_ver': '260', 'sdk_ver': '1.0', 'partner_code': '2031', 'notify_url': 'http://secure.pay-test3.wanyol.com/notify/receiver', 'status': 'OK', 'channel_id': '', 'channel_type': 'NATIVE', 'pay_type': 'wxpay', 'direct_pay': 'ZHICHONG', 'game_type': 'WANGYOU', 'present_amount': 0, 'original_amount': 1, 'discount_info': '', 'extra': None, 'remark': None, 'request_time': datetime.datetime(2021, 2, 22, 19, 23, 56), 'success_time': datetime.datetime(2021, 2, 22, 19, 23, 53), 'modify_time': datetime.datetime(2021, 2, 22, 19, 23, 53), 'trade_type': 'CZ', 'kebi_spent': 0, 'voucher_amount': 0, 'voucher_info': None, 'country_code': 'CN', 'currency': 'CNY', 'openid': None, 'brand_type': 'OPPO', 'mobile_os_ver': None, 'platform': None, 'screen_info': None, 'combine_order': 'N', 'voucher_id': None, 'factor': None}
2021-02-22 19:23:53,961-INFO-lib.common_biz.fiz_assert-34-订单表信息记录正确
2021-02-22 19:25:43,719-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.52.46.169', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-02-22 19:25:43,993-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-02-22 19:25:44,034-INFO-lib.common.db_operation.redis_operation-33-连接redis集群[{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]成功
2021-02-22 19:25:44,034-INFO-lib.common.db_operation.redis_operation-74-connection list: [{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]
2021-02-22 19:25:44,450-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no, plan_id FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=1
2021-02-22 19:25:44,453-INFO-lib.common_biz.find_merchant_info-41-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601', 'plan_id': '120877'}
2021-02-22 19:25:44,454-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-02-22 19:25:44,457-INFO-lib.common_biz.find_key-108-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-02-22 19:25:44,462-INFO-lib.common.db_operation.mysql_operation-59-执行sql语句：update `db_order_0`.`autorenew_sign_info` set status = "UNSIGN" where ssoid = "2076075925" and partner_code = "2031" and renew_product_code = "20310001" and pay_type = "wxpay"
2021-02-22 19:25:44,474-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 19:25:44,474-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTI0MzIzNTkxNzUsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTHFLUlgvNDgxVm4wTlBnMHRsRTBoekt0UWlkOTU4Y1paT3JjWFVaaWdCbGc9In0.MEQCIDNerQ91ofjYoUWHcxjmBpIwDBFkoANGJahYcnZLFr3OAiAYXRHenkKELTRtELmqHC0KEG5WiDIP86ORppeeUp1gcA"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "6.0"
appKey: "1234"
count: 10000
order: "34961268829919"
ip: "121.13.218.236"
type: "1"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "ySKL2Qm3ATHPgXqIEi9t6ounrb81YUjC"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-02-22 19:25:44,559-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "3bce493e673d45d0a0913f0c578984e7"
s_p: "ZmdBVmxmTHRqcGZmNW5DeUozUGRVY3ZZQ1JFOUJpRXd4Z1JObHZuWFd1aVhCSHlLVWdaa0dxenNEcFpwMlV5RUVhaUlXQzI2aGZhOGRKTlhyVXVuR3hvY3Jld0RmZURRa1F2aDJNeGpwVldDODkxRTZvY3I4VkxBS0lUZGU1MFMwWmVFNXhNTWZIV1NlamhBRUo5OFMxYTU1OFF5NHlJNW1INXJzM29RSXdLcWZiVTEybVEwa1p2Y1Y4OUxYU2RrdkRhMEZxZUN3TkpXWmhUSlphWTZ2SWNTNUJwdEdCc0tXSzZrMmxkcUlwTVQ0Wjd2Y1R2VEFjY1o1cWRoaGhRdzROcjRIcTBtajlsUTM1Nm9KRndmdjhSdHkyNWZ1SWRtRVZaRWplUVpCVDVoQ3dIejBiZ00wZUNpVjFZVmZMMjhJbEkyY1BpVmRrS2UzbzVRbU5YbFZ2ZzJVSm5FS2xOaW5pc1I2ZWtCZUtoMkR1SzFQZFNLeXN1RG10OGtJdzloZUJzNGtYN1EwNEFsd3VWdkR4UUh5VHVzMmlDbHBwbUJCUkM3c1UyR0dZaTRoOTA3U2lIWFcxaHlzVU1VSTg4YmM3YXlKYlFlUmZrdTJWODNUY0JQbzlTbFBuUVhIVldsVWFJMXgyR21McW1Bdkw1UlZUa0hVYmF2ZTBlWUU1R1NWcmpQOGQ4SHh1MjRpZWhUcGdPVEVwSWJCS0FBdTJSTFBsWjFZV0xrNFdqNmRHUHJyT2NJMEJobTc4NGdyOTlnOG85Um5GVVpaSGV3UjcxRDhFc04xQjZKZnVwcGgwc29SeEtEZWdvS2NHN0VoeE1VVnZzQjllYkdrSnhVU2hiRHJ1ZG1vWEVlamMxTkxHbTdNZ3ExMHI1RjJ0UUtkS2dzSmdQdHRVY3M2S0JkU0VlbXlHOUNOY0hMS1M0bUFuZ1RsdnFndGczNkFMdFJCYjVwWUFsc0NvWHhubEladm5iRTJpNUp1NW1yVlVBeG5QN1owYk5QamhVblBrYUVMNEFIcndpMmVLT0NuY21KUUdybEpQR3puYzRSNzl0ZVc3NjM="
m_p: "6vS09N2zL0h4KW55e5nk63zdsL685mEq695Kfr6PYUKr2y38QBH6D1W4e62YKjq8"
e_t: "1614101146981"
balanceResult {
  baseresult {
    code: "0000"
    msg: ""
  }
  balance: "0"
  vouBalance: "0"
  vouNum: 0
}
userinfo {
  username: "156******06"
}

2021-02-22 19:25:44,562-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 19:25:44,562-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "1.0"
  t_p: "3bce493e673d45d0a0913f0c578984e7"
  imei: ""
  model: "PCRM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "5xMMfHWS"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: ""
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
transType: "SIGNANDPAY"
renewProductCode: "20310001"
signPartnerOrder: "F8WdCPcDqsTYtnOeN9BiyoAHMEjVQZg0"
type: "wxpay"
amount: "0.01"
oriAmount: "0.01"
ip: "58.252.5.75"
sign: "IlNc7DXMn8V+IgkZxOi1U1bVMOXhJAWdXtTYBVBUR+aNOp5Bpf+jfdSzNbEU0HnzIY2g9VKqqV5nl0lGuLFjst7FMiXZjYDcjdXK3/rnbO6lkGgu2REN2vwl7FExtWGD7Sw9+rpWe0vPgizxTHIA5hyvoqVvSnGMmrqE2NrDUFdPyu7aWEiC2j1uujVeDxjB4V8hAppycw0q460y4/suQYofElB92PsrN7kUzSeF8GuOVrAhL3XVOJ0X0x9xAP681cWrYI2u6ZS90J4O1J1J6BGKM9iuyugEDeSZyGyTc12U+tdV6NDUeFg4kgp+YXHy6Lef8e8V9RGsbNFP9qC4k6Yqmk1Bu3IQWH49omv37on8tWfKw2NdGPukffikP1X3s/alFcAE2WxQaXVSK7LII2feFMS+eH2UOnqpWD/7fEsDwGeev04sY3RRO3if3JOs9dwYl9IoqbgmF5mmDLmJ0y4D7mIqFXdnOpOgnmT7dTzHKnXZ5Ahq37o/jzu1WKZq"
signAgreementNotifyUrl: "http://secure.pay-test3.wanyol.com/notify/receiver"
appId: ""
isNeedExpend: "0"
basepay {
  channelId: ""
  notifyurl: "http://secure.pay-test3.wanyol.com/notify/receiver"
  productName: "SIGN_PAY"
  productDesc: "SIGN_PAY"
  partnercode: "2031"
  appversion: "260"
  currencyName: "\344\272\272\346\260\221\345\270\201"
  rate: 1.0
  partnerorder: "F8WdCPcDqsTYtnOeN9BiyoAHMEjVQZg0"
}
screenInfo: "FULL"

2021-02-22 19:25:45,010-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "{\"appid\":\"wx93eea96ecc33f168\",\"noncestr\":\"0d16dcaebc2940ad9c0b311709b2e156\",\"packageNm\":\"Sign=WXPay\",\"partnerid\":\"1259634601\",\"prepayid\":\"wx22192547378324710a3e05aa89b9730000\",\"sign\":\"CDE11F33CB0CED4EBAD9909DF1EFF53E\",\"timestamp\":\"1613993147\"}"
}
payrequestid: "RM202102221925472076075925473572"
transType: "SIGNANDPAY"
signType: "APP"

2021-02-22 19:25:45,011-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT contract_code from `db_order_0`.`autorenew_sign_record` where pay_req_id = "RM202102221925472076075925473572"
2021-02-22 19:25:45,014-INFO-wxpay-scarlet-96-回调参数：<xml><change_type>ADD</change_type>
<contract_code>SN202102221925470155773382286003</contract_code>
<contract_expired_time>2022-02-22 19:25:45</contract_expired_time>
<contract_id>5930694697</contract_id>
<mch_id>1259634601</mch_id>
<openid>oCg6Xt8NvRi7jGuap_5B6XdY4oYk</openid>
<operate_time>2021-02-22 19:25:45</operate_time>
<plan_id>120877</plan_id>
<request_serial>894336728311253862</request_serial>
<result_code>SUCCESS</result_code>
<return_code>SUCCESS</return_code>
<return_msg>OK</return_msg>
<sign>7054F9BB1A1BE4E406EEBF1CD01C6167</sign>
</xml>
2021-02-22 19:25:45,123-INFO-wxpay-scarlet-100-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-02-22 19:25:45,123-INFO-wxpay-scarlet-102-回调解析成功
2021-02-22 19:25:45,123-INFO-wxpay-scarlet-51-回调参数：<xml><transaction_id><![CDATA[5840328032124037096196797807]]></transaction_id>
<nonce_str><![CDATA[dpG0hZNUziQP9bDF1KeyvoajM8smWruH]]></nonce_str>
<bank_type><![CDATA[OTHERS]]></bank_type>
<openid><![CDATA[oCg6Xt8NvRi7jGuap_5B6XdY4oYk]]></openid>
<sign><![CDATA[B1F9BC4AD4472D0463E77DCE5A69E6AB]]></sign>
<fee_type><![CDATA[CNY]]></fee_type>
<mch_id><![CDATA[1259634601]]></mch_id>
<cash_fee><![CDATA[1]]></cash_fee>
<out_trade_no><![CDATA[RM202102221925472076075925473572]]></out_trade_no>
<appid><![CDATA[wx93eea96ecc33f168]]></appid>
<total_fee>1</total_fee>
<trade_type><![CDATA[APP]]></trade_type>
<result_code><![CDATA[SUCCESS]]></result_code>
<attach><![CDATA[TEST]]></attach>
<time_end><![CDATA[20210222192545]]></time_end>
<is_subscribe><![CDATA[N]]></is_subscribe>
<return_code><![CDATA[SUCCESS]]></return_code>
</xml>
2021-02-22 19:25:45,235-INFO-wxpay-scarlet-55-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-02-22 19:25:45,235-INFO-wxpay-scarlet-57-回调解析成功
2021-02-22 19:25:45,243-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 19:25:45,243-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTI0MzIzNTkxNzUsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTHFLUlgvNDgxVm4wTlBnMHRsRTBoekt0UWlkOTU4Y1paT3JjWFVaaWdCbGc9In0.MEQCIDNerQ91ofjYoUWHcxjmBpIwDBFkoANGJahYcnZLFr3OAiAYXRHenkKELTRtELmqHC0KEG5WiDIP86ORppeeUp1gcA"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "35683345903869"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "3dhZqM8PKSNUzsij5HnWREXf04LpGQAr"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-02-22 19:25:45,350-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "96dbdab0e6f647e3b2c5f25636dbd6d9"
s_p: "VWJUNGVtR1V5NHhwT1ZsTHhDdmhVdHdsUlRIeDMwb0JxV0kyZW9DeVM0eUhJc1VGNGpyUTFxWnVSR1BGSzZsTXRpY0NDMEdCbmVzWUdzUEdseldOeG42QXdxYWZBdUZuS3FibXMyYlBsNlU4ekx1RDRMazNkM2M1VTFhclFES05meXpVY0RCYXRYc1hKNEdWaDlPTDY0SnJMOGhTOGYzVWZIWEhVYXFhRUZudVZXZ2hYWVhSbTVpMkN5U3FwbGpIQnlZTFFQREpsV1RUREh3Y012OTlCam9hNWVMdkg4Zlp3bGM4S2s1bG9NQU1rRFlpa0VpOWY5MVBHemZqUXpsa0pVdW5sZTRNeDRMNVFOUnplVkJHcFNUR1U3Yks1TGpQYlRHVUpGcVdxcVR6MXZLZ0FEb1JGTFZIdjV2ZHFsZWg1WWtoUHNNYTl0TXFsZWpVRkc3Sno5ODRpN0ZXMGRFMHdtYmZOQUxjeGQwYVEzN1FDb2RVVVFpTTJ4SHFuS29oajlMTXVuU1lCc1ljWUU4SHkzeHNFdmJxTWNVaG4xMWhxOXQ4UUNwN2VWb3NIOFNYRnpuek10R0lBT0Vka0JwS1luTXZwSnU2RjZjcUxNVFNOd04yR3MwNW1DbHJDdkpabDk2T0ZFejM5TjVCV2JSekhTZVp3TnNnZEZEYkxsckwyT0ZpRlJncE93ZXRFOG1ZOG9VSWFxU08wRlN2Q2FhdlBaM1lpZU5iZnBSY2xDV2pCaW9RYXBHcWE2TXY5M1ZmaklQOFZLeFdGY1dCdDBSS0ZxeGZTb0h3NjNwT3h4RzM2SE56empvenh2eUsyOHJEYXI3emV4b3d5aTZVS1hsYmRMZEtPaTlBUnZIM1pCSktLMFF1a2I0OXc5MnJjYnpDMnFIVk9hdmowcXg0UU9QZEtqb3R3NERLbEFDY2VXeG9Jc3AwNVNtSDZLOW9zeFVsWGpva0xEUkFxVmpKd1RsajRIcERTdE1UU29JdVIxbmxLV1FoNW5zV0dVQ1FiejZvSlJBS0E5MGtsOWFOZ3kyT3ZUaVB0clZrVnh2MGVkY1M="
m_p: "11nBdr4FQ969ugLU1alpJ18dP5ZDG4fNG0W4WR1D2qlM7L9wz82g5SGvf6VeCJo0"
e_t: "1614101147740"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "1379.85"
  vouBalance: "0"
  vouList {
    id: 64234430
    type: 2
    minCousume: 100
    vouCount: 99
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64234429
    type: 2
    minCousume: 100
    vouCount: 99
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64234428
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 3
}
userinfo {
  username: "156******06"
}

2021-02-22 19:25:45,351-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 19:25:45,351-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "5.0"
  t_p: "96dbdab0e6f647e3b2c5f25636dbd6d9"
  imei: ""
  model: "PBDM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "wqafAuFn"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
payrequestid: "RM202102221925472076075925473572"
version: "260"
queryType: "PAY"

2021-02-22 19:25:45,441-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "2002"
  msg: ""
}
successStatus: "1086"
origAmount: "0.01"

2021-02-22 19:25:45,442-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `db_order_4`.`order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "RM202102221925472076075925473572"
2021-02-22 19:25:45,447-INFO-lib.common_biz.fiz_assert-25-订单详情：{'id': 21483, 'pay_req_id': 'RM202102221925472076075925473572', 'notify_id': '5840328032124037096196797807', 'partner_order': 'F8WdCPcDqsTYtnOeN9BiyoAHMEjVQZg0', 'amount': 1, 'refund': 0, 'contents': 'SIGN_PAY', 'products_name': 'SIGN_PAY', 'counts': 1, 'ssoid': '2076075925', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': '1259634601', 'ip': '58.255.79.104', 'mac': '', 'model': 'PCRM00', 'app_package': 'com.example.pay_demo', 'app_ver': '260', 'sdk_ver': '1.0', 'partner_code': '2031', 'notify_url': 'http://secure.pay-test3.wanyol.com/notify/receiver', 'status': 'OK', 'channel_id': '', 'channel_type': 'NATIVE', 'pay_type': 'wxpay', 'direct_pay': 'ZHICHONG', 'game_type': 'WANGYOU', 'present_amount': 0, 'original_amount': 1, 'discount_info': '', 'extra': None, 'remark': None, 'request_time': datetime.datetime(2021, 2, 22, 19, 25, 47), 'success_time': datetime.datetime(2021, 2, 22, 19, 25, 45), 'modify_time': datetime.datetime(2021, 2, 22, 19, 25, 45), 'trade_type': 'CZ', 'kebi_spent': 0, 'voucher_amount': 0, 'voucher_info': None, 'country_code': 'CN', 'currency': 'CNY', 'openid': None, 'brand_type': 'OPPO', 'mobile_os_ver': None, 'platform': None, 'screen_info': None, 'combine_order': 'N', 'voucher_id': None, 'factor': None}
2021-02-22 19:25:45,447-INFO-lib.common_biz.fiz_assert-34-订单表信息记录正确
2021-02-22 19:25:45,448-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `pay_tradeorder_4`.`trade_order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "RM202102221925472076075925473572"
2021-02-22 19:25:45,452-INFO-lib.common_biz.fiz_assert-45-trade订单详情：{'id': 11244, 'pay_req_id': 'RM202102221925472076075925473572', 'partner_order': 'F8WdCPcDqsTYtnOeN9BiyoAHMEjVQZg0', 'partner_code': '2031', 'products_name': 'SIGN_PAY', 'ssoid': '2076075925', 'origin_amount': 1, 'amount': 1, 'kb_amount': 0, 'voucher_amount': 0, 'present_amount': 0, 'refund': 0, 'country_code': 'CN', 'currency': 'CNY', 'pay_type': 'wxpay', 'channel_id': '', 'channel_type': 'NATIVE', 'direct_pay': 'ZHICHONG', 'trade_type': 'CZ', 'combine_type': 'PRIMARY', 'status': 'OK', 'notify_url': 'http://secure.pay-test3.wanyol.com/notify/receiver', 'attach': '', 'extra_info': '', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': '1259634601', 'ip': '58.255.79.104', 'mac': '', 'openid': None, 'model': 'PCRM00', 'brand_type': 'OPPO', 'app_package': 'com.example.pay_demo', 'app_ver': '260', 'sdk_ver': '1.0', 'mobile_os_ver': '', 'platform': '', 'screen_info': '', 'remark': None, 'request_time': datetime.datetime(2021, 2, 22, 19, 25, 47), 'success_time': None, 'modify_time': datetime.datetime(2021, 2, 22, 19, 25, 47)}
2021-02-22 19:25:45,452-INFO-lib.common_biz.fiz_assert-53-trade订单表信息记录正确
2021-02-22 19:25:45,453-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select status from  `db_order_0`.`autorenew_sign_info` where ssoid = "2076075925" and partner_code = "2031" and renew_product_code = "20310001" and pay_type = "wxpay"
2021-02-22 19:25:45,456-INFO-lib.common_biz.fiz_assert-121-签约信息表记录正确
2021-02-22 19:25:45,457-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select status from `db_order_0`.`autorenew_sign_record` where pay_req_id = "RM202102221925472076075925473572"
2021-02-22 19:25:45,460-INFO-lib.common_biz.fiz_assert-135-签约记录表记录正确
2021-02-22 19:25:45,461-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select * from `db_pay_notify_1`.`notify_info` where request_id = "F8WdCPcDqsTYtnOeN9BiyoAHMEjVQZg0"
2021-02-22 19:25:45,465-INFO-lib.common_biz.fiz_assert-98-通知表信息详情：{'id': 140588, 'app_id': 10003, 'app_name': 'opaycenter(测试环境)', 'app_sub_id': '2031', 'notify_id': 'fc4b9a6d3ae94559a930d363f3c068a8', 'request_id': 'F8WdCPcDqsTYtnOeN9BiyoAHMEjVQZg0', 'notify_protocol': 'HTTP', 'notity_detail': '{"appId":10003,"appSubId":"2031","httpReqType":"POST","reqContent":"{\\"ssoid\\":\\"2076075925\\",\\"country\\":\\"CN\\",\\"partnerOrder\\":\\"F8WdCPcDqsTYtnOeN9BiyoAHMEjVQZg0\\",\\"notifyType\\":\\"SIGN\\",\\"payType\\":\\"wxpay\\",\\"agreementNo\\":\\"5930694697\\",\\"sign\\":\\"CR5Hg31BSxNcz1SD+2czVBur9bS4NCZgRh+JDz233LToPrwTi9m76QYc7ZXhELkdZl88Gu7OzwmYV3Ui6D2cpq7UzqA1AIYoimGBCuI5bxhZfDTqOayLj96hE5hzHxdiaik7h8EYulY45TDsqg1fqMopi9rzURB8DYq+wapvAdE=\\",\\"notifyId\\":\\"IM20210222192547273\\",\\"currency\\":\\"CNY\\",\\"partnerId\\":\\"2031\\",\\"renewProductCode\\":\\"20310001\\",\\"status\\":\\"OK\\"}","reqUrl":"http://secure.pay-test3.wanyol.com/notify/receiver","requestId":"F8WdCPcDqsTYtnOeN9BiyoAHMEjVQZg0","signType":"MD5","successResult":"OK","timeStamp":1613993147538,"version":"1.0"}', 'notify_count': 1, 'notify_response': 'OK', 'notify_handler': 'httpNotifyJsonHandler', 'fail_strategy': 'failStrategyHashImpl', 'status': 'SUCCESS', 'success_time': datetime.datetime(2021, 2, 22, 19, 25, 48), 'insert_time': datetime.datetime(2021, 2, 22, 19, 25, 48), 'update_time': datetime.datetime(2021, 2, 22, 19, 25, 48), 'extra_json': None, 'remark': None}
2021-02-22 19:25:45,465-INFO-lib.common_biz.fiz_assert-103-通知成功
2021-02-22 20:04:27,012-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.52.46.169', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-02-22 20:04:27,250-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-02-22 20:04:27,294-INFO-lib.common.db_operation.redis_operation-33-连接redis集群[{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]成功
2021-02-22 20:04:27,294-INFO-lib.common.db_operation.redis_operation-74-connection list: [{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]
2021-02-22 20:04:27,818-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 20:04:27,818-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 20:04:27,818-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTI0MzIzNTkxNzUsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTHFLUlgvNDgxVm4wTlBnMHRsRTBoekt0UWlkOTU4Y1paT3JjWFVaaWdCbGc9In0.MEQCIDNerQ91ofjYoUWHcxjmBpIwDBFkoANGJahYcnZLFr3OAiAYXRHenkKELTRtELmqHC0KEG5WiDIP86ORppeeUp1gcA"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "09745515542968"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "Y7bzKm0NELM4wOlS6tCyQvaf8GZDgXjr"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-02-22 20:04:27,818-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTI0MzIzNTkxNzUsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTHFLUlgvNDgxVm4wTlBnMHRsRTBoekt0UWlkOTU4Y1paT3JjWFVaaWdCbGc9In0.MEQCIDNerQ91ofjYoUWHcxjmBpIwDBFkoANGJahYcnZLFr3OAiAYXRHenkKELTRtELmqHC0KEG5WiDIP86ORppeeUp1gcA"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "09745515542968"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "Y7bzKm0NELM4wOlS6tCyQvaf8GZDgXjr"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-02-22 20:04:27,821-DEBUG-urllib3.connectionpool-205-Starting new HTTP connection (1): secure.pay-test3.wanyol.com:80
2021-02-22 20:04:28,008-DEBUG-urllib3.connectionpool-393-http://secure.pay-test3.wanyol.com:80 "POST /tksv/post/pass HTTP/1.1" 200 1316
2021-02-22 20:04:28,009-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "fe9a81943cda4bae936d876dd34cf9d9"
s_p: "T05OaVRwREFDZHhSY2R5bFp2WFg3aDRZS3F5Z3lvbU9WOHY5bG93WTY2dm5ONmVyRTJzT2hFbGFkZUZKRGNSQlR0NW5BTnNHQm9aNGF1UkJHdzQwV1R1Y0xjVjhocmRkaFRYMzIwZlRjYWRwUk1HbGVIaWFDaU84YkI3UTFjaXZ3QkM5UUNVVEM4bjlsUXBFR1ZWYld4UDNMSUc5NXp4OVlGVkU4T253bXBiaElrNjAwM2J6TGhaUDZkME1PYUhXeTdVWnFxb09jb1BoNTEyQUlvcmMxS0ZnaFYzcm1ZTU1UTVVPR01SbjU3MUZMM3h6T2pKMWs2WmVJWkFyVGdVZ0VWaTIyam5WaVd5d3pSRGJIMjBTdDI1ZHFEaFQ3QVB1VWlDZHhRVmFHaVZHczJEMTdoMWZpYk50V0p1d1dPUzBLODFrNXI0ZUNRVzFXMnY2TnpabEt6UlFMaWRsVmpKNDFEeUNYbWNsUTJvWVRObmU2UlNXOVlRbW1kQlJLaFFlcDZxYUVqY1ZaTjVqc1JGMU9Dc3hSbG5kSVdoMzc5bVl0R2FoTkpqNDJxcXpPMWZsdWUzbTY2U3VtZEs0Y1lOVVk5UUdERDlxazFLVW05RGUwN1lLTHE1ejhMbW45NG5TbUc0RU1mb2tLNldpTzVCdFZJTDdWS0k5ZDlnZGJIWUdxWmRIMW45eW9rNmV0RG1wUHJSQ2VHNU00eWJMNkxGQ2VDbXMybzZkYk1qV0o1M0F3RHVhQ3lKN3pFWjdVTFpOVmJpUlQxTjdnaWdRb0J4QmJiQmd0czJPVnoxUVZGTGI3MnVQUFlVRDhsbHp1S0ZEeXI3N0RwOFk0R3NvbDlMbGFUWVlZWjdCSU94Q1B3MHdOQXNJWEZpc0VJa1k4dEk1TExkUFQwZjY1RHBXVnBKMUJnNVM5RVVrcUJvaTc1OUd3VFd1OXdvOTBZbkExZWw0VDRwQW5jYXlwSlhUQ0RXWTJaUmNkcXdZeHFPaTNYZjdKQlhkTkJMT3JNamhwS244UEh1REdFdU5TWW5KVDY3OTU1clhMdkhibldsRzBpSnA="
m_p: "azB5641ywrJ4GWul85GmozDb29AjNv9G64h4RsOx4ouH0G1i2ZZXV7o1Au3Wv1ik"
e_t: "1614103470359"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "1379.85"
  vouBalance: "0"
  vouList {
    id: 64234430
    type: 2
    minCousume: 100
    vouCount: 99
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64234429
    type: 2
    minCousume: 100
    vouCount: 99
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64234428
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 3
}
userinfo {
  username: "156******06"
}

2021-02-22 20:04:28,009-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "fe9a81943cda4bae936d876dd34cf9d9"
s_p: "T05OaVRwREFDZHhSY2R5bFp2WFg3aDRZS3F5Z3lvbU9WOHY5bG93WTY2dm5ONmVyRTJzT2hFbGFkZUZKRGNSQlR0NW5BTnNHQm9aNGF1UkJHdzQwV1R1Y0xjVjhocmRkaFRYMzIwZlRjYWRwUk1HbGVIaWFDaU84YkI3UTFjaXZ3QkM5UUNVVEM4bjlsUXBFR1ZWYld4UDNMSUc5NXp4OVlGVkU4T253bXBiaElrNjAwM2J6TGhaUDZkME1PYUhXeTdVWnFxb09jb1BoNTEyQUlvcmMxS0ZnaFYzcm1ZTU1UTVVPR01SbjU3MUZMM3h6T2pKMWs2WmVJWkFyVGdVZ0VWaTIyam5WaVd5d3pSRGJIMjBTdDI1ZHFEaFQ3QVB1VWlDZHhRVmFHaVZHczJEMTdoMWZpYk50V0p1d1dPUzBLODFrNXI0ZUNRVzFXMnY2TnpabEt6UlFMaWRsVmpKNDFEeUNYbWNsUTJvWVRObmU2UlNXOVlRbW1kQlJLaFFlcDZxYUVqY1ZaTjVqc1JGMU9Dc3hSbG5kSVdoMzc5bVl0R2FoTkpqNDJxcXpPMWZsdWUzbTY2U3VtZEs0Y1lOVVk5UUdERDlxazFLVW05RGUwN1lLTHE1ejhMbW45NG5TbUc0RU1mb2tLNldpTzVCdFZJTDdWS0k5ZDlnZGJIWUdxWmRIMW45eW9rNmV0RG1wUHJSQ2VHNU00eWJMNkxGQ2VDbXMybzZkYk1qV0o1M0F3RHVhQ3lKN3pFWjdVTFpOVmJpUlQxTjdnaWdRb0J4QmJiQmd0czJPVnoxUVZGTGI3MnVQUFlVRDhsbHp1S0ZEeXI3N0RwOFk0R3NvbDlMbGFUWVlZWjdCSU94Q1B3MHdOQXNJWEZpc0VJa1k4dEk1TExkUFQwZjY1RHBXVnBKMUJnNVM5RVVrcUJvaTc1OUd3VFd1OXdvOTBZbkExZWw0VDRwQW5jYXlwSlhUQ0RXWTJaUmNkcXdZeHFPaTNYZjdKQlhkTkJMT3JNamhwS244UEh1REdFdU5TWW5KVDY3OTU1clhMdkhibldsRzBpSnA="
m_p: "azB5641ywrJ4GWul85GmozDb29AjNv9G64h4RsOx4ouH0G1i2ZZXV7o1Au3Wv1ik"
e_t: "1614103470359"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "1379.85"
  vouBalance: "0"
  vouList {
    id: 64234430
    type: 2
    minCousume: 100
    vouCount: 99
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64234429
    type: 2
    minCousume: 100
    vouCount: 99
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64234428
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 3
}
userinfo {
  username: "156******06"
}

2021-02-22 20:04:28,109-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 20:04:28,109-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 20:04:28,109-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "12.0"
  t_p: "fe9a81943cda4bae936d876dd34cf9d9"
  imei: ""
  model: "PDCM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "O8bB7Q1c"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: ""
  brandType: "OPPO"
  mobileos: "16"
  androidVersion: "29"
}
type: "wxpay"
amount: "1"
cardno: ""
cardpwd: ""
ext: ""
basepay {
  channelId: ""
  notifyurl: "http://secure.pay-test3.wanyol.com/notify/receiver"
  productName: "RECHARGE_SPEND"
  productDesc: "RECHARGE_SPEND "
  partnercode: "2031"
  appversion: "208006"
  currencyName: "CNY"
  rate: 1.0
  partnerorder: "2K5O4psRG0yibIjkeof9EWVcMtFAa8Ld"
}
sign: "SSMc8ANvNibv3mA3Ck+tqa1ozNx/24AK+JzouGeqlIoTrZuPZxNC2mdFiQoiVf9C4GOCfcvXZAqxG+gip4WzpUKT1u5R4zDh5jt6fGEYeqnHyBeo1L8k49nb98IZDBfh/drp5bbOqHq4IZKKMdwom2xDW3Ku3HFdo02gALgPAXVQ4fGVHaysL/1bMKGgBHfxFDt02Kw2qv9Z8lhHVjODj05pMFsOA7oM1I7GsmucBRG1UABbiffpttefEKeWQjhlmbx7QV77QFnW+zNxiw+h0y1ueL6azsTDzeakPgFoWrCzh3ek+MHOhbczU/6rYtRbzyBzDKBgQuYbt9jojvOCdw=="
ip: "183.238.170.71"
expendRequest {
  header {
    version: "12.0"
    t_p: "fe9a81943cda4bae936d876dd34cf9d9"
    imei: ""
    model: "PDCM00"
    apntype: "1"
    package: "com.example.pay_demo"
    r_v: "O8bB7Q1c"
    ext: ""
    sdkVer: 260
    country: "CN"
    currency: "CNY"
    openId: ""
    brandType: "OPPO"
    mobileos: "16"
    androidVersion: "29"
  }
  price: 1
  count: 1
  productname: "RECHARGE_SPEND_PRICE=AMOUNT"
  productdesc: "RECHARGE_SPEND_PRICE=AMOUNT"
  partnerid: "2031"
  callBackUrl: "http://secure.pay-test3.wanyol.com/notify/receiver"
  partnerOrder: "2K5O4psRG0yibIjkeof9EWVcMtFAa8Ld"
  channelId: ""
  ver: "208006"
  source: "auto_test"
  attach: ""
  sign: "Pzuw1KUlfkcRqjXPQWy18DqKXkum7aNi3zgF6cESmK+saoPvfEc83pqsymdF5wf7zVJ5nBNWxjaNPTLTJQ/TvXuJt2nJ1phfIx1IU54PtqzHUd2dHHgpQ0yvvPB3flwspIj/ZPaqU9ZJ/2E8/yyHEH0eJTdWrZV418SqonRfU+Q="
  factor: ""
}
isNeedExpend: "1"
appId: ""
payTypeRMBType: "0"
tradeType: "common"
screenInfo: "FULL"

2021-02-22 20:04:28,109-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "12.0"
  t_p: "fe9a81943cda4bae936d876dd34cf9d9"
  imei: ""
  model: "PDCM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "O8bB7Q1c"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: ""
  brandType: "OPPO"
  mobileos: "16"
  androidVersion: "29"
}
type: "wxpay"
amount: "1"
cardno: ""
cardpwd: ""
ext: ""
basepay {
  channelId: ""
  notifyurl: "http://secure.pay-test3.wanyol.com/notify/receiver"
  productName: "RECHARGE_SPEND"
  productDesc: "RECHARGE_SPEND "
  partnercode: "2031"
  appversion: "208006"
  currencyName: "CNY"
  rate: 1.0
  partnerorder: "2K5O4psRG0yibIjkeof9EWVcMtFAa8Ld"
}
sign: "SSMc8ANvNibv3mA3Ck+tqa1ozNx/24AK+JzouGeqlIoTrZuPZxNC2mdFiQoiVf9C4GOCfcvXZAqxG+gip4WzpUKT1u5R4zDh5jt6fGEYeqnHyBeo1L8k49nb98IZDBfh/drp5bbOqHq4IZKKMdwom2xDW3Ku3HFdo02gALgPAXVQ4fGVHaysL/1bMKGgBHfxFDt02Kw2qv9Z8lhHVjODj05pMFsOA7oM1I7GsmucBRG1UABbiffpttefEKeWQjhlmbx7QV77QFnW+zNxiw+h0y1ueL6azsTDzeakPgFoWrCzh3ek+MHOhbczU/6rYtRbzyBzDKBgQuYbt9jojvOCdw=="
ip: "183.238.170.71"
expendRequest {
  header {
    version: "12.0"
    t_p: "fe9a81943cda4bae936d876dd34cf9d9"
    imei: ""
    model: "PDCM00"
    apntype: "1"
    package: "com.example.pay_demo"
    r_v: "O8bB7Q1c"
    ext: ""
    sdkVer: 260
    country: "CN"
    currency: "CNY"
    openId: ""
    brandType: "OPPO"
    mobileos: "16"
    androidVersion: "29"
  }
  price: 1
  count: 1
  productname: "RECHARGE_SPEND_PRICE=AMOUNT"
  productdesc: "RECHARGE_SPEND_PRICE=AMOUNT"
  partnerid: "2031"
  callBackUrl: "http://secure.pay-test3.wanyol.com/notify/receiver"
  partnerOrder: "2K5O4psRG0yibIjkeof9EWVcMtFAa8Ld"
  channelId: ""
  ver: "208006"
  source: "auto_test"
  attach: ""
  sign: "Pzuw1KUlfkcRqjXPQWy18DqKXkum7aNi3zgF6cESmK+saoPvfEc83pqsymdF5wf7zVJ5nBNWxjaNPTLTJQ/TvXuJt2nJ1phfIx1IU54PtqzHUd2dHHgpQ0yvvPB3flwspIj/ZPaqU9ZJ/2E8/yyHEH0eJTdWrZV418SqonRfU+Q="
  factor: ""
}
isNeedExpend: "1"
appId: ""
payTypeRMBType: "0"
tradeType: "common"
screenInfo: "FULL"

2021-02-22 20:04:28,114-DEBUG-urllib3.connectionpool-205-Starting new HTTP connection (1): secure.pay-test3.wanyol.com:80
2021-02-22 20:04:28,741-DEBUG-urllib3.connectionpool-393-http://secure.pay-test3.wanyol.com:80 "POST /plugin/post/simplepay HTTP/1.1" 200 291
2021-02-22 20:04:28,742-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "{\"appid\":\"wx93eea96ecc33f168\",\"noncestr\":\"7d7033eaf0f14b84ac2c4c5a49a69c8c\",\"packageNm\":\"Sign=WXPay\",\"partnerid\":\"1603465160\",\"prepayid\":\"wx222004310972300fd1beee82dd11ff0000\",\"sign\":\"F2A7CFAE3F7A66F962765DAC44F8AB8C\",\"timestamp\":\"1613995471\"}"
}
payrequestid: "KB202102222004302076075925647162"
model: ""

2021-02-22 20:04:28,742-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "{\"appid\":\"wx93eea96ecc33f168\",\"noncestr\":\"7d7033eaf0f14b84ac2c4c5a49a69c8c\",\"packageNm\":\"Sign=WXPay\",\"partnerid\":\"1603465160\",\"prepayid\":\"wx222004310972300fd1beee82dd11ff0000\",\"sign\":\"F2A7CFAE3F7A66F962765DAC44F8AB8C\",\"timestamp\":\"1613995471\"}"
}
payrequestid: "KB202102222004302076075925647162"
model: ""

2021-02-22 20:08:18,689-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.52.46.169', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-02-22 20:08:18,968-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-02-22 20:08:19,011-INFO-lib.common.db_operation.redis_operation-33-连接redis集群[{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]成功
2021-02-22 20:08:19,012-INFO-lib.common.db_operation.redis_operation-74-connection list: [{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]
2021-02-22 20:08:33,720-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.52.46.169', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-02-22 20:08:33,997-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-02-22 20:08:34,039-INFO-lib.common.db_operation.redis_operation-33-连接redis集群[{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]成功
2021-02-22 20:08:34,040-INFO-lib.common.db_operation.redis_operation-74-connection list: [{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]
2021-02-22 20:08:34,439-INFO-lib.common_biz.find_database_table-49-`pay_cocoin_2`.`pay_user_info_75`
2021-02-22 20:08:34,440-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select balance from `pay_cocoin_2`.`pay_user_info_75` where ssoid = "2076075925"
2021-02-22 20:08:34,459-INFO-fiz_db_operate-26-可币余额：1379.8500
2021-02-22 20:08:34,468-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 20:08:34,468-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTI0MzIzNTkxNzUsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTHFLUlgvNDgxVm4wTlBnMHRsRTBoekt0UWlkOTU4Y1paT3JjWFVaaWdCbGc9In0.MEQCIDNerQ91ofjYoUWHcxjmBpIwDBFkoANGJahYcnZLFr3OAiAYXRHenkKELTRtELmqHC0KEG5WiDIP86ORppeeUp1gcA"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "89899875289377"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "vsKeGPAzn1QXyrZoH6WtFBYmcMwbd493"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-02-22 20:08:34,610-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "795a2ec8b82a4d4198307e35d8a239ba"
s_p: "YjJqeGY4VzN1UnVEYWY3NFZXQVRyWjRYS2dnUFZuSUxMeTMyNmFnYkY0aG5nTUNQS3ZSbTgxaVRJdHdIUjhkWFNNOW5SVTF3d1ZLZHJQb0xBM0ZmTjRoSVNaekhjY3dZb0FMNmdhUXcxS2xFU1hneUZuMG11Uk9tYzNoZ0NpMklpaTNobGZJZWJtWDdHRjNnVVNXdFhYeHFtUVZld3dWRTFMeEJaVGMzUjF5UUZ0eDNXM3hqWE9WVHBodkZNTWFGckhZQTJIN0RHd1JXb0F3STRsdkpzM21BaHBGc0NhNWJEWnNQNkRkSVRGVDd3SFY0eEZqcDFNWUZPbmZaYUZxNVltZW00U1p4NmJRM2k4RzFEUjlKS0drVXc0VHBsV1FQamlzMWJJTzEwU2dub05FdFhlNWdudmdVYTBiR0Q3YnlHUnc3R2JmcVlONk84TUNaWjJ3YVoycGc1Ym95UVkxaGo2TjN2YmhOMHBXcUxkOG1rSXZ1NHpURVdnbXVYWWJZVWV6M1JSODVWbFE3NUNkSnRmOGtROE1PdmpCTjJ5YU5rbXVaa2FSUWcwSXV1dHNLYW11QzVKc2xWZk5wWkNTdnZmbW1YeWx5RDdVTDBqQWhtVDU3dXlZd1RIY1F1V2xwUGU3bWdqdlVlVlM0VjUyZE92VlcxbHE4ZkJCN1VXYTNMbXhSUEN1OWFsdENqNWZCZGpsYjhLWlBBOHV1ZXh6Z1FST1dIczhWOVFKTThRRzVQZ2oyMGtnUnB5N3FYUFlMVHQxUTY5T1RvY2N3ejZOREpIamlyOTRyMDRvajdwNHNRcHdONEdWRG5XcVN0alB5U0xaN1ZVejZVWnBmZ3B2VnU3WGJCVWczS1F2VTllWExrdGo3cGZhT3NJQU5tUzRYMHVBckVwUWZJN3d4c3Q0bXdzblhaOG1vRVVZRldhdDFvMlJEbVVDZmFoM2FjSnB1QkZMMnY0a2pOSUxtN3hGUkJBdG5pVkJwUVZ1SkxZU3VUWENRZ2xSVDQxVjF5UEg3SU1RQmdIWGpsRUZRSnVvaXJKZ24yQ0cwQVRrVURrNVE="
m_p: "RQBRuX38wsZ3m6QYVj0L88X7viOM96oD343OqKJu68Xh6YmFjrqOghHhH6yZ6PZd"
e_t: "1614103717000"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "1379.85"
  vouBalance: "0"
  vouList {
    id: 64234430
    type: 2
    minCousume: 100
    vouCount: 99
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64234429
    type: 2
    minCousume: 100
    vouCount: 99
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64234428
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 3
}
userinfo {
  username: "156******06"
}

2021-02-22 20:09:12,495-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.52.46.169', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-02-22 20:09:12,767-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-02-22 20:09:12,822-INFO-lib.common.db_operation.redis_operation-33-连接redis集群[{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]成功
2021-02-22 20:09:12,822-INFO-lib.common.db_operation.redis_operation-74-connection list: [{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]
2021-02-22 20:09:13,172-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 20:09:13,172-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 20:09:13,172-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTI0MzIzNTkxNzUsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTHFLUlgvNDgxVm4wTlBnMHRsRTBoekt0UWlkOTU4Y1paT3JjWFVaaWdCbGc9In0.MEQCIDNerQ91ofjYoUWHcxjmBpIwDBFkoANGJahYcnZLFr3OAiAYXRHenkKELTRtELmqHC0KEG5WiDIP86ORppeeUp1gcA"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "77917538566903"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "rsOL8f5NtSJYwviMV40IQKdojCxHZ2eu"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-02-22 20:09:13,172-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTI0MzIzNTkxNzUsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTHFLUlgvNDgxVm4wTlBnMHRsRTBoekt0UWlkOTU4Y1paT3JjWFVaaWdCbGc9In0.MEQCIDNerQ91ofjYoUWHcxjmBpIwDBFkoANGJahYcnZLFr3OAiAYXRHenkKELTRtELmqHC0KEG5WiDIP86ORppeeUp1gcA"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "77917538566903"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "rsOL8f5NtSJYwviMV40IQKdojCxHZ2eu"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-02-22 20:09:13,174-DEBUG-urllib3.connectionpool-205-Starting new HTTP connection (1): secure.pay-test3.wanyol.com:80
2021-02-22 20:09:13,396-DEBUG-urllib3.connectionpool-393-http://secure.pay-test3.wanyol.com:80 "POST /tksv/post/pass HTTP/1.1" 200 1316
2021-02-22 20:09:13,396-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "387522348cbd4563b1a25fd90424f970"
s_p: "ZjF2MXBKN3BOSmJDWTVSUjVLNk53SHluMzVtRWE1RlZ6dlE0MUlkQWFSbHZmV2EwMnQzNUU0bXoyWkpqNW0ydFp5M2Y4RTJFbmpHZ0tJS3ZZazE5b0Z3SW5aeWkwRDlGcTIwNWZJNUZnNFVhdDhPT0RicHNIazFTV2ttSjZyTDJFTGdnSWZXcEFpWXlHU2sxcTVqaWRHVVJVVUpuYkE5SUxOVzlhajZTcFpnN2dCblpTT3BQakdvZ3cxYTRyem5FNEtBTVgzVlI0bGROZUNwQU5FdGVTNDA5ODZEYUpQajBuT3FCUDJBaVZ2WnZzWG5HZndXRFVkeHFLYnVLM2ZrVVBlRWZraUhoZXRIb3NFeWkxZ2RONFdhTExBNVd3NVpmY3hJc3M2cGhtNUVQb1FkUDRlNnhDcGQ4ZjRIUFBNajFJUVU0dFh2OVU2UzdrYmRQRWdMNUVYN1lubGFQNGxrd2U1MDRtUzJ2UXc3TXd6aHJWSFphRGY4VmYxRHZRd3hhVHc2dkFaelFZMUJKTHk2ZkNWTFE4bTlsYlNtdVp5RzV4Wm9IWElkTWh5TUppNHRpZDB0ajA4bzZlQkRxRFdlQjJtbHFmSHZweFh3WGxIUGlRejhodmFVbTVNY0N6dXBjSlFLWmExd0hXV2RVaWgzeTZjbG1sdGpQa0hzUDhweXBLemRDNnlock40TG1JMkVUZ01vNWROYm9aTlRVeFVDb2tQaEgxS21mcFBZb0VtbFJDaktPZ2R0THpvNmNxSnNoZkpnZXVXaXIwWjVSNXpGeTgxOXlyRTN1aTByYjczdDZOeEoydEYxREk2RlNCSGdIOHVHZXNLUkRJSVdPMHI4SXBpd3J0eXduTVhPa1lnN0J4c05mRnFsME1rV1JwZnloc2N3Q3ZxcnNEbWwwbk13MFdxWG9BWnRlMXk1MjZXb25VaExrNU5obXE1eWw5QjE5Yll3SnNWODF2NzB2UVJ0bVpVRGtzQndhZU5aTm1rRkk2M2d4ZFYwQnlqOXlCMkVFS2xpY0RyMEhPZUhmVnZZQW14RnR6NkplbGdEVzZvUUM="
m_p: "477i0yve83R2p1pI117ucx2UvoA436K9AGx42F0274vEX903aE7Ab3g6BT9NETp5"
e_t: "1614103755786"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "1379.85"
  vouBalance: "0"
  vouList {
    id: 64234430
    type: 2
    minCousume: 100
    vouCount: 99
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64234429
    type: 2
    minCousume: 100
    vouCount: 99
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64234428
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 3
}
userinfo {
  username: "156******06"
}

2021-02-22 20:09:13,396-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "387522348cbd4563b1a25fd90424f970"
s_p: "ZjF2MXBKN3BOSmJDWTVSUjVLNk53SHluMzVtRWE1RlZ6dlE0MUlkQWFSbHZmV2EwMnQzNUU0bXoyWkpqNW0ydFp5M2Y4RTJFbmpHZ0tJS3ZZazE5b0Z3SW5aeWkwRDlGcTIwNWZJNUZnNFVhdDhPT0RicHNIazFTV2ttSjZyTDJFTGdnSWZXcEFpWXlHU2sxcTVqaWRHVVJVVUpuYkE5SUxOVzlhajZTcFpnN2dCblpTT3BQakdvZ3cxYTRyem5FNEtBTVgzVlI0bGROZUNwQU5FdGVTNDA5ODZEYUpQajBuT3FCUDJBaVZ2WnZzWG5HZndXRFVkeHFLYnVLM2ZrVVBlRWZraUhoZXRIb3NFeWkxZ2RONFdhTExBNVd3NVpmY3hJc3M2cGhtNUVQb1FkUDRlNnhDcGQ4ZjRIUFBNajFJUVU0dFh2OVU2UzdrYmRQRWdMNUVYN1lubGFQNGxrd2U1MDRtUzJ2UXc3TXd6aHJWSFphRGY4VmYxRHZRd3hhVHc2dkFaelFZMUJKTHk2ZkNWTFE4bTlsYlNtdVp5RzV4Wm9IWElkTWh5TUppNHRpZDB0ajA4bzZlQkRxRFdlQjJtbHFmSHZweFh3WGxIUGlRejhodmFVbTVNY0N6dXBjSlFLWmExd0hXV2RVaWgzeTZjbG1sdGpQa0hzUDhweXBLemRDNnlock40TG1JMkVUZ01vNWROYm9aTlRVeFVDb2tQaEgxS21mcFBZb0VtbFJDaktPZ2R0THpvNmNxSnNoZkpnZXVXaXIwWjVSNXpGeTgxOXlyRTN1aTByYjczdDZOeEoydEYxREk2RlNCSGdIOHVHZXNLUkRJSVdPMHI4SXBpd3J0eXduTVhPa1lnN0J4c05mRnFsME1rV1JwZnloc2N3Q3ZxcnNEbWwwbk13MFdxWG9BWnRlMXk1MjZXb25VaExrNU5obXE1eWw5QjE5Yll3SnNWODF2NzB2UVJ0bVpVRGtzQndhZU5aTm1rRkk2M2d4ZFYwQnlqOXlCMkVFS2xpY0RyMEhPZUhmVnZZQW14RnR6NkplbGdEVzZvUUM="
m_p: "477i0yve83R2p1pI117ucx2UvoA436K9AGx42F0274vEX903aE7Ab3g6BT9NETp5"
e_t: "1614103755786"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "1379.85"
  vouBalance: "0"
  vouList {
    id: 64234430
    type: 2
    minCousume: 100
    vouCount: 99
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64234429
    type: 2
    minCousume: 100
    vouCount: 99
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64234428
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 3
}
userinfo {
  username: "156******06"
}

2021-02-22 20:09:13,421-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 20:09:13,421-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 20:09:13,421-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "12.0"
  t_p: "387522348cbd4563b1a25fd90424f970"
  imei: ""
  model: "PDCM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "WpAiYyGS"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: ""
  brandType: "OPPO"
  mobileos: "16"
  androidVersion: "29"
}
type: "wxpay"
amount: "1"
cardno: ""
cardpwd: ""
ext: ""
basepay {
  channelId: ""
  notifyurl: "http://secure.pay-test3.wanyol.com/notify/receiver"
  productName: "RECHARGE_SPEND"
  productDesc: "RECHARGE_SPEND "
  partnercode: "2031"
  appversion: "208006"
  currencyName: "CNY"
  rate: 1.0
  partnerorder: "omLjJKqpDGSg8OrxR17uFAfhb6ETQw0v"
}
sign: "gNYaPpY1UWq45JaAL+wqUdSJUVCfIyQqtG3ewc+6nZ7UxsxGytAKmHiU6r+QLPr0swPnUoQ7UcBd4jPRdh8GWcwrndXnYdH2tT5dXdzxyhMjl3Ps7CJRXDKl6TfUn3T5Lt6mCIeINju14ZccKwn6AmPtinzXj9kuAFDJ0CaJZIAT2H+yJDxTYPn04VjG0z7oT/WsS2ZJLPpZ+8R8BL0k7vG5+GfWAIdomZCgSPYc8C5jFl/qYiGnCmLjUl3/9p4qSjVNDw7HDiDP1G8riu0Jx0BDlMHP3w4DnVIo6nyzbkskBiyLjNbbGCG8NAvD+CtMGdl7eI3Dg6ViqK8D2IIgWg=="
ip: "183.238.170.71"
expendRequest {
  header {
    version: "12.0"
    t_p: "387522348cbd4563b1a25fd90424f970"
    imei: ""
    model: "PDCM00"
    apntype: "1"
    package: "com.example.pay_demo"
    r_v: "WpAiYyGS"
    ext: ""
    sdkVer: 260
    country: "CN"
    currency: "CNY"
    openId: ""
    brandType: "OPPO"
    mobileos: "16"
    androidVersion: "29"
  }
  price: 1
  count: 1
  productname: "RECHARGE_SPEND_PRICE=AMOUNT"
  productdesc: "RECHARGE_SPEND_PRICE=AMOUNT"
  partnerid: "2031"
  callBackUrl: "http://secure.pay-test3.wanyol.com/notify/receiver"
  partnerOrder: "omLjJKqpDGSg8OrxR17uFAfhb6ETQw0v"
  channelId: ""
  ver: "208006"
  source: "auto_test"
  attach: ""
  sign: "Oyx1HPDrEzdG9QegvYnR8uSu0dNHuidoeW2sldrqKbZztDX7AoKwvV9ugde9jFFuIo2w5zHkJ7E/wZeWCLbKCVEHCFxtcKh5h00Y4+jeeNyskCtlZI5T1/5/u3OOgd3OlMz+j3gtL2B4owM/refdr3Wpjr8k+dGfGsqM501O37g="
  factor: ""
}
isNeedExpend: "1"
appId: ""
payTypeRMBType: "0"
tradeType: "common"
screenInfo: "FULL"

2021-02-22 20:09:13,421-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "12.0"
  t_p: "387522348cbd4563b1a25fd90424f970"
  imei: ""
  model: "PDCM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "WpAiYyGS"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: ""
  brandType: "OPPO"
  mobileos: "16"
  androidVersion: "29"
}
type: "wxpay"
amount: "1"
cardno: ""
cardpwd: ""
ext: ""
basepay {
  channelId: ""
  notifyurl: "http://secure.pay-test3.wanyol.com/notify/receiver"
  productName: "RECHARGE_SPEND"
  productDesc: "RECHARGE_SPEND "
  partnercode: "2031"
  appversion: "208006"
  currencyName: "CNY"
  rate: 1.0
  partnerorder: "omLjJKqpDGSg8OrxR17uFAfhb6ETQw0v"
}
sign: "gNYaPpY1UWq45JaAL+wqUdSJUVCfIyQqtG3ewc+6nZ7UxsxGytAKmHiU6r+QLPr0swPnUoQ7UcBd4jPRdh8GWcwrndXnYdH2tT5dXdzxyhMjl3Ps7CJRXDKl6TfUn3T5Lt6mCIeINju14ZccKwn6AmPtinzXj9kuAFDJ0CaJZIAT2H+yJDxTYPn04VjG0z7oT/WsS2ZJLPpZ+8R8BL0k7vG5+GfWAIdomZCgSPYc8C5jFl/qYiGnCmLjUl3/9p4qSjVNDw7HDiDP1G8riu0Jx0BDlMHP3w4DnVIo6nyzbkskBiyLjNbbGCG8NAvD+CtMGdl7eI3Dg6ViqK8D2IIgWg=="
ip: "183.238.170.71"
expendRequest {
  header {
    version: "12.0"
    t_p: "387522348cbd4563b1a25fd90424f970"
    imei: ""
    model: "PDCM00"
    apntype: "1"
    package: "com.example.pay_demo"
    r_v: "WpAiYyGS"
    ext: ""
    sdkVer: 260
    country: "CN"
    currency: "CNY"
    openId: ""
    brandType: "OPPO"
    mobileos: "16"
    androidVersion: "29"
  }
  price: 1
  count: 1
  productname: "RECHARGE_SPEND_PRICE=AMOUNT"
  productdesc: "RECHARGE_SPEND_PRICE=AMOUNT"
  partnerid: "2031"
  callBackUrl: "http://secure.pay-test3.wanyol.com/notify/receiver"
  partnerOrder: "omLjJKqpDGSg8OrxR17uFAfhb6ETQw0v"
  channelId: ""
  ver: "208006"
  source: "auto_test"
  attach: ""
  sign: "Oyx1HPDrEzdG9QegvYnR8uSu0dNHuidoeW2sldrqKbZztDX7AoKwvV9ugde9jFFuIo2w5zHkJ7E/wZeWCLbKCVEHCFxtcKh5h00Y4+jeeNyskCtlZI5T1/5/u3OOgd3OlMz+j3gtL2B4owM/refdr3Wpjr8k+dGfGsqM501O37g="
  factor: ""
}
isNeedExpend: "1"
appId: ""
payTypeRMBType: "0"
tradeType: "common"
screenInfo: "FULL"

2021-02-22 20:09:13,427-DEBUG-urllib3.connectionpool-205-Starting new HTTP connection (1): secure.pay-test3.wanyol.com:80
2021-02-22 20:09:13,899-DEBUG-urllib3.connectionpool-393-http://secure.pay-test3.wanyol.com:80 "POST /plugin/post/simplepay HTTP/1.1" 200 291
2021-02-22 20:09:13,900-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "{\"appid\":\"wx93eea96ecc33f168\",\"noncestr\":\"c16ddedac84f42809875c0a60c9184a3\",\"packageNm\":\"Sign=WXPay\",\"partnerid\":\"1603465160\",\"prepayid\":\"wx222009162774880565576cc0a256900000\",\"sign\":\"CFF15A341DC3769BD407DD38D05D5235\",\"timestamp\":\"1613995756\"}"
}
payrequestid: "KB202102222009152076075925014442"
model: ""

2021-02-22 20:09:13,900-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "{\"appid\":\"wx93eea96ecc33f168\",\"noncestr\":\"c16ddedac84f42809875c0a60c9184a3\",\"packageNm\":\"Sign=WXPay\",\"partnerid\":\"1603465160\",\"prepayid\":\"wx222009162774880565576cc0a256900000\",\"sign\":\"CFF15A341DC3769BD407DD38D05D5235\",\"timestamp\":\"1613995756\"}"
}
payrequestid: "KB202102222009152076075925014442"
model: ""

2021-02-22 20:10:41,731-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.52.46.169', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-02-22 20:10:41,972-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-02-22 20:10:42,013-INFO-lib.common.db_operation.redis_operation-33-连接redis集群[{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]成功
2021-02-22 20:10:42,014-INFO-lib.common.db_operation.redis_operation-74-connection list: [{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]
2021-02-22 20:10:42,368-INFO-lib.common_biz.find_database_table-49-`pay_cocoin_2`.`pay_user_info_75`
2021-02-22 20:10:42,369-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select balance from `pay_cocoin_2`.`pay_user_info_75` where ssoid = "2076075925"
2021-02-22 20:10:42,373-INFO-fiz_db_operate-26-可币余额：1379.8500
2021-02-22 20:10:42,381-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 20:10:42,382-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTI0MzIzNTkxNzUsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTHFLUlgvNDgxVm4wTlBnMHRsRTBoekt0UWlkOTU4Y1paT3JjWFVaaWdCbGc9In0.MEQCIDNerQ91ofjYoUWHcxjmBpIwDBFkoANGJahYcnZLFr3OAiAYXRHenkKELTRtELmqHC0KEG5WiDIP86ORppeeUp1gcA"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "17099567246294"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "Hk2yAfGqUt6ZBxlhTrg0ezX5junOvEs7"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-02-22 20:10:42,488-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "ad8f6d9a98b047969c72930bacb513d7"
s_p: "OTNYV1Z0VjNVdlZPNUxxUzBNdWUxdXFINndBWVg3eDhTcGFDbjFtTmI4MU9UYUszYkhBWDBvdmJBT20wOWw3b21UVnFHbjQ1MjNQV2lnaG5xZ1FqcUNGS0tvWjNzOXg1R3pqaWFqbm9LV0RkNFpGZzU4czFUcHBRblhNVlR5ZnM2REpGcW5pa1g0T3dvTVBPbGNtN2xGdm9hVHQxT0NXNUJZU01RVzlHTVJUblBuaHpTOHBjeHluYnVEbmRuSmd6T0phYU5CMjhsYTlFMTBQeG5aR3c3V2dSMFp4YTQ0ZnNCZ2dvNHdRUWcwb0xxT2pMZ2kxZXB5b2lhb3c0eFc0NDN2aDFJUlJFTzNwNDNBVlpvamxtcWU1S0haRmN1M25MbzdSdzZuWmJtUzNTY3d1YXdLZ0pkQ0I3WUh3UThQYVpLUDFOeWdYdjhCZTgxbTlTRW9KOFc2MjBtZnIwekZkWGpGOHBkd3pUMUFYbnNGcWhYdVIyb0FYZWtWbGZEZFZCcEFlc25rZFB5cG5WRHNoSVcydnFyeWJMTnBWT0p0SVVudHluU0FBbDZFSGpTTk1iUUZxREZUMmM1dkNxaTQwWDNXTFdvZWt2a3Y5cFZXTERpb1kwYUQ2TjVDbkFXckltQ3M3cXllWml4SEhtWnBQcnVicnliazdOV28wQnVPOFE1aDVsTzY1QURyMGlhdEpqdHFVQ216Qk1iMmNRRXJ6UXhyd0tuU3FzTkZhUzZQVG5HTUlmejl6TG5JQ1puQzlhclVRZE9aZlRDcnBKeXJqOWFrd1FlOExxUUw0b2JHQzI1QUNMRXJUbHhqTkVieHpmbTRYc3hHbkJsTTB5UGE4MjR6UGJRS2U3VDNUdEw4aFY5d1BjVDNZY0ZQandhQTdrRmlQaVF0T3NOeGthZGtJVGtUTkFxUzJQNWQzem1HMk56RWZCNWVsOFBHcmNOaEdvVGcwRElXQ0tNeUdCYlhrQW5sVTFEeGJ0WXpHZVEwVEp0Y01hbGJFbDZuaTNIM2pEZjc3VmtSZmNKS2FhaU04aTl2aVdYZnlpNjA5dVVjWWg="
m_p: "95p2OZBl57Vkc5hytgngw2yTZ28g5g5CLF21hjU2qyy6sy08H614p915O17bM32z"
e_t: "1614103844887"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "1379.85"
  vouBalance: "0"
  vouList {
    id: 64234430
    type: 2
    minCousume: 100
    vouCount: 99
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64234429
    type: 2
    minCousume: 100
    vouCount: 99
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64234428
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 3
}
userinfo {
  username: "156******06"
}

2021-02-22 20:11:03,318-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.52.46.169', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-02-22 20:11:03,593-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-02-22 20:11:03,641-INFO-lib.common.db_operation.redis_operation-33-连接redis集群[{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]成功
2021-02-22 20:11:03,641-INFO-lib.common.db_operation.redis_operation-74-connection list: [{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]
2021-02-22 20:11:03,984-INFO-lib.common_biz.find_database_table-49-`pay_cocoin_2`.`pay_user_info_75`
2021-02-22 20:11:03,984-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select balance from `pay_cocoin_2`.`pay_user_info_75` where ssoid = "2076075925"
2021-02-22 20:11:03,988-INFO-fiz_db_operate-26-可币余额：1379.8500
2021-02-22 20:11:03,995-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 20:11:03,995-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTI0MzIzNTkxNzUsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTHFLUlgvNDgxVm4wTlBnMHRsRTBoekt0UWlkOTU4Y1paT3JjWFVaaWdCbGc9In0.MEQCIDNerQ91ofjYoUWHcxjmBpIwDBFkoANGJahYcnZLFr3OAiAYXRHenkKELTRtELmqHC0KEG5WiDIP86ORppeeUp1gcA"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "69673574186914"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "b9eTKlU350mGstXQwxIRnuCOcy4o2FBj"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-02-22 20:11:04,081-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "16cd242b8fcc4a0ca95769ae98b5236a"
s_p: "RTZFQ2ZxTTBIaEg3Q0JCSmtieWVvWTNsM3BzZXRQSlVPVzRoZll2NlFDYk5CZnMyWXUxMkZQSklFNFlLM1dON3B0bjNPb0RQZ0owTDBLQVpqbkJOS052N0VSUkp6MFVGazd4UWxnczB1V3c1akl5MEFBaEt1WktHdHBTS3JNWHllRTA3RkpBSmhoaWZJNk1ZTFRSV2RJVW9lTjAxaWpNQnkzZW1lS2loMFVubGF0eVhTc2FPRnlyekVOMUhzY2Y0ekJ0dlRuMkVkR1BpTFYzMmRvMVpjQlVQd0tYTVc0MXJyaWlWVUtya0RkN1k3TWQ3bzdXZ3NDVnNxUEJJcmNXSk5UN3dPT2p4clIwWk9mR1BvS2FnVTN5V2xjT01nUWFHNlVNbXR3bU5PdU02WVlnOHQ0NkpUaTd2QmJkMDZrTXhzM1FlTW10VUgzQUU3aEtvZTFOZUxzd0x1dnYwcnVnT0VjY2RHRzBlMktOU1FsYTM2b3dEeEVpS2l6U2hlU2d4WXJsRzFNUHZnb2lvWmRxdHJYUFZmT1dDN1BEazF5eHlHa0Z1akwyVVlaaDFvUGpPU2lBT2FRUjJVMUZua21UaGthUkdMWW10M012QW5yUlU3dGtET2tWOG5HdVV1VndzcUdZZlhqQlpXZ25xTXFoVmpLT2NpRmk1ZHBuUUtkM3hmdlN4TjRGa3BSalhBQVp2QWhIUDdLOHQzcGZuUUdnTkpiYXpkT2xUcEFTamhxcGxrckMzVTdwWlNZbW5SVHpnRDhyOTN5UElwZEV4dmRONkFsZGFBcEQ1U1lOUnY1VHZRUGZPVGFsUVV5YW9VOEpzYTB3WUh3T1c2c1JMRFdpUVo2aHFEVzAybDYzYlFJUUlNTXlmNDg1bkFkbUFwYW1LUEdhMnVvUVFlV2V2cVEyT2ZoNkp0Q000R2tySXFENXhvTUNTS3B6bENaYTNHNVk5a0dKVFNFNUxFMUZzeDh0aVBXNFJmcU9LUHZiZUEwOHRGaFFSRDM5RTE4QUNTQ05hQjFScHFYdFJ4TVVJdXNhTEtQbGoyZksxOTNoM25oa3Y="
m_p: "5ga0BBSLoMJ8Yh7lF669Qm8h03Gc0wR303n8yII1fczF88l3iqv67M3RN11d4szD"
e_t: "1614103866493"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "1379.85"
  vouBalance: "0"
  vouList {
    id: 64234430
    type: 2
    minCousume: 100
    vouCount: 99
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64234429
    type: 2
    minCousume: 100
    vouCount: 99
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64234428
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 3
}
userinfo {
  username: "156******06"
}

2021-02-22 20:11:04,103-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 20:11:04,103-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "12.0"
  t_p: "16cd242b8fcc4a0ca95769ae98b5236a"
  imei: ""
  model: "PDCM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "H7CBBJkb"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: ""
  brandType: "OPPO"
  mobileos: "16"
  androidVersion: "29"
}
type: "wxpay"
amount: "288"
cardno: ""
cardpwd: ""
ext: ""
basepay {
  channelId: ""
  notifyurl: "http://secure.pay-test3.wanyol.com/notify/receiver"
  productName: "RECHARGE_SPEND"
  productDesc: "RECHARGE_SPEND "
  partnercode: "2031"
  appversion: "208006"
  currencyName: "CNY"
  rate: 1.0
  partnerorder: "hW403QlDPXq27mFSMswbKRezuV9dfZAa"
}
sign: "TB8aKm4x+8gJLsUwwFZzgkJnzHKdDsF3dUhU+SCM7XpRCS9w5QuQmx+Wxl1V4Z2zx68cRzNpUMqMmJmtkuBzc+dT1wD+bkDr+i7jG8DQzvbR1ZoK3EGlydjg4XNRD8BvzL/XJx0HLwtgcqEoB9Ur9XFBYLfkUEjh+/qS/AtHkfye7H5KtwxV1Vhwgmo4DLWRAz5BAJLVp+IFOF4wG4nHblsO8HU9YbQRzPeQHBuPnKPy+3Y2/ZQ0jURNigHUrEz4QR5PmVyEcmhZH69sZ8zGWcTNtfitoT//0SwE3bqMNitKEGM9ZsJc9DkkkxLZTLwIk4M3cwzGzohNvdUy8Zq1Vg=="
ip: "183.238.170.71"
expendRequest {
  header {
    version: "12.0"
    t_p: "16cd242b8fcc4a0ca95769ae98b5236a"
    imei: ""
    model: "PDCM00"
    apntype: "1"
    package: "com.example.pay_demo"
    r_v: "H7CBBJkb"
    ext: ""
    sdkVer: 260
    country: "CN"
    currency: "CNY"
    openId: ""
    brandType: "OPPO"
    mobileos: "16"
    androidVersion: "29"
  }
  price: 288
  count: 1
  productname: "RECHARGE_SPEND_PRICE=AMOUNT"
  productdesc: "RECHARGE_SPEND_PRICE=AMOUNT"
  partnerid: "2031"
  callBackUrl: "http://secure.pay-test3.wanyol.com/notify/receiver"
  partnerOrder: "hW403QlDPXq27mFSMswbKRezuV9dfZAa"
  channelId: ""
  ver: "208006"
  source: "auto_test"
  attach: ""
  sign: "RAW2ErDjtZBOSFa6wVopFP5g35zwJzKWmEj7IHWXMYLiXyj3RJuU+J0YuL2pSSYJMMOnUANfztqnEcVWjXbwDm7JD3vyIwB6xpF+IsOsYsiR+LKQL0ealbsls+aI0hiAt98oGkOYeGDtgt2KA9OpDoRylz/2OcrIe9CDqgZMcTE="
  factor: ""
}
isNeedExpend: "1"
appId: ""
payTypeRMBType: "0"
tradeType: "common"
screenInfo: "FULL"

2021-02-22 20:11:04,539-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "{\"appid\":\"wx93eea96ecc33f168\",\"noncestr\":\"0631a203a6d244b18707ccdc46d00e46\",\"packageNm\":\"Sign=WXPay\",\"partnerid\":\"1603465160\",\"prepayid\":\"wx22201106911481810acb70b20c38430000\",\"sign\":\"66D543DEB507EE75971552206249DCC8\",\"timestamp\":\"1613995866\"}"
}
payrequestid: "KB202102222011062076075925111772"
model: ""

2021-02-22 20:11:04,546-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 20:11:04,547-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTI0MzIzNTkxNzUsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTHFLUlgvNDgxVm4wTlBnMHRsRTBoekt0UWlkOTU4Y1paT3JjWFVaaWdCbGc9In0.MEQCIDNerQ91ofjYoUWHcxjmBpIwDBFkoANGJahYcnZLFr3OAiAYXRHenkKELTRtELmqHC0KEG5WiDIP86ORppeeUp1gcA"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "61001430387687"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "fvNW3Uhi714jFPMmDrRJYEHacA5GIVw0"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-02-22 20:11:04,619-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "d2d2b69433724a78baa965e85ddbeb02"
s_p: "Rm1ud3hRdlQ1NTJxa0RuYjNnM3RibHNUaElPQ0FzVjhsNDNWNklKcElyelZ0YWdLUDZXRnpUT0JhWlcyMVFiT29MNjVFU1pLMUV2WlU5djk5dVFGalJ4alN1d0l6bFhZckp2bjRTVDhGZDBEUXlGTXlBWFlPV1lSQmRxREFlQVJBVm81bUs0WTY5OEtjcXc1MW5aVEhNNnFUS2laampqVFdiU0NETVNxaExCcm5zWnlvdUdIaTJ5VEV5STFYVDdFRXNCaEt0WUVFbnZMMTlwNUR5NFhENmJMVGhVeVNqdHA3RXZaMXhRdnRRV1dJVHhzaTNnN05GeW4zdGVoNXdUODZsaU53UW40dlZPN3ByWjhBRjJNN2NPZjI0c3pHUGRKQThMNDhGaHo4QXRmVXFzYlc4VGZJN0VhcXBVYUplT2dxV1dLdVR3M3hwQUttbzhKU0ZKMnVPbWswNDh0NDBCOXJRcTBJZnBLSXVDaG95MjlEVHJ3WE5qMzlid2poYk5nSTNkOU5UbE9mRFRjaWxQYVRkeEhrYXZGbnhCTzBTdTdYNkNWVXlwS1g3Mjhkc1lrbVZld2FsZlYwMlhsa0lkN2Z3MTJ2djhLQkJScDlYU014dmgzTnM5TFVsZlVhNTFzNm5DVDRLNDcxRjN4Tk03ODZMYTRWdGFnc3FFbzZ1RndtSkhPSThiUXJGNmpvWURESWVyWThzMzVuQmE1NklyR096Z0FLUUdqRVhIYnlUbExwbVl4cW1EeFBtR0dHMlhOQUo5WUF4UzBJcFNjSlA3dDdSQjc3SlJqQUJSVVFtcVA1QWdTMzNheVNFcHEwb0pBZjBHdmdqa25kWkZKQ25paDBnRE5MTFFKYWdZdm9PNncyMzNXc3RCSXY1RUtyeTc3ejlhYzJsQnRLTHYzaEI0WDRzRGtBc3BBU2o4c1M5TlEwa0VHMGd4Y2xJa1hDaFVkRnVObEJnOWJVblpTZmhZc2pSYWNKWHpram1GSmp6amdjbGpDbVFvelhoZHpTSjlFNUlVdDlnNXBIeXlJZGkwRHhSSzNxeloxV2hpaFpWd0I="
m_p: "cBgFQh7Fh2W9iWbnKO16XaUgPQWtRT9DIH0O21j4HEtwKI0iyk4UNnR8mRW171lL"
e_t: "1614103867036"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "1379.85"
  vouBalance: "0"
  vouList {
    id: 64234430
    type: 2
    minCousume: 100
    vouCount: 99
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64234429
    type: 2
    minCousume: 100
    vouCount: 99
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64234428
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 3
}
userinfo {
  username: "156******06"
}

2021-02-22 20:11:04,620-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 20:11:04,620-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "5.0"
  t_p: "d2d2b69433724a78baa965e85ddbeb02"
  imei: ""
  model: "PBDM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "552qkDnb"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
payrequestid: "KB202102222011062076075925111772"
version: "260"
queryType: "PAY"

2021-02-22 20:11:04,686-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "2004"
  msg: "\350\277\233\350\241\214\346\266\210\350\264\271\350\260\203\347\224\250\357\274\214\344\275\206\346\230\257\345\205\205\345\200\274\347\273\223\346\236\234\346\234\252\347\237\245"
}
discountAmount: "0"
origAmount: "0"

2021-02-22 20:11:49,459-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.52.46.169', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-02-22 20:11:49,698-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-02-22 20:11:49,748-INFO-lib.common.db_operation.redis_operation-33-连接redis集群[{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]成功
2021-02-22 20:11:49,748-INFO-lib.common.db_operation.redis_operation-74-connection list: [{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]
2021-02-22 20:11:50,105-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=0
2021-02-22 20:11:50,109-INFO-lib.common_biz.find_merchant_info-28-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1603465160'}
2021-02-22 20:11:50,110-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1603465160' AND pay_channel = 'wxpay'
2021-02-22 20:11:50,113-INFO-lib.common_biz.find_key-108-查询到秘钥信息：g4rTCeoBJFG4KyWCjTQCqltfEDma3yxR
2021-02-22 20:11:50,113-INFO-lib.common_biz.find_database_table-49-`pay_cocoin_2`.`pay_user_info_75`
2021-02-22 20:11:50,114-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select balance from `pay_cocoin_2`.`pay_user_info_75` where ssoid = "2076075925"
2021-02-22 20:11:50,117-INFO-fiz_db_operate-26-可币余额：1379.8500
2021-02-22 20:11:50,126-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 20:11:50,126-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTI0MzIzNTkxNzUsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTHFLUlgvNDgxVm4wTlBnMHRsRTBoekt0UWlkOTU4Y1paT3JjWFVaaWdCbGc9In0.MEQCIDNerQ91ofjYoUWHcxjmBpIwDBFkoANGJahYcnZLFr3OAiAYXRHenkKELTRtELmqHC0KEG5WiDIP86ORppeeUp1gcA"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "89193746068829"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "MSJcZzWmq4aOXIVE6oetuPyTDF8C07li"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-02-22 20:11:50,302-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "3b69e1907a3446efa2a1efcc2cce5182"
s_p: "QTV1TXVaUmtIRFVmUFhBZW1sNGdBVGowQUg0dlF6UG1JNlZVaVdYV2dSbUNXQzRLbVZieWxaMk1GOVplUEkydlZLSk9MU09PT3RRWWV3RDRQb2JlWWZsV2Q0T3FRZ2FsUE5Idk1DV25Yck1yWGNKZVdYWmc4WG5iWldpdmZNanJ5VUt4UGJ1UFVwMjNvdHBuQlIzalp3RU1SNUF4bE00emppdmJVNzlqbFl6RThab1FMQTlYVVREdXlNQU9nZ0s4NmRBQ2IwZERRaFJxZTZpU042SGJ2V1MwQm9LWWxlTWF5b1YyeU5KQW5rQVZEZm5jUGZQN0U1NkJYTUVFTzEyQ01wUjE2UmhVZWQxUHBWczF4ZVloVlhBMnlacDRIZWJpRnk4QUxxaXlPQUtnYmhuMGphYnk2bDNPbllScjFHRVRHVVVDQWpwS2JRaE93VkVMVlIyU3loWVVPWXV6bVdIMHY1R1AwNTdLanNEYUJWZDU4b2kwdGNwdkh1N0pETUZTYlVDOWNRQkQ0ZTBneHE2S205ZUdBczh0eTFvOW1rdG9HUE0yNzdMazBqb2Y3RlRuVEU5Q3dHc0JKUTFLVzRCSENpM3JEaWlDSUZvV25XTXNiU25tMEZkTEZOTGZ5SDBZUVFUaUh2dGlkMExadXZQQ1YxMlRENUZRUUppeTBvcGFva3dBVzBxNUoxbUE3ek1aOTY2TmhFYXc5SUVVaHdZcW53ZExYeGpjc3FDVkhsTFNQZE12bmI3SUhReVFXbDJIMDJjUUZJOWwyMnkxUmQwSExTd1d5M3o5ajBDNmtsMGUwTlJGcW1lOEVUcExIRzRGWklXOGZ5WGtmMDZ1QXpaM0N4cmlucXlHVzd3Q296ZGxsNTVCUk5KSEZUd2dqaTk1ZVJZN2ZpdlBGNzk1eGdyUXhJcnB5Zll3aXdiNGo5aU1KRkllQnlLUzVrZ1FUUGR2QU1LU1JXWmtOaGJWWG1uM2xONXp5Mm0zMGl2NUhud3J3emJtSnlLQ0QwdVFqaHFLODJLbUtvNm5MdllrRGI4VHJMcXBERXNVbmp2TjdqYm8="
m_p: "YxIwwihmva198ueCq2sLbjoxGZaSo32E0rk8g5qIs1k5w331Njj76i6wau0Cgg0R"
e_t: "1614103912687"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "1379.85"
  vouBalance: "0"
  vouList {
    id: 64234430
    type: 2
    minCousume: 100
    vouCount: 99
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64234429
    type: 2
    minCousume: 100
    vouCount: 99
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64234428
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 3
}
userinfo {
  username: "156******06"
}

2021-02-22 20:11:50,325-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 20:11:50,325-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "12.0"
  t_p: "3b69e1907a3446efa2a1efcc2cce5182"
  imei: ""
  model: "PDCM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "XrMrXcJe"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: ""
  brandType: "OPPO"
  mobileos: "16"
  androidVersion: "29"
}
type: "wxpay"
amount: "28"
cardno: ""
cardpwd: ""
ext: ""
basepay {
  channelId: ""
  notifyurl: "http://secure.pay-test3.wanyol.com/notify/receiver"
  productName: "RECHARGE_SPEND"
  productDesc: "RECHARGE_SPEND "
  partnercode: "2031"
  appversion: "208006"
  currencyName: "CNY"
  rate: 1.0
  partnerorder: "T5wf2bZaEFyGhqk3c8VlBdzCxiN9mKte"
}
sign: "u+ybl0008FxbPdX9UcdtxXJ2JEUDMzw8W7oOpoRnlL1Hhxw5yI8P87YHl1Hotw/vNgyl+RX30gXwCy7Dc9yc6xNDHhIwgtolAx5+Ar5nHqjbArsIytaLNvFh0ONhtgvg0XaIGShbsR6dey3bruToWXINXznzjrMOn67OYJhrBh4RgzLRpuNt9Jz8y3eGaP8BgwCtwiJFZWkF53bC5RGpYTkAjgSYF4YbNVADx9lAQhtGmvTWL+Q39+aH23MAX/zK0lcfGX5GcBpr5l6dmm1GXQdNmvVmjtA1jQLldZqYWSbq7CuBAK5RMWmhCcE+8wA8/ObZgRzSG1znZEO2lSPQjA=="
ip: "183.238.170.71"
expendRequest {
  header {
    version: "12.0"
    t_p: "3b69e1907a3446efa2a1efcc2cce5182"
    imei: ""
    model: "PDCM00"
    apntype: "1"
    package: "com.example.pay_demo"
    r_v: "XrMrXcJe"
    ext: ""
    sdkVer: 260
    country: "CN"
    currency: "CNY"
    openId: ""
    brandType: "OPPO"
    mobileos: "16"
    androidVersion: "29"
  }
  price: 28
  count: 1
  productname: "RECHARGE_SPEND_PRICE=AMOUNT"
  productdesc: "RECHARGE_SPEND_PRICE=AMOUNT"
  partnerid: "2031"
  callBackUrl: "http://secure.pay-test3.wanyol.com/notify/receiver"
  partnerOrder: "T5wf2bZaEFyGhqk3c8VlBdzCxiN9mKte"
  channelId: ""
  ver: "208006"
  source: "auto_test"
  attach: ""
  sign: "R5S9dZxr8YuWLyj6WPaHDk2F7+aCcInHpDN2bNad6gE+Zf1QTfgx7g2A9oKZ/9cu1Ei+dJTnJgvUi1xQxR1ZRi0fN6Ft8Gdzfc2qnxWAaGvRk5RTQAb1zQz4Qd1hHTsnswUb3DASHQDVIr90X7EZvtRjOWD54grYDYcy6YJdy1s="
  factor: ""
}
isNeedExpend: "1"
appId: ""
payTypeRMBType: "0"
tradeType: "common"
screenInfo: "FULL"

2021-02-22 20:11:50,772-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "{\"appid\":\"wx93eea96ecc33f168\",\"noncestr\":\"f9db07de881046f890a839c92344af61\",\"packageNm\":\"Sign=WXPay\",\"partnerid\":\"1603465160\",\"prepayid\":\"wx22201153144291221d20a4d03414550000\",\"sign\":\"85A3B0E2D0C942F62A6B198C2E772B91\",\"timestamp\":\"1613995913\"}"
}
payrequestid: "KB202102222011522076075925571102"
model: ""

2021-02-22 20:11:50,773-INFO-wxpay-scarlet-51-回调参数：<xml><transaction_id><![CDATA[2821670611448487872247790775]]></transaction_id>
<nonce_str><![CDATA[2eNLx5dim0ltEDHV1KJOA4cw7bGroW6g]]></nonce_str>
<bank_type><![CDATA[OTHERS]]></bank_type>
<openid><![CDATA[oCg6Xt8NvRi7jGuap_5B6XdY4oYk]]></openid>
<sign><![CDATA[D8FDF6CFB53674FF5F526AC48F0B2D24]]></sign>
<fee_type><![CDATA[CNY]]></fee_type>
<mch_id><![CDATA[1603465160]]></mch_id>
<cash_fee><![CDATA[1]]></cash_fee>
<out_trade_no><![CDATA[KB202102222011522076075925571102]]></out_trade_no>
<appid><![CDATA[wx93eea96ecc33f168]]></appid>
<total_fee>28</total_fee>
<trade_type><![CDATA[APP]]></trade_type>
<result_code><![CDATA[SUCCESS]]></result_code>
<attach><![CDATA[TEST]]></attach>
<time_end><![CDATA[20210222201150]]></time_end>
<is_subscribe><![CDATA[N]]></is_subscribe>
<return_code><![CDATA[SUCCESS]]></return_code>
</xml>
2021-02-22 20:11:52,191-INFO-wxpay-scarlet-55-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-02-22 20:11:52,191-INFO-wxpay-scarlet-57-回调解析成功
2021-02-22 20:11:52,199-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 20:11:52,199-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTI0MzIzNTkxNzUsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTHFLUlgvNDgxVm4wTlBnMHRsRTBoekt0UWlkOTU4Y1paT3JjWFVaaWdCbGc9In0.MEQCIDNerQ91ofjYoUWHcxjmBpIwDBFkoANGJahYcnZLFr3OAiAYXRHenkKELTRtELmqHC0KEG5WiDIP86ORppeeUp1gcA"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "23093710920585"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "N6fdKeQFvhwo51mkA3t2B0MUlYPXWCaI"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-02-22 20:11:52,302-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "8fc7693a730749bba701914317ef2a6c"
s_p: "Z1hMUDZXRHYwUVd5Q1I1ZDRGSzVyMVBBZmFKZG5keU5sNHZpUkttZkhncGJxMGxXRFZzbE5uNUNORzV6OTNHeXJhRHNvbXYwVllDZmhxTkJZYW5ickphWkttVVJ4Z2ZEckR1blF1dXJHbW1BR3BBbHZrRVpJWWxhTkY5VXNHN1p6WUxpOE5tMUlPRGxoRGtvbDhxQlJXeERCa3dqQXhxMWN0clN6YTgxTGN6c1RJMmZJZEtIeG9IREdsbG05ckxrckluMVB1ZFVUZGhhY1lsT3ZCS0tmTFRnbml2Q1hReFB5OGswREI2RGxQUkEwTjVZQVVEMG9qbFRKQklrQXJYSHllMWR3MWgzdEV0dVVYOWw4NDhNV3Z5Nm9uYVdaV01YU0cxdmx6bnBOZzlhelRPNHVFTjFRbG5zb2phaXFvd0VtbVJPMVZwT0RIWHVIUmxSa1hNYjcxVjdiSHNNRWsxN1FYanhHb25TQW4wMG15SWxndnVkQ0Z4bWhObWttR2k1STF0YXhMWHBFTnJnUWQxdEwwcFVrZEhLYnhDbzJCVFh1M1dEQmNvODJwQWFzaVM0cXBmc0J6T2tqMjFDWk04REJkeTR0Mk1uVDczeWJMRFRyMzhwVUlicEZUU0NNWnhDcmRtMzhiZmJLZUtNREw3blpHTXY3ZXVtRGdhc1NTN1o4STRrbVREWm1PN0Q0VEo1YldhZVFRUzZRa3hWSThkYk1RNGJvM2FIUkJsMlo1VFc5dlVpYjNnc1kxWWFWUUtNRGl1YWVJeVk0bmdwQVV5MVFVZUQ0MW1ob1JtdDJha3h3SFdwYzMzMDVPVXh0b0M0TU1OYXdOVHgzYkZGOWtFRWJmdm00MFBTNEF1NDFLU013TERBdmFzWDZsM01yVExNWUllOHNQTVhsdENRbVBoRmZmekRrb05IS21FMm5lQmtwV1JmTEdXMHpjTHdCN29NMjlqNFVwclNMTzRtSXBuZjB1NjB0VFRHcXdmZWVwa1RSWjlQekkzR3dCV2N0aHFnY0xoYlZxSTJmZU90Z3gzeE5Sa2xFOE1xbnVLTHNSR3Q="
m_p: "h9G6gdj581MAtwVa4o85g8eM2X27Z3s5zl70LL1I3PrWYI7uDru1yBvpZ6J2n02c"
e_t: "1614103914712"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "1379.85"
  vouBalance: "0"
  vouList {
    id: 64234430
    type: 2
    minCousume: 100
    vouCount: 99
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64234429
    type: 2
    minCousume: 100
    vouCount: 99
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64234428
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 3
}
userinfo {
  username: "156******06"
}

2021-02-22 20:11:52,302-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 20:11:52,302-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "5.0"
  t_p: "8fc7693a730749bba701914317ef2a6c"
  imei: ""
  model: "PBDM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "EZIYlaNF"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
payrequestid: "KB202102222011522076075925571102"
version: "260"
queryType: "PAY"

2021-02-22 20:11:52,386-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "2002"
  msg: ""
}
successStatus: "1086"
origAmount: "0.28"

2021-02-22 20:11:52,386-INFO-lib.common_biz.find_database_table-49-`pay_cocoin_2`.`pay_user_info_75`
2021-02-22 20:11:52,386-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select balance from `pay_cocoin_2`.`pay_user_info_75` where ssoid = "2076075925"
2021-02-22 20:11:52,390-INFO-fiz_db_operate-26-可币余额：1379.8500
2021-02-22 20:11:52,390-INFO-recharge_spend-50-可币余额正常
2021-02-22 20:11:52,391-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `db_order_4`.`order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "KB202102222011522076075925571102"
2021-02-22 20:11:52,395-INFO-lib.common_biz.fiz_assert-25-订单详情：{'id': 21487, 'pay_req_id': 'KB202102222011522076075925571102', 'notify_id': '2821670611448487872247790775', 'partner_order': 'T5wf2bZaEFyGhqk3c8VlBdzCxiN9mKte', 'amount': 28, 'refund': 0, 'contents': 'RECHARGE_SPEND ', 'products_name': 'RECHARGE_SPEND', 'counts': 1, 'ssoid': '2076075925', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': '1603465160', 'ip': '58.252.5.72', 'mac': '', 'model': 'PDCM00', 'app_package': 'com.example.pay_demo', 'app_ver': '208006', 'sdk_ver': '260', 'partner_code': '2031', 'notify_url': 'http://secure.pay-test3.wanyol.com/notify/receiver', 'status': 'OK', 'channel_id': '', 'channel_type': 'NATIVE', 'pay_type': 'wxpay', 'direct_pay': 'KEBI', 'game_type': 'WANGYOU', 'present_amount': 0, 'original_amount': 28, 'discount_info': '', 'extra': None, 'remark': 'new way', 'request_time': datetime.datetime(2021, 2, 22, 20, 11, 54), 'success_time': datetime.datetime(2021, 2, 22, 20, 11, 50), 'modify_time': datetime.datetime(2021, 2, 22, 20, 11, 55), 'trade_type': 'PAY', 'kebi_spent': 2800, 'voucher_amount': 0, 'voucher_info': '{"cutAmount":"0","id":"0","type":"0"}', 'country_code': 'CN', 'currency': 'CNY', 'openid': None, 'brand_type': 'OPPO', 'mobile_os_ver': '16', 'platform': '', 'screen_info': 'FULL', 'combine_order': 'N', 'voucher_id': '0', 'factor': ''}
2021-02-22 20:11:52,395-INFO-lib.common_biz.fiz_assert-36-订单表信息记录异常
2021-02-22 20:13:34,617-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.52.46.169', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-02-22 20:13:34,894-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-02-22 20:13:34,934-INFO-lib.common.db_operation.redis_operation-33-连接redis集群[{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]成功
2021-02-22 20:13:34,935-INFO-lib.common.db_operation.redis_operation-74-connection list: [{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]
2021-02-22 20:13:35,276-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=0
2021-02-22 20:13:35,280-INFO-lib.common_biz.find_merchant_info-28-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1603465160'}
2021-02-22 20:13:35,280-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1603465160' AND pay_channel = 'wxpay'
2021-02-22 20:13:35,284-INFO-lib.common_biz.find_key-108-查询到秘钥信息：g4rTCeoBJFG4KyWCjTQCqltfEDma3yxR
2021-02-22 20:13:35,284-INFO-lib.common_biz.find_database_table-49-`pay_cocoin_2`.`pay_user_info_75`
2021-02-22 20:13:35,285-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select balance from `pay_cocoin_2`.`pay_user_info_75` where ssoid = "2076075925"
2021-02-22 20:13:35,288-INFO-fiz_db_operate-26-可币余额：1379.8500
2021-02-22 20:13:35,297-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 20:13:35,297-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTI0MzIzNTkxNzUsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTHFLUlgvNDgxVm4wTlBnMHRsRTBoekt0UWlkOTU4Y1paT3JjWFVaaWdCbGc9In0.MEQCIDNerQ91ofjYoUWHcxjmBpIwDBFkoANGJahYcnZLFr3OAiAYXRHenkKELTRtELmqHC0KEG5WiDIP86ORppeeUp1gcA"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "63947810123966"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "NZfTuhs0wI7RVFjvHlergqc1QnBPMiky"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-02-22 20:13:35,392-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "ebf5eef9bff84cbbaea9ad0eda8b413c"
s_p: "TVM5MlBldVh3SE85SEtQYTB6YWhnRDdXdVVxR2d1TjVxQlRyRHN4dHNWdzlMbDl6djZtZjRPaUlPT1dlYTRBakt3a1BRUFRzeENEb1g0OXowSWxHbEdJWXFRd3pUdTRLeTg5bzlkVVRMN2F5c0E4UDB1cDNRd1RzaVFQdjFXcW9QUk1QTVo2SGJiZVAyYm92aWJvenJ5cE13VHZBZDFzVEpHUzlYZkNSVThSZE5NMTJLSjN1WnA3N0NZMEtjSHYwSGNVcnpJRlJXZE9zcTZNS2Y5WjVEYUlSNEhWYlR5dGR6QnllNlY3VG5OTU9yU3psRGlKN0lmRWlzUUI3cTZ3a1NIbTh1VTR4Wmh0NzBWRDFjeGJVTmttVmhTbThCRTk5b1JyREVQRnFWSTdBMDFudW5iajNuTFdVWHYyd09RUjF4dFlxQ0ZZZEJWWHJsbmREZ05jeDNFMGJIMFdLRmZjQzlPWDRuc0xuNXAyWUlqRlVJWjRJV2liTHZxNXVkaml3b3Y1T3VHTnV1MFVVd0JEVUh5ZXhGTHh5WVY2cUJrSTRBQWNSa2pOdU05VnNnbzZWbEx0SlVyTHVvMmZ2cVpnT2phazUzUExiT0RhdzRpT2ZXNURjWVBxZHhyZ3FySUNDRm9yTzk4ZENzdVlIT2loaklmRGhuaktVUGUzZDlQVjl5bmozVDZNM2dYb3FiUlpsdmpwcndldkdaTG1aS2dHSmVla2llbUFBOE1PUXcxMGZ5dU1ERlBGaWl5bDlCYjdnTllHZERHV3FrdFlXazZvQkpOTDNQdVB1alczdW5jU1AxUVpZbDY5TFMwRmNXWmxjWnQ0UEU5emgzWE1MVHhDSTZlQlJHcDlqV3RhS0tTNEVNZlpSWHZKMkVRcmM3REJkTlp0ZXdXQ0FHWm1YNm5vbk1meElNS2pKTUdIdmVVWnVlRWp4OHhTQmdPcHN6azRDaTJMQUEydks3TzZQUUN6eUVKQ2ZaajJ5Zno3dW9OSGJLNXZqZ2xiVFFuYWJZaTIwZDVUcllpaUpSTlljODJLV0pmb0FobE02MHRjS0g1RTk="
m_p: "3nCfc59Mwbw6QQ18PvEP97Wk23hc85ab18X9a7758BNoT22s22mCI8eR7e509Fe9"
e_t: "1614104017794"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "1379.85"
  vouBalance: "0"
  vouList {
    id: 64234430
    type: 2
    minCousume: 100
    vouCount: 99
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64234429
    type: 2
    minCousume: 100
    vouCount: 99
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64234428
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 3
}
userinfo {
  username: "156******06"
}

2021-02-22 20:13:35,414-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 20:13:35,414-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "12.0"
  t_p: "ebf5eef9bff84cbbaea9ad0eda8b413c"
  imei: ""
  model: "PDCM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "6HbbeP2b"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: ""
  brandType: "OPPO"
  mobileos: "16"
  androidVersion: "29"
}
type: "wxpay"
amount: "255"
cardno: ""
cardpwd: ""
ext: ""
basepay {
  channelId: ""
  notifyurl: "http://secure.pay-test3.wanyol.com/notify/receiver"
  productName: "RECHARGE_SPEND"
  productDesc: "RECHARGE_SPEND "
  partnercode: "2031"
  appversion: "208006"
  currencyName: "CNY"
  rate: 1.0
  partnerorder: "3Kvh4HVjXIzCJqGZnb7L5uEeakOlFMWi"
}
sign: "SVm6mfx0CkijN09xj/vvVBtKRjb4XFd2nRRqNnDqOUnV3t/1kR4KE9LX3lPM8aAOR83HjSOV7pMlNtJZP/EE23D4BYu77+dOITvhEg8gvZ1NWGCC4IHUA3nFDKfN69WkjGeKcSyDjxyASO4IN2YfVtwGhFK86oRv19YdIq1p0PSOm2NSCsGfptDYkbFXJtFS+SMPsNb2z/Y0kcmjEiOI7U4Lf5++gOHGF610A/iG85PnIbxmpXfO5VeuGEv9ff+YEU/pgDTuVj9a6TcUvexwaomIQpl27V6j5U/u7jRB1sPbYNdeioGr0J98Gxl5IGcO0PilWoACLbIMBfdIKyRcwg=="
ip: "183.238.170.71"
expendRequest {
  header {
    version: "12.0"
    t_p: "ebf5eef9bff84cbbaea9ad0eda8b413c"
    imei: ""
    model: "PDCM00"
    apntype: "1"
    package: "com.example.pay_demo"
    r_v: "6HbbeP2b"
    ext: ""
    sdkVer: 260
    country: "CN"
    currency: "CNY"
    openId: ""
    brandType: "OPPO"
    mobileos: "16"
    androidVersion: "29"
  }
  price: 255
  count: 1
  productname: "RECHARGE_SPEND_PRICE=AMOUNT"
  productdesc: "RECHARGE_SPEND_PRICE=AMOUNT"
  partnerid: "2031"
  callBackUrl: "http://secure.pay-test3.wanyol.com/notify/receiver"
  partnerOrder: "3Kvh4HVjXIzCJqGZnb7L5uEeakOlFMWi"
  channelId: ""
  ver: "208006"
  source: "auto_test"
  attach: ""
  sign: "L8HyhY81WED0qyvDF+8wbSL6oBSc2VuhzHO65g1+raNN8J9GG2koQc396ETEsp0m0W6EmOdNB3T8oLlznzQoJsGAt1AgDKUearMHDpsj4DiAs40LGoyWDW3Z6QsbePspXacN3h5TxKnJkNz4vCwKyp+5dEFjop5nT4CB/ltBvtM="
  factor: ""
}
isNeedExpend: "1"
appId: ""
payTypeRMBType: "0"
tradeType: "common"
screenInfo: "FULL"

2021-02-22 20:13:35,821-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "{\"appid\":\"wx93eea96ecc33f168\",\"noncestr\":\"e1929a4703614f31b094104eba4bb2bf\",\"packageNm\":\"Sign=WXPay\",\"partnerid\":\"1603465160\",\"prepayid\":\"wx2220133819125061c27e9ef8257b440000\",\"sign\":\"704144864CF39CDD0555E8A28A29DB59\",\"timestamp\":\"1613996018\"}"
}
payrequestid: "KB202102222013372076075925121812"
model: ""

2021-02-22 20:13:35,821-INFO-wxpay-scarlet-51-回调参数：<xml><transaction_id><![CDATA[8077064456546032650015702691]]></transaction_id>
<nonce_str><![CDATA[e1YDlNzgE8RyZQd0nBpkLj9MAWuV4qc2]]></nonce_str>
<bank_type><![CDATA[OTHERS]]></bank_type>
<openid><![CDATA[oCg6Xt8NvRi7jGuap_5B6XdY4oYk]]></openid>
<sign><![CDATA[CD0D5ED18668BF3BF72E87B4086984E2]]></sign>
<fee_type><![CDATA[CNY]]></fee_type>
<mch_id><![CDATA[1603465160]]></mch_id>
<cash_fee><![CDATA[1]]></cash_fee>
<out_trade_no><![CDATA[KB202102222013372076075925121812]]></out_trade_no>
<appid><![CDATA[wx93eea96ecc33f168]]></appid>
<total_fee>255</total_fee>
<trade_type><![CDATA[APP]]></trade_type>
<result_code><![CDATA[SUCCESS]]></result_code>
<attach><![CDATA[TEST]]></attach>
<time_end><![CDATA[20210222201335]]></time_end>
<is_subscribe><![CDATA[N]]></is_subscribe>
<return_code><![CDATA[SUCCESS]]></return_code>
</xml>
2021-02-22 20:13:35,947-INFO-wxpay-scarlet-55-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-02-22 20:13:35,947-INFO-wxpay-scarlet-57-回调解析成功
2021-02-22 20:13:35,955-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 20:13:35,955-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTI0MzIzNTkxNzUsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTHFLUlgvNDgxVm4wTlBnMHRsRTBoekt0UWlkOTU4Y1paT3JjWFVaaWdCbGc9In0.MEQCIDNerQ91ofjYoUWHcxjmBpIwDBFkoANGJahYcnZLFr3OAiAYXRHenkKELTRtELmqHC0KEG5WiDIP86ORppeeUp1gcA"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "83677165146787"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "7ZOlsLjnBi5yKM89R0a6k31fJcTUhd4x"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-02-22 20:13:36,053-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "bbf990b270474527a816e909c9e8cd33"
s_p: "VTlMMWdDUHNTMGxxakZ3d3hsR1RabTczREJpeE04MmVtYmlDQUtCYTRHb0N1RjBSc2JINkhmUDEzWTQzOE5MYW9aYUJrTTFqSzNQWXgwNXhoZ1U2MnFHRUNYd04zOHZZcFVvaUI1N1I1RUVlZ1R2N3g3dW8wbUtFc1B1MGczNlhwYWtlTExGdHJwQ2VJZlBrZjZwY2F5S3kyUDdpRTVsUUQzNHozd2txVVc5MlpOV3FJU1Y2TXNCSlJqVFFGcjdTTkVDNWJhUFFmVmpKV1FlTUxKQnE1QlR3T0Z6YVk4SGJzOXJiSTF1NkxJdjY3Y1FBUkVPVEhvbDRibU9DYmhkVFFwZzl1R2kzTzA0ZHRVeVJoU0NUa2l2OXRFMkI3SzVhR2k3VkZqT3ZBQkVhZVIyQ3FMZHVtU2R4UGpmZDJRWHRTZW1MVjFLVFFiRjR2dnViYkRPdkoza0I4WjlJcjJwczB6aUttSHlBNXVjSnhsQVRoM1p3TmVsa09HZEFLaGg3blVJSm9VRFdvazdDWWc4TFNuc2JBRDl6dFlaZkRZQXhqRldwbHJtTURKTzdiYkdDVmt3OVF4RUZTMThvZXdlMVlsQ2NiTVJ2VHEya0gxOGEwWUdveExLdTRDZldUVmdSM1ZvbU9jSEtNZmE0bWo2c01aMGc3VlV6U1paRjB1UDZoZzl4R1ViRkhDU0RTWWRCMVpJUW82OVg1b1REZklQdkttNEFLTkRVVW4wblVLQnQyZHZZWjkwVUJPWVVVeDg5ZVFqQ0lZZkxTa1ZtRFVOTFdxZENtcjdwU2ZFaXp3RGRVY3VhMWZZejZzaFBYcllnbTRRM01wRUh6MHRvV2xIdm00WVlIbk5XakRMbVdJVWl3emRmcmFPZWZUZUFlbXllMnlBQzEwcWVlNU90NnNUb2szNVdBbGVScDYydWhDN3dQRXNTanEwNkdlV25RaHM1cDJNaDdPS0hKaHJidUFEUTloYVNpbmcxaW83Y0dzaTV3SllRUHVNT2NYTlBCeVdKNVIyUnZoMjBoNlZVTG9EckZjczdoZTlEM3FFZlhNZlY="
m_p: "gxOWDz55O1g2Xl9pgty7RJR38luXv88HRmGDQKdp2a5Co7EKCJL1MQeHU03F6MlN"
e_t: "1614104018459"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "1379.85"
  vouBalance: "0"
  vouList {
    id: 64234430
    type: 2
    minCousume: 100
    vouCount: 99
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64234429
    type: 2
    minCousume: 100
    vouCount: 99
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64234428
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 3
}
userinfo {
  username: "156******06"
}

2021-02-22 20:13:36,054-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 20:13:36,054-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "5.0"
  t_p: "bbf990b270474527a816e909c9e8cd33"
  imei: ""
  model: "PBDM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "6XpakeLL"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
payrequestid: "KB202102222013372076075925121812"
version: "260"
queryType: "PAY"

2021-02-22 20:13:36,115-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "2002"
  msg: ""
}
successStatus: "1086"
origAmount: "2.55"

2021-02-22 20:13:36,115-INFO-lib.common_biz.find_database_table-49-`pay_cocoin_2`.`pay_user_info_75`
2021-02-22 20:13:36,116-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select balance from `pay_cocoin_2`.`pay_user_info_75` where ssoid = "2076075925"
2021-02-22 20:13:36,119-INFO-fiz_db_operate-26-可币余额：1379.8500
2021-02-22 20:13:36,120-INFO-recharge_spend-50-可币余额正常
2021-02-22 20:13:36,120-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `db_order_4`.`order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "KB202102222013372076075925121812"
2021-02-22 20:13:36,125-INFO-lib.common_biz.fiz_assert-25-订单详情：{'id': 21488, 'pay_req_id': 'KB202102222013372076075925121812', 'notify_id': '8077064456546032650015702691', 'partner_order': '3Kvh4HVjXIzCJqGZnb7L5uEeakOlFMWi', 'amount': 255, 'refund': 0, 'contents': 'RECHARGE_SPEND ', 'products_name': 'RECHARGE_SPEND', 'counts': 1, 'ssoid': '2076075925', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': '1603465160', 'ip': '58.252.5.72', 'mac': '', 'model': 'PDCM00', 'app_package': 'com.example.pay_demo', 'app_ver': '208006', 'sdk_ver': '260', 'partner_code': '2031', 'notify_url': 'http://secure.pay-test3.wanyol.com/notify/receiver', 'status': 'OK', 'channel_id': '', 'channel_type': 'NATIVE', 'pay_type': 'wxpay', 'direct_pay': 'KEBI', 'game_type': 'WANGYOU', 'present_amount': 0, 'original_amount': 255, 'discount_info': '', 'extra': None, 'remark': 'new way', 'request_time': datetime.datetime(2021, 2, 22, 20, 13, 38), 'success_time': datetime.datetime(2021, 2, 22, 20, 13, 35), 'modify_time': datetime.datetime(2021, 2, 22, 20, 13, 38), 'trade_type': 'PAY', 'kebi_spent': 25500, 'voucher_amount': 0, 'voucher_info': '{"cutAmount":"0","id":"0","type":"0"}', 'country_code': 'CN', 'currency': 'CNY', 'openid': None, 'brand_type': 'OPPO', 'mobile_os_ver': '16', 'platform': '', 'screen_info': 'FULL', 'combine_order': 'N', 'voucher_id': '0', 'factor': ''}
2021-02-22 20:13:36,125-INFO-lib.common_biz.fiz_assert-36-订单表信息记录异常
2021-02-22 20:16:24,775-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.52.46.169', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-02-22 20:16:25,049-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境3-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-02-22 20:16:25,090-INFO-lib.common.db_operation.redis_operation-33-连接redis集群[{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]成功
2021-02-22 20:16:25,090-INFO-lib.common.db_operation.redis_operation-74-connection list: [{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]
2021-02-22 20:16:25,449-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=0
2021-02-22 20:16:25,452-INFO-lib.common_biz.find_merchant_info-28-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1603465160'}
2021-02-22 20:16:25,453-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1603465160' AND pay_channel = 'wxpay'
2021-02-22 20:16:25,456-INFO-lib.common_biz.find_key-108-查询到秘钥信息：g4rTCeoBJFG4KyWCjTQCqltfEDma3yxR
2021-02-22 20:16:25,457-INFO-lib.common_biz.find_database_table-49-`pay_cocoin_2`.`pay_user_info_75`
2021-02-22 20:16:25,457-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select balance from `pay_cocoin_2`.`pay_user_info_75` where ssoid = "2076075925"
2021-02-22 20:16:25,461-INFO-fiz_db_operate-26-可币余额：0.0000
2021-02-22 20:16:25,469-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 20:16:25,470-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTI0MzIzNTkxNzUsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTHFLUlgvNDgxVm4wTlBnMHRsRTBoekt0UWlkOTU4Y1paT3JjWFVaaWdCbGc9In0.MEQCIDNerQ91ofjYoUWHcxjmBpIwDBFkoANGJahYcnZLFr3OAiAYXRHenkKELTRtELmqHC0KEG5WiDIP86ORppeeUp1gcA"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "79720380720077"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "2efJBmTKnUk3lEQVrxYXgRLt4hi9Sdwa"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-02-22 20:16:25,561-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "91f3ddc89f674542806e24bd3f3eb636"
s_p: "bHRmYkdzcjNZTzJVSFBZM0lvQk9xUThUaDdNbmdOV1lQSlh1QjBFRGE3STdQYVJ0TDRsYnBMWGJnV2YxbWIzS3NWTHRuYWNmY3QxbEo2QzFGVkM5S01QWTdRTjBFYVJ6ZzFIQmkzdUQ1U3RXY2Y1MmxQQzcwUGNMVlZJY3NYWTFRRFU0T1dEUkJDd0s0SWF1MEE4UG5Ma0F2VjNUbUJ4OHpMNWlieXpybnJmamNMM0trUk5WcFpmbmlJeDEwb1Z6MDJVS0hreDJRNUxjdmN5WHFJaDBQQ3JHeG51dDZ0WHV5d0Y0VWlCc3B4Q1ZQUzM5b1hpVXRkWTB6d1E4TWlUSE8xcXFJalVOY1BGOE8yVVJyZVY3dWQ4TzNWZklZTlZwSERZMHI4enlZdm9xMkM2VGRGeDJzekxGMEFxZGtod3RrOG05c21HTzR6ejdUdG5jbHoyaExqVDViOWtWNkpiVVdGb2ZmZURDWmpWV3hvUTdTR0U4ZG83MXpORjh3YmJWb1lJdUQ3UG05cU1KU2tPSFI2ZVJuZGpBaGdtamtrR0NIVnJiRVBuY3kybEN6Z2xuMjEyN0JFY2VibWpxeWZDUDFXWTZGUnpDaDkyTlhiUnh2bEdsS01aWWVYUWZ4bmhEWm5ackM4NmZhSnBxNFRyR25QaGtkUFlsSTVRTmREeWZwWkV0aVdXZjNzZllGUGlDUFo3dTBZcmhNQ244SElKcTJtNWtpbHZybTdmZ2FDVUlUVkF3OHpoQldiV2JidVdiVzRWME15SFpmd0ZpeFRzSmhGNEpVNkxRaEFseU1LeDhVcHpHczNKc2QxSmhCQnZyTW5URHNlcGU4bDhKMFRSY0RqTmtXRDBQV1E0ZUlJakpWakxDaTFVWUdVS2tpNEVVdWRCQUMxakVFSk1DWHB3T3puVmVpM1BoOVhYclBjbFF3UmhTSWw5Y2lwcVY2emRKS0NCWHFQSTlGaGlkenRNVE8zSUpRT0lTdUgyWnpSbFdoZ1ZNUlVaWE5LVXZJSVRJWEZURFhuSnJyWHl1eTR5OFlKb0sycVgyNDBURjJmeVQ="
m_p: "297Ly9SB36cviZm5Uh089zh215Y1Z91FK3pP85N6jeGg2UzosPP5YA9IFSZ1ZWOd"
e_t: "1614104187969"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0"
  vouBalance: "0"
  vouList {
    id: 64234430
    type: 2
    minCousume: 100
    vouCount: 99
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64234429
    type: 2
    minCousume: 100
    vouCount: 99
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64234428
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 3
}
userinfo {
  username: "156******06"
}

2021-02-22 20:16:25,583-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 20:16:25,583-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "12.0"
  t_p: "91f3ddc89f674542806e24bd3f3eb636"
  imei: ""
  model: "PDCM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "8PnLkAvV"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: ""
  brandType: "OPPO"
  mobileos: "16"
  androidVersion: "29"
}
type: "wxpay"
amount: "908"
cardno: ""
cardpwd: ""
ext: ""
basepay {
  channelId: ""
  notifyurl: "http://secure.pay-test3.wanyol.com/notify/receiver"
  productName: "RECHARGE_SPEND"
  productDesc: "RECHARGE_SPEND "
  partnercode: "2031"
  appversion: "208006"
  currencyName: "CNY"
  rate: 1.0
  partnerorder: "JSB61OjCF2k5WbZprHV39PxfhKMgtXUQ"
}
sign: "QjzW+Te9DBksGej0zzeiHfDehgZmxbAdfAd6gnmlT9p/AdwzSJLdUOHDjiTgVO56GXxG1GpVjG5U+l3iAzowddyFB1+FsoZnN55t8IV3FjY8ficuvA2fKV4JfYxmiBHsEOwj65fVpEL7e1mgkl1rUI/wShYQg6jpY3MHUS5aj9Yt3nraxNJSOmSvcvrVfJmYuuDE0+KLFvLvu9JOIER8qdYJv/CzTbfWOz4OXpEkqCgTehdWe0YHCIvF6LO1/HupMrzY0Jr9BgI/rq1kWCvIvu1Wuwy0YnK4TNjGy0QYzarV/n2YLujjzA5Vszkr1zX2VwWC+e5AJMOi/wFFDAf56w=="
ip: "183.238.170.71"
expendRequest {
  header {
    version: "12.0"
    t_p: "91f3ddc89f674542806e24bd3f3eb636"
    imei: ""
    model: "PDCM00"
    apntype: "1"
    package: "com.example.pay_demo"
    r_v: "8PnLkAvV"
    ext: ""
    sdkVer: 260
    country: "CN"
    currency: "CNY"
    openId: ""
    brandType: "OPPO"
    mobileos: "16"
    androidVersion: "29"
  }
  price: 908
  count: 1
  productname: "RECHARGE_SPEND_PRICE=AMOUNT"
  productdesc: "RECHARGE_SPEND_PRICE=AMOUNT"
  partnerid: "2031"
  callBackUrl: "http://secure.pay-test3.wanyol.com/notify/receiver"
  partnerOrder: "JSB61OjCF2k5WbZprHV39PxfhKMgtXUQ"
  channelId: ""
  ver: "208006"
  source: "auto_test"
  attach: ""
  sign: "bNqUqghcb75sUVbObhsHnnmqEeZCuJ9dmRuD1xfv+lsifDXLPpjDOqnCtGdD553cixUBZ21X5QNm4ZoYjkbaVDaxk/M8sTwofkF+LOrFKeYAeF9qrsfAp/nMSa2Xy4Pu9vRYRjxiNlTVLlwgpjTbhrsUj6+A/kyeBk2qSypGgCY="
  factor: ""
}
isNeedExpend: "1"
appId: ""
payTypeRMBType: "0"
tradeType: "common"
screenInfo: "FULL"

2021-02-22 20:16:26,018-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "{\"appid\":\"wx93eea96ecc33f168\",\"noncestr\":\"92bd09270e194460ae7f0ac3dee5ee76\",\"packageNm\":\"Sign=WXPay\",\"partnerid\":\"1603465160\",\"prepayid\":\"wx22201628393383b58351cb8081878b0000\",\"sign\":\"686B1514C915C7FE6E5D2A3CC098ECFB\",\"timestamp\":\"1613996188\"}"
}
payrequestid: "KB202102222016282076075925712672"
model: ""

2021-02-22 20:16:26,019-INFO-wxpay-scarlet-51-回调参数：<xml><transaction_id><![CDATA[8029896519638979281207907849]]></transaction_id>
<nonce_str><![CDATA[isfZdGETkNhzBRn60JymwaAc7q1bjrI5]]></nonce_str>
<bank_type><![CDATA[OTHERS]]></bank_type>
<openid><![CDATA[oCg6Xt8NvRi7jGuap_5B6XdY4oYk]]></openid>
<sign><![CDATA[BC213C81259204D4EB2E5D686CE63B49]]></sign>
<fee_type><![CDATA[CNY]]></fee_type>
<mch_id><![CDATA[1603465160]]></mch_id>
<cash_fee><![CDATA[1]]></cash_fee>
<out_trade_no><![CDATA[KB202102222016282076075925712672]]></out_trade_no>
<appid><![CDATA[wx93eea96ecc33f168]]></appid>
<total_fee>908</total_fee>
<trade_type><![CDATA[APP]]></trade_type>
<result_code><![CDATA[SUCCESS]]></result_code>
<attach><![CDATA[TEST]]></attach>
<time_end><![CDATA[20210222201626]]></time_end>
<is_subscribe><![CDATA[N]]></is_subscribe>
<return_code><![CDATA[SUCCESS]]></return_code>
</xml>
2021-02-22 20:16:26,150-INFO-wxpay-scarlet-55-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-02-22 20:16:26,150-INFO-wxpay-scarlet-57-回调解析成功
2021-02-22 20:16:26,157-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 20:16:26,157-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTI0MzIzNTkxNzUsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTHFLUlgvNDgxVm4wTlBnMHRsRTBoekt0UWlkOTU4Y1paT3JjWFVaaWdCbGc9In0.MEQCIDNerQ91ofjYoUWHcxjmBpIwDBFkoANGJahYcnZLFr3OAiAYXRHenkKELTRtELmqHC0KEG5WiDIP86ORppeeUp1gcA"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "62990253166820"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "z58EFtJb9d3nqgO2lsyNRKjU6uB0QHTi"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-02-22 20:16:26,241-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "d8dcf9e17d5d4f4bb87c133f9e797d2b"
s_p: "eDZWVU1mMkVpOWoxS2w0cHNuYmhTd2I1S2cybGJvTnVrZk1KSEdQUXN2MnRPZHRWS1BURGNoMVFjQnFBQTZOMHdCcmc3YlRiUGVBUTlPTmhkNEtTQTJpdGZVaW9RVlJMbzB1UmUzMzh2cnJRdk43OExyb1RRck05Zjh4WmpwaVBQZllqY2QyNW94TjllNk1PYnhPa3ViTnczQko4TFI2R0UwWkdMem1jelJWaUlhWFNzcGlQQ1p2ZTZ1WE9QUTY1cE9OMDNyVUVNRUIxU05sTjRzVXUzbkpUMmo1TXhZYjl6dnZLRnBsTVREaEFkZWtuc0lkMGQxcERHSmJwNzYyeWpPMEs1SnkwQ09PWFkzTDZMRTk4bVpBdzVyc0lNdnlieHdLNWNMa0ljT2JTbG9WRFNVNEd0MUxYbHFJNld2UmhBQUVHaWR6eDhSMng4RjdQbGJxMHlkN1pkNUpNZm1jRzk3UXVmcEVLOVFLQUxTc1daTlRQeEIzMkM3dERYZWdnNFN2dU1iOG9kM3JpUG5rSGgzTk9EV2ZpMUptTGxIcXFTNERwclVJM2xuWHFUYTRmYlBHbmdBQ2xwNjBIcTFuVEt2TjlpOXZ6MEdkWE1GbFM0MDVXcUlpSHVabjdDcVNuU0xVV3BDS3A2MnZFNldzMFpjTVhLaXp3Y29hM0pSellmajZjY2t2WW8wVUdyQU1LWXFMWE96ZmJLR0ZXUHI3MzY5ZjNvcjd0TkNUSEpWVXJFVmVCaWRFYkZGMmRLOG5MdHZTVk9idk9URTU0WVVHZDRNV0ZpaExBczhCZTNCWHJGZU9hMm1aYm50UlJGaEZ2SmVGVnhCRzh3NTZkTThIckQ0VGZFYnVuUTZwS2R1QTdGNFplSElQSWRSQ2xWZ3dQdENFU3N3UU9jNUtzNDJLTTJqZWlJS2NCekd4WW5oaXh3cDN2ZWV5TE1tTUg2M0VWQ0ZRSmJGNFU5Z2xPQzZhZDFtM1h0dEdMVDBCNGhYTTZLZktEczk3VDZ3MmdTbnozVnRzdFJKaWUzM0xJOVVuemloOUtub2NFWElTN29VWkc="
m_p: "ffA6XUIGs2KKq59A09iwM44d9a4Doi1jte449J05ePK581g23UCgH4pjxE842N9y"
e_t: "1614104188648"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0"
  vouBalance: "0"
  vouList {
    id: 64234430
    type: 2
    minCousume: 100
    vouCount: 99
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64234429
    type: 2
    minCousume: 100
    vouCount: 99
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64234428
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 3
}
userinfo {
  username: "156******06"
}

2021-02-22 20:16:26,241-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 20:16:26,241-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "5.0"
  t_p: "d8dcf9e17d5d4f4bb87c133f9e797d2b"
  imei: ""
  model: "PBDM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "e338vrrQ"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
payrequestid: "KB202102222016282076075925712672"
version: "260"
queryType: "PAY"

2021-02-22 20:16:26,312-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "2002"
  msg: ""
}
successStatus: "1086"
origAmount: "9.08"

2021-02-22 20:16:26,313-INFO-lib.common_biz.find_database_table-49-`pay_cocoin_2`.`pay_user_info_75`
2021-02-22 20:16:26,313-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select balance from `pay_cocoin_2`.`pay_user_info_75` where ssoid = "2076075925"
2021-02-22 20:16:26,317-INFO-fiz_db_operate-26-可币余额：0.0000
2021-02-22 20:16:26,317-INFO-recharge_spend-50-可币余额正常
2021-02-22 20:16:26,318-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `db_order_4`.`order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "KB202102222016282076075925712672"
2021-02-22 20:16:26,322-INFO-lib.common_biz.fiz_assert-25-订单详情：{'id': 21490, 'pay_req_id': 'KB202102222016282076075925712672', 'notify_id': '8029896519638979281207907849', 'partner_order': 'JSB61OjCF2k5WbZprHV39PxfhKMgtXUQ', 'amount': 908, 'refund': 0, 'contents': 'RECHARGE_SPEND ', 'products_name': 'RECHARGE_SPEND', 'counts': 1, 'ssoid': '2076075925', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': '1603465160', 'ip': '58.252.5.72', 'mac': '', 'model': 'PDCM00', 'app_package': 'com.example.pay_demo', 'app_ver': '208006', 'sdk_ver': '260', 'partner_code': '2031', 'notify_url': 'http://secure.pay-test3.wanyol.com/notify/receiver', 'status': 'OK', 'channel_id': '', 'channel_type': 'NATIVE', 'pay_type': 'wxpay', 'direct_pay': 'KEBI', 'game_type': 'WANGYOU', 'present_amount': 0, 'original_amount': 908, 'discount_info': '', 'extra': None, 'remark': 'new way', 'request_time': datetime.datetime(2021, 2, 22, 20, 16, 28), 'success_time': datetime.datetime(2021, 2, 22, 20, 16, 26), 'modify_time': datetime.datetime(2021, 2, 22, 20, 16, 29), 'trade_type': 'PAY', 'kebi_spent': 90800, 'voucher_amount': 0, 'voucher_info': '{"cutAmount":"0","id":"0","type":"0"}', 'country_code': 'CN', 'currency': 'CNY', 'openid': None, 'brand_type': 'OPPO', 'mobile_os_ver': '16', 'platform': '', 'screen_info': 'FULL', 'combine_order': 'N', 'voucher_id': '0', 'factor': ''}
2021-02-22 20:16:26,322-INFO-lib.common_biz.fiz_assert-36-订单表信息记录异常
2021-02-22 20:17:00,741-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境1-MYSQL：{'host': '10.52.44.235', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-02-22 20:17:01,017-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境1-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-02-22 20:17:01,066-INFO-lib.common.db_operation.redis_operation-33-连接redis集群[{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]成功
2021-02-22 20:17:01,066-INFO-lib.common.db_operation.redis_operation-74-connection list: [{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]
2021-02-22 20:17:01,426-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=0
2021-02-22 20:17:01,430-INFO-lib.common_biz.find_merchant_info-28-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601'}
2021-02-22 20:17:01,430-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-02-22 20:17:01,433-INFO-lib.common_biz.find_key-108-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-02-22 20:17:01,434-INFO-lib.common_biz.find_database_table-49-`pay_cocoin_2`.`pay_user_info_75`
2021-02-22 20:17:01,434-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select balance from `pay_cocoin_2`.`pay_user_info_75` where ssoid = "2076075925"
2021-02-22 20:17:01,437-INFO-fiz_db_operate-26-可币余额：111.3800
2021-02-22 20:17:01,446-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 20:17:01,446-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTI0MzIzNTkxNzUsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTHFLUlgvNDgxVm4wTlBnMHRsRTBoekt0UWlkOTU4Y1paT3JjWFVaaWdCbGc9In0.MEQCIDNerQ91ofjYoUWHcxjmBpIwDBFkoANGJahYcnZLFr3OAiAYXRHenkKELTRtELmqHC0KEG5WiDIP86ORppeeUp1gcA"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "62353599036737"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "Ewdq1eWh05yBzjixlHYLZO4JcnvSIfCk"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-02-22 20:17:01,590-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "78fa746f2224408aa968a50a5ec0b104"
s_p: "WmU4TjVoRm1QWjhQdmtTMDNvaEc3WlpXTHlFZ0tvcTJqWFRlcnBiQWpyYnJyeW9NaHJTWm1PQmVDaWl1MzRwQ0Q2bzdEekZPbWg4WVNKWkdvU0NjNjV4TGtZaVJoTmRIOWpkNzlHVG02Vkg1V0d0TWx6T3VnY251NUZpSUxtYkp4ZGljSmp5ZjJiajFMTGtBbFo3Ynk1S3R1T1BsQnk3czB6bktWQzZ4WWtOR3B6Q1lDT2gyTUxoOTg1YWJmeFdTSWs5dXdyZ3h6MHBNdnZKNzRnNWVVNmFxd2tGZjZHWnVVdjQ2M2ZnYXpYeDZESmdDS0U1b2FVZHRIOVF5OUdaZU1WZnNNV3FaV3dsd1FRaXpmZUhwMFp6alpkUkRIWklnQXJOREJRRlB6RGxWZFh3Mk5JUXZUQU5lRU0yVTZDeEFQRVdvY2xGc0k2RkVjcGZudVY4SjQwV3R0VXB5dWFrSXd3NkZiVXFuNjV0M0lna09RVmlVcHN5bHNjQ01HbmVYenpybVNzRHc4UjN4WWFkMldJQVpNWVN5cjBSUFJTZVJlencyd3UxVGJRUlRlSUo1SFdnVE5MYXNzOElzejhkMkc2a2hvaXBlODBvR2FJUzFwd0lJU3VWOHU1dVR5Y1F1RkRrSndUSUp1aVpqZlFFODBZa2wxOWwzVVpxek05N2huNzdFUW91Rlp5QzN1S0NSZDJpQkZ6RHJVR2MzaHZyaTNCWmx3dkE0bE9jekJZQ2F3RkREMlBDQlRGcFdqaU1OaTEyOGVidWVxbmdKZXNzS1huM1U1aGpQOXNkVGpiNVlNN2U2UVByeDZIOEFLbTV1TGlQRHo0djJVamdBMWpIOURyYXUzUHVQOWM5UFdHczlWVlBrUVR4ZTFNeFd5VmJXQ0dtRm5RaTl2ekJyb0FDT0JpbmdIUTBFMXVxNURZZnF2WEpUYjlGbHY4WXpUUWNQYmxhVVhpQnZJeDBGR2tRWW9kdE5RTjB2QkhxM2F1REp1VmE5Y0M3VGV4YjRhMXZRdDRQbDhTSUZickpJM3NzNEIyRUFhZGpPcVhwR0dnUGI="
m_p: "6g4NL37nA9k8N359T2TDYFk6rzqv92wV33fi1LT58JEYv516unGpcYwuPC0SYrG7"
e_t: "1614104223990"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "111.38"
  vouBalance: "0"
  vouList {
    id: 62299579
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299580
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299581
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299582
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299583
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299550
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299549
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299547
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299545
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299544
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299543
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299542
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299541
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299540
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299539
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299538
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299537
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299529
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 18
}
userinfo {
  username: "156******06"
}

2021-02-22 20:17:01,620-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 20:17:01,620-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "12.0"
  t_p: "78fa746f2224408aa968a50a5ec0b104"
  imei: ""
  model: "PDCM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "kYiRhNdH"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: ""
  brandType: "OPPO"
  mobileos: "16"
  androidVersion: "29"
}
type: "wxpay"
amount: "825"
cardno: ""
cardpwd: ""
ext: ""
basepay {
  channelId: ""
  notifyurl: "http://pay.pay-test.wanyol.com/notify/receiver"
  productName: "RECHARGE_SPEND"
  productDesc: "RECHARGE_SPEND "
  partnercode: "2031"
  appversion: "208006"
  currencyName: "CNY"
  rate: 1.0
  partnerorder: "cCs9l7tDmUSxI38XyLHPVdkuhiTzWjF6"
}
sign: "5dXbbarNSjxt+venmr2dMAEJFa+UJIwg9/rF6qRlZ2t6VRQG3RXviaz+FKgeNnm5XEq3v8HRXoY1lPIaLx6ZQ8GAsq4Xfq0kZmr2Ff8J2K6cofKssmi+EYp1zjEN9ezv7xZBzXQ46klAZZTZh65tK/LEKx9VvFtjfIOXKn7I3FrSPeNifL7h/3/GrsWYRJRTyJEzg8/3vRblcfqPB3MrYu7bIU5Nc5TvByfKq5IU/BFyi3IpkYnsf+s9++oh0ga8Sf3K+MXhfsKTPdLNSIKzO1IqWc5wXyMltdKViWaoDVNnCnG5qENjjKGdDZxcx3vtKvn/gdp2RCAi9pYymwrrkA=="
ip: "183.238.170.71"
expendRequest {
  header {
    version: "12.0"
    t_p: "78fa746f2224408aa968a50a5ec0b104"
    imei: ""
    model: "PDCM00"
    apntype: "1"
    package: "com.example.pay_demo"
    r_v: "kYiRhNdH"
    ext: ""
    sdkVer: 260
    country: "CN"
    currency: "CNY"
    openId: ""
    brandType: "OPPO"
    mobileos: "16"
    androidVersion: "29"
  }
  price: 825
  count: 1
  productname: "RECHARGE_SPEND_PRICE=AMOUNT"
  productdesc: "RECHARGE_SPEND_PRICE=AMOUNT"
  partnerid: "2031"
  callBackUrl: "http://pay.pay-test.wanyol.com/notify/receiver"
  partnerOrder: "cCs9l7tDmUSxI38XyLHPVdkuhiTzWjF6"
  channelId: ""
  ver: "208006"
  source: "auto_test"
  attach: ""
  sign: "MHBkhyTXAm0/bgp7mM2nDYRwAal3PxHLoAVSwUf6UT7gZJ6fOdKKAggUFsqzHvcCWASlOYZeSIPmEabDrH8biCsiWk6juRsGJwJMEH3RZk5kUPg587ZqGVsS48RRdL5StbXqWh81XE5j5DrrhP02CYhz0c+VzDXXTJEyhPezdSg="
  factor: ""
}
isNeedExpend: "1"
appId: ""
payTypeRMBType: "0"
tradeType: "common"
screenInfo: "FULL"

2021-02-22 20:17:02,068-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "{\"appid\":\"wx93eea96ecc33f168\",\"noncestr\":\"d7e22fc4d12f4c4a97891880a81cba65\",\"packageNm\":\"Sign=WXPay\",\"partnerid\":\"1259634601\",\"prepayid\":\"wx222017044371122b228535f32ffc990000\",\"sign\":\"730AC01272761742DA4BEBAB6BB2003C\",\"timestamp\":\"1613996224\"}"
}
payrequestid: "KB202102222017042076075925246322"
model: ""

2021-02-22 20:17:02,069-INFO-wxpay-scarlet-51-回调参数：<xml><transaction_id><![CDATA[9456841302307937209178476883]]></transaction_id>
<nonce_str><![CDATA[sJKPOlrkIzfHwmREp5NDQLuYiSUnT1jc]]></nonce_str>
<bank_type><![CDATA[OTHERS]]></bank_type>
<openid><![CDATA[oCg6Xt8NvRi7jGuap_5B6XdY4oYk]]></openid>
<sign><![CDATA[7E10243E8DF067B6AA36A68C6028044D]]></sign>
<fee_type><![CDATA[CNY]]></fee_type>
<mch_id><![CDATA[1259634601]]></mch_id>
<cash_fee><![CDATA[1]]></cash_fee>
<out_trade_no><![CDATA[KB202102222017042076075925246322]]></out_trade_no>
<appid><![CDATA[wx93eea96ecc33f168]]></appid>
<total_fee>825</total_fee>
<trade_type><![CDATA[APP]]></trade_type>
<result_code><![CDATA[SUCCESS]]></result_code>
<attach><![CDATA[TEST]]></attach>
<time_end><![CDATA[20210222201702]]></time_end>
<is_subscribe><![CDATA[N]]></is_subscribe>
<return_code><![CDATA[SUCCESS]]></return_code>
</xml>
2021-02-22 20:17:05,941-INFO-wxpay-scarlet-55-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-02-22 20:17:05,941-INFO-wxpay-scarlet-57-回调解析成功
2021-02-22 20:17:05,948-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 20:17:05,948-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTI0MzIzNTkxNzUsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTHFLUlgvNDgxVm4wTlBnMHRsRTBoekt0UWlkOTU4Y1paT3JjWFVaaWdCbGc9In0.MEQCIDNerQ91ofjYoUWHcxjmBpIwDBFkoANGJahYcnZLFr3OAiAYXRHenkKELTRtELmqHC0KEG5WiDIP86ORppeeUp1gcA"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "09774137755872"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "mE6kv25hRUjq1AVeQYWwx4olGgMpu3ac"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-02-22 20:17:06,020-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "73062732aaa143049fe4367b316cd59b"
s_p: "NFZVSk5CQTlzRGZrZXBYRVluY1NMM29TWkVOOHBBM0VLSHR5aU1hTWJ5TDBBZGl6a3JUSURiS3IzM1dtaGtveVFFQjNTVG1EbHVEWVZJRmJsNnZCUEoxb1FocG5LQ3RhcUtqZ1RiYkRUc05SRjdaT29rZVRac0dVbGFRQXVpVVpuU1BoNzhVUXBFNmtCaEk1Y3JHYmNEQWtZd3NscUZ3VDNvaG1DYzU3eG5jcFhmZ2pTcGd6SXNZMzgxQXQwSU14WnhLZTRHUlRVb2c2aVl3Y1pZYVRoZTB6TXJvbEllRGYyZEV1dk5LMnUxSHh1VzFORnRPVDVSTU9CaU1OMDBia1ZqYnZqamtCam5wanhDcEVEc1B4cTk3MUdOaHpZRlVWUm1YeFNlRjNPMGl2SlJtNkpWcW1MQXVRZWM4dFVaSmJOU2c3ZU96NHR0YUtzcFJPVXlmek1DUERDbmw3R2hqMkVYSXNwYXVSVFMyMmExNXZPaEtEQ2dSZ2o4MGd5VXlmYk1jRzJEempxTEdCbkpoWTRaWXJoV3VnRWp1WGVXbWZSWjZEOTNWcGE1cHpGWnZiWEdURzNaeTZRTDU4Nm9tU3BhaUVUUWlzZ2FLekNReElLQjdmN3VsNzh5ZDJNS1RoZ2hlWFNKVUsyTUUzSEJlYUZON0pqMFpyc2luZVNTOXpJYTlVRHlNVDh4RVZyYWY4Z1IyQzJ3dXBGN0Q1OVZ0RDhSQTFNbjVHaGRod2V1bzdrVE9ZZGczc0xWeGJGaU9CQTJiQ2VlU0dJOEI0cEdaSU9LSktvRjEwQldWY243a0JOc3Z3ZXlqNnhTa3JncDZYdm1JazRzdlliRTltMUc5bW5oc2Iyekt6V1c1aVNFUDFrQVRXMnhmelNrVFU4VnF1bHBpVjBBR2hRQ2RQbmdjNVgzcmpVZG5ham1FQWd0Y2w2WEdEU0FlUUhPV0FJbmk5aWx3MUltalZMSU91R3RYM3Z3OXVDaUl6WDlzMkxPNnJzcFlrTXZFcW9aaFo5UEloenl0YXlBUHkxaTUzb3RnUVo4V3B5YWFGZXRFdlZ4U2k="
m_p: "i1T0Scesfl2WTSwU9f6wD980OxpfGC58k5ehRMb5T9YOmlIx95bO44Zg370JK31D"
e_t: "1614104228425"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "111.38"
  vouBalance: "0"
  vouList {
    id: 62299579
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299580
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299581
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299582
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299583
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299550
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299549
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299547
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299545
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299544
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299543
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299542
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299541
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299540
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299539
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299538
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299537
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299529
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 18
}
userinfo {
  username: "156******06"
}

2021-02-22 20:17:06,021-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 20:17:06,021-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "5.0"
  t_p: "73062732aaa143049fe4367b316cd59b"
  imei: ""
  model: "PBDM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "1oQhpnKC"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
payrequestid: "KB202102222017042076075925246322"
version: "260"
queryType: "PAY"

2021-02-22 20:17:06,074-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "2002"
  msg: ""
}
successStatus: "1086"
origAmount: "8.25"

2021-02-22 20:17:06,074-INFO-lib.common_biz.find_database_table-49-`pay_cocoin_2`.`pay_user_info_75`
2021-02-22 20:17:06,075-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select balance from `pay_cocoin_2`.`pay_user_info_75` where ssoid = "2076075925"
2021-02-22 20:17:06,078-INFO-fiz_db_operate-26-可币余额：111.3800
2021-02-22 20:17:06,078-INFO-recharge_spend-50-可币余额正常
2021-02-22 20:17:06,079-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `db_order_4`.`order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "KB202102222017042076075925246322"
2021-02-22 20:17:06,083-INFO-lib.common_biz.fiz_assert-25-订单详情：{'id': 14938, 'pay_req_id': 'KB202102222017042076075925246322', 'notify_id': '9456841302307937209178476883', 'partner_order': 'cCs9l7tDmUSxI38XyLHPVdkuhiTzWjF6', 'amount': 825, 'refund': 0, 'contents': 'RECHARGE_SPEND ', 'products_name': 'RECHARGE_SPEND', 'counts': 1, 'ssoid': '2076075925', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': '1259634601', 'ip': '121.12.147.248', 'mac': '', 'model': 'PDCM00', 'app_package': 'com.example.pay_demo', 'app_ver': '208006', 'sdk_ver': '260', 'partner_code': '2031', 'notify_url': 'http://pay.pay-test.wanyol.com/notify/receiver', 'status': 'OK', 'channel_id': '', 'channel_type': 'NATIVE', 'pay_type': 'wxpay', 'direct_pay': 'KEBI', 'game_type': 'WANGYOU', 'present_amount': 0, 'original_amount': 825, 'discount_info': '', 'extra': None, 'remark': 'new way', 'request_time': datetime.datetime(2021, 2, 22, 20, 17, 8), 'success_time': datetime.datetime(2021, 2, 22, 20, 17, 2), 'modify_time': datetime.datetime(2021, 2, 22, 20, 17, 8), 'trade_type': 'PAY', 'kebi_spent': 82500, 'voucher_amount': 0, 'voucher_info': '{"cutAmount":"0","id":"0","type":"0"}', 'country_code': 'CN', 'currency': 'CNY', 'openid': None, 'brand_type': 'OPPO', 'mobile_os_ver': '16', 'platform': '', 'screen_info': 'FULL', 'voucher_id': '0', 'factor': '', 'paid_amount': None, 'paid_usd': None, 'combine_order': 'N'}
2021-02-22 20:17:06,083-INFO-lib.common_biz.fiz_assert-36-订单表信息记录异常
2021-02-22 20:18:31,412-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境1-MYSQL：{'host': '10.52.44.235', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-02-22 20:18:31,655-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境1-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-02-22 20:18:31,698-INFO-lib.common.db_operation.redis_operation-33-连接redis集群[{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]成功
2021-02-22 20:18:31,698-INFO-lib.common.db_operation.redis_operation-74-connection list: [{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]
2021-02-22 20:18:32,086-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=0
2021-02-22 20:18:32,089-INFO-lib.common_biz.find_merchant_info-28-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601'}
2021-02-22 20:18:32,090-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-02-22 20:18:32,093-INFO-lib.common_biz.find_key-108-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-02-22 20:18:32,094-INFO-lib.common_biz.find_database_table-49-`pay_cocoin_2`.`pay_user_info_75`
2021-02-22 20:18:32,094-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select balance from `pay_cocoin_2`.`pay_user_info_75` where ssoid = "2076075925"
2021-02-22 20:18:32,097-INFO-fiz_db_operate-26-可币余额：111.3800
2021-02-22 20:18:32,106-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 20:18:32,106-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTI0MzIzNTkxNzUsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTHFLUlgvNDgxVm4wTlBnMHRsRTBoekt0UWlkOTU4Y1paT3JjWFVaaWdCbGc9In0.MEQCIDNerQ91ofjYoUWHcxjmBpIwDBFkoANGJahYcnZLFr3OAiAYXRHenkKELTRtELmqHC0KEG5WiDIP86ORppeeUp1gcA"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "62213122417753"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "XHWp7qt0gA4cDjhVfMJaxm8IEnYzNLo9"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-02-22 20:18:32,298-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "35f2b406170c4b8589414c04d4c03197"
s_p: "eGRuY2RTRHNFWlU5ejdUYWttNHBJdGk0SE0wSzBYUDlKTllEVW1JWFRIYUpnSlF2Z2FGWERMajRnWkF2V1VHQ2Q5WGlVRThyOGFFY3V4UHlNQUFTd2ptYVJLZ3Y1UjBLNnhHeVA0cENkamhRejdNZlI3Zmxub1BzSkE0bE5HdXNTV0ZxY3lxcHZ5Y29WVzZha3hvNHJqOER4dHhjam80WEN3RER4WHFsbFByeDJ5cVJheWFMV1p3OHNyWXo1VUtFcTRLVGhCVFl2MlFucXlZMTJjZlpuM0hYZmVOOHMwRkc3YkNtcUxaVmlaaUJiZ01Vc1ZFcnR0bWJsZ1l6a2ZFdldxMmFSQ3JxSU02a0RrSEkwYnVMZ3NBeGNVbEEzOHlZS203M3MxcWkyQ0dSSTc4OEJ3eHM4SG4wdlVOemdXVk0yamJvOVdWa0pwbTR5UkgxcnpKRDN2TVZBOE5GNzhuOW40WTBnd0s3R3JvSGxyeFZmdWV2ckg5NFFxakJwYmRMNnZXbmhQYnhHTmpxTHJyN2FYSjBtdWczYk1qSDI2MmowMHdSR2h6amVnQXFHbkw4RVFvZ0VvalRDS1BSa3ZqM2VLSGdaTTN1UEEzM2VxOTF1eEFMVllJSlhmNnRQNTYxRk90Z216eVNsb2NkdWU4NnNSQUdKdmgwcWJMclVQTGJZaXZlYnNReUpxMGhZMjljOXliUnpDdHJvSzBrQnp6aHY3WFNYaEw1cHFQM2ZzVU9Nc0swYU14RWlKdGFMbUZURlA3RW1yUVVrZnhqa1o0cUE5T2VtTkV2djd4TjU2Sko4ZENuWnh4SjRYQ2VQbVNGR3JQaHFnS2RjU2JHaFpSaExIZTNFeGp1dUxpQ2JORVdwYmRMMUt6OHlkM2ZFaXUxNE1hVkN5ak9BMEpEeE5ZUk9aWDZuN2pnRUN0T3JRZEJDOWdkQmx6MUhpdktQN0RSY3B1THZLdmpNR2hVeVpPREtVY1BnRzZuVGh0VGw4c0xlSE9EN3RtSUFGUWVoNWNJcmI3ZlVWbVUzT0k2dGxSTHdiVm5aSkZlcElSNWVFcUs="
m_p: "H9h04D5vp96pY61aUXk86GkyXr4N98j6vo2Vt6K5XZ632n0D8xyL257i416Ma7H8"
e_t: "1614104314700"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "111.38"
  vouBalance: "0"
  vouList {
    id: 62299579
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299580
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299581
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299582
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299583
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299550
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299549
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299547
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299545
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299544
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299543
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299542
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299541
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299540
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299539
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299538
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299537
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299529
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 18
}
userinfo {
  username: "156******06"
}

2021-02-22 20:18:32,326-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 20:18:32,326-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "12.0"
  t_p: "35f2b406170c4b8589414c04d4c03197"
  imei: ""
  model: "PDCM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "gv5R0K6x"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: ""
  brandType: "OPPO"
  mobileos: "16"
  androidVersion: "29"
}
type: "wxpay"
amount: "5.11"
cardno: ""
cardpwd: ""
ext: ""
basepay {
  channelId: ""
  notifyurl: "http://pay.pay-test.wanyol.com/notify/receiver"
  productName: "RECHARGE_SPEND"
  productDesc: "RECHARGE_SPEND "
  partnercode: "2031"
  appversion: "208006"
  currencyName: "CNY"
  rate: 1.0
  partnerorder: "AxTkm91Xc3Hh0InaRg7ZBMeCOJESldFf"
}
sign: "Pic7p8ReMBXtjOw+4Ywgt0Mu6QNl6lUDkOIFZIVF+vXishHubvSa1X1D0+WkXJ+jisapKZBYpSj6EWyl9d8h7qAU+HxpEFUol0P3zxiU/F+/EflrTSKj+uAPQYluoHVbctxziZkrPNClFdAXi6llPzgXMTNzBFD4YvjWu0NEAUdaotT8OxPTAxzLdsdj2TYpdWO289B4dnc2VXdyRXBdVSYsOgmqOtVXNSLqZ2lC0zQ7nTLozh+3hf/hh5RlM3EAFwlmSeGV2pJ7bzD3WkEYOszY6xjaZfN+A9x9Dbv2kPMtjS/0OPPt57girhsFFI0Pq6Z+zmM2/9pU7mVGMi/f4w=="
ip: "183.238.170.71"
expendRequest {
  header {
    version: "12.0"
    t_p: "35f2b406170c4b8589414c04d4c03197"
    imei: ""
    model: "PDCM00"
    apntype: "1"
    package: "com.example.pay_demo"
    r_v: "gv5R0K6x"
    ext: ""
    sdkVer: 260
    country: "CN"
    currency: "CNY"
    openId: ""
    brandType: "OPPO"
    mobileos: "16"
    androidVersion: "29"
  }
  price: 511
  count: 1
  productname: "RECHARGE_SPEND_PRICE=AMOUNT"
  productdesc: "RECHARGE_SPEND_PRICE=AMOUNT"
  partnerid: "2031"
  callBackUrl: "http://pay.pay-test.wanyol.com/notify/receiver"
  partnerOrder: "AxTkm91Xc3Hh0InaRg7ZBMeCOJESldFf"
  channelId: ""
  ver: "208006"
  source: "auto_test"
  attach: ""
  sign: "gO4F3zFYsrXqI+TCO7azla8E0puye7H2p93QuAUt4g3v9eTWgJRTWbrG9maadEqlh94oVMtQ9gZE/XvHfJuUCC0VUuRUQlEKKHkZ1UktEkc4zu/tPSiVEtRfCVqQkhgJdI/PDgygaet1Uplg81W46U7rzrfszgATQ5F6/9WHrOY="
  factor: ""
}
isNeedExpend: "1"
appId: ""
payTypeRMBType: "0"
tradeType: "common"
screenInfo: "FULL"

2021-02-22 20:18:32,709-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "{\"appid\":\"wx93eea96ecc33f168\",\"noncestr\":\"705757bd39aa487a8b3e7a0aa7df032f\",\"packageNm\":\"Sign=WXPay\",\"partnerid\":\"1259634601\",\"prepayid\":\"wx22201835087882cb5157ca339995450000\",\"sign\":\"1B222498CBA8E77F4A07CE79A3EECA70\",\"timestamp\":\"1613996315\"}"
}
payrequestid: "KB202102222018342076075925172822"
model: ""

2021-02-22 20:18:32,710-INFO-wxpay-scarlet-51-回调参数：<xml><transaction_id><![CDATA[9505458959060031745469968810]]></transaction_id>
<nonce_str><![CDATA[69JmBDSsb82wthEQMyHVIY3uOzRCZL4j]]></nonce_str>
<bank_type><![CDATA[OTHERS]]></bank_type>
<openid><![CDATA[oCg6Xt8NvRi7jGuap_5B6XdY4oYk]]></openid>
<sign><![CDATA[8ABDC411DEE52A0852F79A0E68F558D7]]></sign>
<fee_type><![CDATA[CNY]]></fee_type>
<mch_id><![CDATA[1259634601]]></mch_id>
<cash_fee><![CDATA[1]]></cash_fee>
<out_trade_no><![CDATA[KB202102222018342076075925172822]]></out_trade_no>
<appid><![CDATA[wx93eea96ecc33f168]]></appid>
<total_fee>511</total_fee>
<trade_type><![CDATA[APP]]></trade_type>
<result_code><![CDATA[SUCCESS]]></result_code>
<attach><![CDATA[TEST]]></attach>
<time_end><![CDATA[20210222201832]]></time_end>
<is_subscribe><![CDATA[N]]></is_subscribe>
<return_code><![CDATA[SUCCESS]]></return_code>
</xml>
2021-02-22 20:18:32,831-INFO-wxpay-scarlet-55-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-02-22 20:18:32,831-INFO-wxpay-scarlet-57-回调解析成功
2021-02-22 20:18:32,838-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 20:18:32,838-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTI0MzIzNTkxNzUsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTHFLUlgvNDgxVm4wTlBnMHRsRTBoekt0UWlkOTU4Y1paT3JjWFVaaWdCbGc9In0.MEQCIDNerQ91ofjYoUWHcxjmBpIwDBFkoANGJahYcnZLFr3OAiAYXRHenkKELTRtELmqHC0KEG5WiDIP86ORppeeUp1gcA"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "32984427596836"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "zcpsldog7m3HZwhW194uNGrB5yOK2VTE"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-02-22 20:18:32,913-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "88c15ab5c8e94e5f874446bdfb70e728"
s_p: "R3VFWmd6V1FDRE1aNHVHWlVFdndWeXRnOUMwbEdCd203N2JhcFJORWFFQ2ZvSVBRWHBvUENqMTR6NDBLeFphTGFFYnRiRU9TcHY5QVZ5RXRXRHdWV3JjaFlsdUNJVTVkRTVLMDF0Smw1YUp3QVZIbk5PblVjM2Z6cUxvbmNSU29JQk96R2N2d0hkS0l0ZEptaHNxZ0hnanY0bVdTZ0VvbjBwQUs2QzRDZnhxOHgydzI4bHZvUWlTT1Z6cERuc1hacGRKeWs1aXJ4Zk9aSE1rRUM4Q1ppUFR4TUh2dGU2UUQzblNKdEVINldIaktXWFd6UGUwOUxRRE5kQTIzSnNnOUZ1cllVVWt0UTNkRGJyajhwakZwNk1wUFZXcHgxR3I0ZlFmWFVwcXY2REF2WmZ3VWJEblBRaEZTbWFvS0pIOEFhMnJUVlpjaUZPQ2RTaFNsZnJWa2s0WnR2dXVUMndFekhRSFlLcG1iMDVQM1BXVlpyUVJxVkdVcFREUFNYR1ZLTVFyRFlRVWZDa1UzM2RBYlhZek9aVmNhMGJGdHlQWTM3eDZ0QzRwYnQzTDFiUUFTMURVODl6NVZMUzZPcWJZY1BlRlNYaVJudXNCSEFlQmh1WFFpWUhSZTU5T1BNWmZzcWZ2QWx0VXIzVUN4YVFMT2NYNXcxNkFha2pRWGppV0VMOFBKRnpvVGl1R0RzVzdpbk1wR3hxazU0VTdUY29LZDZTMjFlYUZoRjRxY0R3bFZqVTkyZXVWVVUycnpaQjhJRnh2Y0g3OUVnMUZod3Rmc2NmZFlUZEpaMUE4ODFaMDNzdVdNcmxnOWsxUTZlY0RSS1VudzRINEJkcVM3N09oQ3loUFhBVTI5dFkwaXlsMHp0V2k0aDQwUzFCeE1hSWtPcTZOVlBiaHhmblVmaVlGUnEyZzZRbnBwaEYydzNjbm5tVXFqWjF2c21JdldsU3Y2TEY5TFI1ZnRFdzVyY3lqRGdaM09UcW1pOGNxYnllZ1pDSzZ4TjBNekNQaFpFTFozTThBbXM4QU9NSGNabkF4eldqNVhtQXVTRVdHTklvREY="
m_p: "sl2fybHYT30Uur4A4w4Q76UxF8RdKWK6yUiTxLckcAJAmqIkgM88951ZInAg32Y9"
e_t: "1614104315317"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "111.38"
  vouBalance: "0"
  vouList {
    id: 62299579
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299580
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299581
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299582
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299583
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299550
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299549
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299547
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299545
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299544
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299543
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299542
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299541
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299540
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299539
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299538
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299537
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299529
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 18
}
userinfo {
  username: "156******06"
}

2021-02-22 20:18:32,915-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 20:18:32,915-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "5.0"
  t_p: "88c15ab5c8e94e5f874446bdfb70e728"
  imei: ""
  model: "PBDM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "JmhsqgHg"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
payrequestid: "KB202102222018342076075925172822"
version: "260"
queryType: "PAY"

2021-02-22 20:18:32,964-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "2002"
  msg: ""
}
successStatus: "1086"
origAmount: "5.11"

2021-02-22 20:18:32,964-INFO-lib.common_biz.find_database_table-49-`pay_cocoin_2`.`pay_user_info_75`
2021-02-22 20:18:32,964-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select balance from `pay_cocoin_2`.`pay_user_info_75` where ssoid = "2076075925"
2021-02-22 20:18:32,967-INFO-fiz_db_operate-26-可币余额：111.3800
2021-02-22 20:18:32,968-INFO-recharge_spend-50-可币余额正常
2021-02-22 20:18:32,968-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `db_order_4`.`order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "KB202102222018342076075925172822"
2021-02-22 20:18:32,972-INFO-lib.common_biz.fiz_assert-25-订单详情：{'id': 14939, 'pay_req_id': 'KB202102222018342076075925172822', 'notify_id': '9505458959060031745469968810', 'partner_order': 'AxTkm91Xc3Hh0InaRg7ZBMeCOJESldFf', 'amount': 511, 'refund': 0, 'contents': 'RECHARGE_SPEND ', 'products_name': 'RECHARGE_SPEND', 'counts': 1, 'ssoid': '2076075925', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': '1259634601', 'ip': '58.255.79.104', 'mac': '', 'model': 'PDCM00', 'app_package': 'com.example.pay_demo', 'app_ver': '208006', 'sdk_ver': '260', 'partner_code': '2031', 'notify_url': 'http://pay.pay-test.wanyol.com/notify/receiver', 'status': 'OK', 'channel_id': '', 'channel_type': 'NATIVE', 'pay_type': 'wxpay', 'direct_pay': 'KEBI', 'game_type': 'WANGYOU', 'present_amount': 0, 'original_amount': 511, 'discount_info': '', 'extra': None, 'remark': 'new way', 'request_time': datetime.datetime(2021, 2, 22, 20, 18, 35), 'success_time': datetime.datetime(2021, 2, 22, 20, 18, 32), 'modify_time': datetime.datetime(2021, 2, 22, 20, 18, 35), 'trade_type': 'PAY', 'kebi_spent': 0, 'voucher_amount': 0, 'voucher_info': '{"cutAmount":"0","id":"0","type":"0"}', 'country_code': 'CN', 'currency': 'CNY', 'openid': None, 'brand_type': 'OPPO', 'mobile_os_ver': '16', 'platform': '', 'screen_info': 'FULL', 'voucher_id': '0', 'factor': '', 'paid_amount': None, 'paid_usd': None, 'combine_order': 'N'}
2021-02-22 20:18:32,973-INFO-lib.common_biz.fiz_assert-36-订单表信息记录异常
2021-02-22 20:20:47,720-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境1-MYSQL：{'host': '10.52.44.235', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-02-22 20:20:48,000-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境1-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-02-22 20:20:48,052-INFO-lib.common.db_operation.redis_operation-33-连接redis集群[{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]成功
2021-02-22 20:20:48,053-INFO-lib.common.db_operation.redis_operation-74-connection list: [{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]
2021-02-22 20:20:48,410-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=0
2021-02-22 20:20:48,413-INFO-lib.common_biz.find_merchant_info-28-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601'}
2021-02-22 20:20:48,414-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-02-22 20:20:48,417-INFO-lib.common_biz.find_key-108-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-02-22 20:20:48,418-INFO-lib.common_biz.find_database_table-49-`pay_cocoin_2`.`pay_user_info_75`
2021-02-22 20:20:48,418-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select balance from `pay_cocoin_2`.`pay_user_info_75` where ssoid = "2076075925"
2021-02-22 20:20:48,421-INFO-fiz_db_operate-26-可币余额：111.3800
2021-02-22 20:20:48,428-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 20:20:48,429-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTI0MzIzNTkxNzUsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTHFLUlgvNDgxVm4wTlBnMHRsRTBoekt0UWlkOTU4Y1paT3JjWFVaaWdCbGc9In0.MEQCIDNerQ91ofjYoUWHcxjmBpIwDBFkoANGJahYcnZLFr3OAiAYXRHenkKELTRtELmqHC0KEG5WiDIP86ORppeeUp1gcA"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "09866677327340"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "tZQwRvUoFzBHS68Jm0hGb4xW32X17fai"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-02-22 20:20:48,527-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "e2a05bd7cf60419582d1b5963c7f28da"
s_p: "cW12Q0VSUGZPeUxuUW5NUG1jQWR2M1M3dFdQdG5JOFhQYXExMGhwYzZubGpDTWFkcjN3WDlJTm5yTkt6bjY4am9Ra3dneDFNeEFoQlk5TFVoemdKU1V6Mm1qMzhPb0FOZGNxTk5iSU43NDhUS2kwMTViYWxXWmJOZzJ3cUY2TmdrOFNwNGNQV2s1ZmZMdEpCQVhOb0tMWGlqcFY3eENnbkVMZTlmanpOcjQ5SnRWenJXckltdTJjSDBlaW5BSUp4ZHk4M2Z1QTdJMElCUUh6YndIVXNxazFyaFg2dlBxMUdoOVpxUVJ2UEdMQTNXM1R0Y2N0NHQ0R09rckhveWcxNXFDbm1zTlY0cWhQZHc3S01KSmJQenY4Z0RuV1NabkhJRVNjT1NuMGJ4d2pZQTZCMXZnMmRyMzR5b2pIeThZR0V5cEhReFhwdm1wZjZUREd2YkxYMGJjMmNnYjRLSExqOW05YWpSbXhuNXg0UWVWa3JjNUYwU1g3Wkd5WEQ5U2d5U3ZqWGJWZ0dwRVlpT1dZaFFFVlZuTlEwMndBWml3ZTRLTUdLR2VmUEtjQlRtbTRmM2VEZmFkdG9aUnpIemNLaXFRRVlUUWRlOGlmSHdDbE1jT3BxNkh0SmthbVROSkJNNXg2OWhyZllMZ3E2RnJhYjk1aldtcnpuUnlVOTJKRldUNjVQbGo1alk2Tlk0MWVwRmhCTGpnWVg1emtaQjZiak5iZG9EVUxrM0p5b09rZ0NSS0VOQXRZa1JiTU5pRnNleWZFQUtXWjV3ZWZWeU5lM2F6dnE2TUtkTDV5QlAxYUFWbzA0TEI0ZjNKSjdzUHdWamZZaWFuSk52TFh4ZHdZaW04NENMOGljMmdVWU5iampzYWY5d1JiQ1hUMmpMd0JzYXdiejdCNXRTd0F0QzlraFlhV09GZjRzakd6Vkp3dHdsRWdIcTVBTXVySVZrWklNWjBSZDY2alFRdjVQRVBKbEVSM3RrM1NpV2VrQzhNWVd4MlZWdkFvN1FzZmFsWElDb1dBRms1T0FsZHEzeEh1NkdtMjhiTGRxOTdXOHpMUU0="
m_p: "J92rY761bZKJ53Ro19ZfZTORuQ4UvvxQpJ8550EG4rU0ia3Gmo4B3cAk2T57V669"
e_t: "1614104450925"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "111.38"
  vouBalance: "0"
  vouList {
    id: 62299579
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299580
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299581
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299582
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299583
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299550
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299549
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299547
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299545
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299544
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299543
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299542
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299541
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299540
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299539
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299538
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299537
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299529
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 18
}
userinfo {
  username: "156******06"
}

2021-02-22 20:20:48,556-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 20:20:48,557-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "12.0"
  t_p: "e2a05bd7cf60419582d1b5963c7f28da"
  imei: ""
  model: "PDCM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "hBY9LUhz"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: ""
  brandType: "OPPO"
  mobileos: "16"
  androidVersion: "29"
}
type: "wxpay"
amount: "7.69"
cardno: ""
cardpwd: ""
ext: ""
basepay {
  channelId: ""
  notifyurl: "http://pay.pay-test.wanyol.com/notify/receiver"
  productName: "RECHARGE_SPEND"
  productDesc: "RECHARGE_SPEND "
  partnercode: "2031"
  appversion: "208006"
  currencyName: "CNY"
  rate: 1.0
  partnerorder: "klJnxRD9FCfcE32SPmsoWNr5MpeL7KH4"
}
sign: "4EO6ucorQQztbVmAAOJD+y/Q06dG0r3iFoHmVauR2F/oiLpwsVX5qdiZLvM1IuNFETxDAGWyfUlFb+Uf/vvJiqyWUdkjkz/C3Kk6wkwsyFe2FrPNqFIEI5sU9Gz/G8Ok1MxpPnRplA74LAgbVNXM2l7MrtaKZAPMsi2QyjjqTI1nL20HbAkhMnna69Pv8ekHrovSynJ0tCY5e7Z7c9ziauvsJMtSb7hSQVLgb7gmlhBf8tnSWIAFCoaJvcJINDC1fEOLnOdvcN2O5zm/aJURk0tKeoCpQO8rgMBaZbGUzx1JMr/h2W2F5qcJAAZpyXiyxtG9+Q0HRD/ydv7P0NaNLw=="
ip: "183.238.170.71"
expendRequest {
  header {
    version: "12.0"
    t_p: "e2a05bd7cf60419582d1b5963c7f28da"
    imei: ""
    model: "PDCM00"
    apntype: "1"
    package: "com.example.pay_demo"
    r_v: "hBY9LUhz"
    ext: ""
    sdkVer: 260
    country: "CN"
    currency: "CNY"
    openId: ""
    brandType: "OPPO"
    mobileos: "16"
    androidVersion: "29"
  }
  price: 769
  count: 1
  productname: "RECHARGE_SPEND_PRICE=AMOUNT"
  productdesc: "RECHARGE_SPEND_PRICE=AMOUNT"
  partnerid: "2031"
  callBackUrl: "http://pay.pay-test.wanyol.com/notify/receiver"
  partnerOrder: "klJnxRD9FCfcE32SPmsoWNr5MpeL7KH4"
  channelId: ""
  ver: "208006"
  source: "auto_test"
  attach: ""
  sign: "iRD8ppvUUZ4td9h+EdH67Eiz5SZv6kBNQVFEv9GZvx8qSQ5GZOPXXw0r5cJN6bOYQG7QzRuWzAeyrjJcLKXU3tCTJWQjuw7t3QRblNDuDbJJb/Nvmot7wbm4zdQ99xEnW/zY9Ep5ijCipkZXzFMTVjfCNfUvJHYv1w58kGpNpDw="
  factor: ""
}
isNeedExpend: "1"
appId: ""
payTypeRMBType: "0"
tradeType: "common"
screenInfo: "FULL"

2021-02-22 20:20:49,004-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "{\"appid\":\"wx93eea96ecc33f168\",\"noncestr\":\"18b17a141fa34ad89054f43d45be5d6d\",\"packageNm\":\"Sign=WXPay\",\"partnerid\":\"1259634601\",\"prepayid\":\"wx22202051375811f1bf58b6644302eb0000\",\"sign\":\"CF5CBF200A9BB2A416B7D596D05FFCE0\",\"timestamp\":\"1613996451\"}"
}
payrequestid: "KB202102222020512076075925151152"
model: ""

2021-02-22 20:20:49,004-INFO-wxpay-scarlet-51-回调参数：<xml><transaction_id><![CDATA[8542615310577054454367525868]]></transaction_id>
<nonce_str><![CDATA[CPN0aRv4x6iZId1U9Hjw2EGAFYcWk7mV]]></nonce_str>
<bank_type><![CDATA[OTHERS]]></bank_type>
<openid><![CDATA[oCg6Xt8NvRi7jGuap_5B6XdY4oYk]]></openid>
<sign><![CDATA[EDEA0096CA008038E7F044BB3B59C7D2]]></sign>
<fee_type><![CDATA[CNY]]></fee_type>
<mch_id><![CDATA[1259634601]]></mch_id>
<cash_fee><![CDATA[1]]></cash_fee>
<out_trade_no><![CDATA[KB202102222020512076075925151152]]></out_trade_no>
<appid><![CDATA[wx93eea96ecc33f168]]></appid>
<total_fee>769</total_fee>
<trade_type><![CDATA[APP]]></trade_type>
<result_code><![CDATA[SUCCESS]]></result_code>
<attach><![CDATA[TEST]]></attach>
<time_end><![CDATA[20210222202049]]></time_end>
<is_subscribe><![CDATA[N]]></is_subscribe>
<return_code><![CDATA[SUCCESS]]></return_code>
</xml>
2021-02-22 20:20:49,526-INFO-wxpay-scarlet-55-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-02-22 20:20:49,526-INFO-wxpay-scarlet-57-回调解析成功
2021-02-22 20:20:49,534-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 20:20:49,534-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTI0MzIzNTkxNzUsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTHFLUlgvNDgxVm4wTlBnMHRsRTBoekt0UWlkOTU4Y1paT3JjWFVaaWdCbGc9In0.MEQCIDNerQ91ofjYoUWHcxjmBpIwDBFkoANGJahYcnZLFr3OAiAYXRHenkKELTRtELmqHC0KEG5WiDIP86ORppeeUp1gcA"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "81879247028024"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "l4Q9LP7Xqu36yERivWAbfjnxeV1pz0CD"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-02-22 20:20:49,611-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "8833603ad1ca43ed932a5a9a12b041ab"
s_p: "ODZzTjZESGFrYjlaYnpseXZ5VWY4a1R5TnFTYTFzak5vbW9BNlE5am5NektMb29MeG1TYURsUGxYRnR6NGxhNEhXbHNZTlF3SFJVaGhHbnlraERLTVZJaVRxaUZocTlYbFRQY0IyMHU4VVp6b2c4d2FLWU91YkpORHJYcDBQT2doeHhhclVKTUlya3NxZENJS1JBQmNLUkk0c2hqYklsajFiTWFjeDl3b000T2NvMkxYaVJYVUNaMGdQZzhzT1c5NWlOWVlXVDBJckl0bHFQaG9qMGFseG5JamtsUlpNVDVpQUpxMkl0N2ZDRVJ0T0xCOUp3UkNhY3dFM0dDQVBOM2kxOW9UQ3ZqSHJ0S29hZlhRNnF2dGZDeU5vekQ0Q2NsalpqN0lYMWlHOGQ5QlZKTGZycGlBY0JaV2l4alZneTZXY2NxelFUQkoxYVVHc2dFcHdTemd0QVFBc1kzeHNOa1hlMXpENlpObXdLWVRXVnRITzFhVlBXcDVPdHpuMUZFS0hBQXRrdG9IU1hFRTVLT1FyVFl0aUw0ejNtT1Nta2tnTGp6MW42dTZMSXVxWXlUT2dYNjBzV0RsY2pocnRsa0R1TGlLUHk2YjI3V3FMQ0hEMWgyR3FEZFREV1NRell4elAyUFJwdGpoMWgzcmJlQzM2WExTanpsaFJteldFSjE4SlB2MTFVZEpMOXFYamtjMlhTTHFrNlJoQzFkTXZIbnhzWE13SW44VHFXR1RVaHd0Tm1XNndYMU0wbTdPRU5pOGRRQmFtYWI3OERaNDlXRDlXc3JwUUhnUVpPYlRFcjB6Mnh4NWN0Nmg1MlYzRWxGcURIbHM1Y21weG9rNHRTWlpQbHdKckU1YmxNTE05alkyZjdsMzNpVjZBT1FjYUFUd1VoZHA0ajFJbTJPQkJjTnZrTmRiQ01JOXFwVmxKZjVLczA1aWR1VU1VNWUyeURpREJQdGo3TTZlRjlWZDVNWnd6Tmc0UU9zVGRDN1o0S0pQOUh3cXVXN2VkeVhkOTdNRzhCR21nSFRNeDFKemMwbm5vNzFJTHFacm9hc2p1M1Q="
m_p: "36gl3kXo7Wx1Rq031HH2P7yOi4kPZ71OcAge80S159M9Q6MKwt6VHW5nO6Bv8Y26"
e_t: "1614104452015"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "111.38"
  vouBalance: "0"
  vouList {
    id: 62299579
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299580
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299581
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299582
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299583
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299550
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299549
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299547
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299545
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299544
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299543
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299542
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299541
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299540
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299539
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299538
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299537
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299529
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 18
}
userinfo {
  username: "156******06"
}

2021-02-22 20:20:49,613-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 20:20:49,613-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "5.0"
  t_p: "8833603ad1ca43ed932a5a9a12b041ab"
  imei: ""
  model: "PBDM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "TqiFhq9X"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
payrequestid: "KB202102222020512076075925151152"
version: "260"
queryType: "PAY"

2021-02-22 20:20:49,654-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "2002"
  msg: ""
}
successStatus: "1086"
origAmount: "7.69"

2021-02-22 20:20:49,655-INFO-lib.common_biz.find_database_table-49-`pay_cocoin_2`.`pay_user_info_75`
2021-02-22 20:20:49,655-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select balance from `pay_cocoin_2`.`pay_user_info_75` where ssoid = "2076075925"
2021-02-22 20:20:49,658-INFO-fiz_db_operate-26-可币余额：111.3800
2021-02-22 20:20:49,658-INFO-recharge_spend-50-可币余额正常
2021-02-22 20:20:49,659-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `db_order_4`.`order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "KB202102222020512076075925151152"
2021-02-22 20:20:49,663-INFO-lib.common_biz.fiz_assert-25-订单详情：{'id': 14940, 'pay_req_id': 'KB202102222020512076075925151152', 'notify_id': '8542615310577054454367525868', 'partner_order': 'klJnxRD9FCfcE32SPmsoWNr5MpeL7KH4', 'amount': 769, 'refund': 0, 'contents': 'RECHARGE_SPEND ', 'products_name': 'RECHARGE_SPEND', 'counts': 1, 'ssoid': '2076075925', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': '1259634601', 'ip': '58.255.79.104', 'mac': '', 'model': 'PDCM00', 'app_package': 'com.example.pay_demo', 'app_ver': '208006', 'sdk_ver': '260', 'partner_code': '2031', 'notify_url': 'http://pay.pay-test.wanyol.com/notify/receiver', 'status': 'OK', 'channel_id': '', 'channel_type': 'NATIVE', 'pay_type': 'wxpay', 'direct_pay': 'KEBI', 'game_type': 'WANGYOU', 'present_amount': 0, 'original_amount': 769, 'discount_info': '', 'extra': None, 'remark': 'new way', 'request_time': datetime.datetime(2021, 2, 22, 20, 20, 51), 'success_time': datetime.datetime(2021, 2, 22, 20, 20, 49), 'modify_time': datetime.datetime(2021, 2, 22, 20, 20, 52), 'trade_type': 'PAY', 'kebi_spent': 0, 'voucher_amount': 0, 'voucher_info': '{"cutAmount":"0","id":"0","type":"0"}', 'country_code': 'CN', 'currency': 'CNY', 'openid': None, 'brand_type': 'OPPO', 'mobile_os_ver': '16', 'platform': '', 'screen_info': 'FULL', 'voucher_id': '0', 'factor': '', 'paid_amount': None, 'paid_usd': None, 'combine_order': 'N'}
2021-02-22 20:20:49,663-INFO-lib.common_biz.fiz_assert-36-订单表信息记录异常
2021-02-22 20:21:00,201-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境1-MYSQL：{'host': '10.52.44.235', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-02-22 20:21:00,438-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境1-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-02-22 20:21:00,478-INFO-lib.common.db_operation.redis_operation-33-连接redis集群[{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]成功
2021-02-22 20:21:00,478-INFO-lib.common.db_operation.redis_operation-74-connection list: [{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]
2021-02-22 20:21:00,836-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=0
2021-02-22 20:21:00,840-INFO-lib.common_biz.find_merchant_info-28-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601'}
2021-02-22 20:21:00,840-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-02-22 20:21:00,843-INFO-lib.common_biz.find_key-108-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-02-22 20:21:00,844-INFO-lib.common_biz.find_database_table-49-`pay_cocoin_2`.`pay_user_info_75`
2021-02-22 20:21:00,844-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select balance from `pay_cocoin_2`.`pay_user_info_75` where ssoid = "2076075925"
2021-02-22 20:21:00,847-INFO-fiz_db_operate-26-可币余额：111.3800
2021-02-22 20:21:00,856-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 20:21:00,856-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTI0MzIzNTkxNzUsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTHFLUlgvNDgxVm4wTlBnMHRsRTBoekt0UWlkOTU4Y1paT3JjWFVaaWdCbGc9In0.MEQCIDNerQ91ofjYoUWHcxjmBpIwDBFkoANGJahYcnZLFr3OAiAYXRHenkKELTRtELmqHC0KEG5WiDIP86ORppeeUp1gcA"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "16919760959831"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "ojg6E85LfBuZGM4TN7tblPJASmrCsDVy"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-02-22 20:21:00,943-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "3a78f2a9f8284cb993e91e22e208852c"
s_p: "NUVBNnRTblBhSEZoV0xEdXEyZXFFZ3M3U1lGVjQ5ajlPZmdERjdyMTVKOUh0NW85eUNCWXRZOFVXM3h2a1FhQ3JCazJJMVBMeWJOMnMyU3V5VWdGREZRNXZVMzIzeDEwU3ZrZjB6MzJZamVnSk9VRGp5OWdRZ0tPbXk1R29Qc2phSXNwYzR1RjVMR3pyeEJOendTZFAwYzZqQ2hGblJIOUZvQmFqaUhyTGtqb2RwTXJJNHlkZFg3WDRMWlR2OXJ6WFBIcHZOWjlwVHlsSnFXYXlnemdIRmtLTG1ZMFR2Q0lnQXVSVEt3UGVnbHRlbnZjWjZNdmlURllEbUZ3cWlvSkUxU3FiNFVOYTRHSFFFYVRyY3hPUktqc01xdkp6VGFrSjJnNGhiVmVHcFE3ZHc0Y2I2bHBMRFhEQ21XRjBHSnUwa083NVZJaWFQWEtuT0owRmFYSUVJTWdEellDNllwUEpPQzFINXRHNlJiNFllTktuYWtyQmZOczFXUDBlc2htQ0F4VVNhazJVVHg3amxQNVppZTg3bkM2OU80QkhVR0hVOGwwQUh1SExPVGYyS3BaVlZmSENGem5pY1NaRzh4emVKbngwU3ExVkhUa1k5Wk1pUE1vVmhGUTRuQVRUZlMzVUZoM1BMdHBNb2VaUUdsSDhhbFUyUnRHY3FvNzM4cVM1OUg3b3ZtSVE3OFl2Njk3NVhRUFUzMGpQYU1FM2RxQWhhQllDRm50ajg3R3ZaakRqOWNpenh2Z2Zrc3o4TmFUR2pONjNaYXJzZW1HemFUSFVnTFpwOWV6blltQ0g3MWtUN2NNU0htTEJoanlmMGRZR01wOHoyZDljUmw2VWhpS0VKVk1xOVJTNExxT2xERmw5WGNhdDMxTW94dThpN2VUQVVzWGFISE5IOERLVkk5UFltSDlDcjhiTjBrZVZxYkI4ZHdWanJXVjhvNExHdEhPVlFXMnlrMEpQalhvbnJGdE0xOHhsT1JLUnJJdzB2RXBXcDd3M1U3WllRem9TUUhPNGEzRkZYZkYydzRvdzdRMENiTkhlOVlhbDAwUUV4NGI="
m_p: "dWdxwiGMY490u2qu62O6LT8IBo363sjk15GTKbiM8P98mBq74Y678qgq5y1P7399"
e_t: "1614104463346"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "111.38"
  vouBalance: "0"
  vouList {
    id: 62299579
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299580
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299581
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299582
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299583
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299550
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299549
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299547
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299545
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299544
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299543
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299542
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299541
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299540
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299539
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299538
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299537
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299529
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 18
}
userinfo {
  username: "156******06"
}

2021-02-22 20:21:00,969-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 20:21:00,969-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "12.0"
  t_p: "3a78f2a9f8284cb993e91e22e208852c"
  imei: ""
  model: "PDCM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "yUgFDFQ5"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: ""
  brandType: "OPPO"
  mobileos: "16"
  androidVersion: "29"
}
type: "wxpay"
amount: "0.15"
cardno: ""
cardpwd: ""
ext: ""
basepay {
  channelId: ""
  notifyurl: "http://pay.pay-test.wanyol.com/notify/receiver"
  productName: "RECHARGE_SPEND"
  productDesc: "RECHARGE_SPEND "
  partnercode: "2031"
  appversion: "208006"
  currencyName: "CNY"
  rate: 1.0
  partnerorder: "s0pVIOB9jXLz5FPwD8c4mnKTZRSyAWqg"
}
sign: "4lAJeYH2rNJWJwKwKkRGVlfwDWbmM7YsQ6j1ABxqCHQwxOuMbCBp20r6maaVmXthdid61m/3Sldipa8COlqG+CUsYhWstvYSl+qv1Cs11cFy/kvJq4zu4k8BF8dltLLV2RTGfB2hm/p6jBR90aOuuUUfgZZaUdajWB+sftlFXYm2zwNpjQBmjC89xZCZOk8OEHcBpuhEJoKAiOGEBEL3BUthKMUudkZt4CeF4tYyFgBS37OMIaV3ARlBr29owZPM+02NDbxOfWA70QZBKiAP1LBwmEy/PWNHeHNJscqzs3gNGZCTjC7+BsGzgYEDDInDqkXtIKHfKiSA6xRnCw3fEw=="
ip: "183.238.170.71"
expendRequest {
  header {
    version: "12.0"
    t_p: "3a78f2a9f8284cb993e91e22e208852c"
    imei: ""
    model: "PDCM00"
    apntype: "1"
    package: "com.example.pay_demo"
    r_v: "yUgFDFQ5"
    ext: ""
    sdkVer: 260
    country: "CN"
    currency: "CNY"
    openId: ""
    brandType: "OPPO"
    mobileos: "16"
    androidVersion: "29"
  }
  price: 15
  count: 1
  productname: "RECHARGE_SPEND_PRICE=AMOUNT"
  productdesc: "RECHARGE_SPEND_PRICE=AMOUNT"
  partnerid: "2031"
  callBackUrl: "http://pay.pay-test.wanyol.com/notify/receiver"
  partnerOrder: "s0pVIOB9jXLz5FPwD8c4mnKTZRSyAWqg"
  channelId: ""
  ver: "208006"
  source: "auto_test"
  attach: ""
  sign: "hQQ3C+ta57xthJMT73Ik7cNW3ok+LPOaBsmO+ZY6sEdw2nJVObbT6L2BDUUFB7Sgv+5VE7Txo6S1eFTWUrBXzS538KYsT60Lfa6yNyE7oStZeLeUpUPJ4pwgqDG7c6FeM8JdaeXYKqHTtJHxPEmdHPpuEGNiL2sikt5heJJU0rE="
  factor: ""
}
isNeedExpend: "1"
appId: ""
payTypeRMBType: "0"
tradeType: "common"
screenInfo: "FULL"

2021-02-22 20:21:01,349-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "{\"appid\":\"wx93eea96ecc33f168\",\"noncestr\":\"60cab274d6cc4a2a927eb11bd2c7f42d\",\"packageNm\":\"Sign=WXPay\",\"partnerid\":\"1259634601\",\"prepayid\":\"wx22202103725950d086461dc0fa01cb0000\",\"sign\":\"7E0D269906A464AB75534769592C8A47\",\"timestamp\":\"1613996463\"}"
}
payrequestid: "KB202102222021032076075925876152"
model: ""

2021-02-22 20:21:01,350-INFO-wxpay-scarlet-51-回调参数：<xml><transaction_id><![CDATA[4458716967864641001651425354]]></transaction_id>
<nonce_str><![CDATA[6NmIV94Jlb0yHQixKP1o5AFzepcrtnuO]]></nonce_str>
<bank_type><![CDATA[OTHERS]]></bank_type>
<openid><![CDATA[oCg6Xt8NvRi7jGuap_5B6XdY4oYk]]></openid>
<sign><![CDATA[FC3FCD989936FCE47EE341A157802A4C]]></sign>
<fee_type><![CDATA[CNY]]></fee_type>
<mch_id><![CDATA[1259634601]]></mch_id>
<cash_fee><![CDATA[1]]></cash_fee>
<out_trade_no><![CDATA[KB202102222021032076075925876152]]></out_trade_no>
<appid><![CDATA[wx93eea96ecc33f168]]></appid>
<total_fee>15</total_fee>
<trade_type><![CDATA[APP]]></trade_type>
<result_code><![CDATA[SUCCESS]]></result_code>
<attach><![CDATA[TEST]]></attach>
<time_end><![CDATA[20210222202101]]></time_end>
<is_subscribe><![CDATA[N]]></is_subscribe>
<return_code><![CDATA[SUCCESS]]></return_code>
</xml>
2021-02-22 20:21:01,582-INFO-wxpay-scarlet-55-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-02-22 20:21:01,582-INFO-wxpay-scarlet-57-回调解析成功
2021-02-22 20:21:01,591-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 20:21:01,591-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTI0MzIzNTkxNzUsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTHFLUlgvNDgxVm4wTlBnMHRsRTBoekt0UWlkOTU4Y1paT3JjWFVaaWdCbGc9In0.MEQCIDNerQ91ofjYoUWHcxjmBpIwDBFkoANGJahYcnZLFr3OAiAYXRHenkKELTRtELmqHC0KEG5WiDIP86ORppeeUp1gcA"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "02050281026744"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "kxZMeHn0zrIPucNLJmgO81l4wUyCBE2V"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-02-22 20:21:01,664-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "0fe23eba24dc4ac1a67e453513dabf6c"
s_p: "bFNTOHFkSmtTQTJCNVpmOUpzRGQ2a2p4SWlHd1E4NktiY2VTZjkxQXZvSmVvQWtsemV1bTdPd1FuOVNKVFFPbE1ZaVFQQlZQUHAwRGlDVlE3U1I0SXprVHQxdFVoM1pteEVNVzBjZFlQQkVkVDhSVUhFRVVwemo1cjRKMVVnUzFsbFhIdXh0S0sxTkFQQklDZHJLMlV6dERNMll0WVZWOWx4UkN4TkhicWg3b29XZW15aVo2cFo5V2JaczNKVDV2TDk0TVBESEllN0ZGazZDRVJIMjEwbG9WSG5qSUFadGpNeFBQb0FHM0R1MFIyckxhWVFEVmZHNG1wRlU5SGtmU1pERm5nNDRSNkUwaElxS2ZkeEN5NjFIM2VuaDF4blZpZGtTWXh1YVRSd0o3TFdmSXJjc205bVcxZ0lXWnlXS2MwSzYxMVRONjVoeVdsOFUwT0NvOFJ5c1BlQkZ6bk9CRGNYcklmZkZoQXRMd1JUV3ptRGN1cWsxcXFoTk4yaVVXY3B3SGNQV3dkS3lMSFN5Q3F2dUd4UEV0Tmh2dmt2Y09DSUtKZ2Z0Y0ZCS3FtTnVvZXFEdkVTUWV0MXZ0c3V3bnNHRmcyUVgwM0FBWDVQSXJURnJsbE9id0JNTW1nZXNub1haTWN3NmdPdkFraVhYeWhDNWg3ZDBScGVJcEo1cW4wc1BmbFBSZ3VjNlZHaXNLeFMydGEyMzJFbmhOTUkxZVpqZzYzVzFkeVg2eUtOeE1oWWJMRkNDb3VkRVVGV1NuYmlrSXR0b1B3ME42MHFyV2tYVzFiZ0JibXFPc3lrRnRHZWRacDNxTVpycUk4YzU2QmNIYnNER0R2NXZSdkR4T0Z1WEI1bVdFQzFEQ2ZrUGVUdllZOEE3SUF3dGNXVkU5Q0VyeWRyREtvQ2c4OGxkNXREMTFoUlR5U0ZQZXVOYW5NbEsyRHZOQlR3S0FicWNwNGVuNHp2VWptYXR5VVdyb25WSVR2OHI4eXFTdXZ0dmdMV3duNkZCSHhBaHEwMXBYNkw1Y1JWUXgwNlhsZlQ2VHhjdjBvdmh5a3RPbTdQd04="
m_p: "0wIRJgYkxwfT4k7a3nomnPn8XCIDqVIyuNJqA0m76H9oxVE6C88acZojCmH9BCw3"
e_t: "1614104464074"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "111.38"
  vouBalance: "0"
  vouList {
    id: 62299579
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299580
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299581
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299582
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299583
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299550
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299549
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299547
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299545
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299544
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299543
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299542
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299541
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299540
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299539
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299538
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299537
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299529
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 18
}
userinfo {
  username: "156******06"
}

2021-02-22 20:21:01,666-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 20:21:01,666-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "5.0"
  t_p: "0fe23eba24dc4ac1a67e453513dabf6c"
  imei: ""
  model: "PBDM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "EdT8RUHE"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
payrequestid: "KB202102222021032076075925876152"
version: "260"
queryType: "PAY"

2021-02-22 20:21:01,717-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "2002"
  msg: ""
}
successStatus: "1086"
origAmount: "0.15"

2021-02-22 20:21:01,718-INFO-lib.common_biz.find_database_table-49-`pay_cocoin_2`.`pay_user_info_75`
2021-02-22 20:21:01,718-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select balance from `pay_cocoin_2`.`pay_user_info_75` where ssoid = "2076075925"
2021-02-22 20:21:01,721-INFO-fiz_db_operate-26-可币余额：111.3800
2021-02-22 20:21:01,721-INFO-recharge_spend-50-可币余额正常
2021-02-22 20:21:01,722-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `db_order_4`.`order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "KB202102222021032076075925876152"
2021-02-22 20:21:01,726-INFO-lib.common_biz.fiz_assert-25-订单详情：{'id': 14941, 'pay_req_id': 'KB202102222021032076075925876152', 'notify_id': '4458716967864641001651425354', 'partner_order': 's0pVIOB9jXLz5FPwD8c4mnKTZRSyAWqg', 'amount': 15, 'refund': 0, 'contents': 'RECHARGE_SPEND ', 'products_name': 'RECHARGE_SPEND', 'counts': 1, 'ssoid': '2076075925', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': '1259634601', 'ip': '58.255.79.104', 'mac': '', 'model': 'PDCM00', 'app_package': 'com.example.pay_demo', 'app_ver': '208006', 'sdk_ver': '260', 'partner_code': '2031', 'notify_url': 'http://pay.pay-test.wanyol.com/notify/receiver', 'status': 'OK', 'channel_id': '', 'channel_type': 'NATIVE', 'pay_type': 'wxpay', 'direct_pay': 'KEBI', 'game_type': 'WANGYOU', 'present_amount': 0, 'original_amount': 15, 'discount_info': '', 'extra': None, 'remark': 'new way', 'request_time': datetime.datetime(2021, 2, 22, 20, 21, 4), 'success_time': datetime.datetime(2021, 2, 22, 20, 21, 1), 'modify_time': datetime.datetime(2021, 2, 22, 20, 21, 4), 'trade_type': 'PAY', 'kebi_spent': 0, 'voucher_amount': 0, 'voucher_info': '{"cutAmount":"0","id":"0","type":"0"}', 'country_code': 'CN', 'currency': 'CNY', 'openid': None, 'brand_type': 'OPPO', 'mobile_os_ver': '16', 'platform': '', 'screen_info': 'FULL', 'voucher_id': '0', 'factor': '', 'paid_amount': None, 'paid_usd': None, 'combine_order': 'N'}
2021-02-22 20:21:01,726-INFO-lib.common_biz.fiz_assert-34-订单表信息记录正确
2021-02-22 20:21:01,727-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `pay_tradeorder_4`.`trade_order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "KB202102222021032076075925876152"
2021-02-22 20:21:01,730-INFO-lib.common_biz.fiz_assert-45-trade订单详情：{'id': 7627, 'pay_req_id': 'KB202102222021032076075925876152', 'partner_order': 's0pVIOB9jXLz5FPwD8c4mnKTZRSyAWqg', 'partner_code': '2031', 'products_name': 'RECHARGE_SPEND', 'ssoid': '2076075925', 'origin_amount': 15, 'amount': 15, 'kb_amount': 0, 'voucher_amount': 0, 'present_amount': 0, 'refund': 0, 'country_code': 'CN', 'currency': 'CNY', 'pay_type': 'wxpay', 'channel_id': '', 'channel_type': 'NATIVE', 'direct_pay': 'KEBI', 'trade_type': 'PAY', 'combine_type': 'PRIMARY', 'status': 'OK', 'notify_url': 'http://pay.pay-test.wanyol.com/notify/receiver', 'attach': '', 'extra_info': '', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': '1259634601', 'ip': '58.255.79.104', 'mac': '', 'openid': None, 'model': 'PDCM00', 'brand_type': 'OPPO', 'app_package': 'com.example.pay_demo', 'app_ver': '208006', 'sdk_ver': '260', 'mobile_os_ver': '16', 'platform': '', 'screen_info': 'FULL', 'remark': None, 'request_time': datetime.datetime(2021, 2, 22, 20, 21, 3), 'success_time': datetime.datetime(2021, 2, 22, 20, 21, 4), 'modify_time': datetime.datetime(2021, 2, 22, 20, 21, 4)}
2021-02-22 20:21:01,731-INFO-lib.common_biz.fiz_assert-53-trade订单表信息记录正确
2021-02-22 20:26:47,148-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境1-MYSQL：{'host': '10.52.44.235', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-02-22 20:26:47,423-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境1-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-02-22 20:26:47,467-INFO-lib.common.db_operation.redis_operation-33-连接redis集群[{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]成功
2021-02-22 20:26:47,467-INFO-lib.common.db_operation.redis_operation-74-connection list: [{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]
2021-02-22 20:26:47,837-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=0
2021-02-22 20:26:47,840-INFO-lib.common_biz.find_merchant_info-28-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601'}
2021-02-22 20:26:47,841-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-02-22 20:26:47,844-INFO-lib.common_biz.find_key-108-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-02-22 20:26:47,844-INFO-lib.common_biz.find_database_table-49-`pay_cocoin_2`.`pay_user_info_75`
2021-02-22 20:26:47,845-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select balance from `pay_cocoin_2`.`pay_user_info_75` where ssoid = "2076075925"
2021-02-22 20:26:47,848-INFO-fiz_db_operate-26-可币余额：111.3800
2021-02-22 20:26:47,857-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 20:26:47,857-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTI0MzIzNTkxNzUsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTHFLUlgvNDgxVm4wTlBnMHRsRTBoekt0UWlkOTU4Y1paT3JjWFVaaWdCbGc9In0.MEQCIDNerQ91ofjYoUWHcxjmBpIwDBFkoANGJahYcnZLFr3OAiAYXRHenkKELTRtELmqHC0KEG5WiDIP86ORppeeUp1gcA"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "32332763830445"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "YdNnEb6FIGjWUrOlAw5SeV0Qkum231sL"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-02-22 20:26:47,954-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "edb05961cf1248d0807d325219499ead"
s_p: "cFFGWng3OHZTQXJJSEtibDZkN09LYXdhT1dZVllhMU5jN1lEVENCUFU5NlpqYzVEeTl1Szh2NnhzaGloSk1qSjR3eEllU2xxdFlHaVlKeVNyTlE2UTNxWmRBY01seURRVnZkTFpkMVpLUXUzZzlMeFBVOWUxYjA2SE5MdGhrQ2hEbVJkNlNxTkpZTEtTVkFjb0N5ekg4UXIwSzJtbzF1NWFGZ0dnQjdwZXlEa3ZhU0RSRnl1RlBpeVZDTW5RYk5vMEtxTkFUbmlpQzJHSU9HZ2lEdWxlaEZEMHFtYjBwSGdZbG1zY0c2eDFXd2tIM2F2MUVWS0sxajlkbzlSVHhidUIwbG1sSGxtWjdzVnQ2bDgxM3lYbmM0RHFUNnQxVW4ydkZzMkFsSUtqelgwdENYMDRGWWNFQmVWRk5CWlhMVUtLZ0VrNzFqVlQ1M3Z2NlpGSzRKTjN0YnhmM0pFeTVEazY1a2JqcUkxSDlPQVFLMjl4YkpyczJmNHRWRG51VmZRUUQzVkZQZ3Bac3ptVlZMU2ViQVNHWjhlOWV5SkdnNW0wSzNRSHJCZXNFY0U4TFF4dEMzck1KMXhkaUFVWjVYMDR6VHRjVndRS2RzTTJWY2xlTDhWRXBXV3Q3eWFYZGd1VFFFTERXSWZCZmN2WXBKMEc2TUUxUEpVUFRjQXA5NFE1Q0FmTEhrcWlHME5XTWY3M3YydmM4bHBFNnVSeVp2Q1VEMDlBRmZKUHV2T0pyUXVMNHptUmtVQmtDVUpLVE5hbWJaZmJlVDh3VlVPQWhBeHZGT3dCczc1eEZab0E0NUpTazBRZHYxS2M1Q2hZOUsxSHdXbVgxVGQ2SmJzWjhQbGFOb3Q0b2RJRnFPSlRXNndaNnQ2dUlhRUJhOUpyTHdFSWxZRlA4WjBmeTcwbXhRaE9pdU9WZ2ljYldkN2RqeHB6dGpxWUZJWTMxazZpaEc0OE51dGs0S055V2ZMSVY1NWpRZlNzcWs5eGs5ekpidzF4R2RrTHhLS2NxRHNaZmJhU2VYQzZISTExNWJ1bFNiVTh2SWZ2aktkWWhNeTd6TjY="
m_p: "6Y8b34Si9V2427dvvO4a5UW91bw9JKs08RmP6hBJ7UNfXAM40iUeP83Rf0z7iSAe"
e_t: "1614104810351"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "111.38"
  vouBalance: "0"
  vouList {
    id: 62299579
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299580
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299581
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299582
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299583
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299550
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299549
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299547
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299545
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299544
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299543
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299542
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299541
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299540
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299539
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299538
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299537
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299529
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 18
}
userinfo {
  username: "156******06"
}

2021-02-22 20:26:47,980-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 20:26:47,980-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "12.0"
  t_p: "edb05961cf1248d0807d325219499ead"
  imei: ""
  model: "PDCM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "lqtYGiYJ"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: ""
  brandType: "OPPO"
  mobileos: "16"
  androidVersion: "29"
}
type: "wxpay"
amount: "1.89"
cardno: ""
cardpwd: ""
ext: ""
basepay {
  channelId: ""
  notifyurl: "http://pay.pay-test.wanyol.com/notify/receiver"
  productName: "RECHARGE_SPEND"
  productDesc: "RECHARGE_SPEND "
  partnercode: "2031"
  appversion: "208006"
  currencyName: "CNY"
  rate: 1.0
  partnerorder: "WlhEXsA84vng25tmfF6OHJzVSq1Ucoex"
}
sign: "F4SUZkSMryg4QIPTA9PPot6pEfT/NfJMOxiT7s4ObAEKe+7udRAgmAp3fm9uRuyuicfYyJlVPrMf9Jx0VxC0lAKIj5jCZgnKxyJRSh9C2/yS0Xd+AjFaFHBa5SU+z0HLPoraIwFV5pp6arFyppq7fLZGycZc7wkyLWhd0ev4SdyG72u8dB+LgcGBa9vUaZyXyui6TZwiUrm4Zl0WskJWrsjENAJnN/Xvuv3CVhqab3ah+34Nvki0vyNRq0Fg2mZA6N9PSpeApzVt1qBIc0KnAefUUXye/40NrJIxePUic8gUg52Zpz2x90pZAsHhLuT2vpQ4hIWKDElVGCMxQpQ3wQ=="
ip: "183.238.170.71"
expendRequest {
  header {
    version: "12.0"
    t_p: "edb05961cf1248d0807d325219499ead"
    imei: ""
    model: "PDCM00"
    apntype: "1"
    package: "com.example.pay_demo"
    r_v: "lqtYGiYJ"
    ext: ""
    sdkVer: 260
    country: "CN"
    currency: "CNY"
    openId: ""
    brandType: "OPPO"
    mobileos: "16"
    androidVersion: "29"
  }
  price: 189
  count: 1
  productname: "RECHARGE_SPEND_PRICE=AMOUNT"
  productdesc: "RECHARGE_SPEND_PRICE=AMOUNT"
  partnerid: "2031"
  callBackUrl: "http://pay.pay-test.wanyol.com/notify/receiver"
  partnerOrder: "WlhEXsA84vng25tmfF6OHJzVSq1Ucoex"
  channelId: ""
  ver: "208006"
  source: "auto_test"
  attach: ""
  sign: "JIIEkxmOwKeaTXcpSXc/TWkNHEWvAIjXIINpInEfKp17z3aN7bGwhRnfxcxRmDarAnssB1svqDKT/c2/Irtk2evspazDYt2iUKduzlYc3eaqUh4cTRBQF//1S/L+xQeXxzl30BRJ20r5eMNWKWu5KGvHrA0DmgKcFugwyPIYBBA="
  factor: ""
}
isNeedExpend: "1"
appId: ""
payTypeRMBType: "0"
tradeType: "common"
screenInfo: "FULL"

2021-02-22 20:26:48,439-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "{\"appid\":\"wx93eea96ecc33f168\",\"noncestr\":\"5a1e198ec8654c099f92c611716fcaa4\",\"packageNm\":\"Sign=WXPay\",\"partnerid\":\"1259634601\",\"prepayid\":\"wx22202650812944abc46c3e556247710000\",\"sign\":\"034B045B27EAF4C6E53C26ECACDCCC59\",\"timestamp\":\"1613996810\"}"
}
payrequestid: "KB202102222026502076075925538742"
model: ""

2021-02-22 20:26:48,440-INFO-wxpay-scarlet-51-回调参数：<xml><transaction_id><![CDATA[9173772378074428838729602537]]></transaction_id>
<nonce_str><![CDATA[sX1eSLgJKkni0F9MraClAuTWmfEN4UYo]]></nonce_str>
<bank_type><![CDATA[OTHERS]]></bank_type>
<openid><![CDATA[oCg6Xt8NvRi7jGuap_5B6XdY4oYk]]></openid>
<sign><![CDATA[D3AACC4184A344596E1134D3B26DEF50]]></sign>
<fee_type><![CDATA[CNY]]></fee_type>
<mch_id><![CDATA[1259634601]]></mch_id>
<cash_fee><![CDATA[1]]></cash_fee>
<out_trade_no><![CDATA[KB202102222026502076075925538742]]></out_trade_no>
<appid><![CDATA[wx93eea96ecc33f168]]></appid>
<total_fee>189</total_fee>
<trade_type><![CDATA[APP]]></trade_type>
<result_code><![CDATA[SUCCESS]]></result_code>
<attach><![CDATA[TEST]]></attach>
<time_end><![CDATA[20210222202648]]></time_end>
<is_subscribe><![CDATA[N]]></is_subscribe>
<return_code><![CDATA[SUCCESS]]></return_code>
</xml>
2021-02-22 20:26:48,576-INFO-wxpay-scarlet-55-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-02-22 20:26:48,576-INFO-wxpay-scarlet-57-回调解析成功
2021-02-22 20:26:48,584-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 20:26:48,584-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTI0MzIzNTkxNzUsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTHFLUlgvNDgxVm4wTlBnMHRsRTBoekt0UWlkOTU4Y1paT3JjWFVaaWdCbGc9In0.MEQCIDNerQ91ofjYoUWHcxjmBpIwDBFkoANGJahYcnZLFr3OAiAYXRHenkKELTRtELmqHC0KEG5WiDIP86ORppeeUp1gcA"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "50529157718209"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "0CPMYujk8rfRTVmJzF6AXGcegWs3wIvZ"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-02-22 20:26:48,656-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "a73f9f637c3d47a6a5747854fcf3a7bc"
s_p: "U0pyaTlHSk5zakxtRWt4S3BKQUxsenZRcFFVb3pFQThwZHRWYTU2YU1UNkJHTFVXcGRFNE50dmJFZ1ZJTnNmNHEyWHJTWVhhVVhoaHpKOXNHTUU5RjA5YkN4dzJOcEtUMWRDWkNKeGZwelRwS1dPV1pjY3poOUFTVU53TW00ODVpazlNRnhTQklHZTJUZmpEa2lUdkc3QU05c0lwTTRqUDJLYUdyMm1UYldUd0wwbVpuMHNaNVAzMnlWUllTb3hFTmUwUlRKQk5NT1hJTWVwV2EzeW1DRzdGVlFCelJuSkN6MnhvZ1dGN2FNTmxKN1ROYklFMVdGUW4zUTNLQ3NsWDlWZDY4RUlqTlFDUG40VVp6MXh1NjdEaXlOR3paOFphSEM3YU1QTFZyek1TOFhpdUh5QUZwUGFIMXVQWXVTN0g2WE00M0dzaGpMQURsRmYwM2paRnZvUm5FVmJQMmJWWkNDQ2VsbDkyWmRUcjFZdks5ZUZuOHJnNGY4bU4zSHhXanpMNFh6QWNYVWlxN0ZON2JKVFpET0R1eGpsbERubDBKNnZIV0ROTEE4YUhaZDkxamUzY1JEeHRZRXp4NEJJSWtucDAzd2IwMGY1N0tuYk1VZlM4QnRPSVV3dExuTVV2ZlFFdW9uQ2hGamlNekd2M2tHcGwwNDJ5OXRxaGJpNWhKMm9xSEpPd2F1dWFTdlRlUFVsOVdENXYwYlNSUm1JY1VhZEVRQm5iN1d5Mk1iRkZLcWw4QWxMRHJzd2JKYWRocG10VTAwVDJ3UkpMV0xXeFowWWUzeWtUMHI1YXVIS1VaZlpJcnB4YklVS3Q0UVVGTTNGTjE3RTdXb2duWmRmc2pDaUh4S2g4WEtsMURTM0hLb2MxSndTMUIxdVkxM08xeG5Hd2Y2SjBYWEg4bXV0ajF4dVF3NkdWeGFLM0FnZHg5OXBxSTlsUXcwaE9KSTAzWjdnUmEybXpKaDd0U0JJRk5NTTdyazNQcE1LUnJQckczME1HeXRibGoxblI5aFYwSzZCbEREWVduNzN1VjNVTkJrNXk1bUhWTkV4aWIxcEs="
m_p: "wj5rodO2gkYuO5xr4K2s8u8imb6v6SV6QgXk5sMQ17Fbz1Ztge9r6K69Fl3n9x4u"
e_t: "1614104811068"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "111.38"
  vouBalance: "0"
  vouList {
    id: 62299579
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299580
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299581
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299582
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299583
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299550
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299549
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299547
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299545
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299544
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299543
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299542
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299541
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299540
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299539
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299538
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299537
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299529
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 18
}
userinfo {
  username: "156******06"
}

2021-02-22 20:26:48,662-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 20:26:48,662-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "5.0"
  t_p: "a73f9f637c3d47a6a5747854fcf3a7bc"
  imei: ""
  model: "PBDM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "xfpzTpKW"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
payrequestid: "KB202102222026502076075925538742"
version: "260"
queryType: "PAY"

2021-02-22 20:26:48,712-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "2002"
  msg: ""
}
successStatus: "1086"
origAmount: "1.89"

2021-02-22 20:26:48,712-INFO-lib.common_biz.find_database_table-49-`pay_cocoin_2`.`pay_user_info_75`
2021-02-22 20:26:48,713-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select balance from `pay_cocoin_2`.`pay_user_info_75` where ssoid = "2076075925"
2021-02-22 20:26:48,716-INFO-fiz_db_operate-26-可币余额：111.3800
2021-02-22 20:26:48,716-INFO-recharge_spend-50-可币余额正常
2021-02-22 20:26:48,717-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `db_order_4`.`order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "KB202102222026502076075925538742"
2021-02-22 20:26:48,721-INFO-lib.common_biz.fiz_assert-25-订单详情：{'id': 14942, 'pay_req_id': 'KB202102222026502076075925538742', 'notify_id': '9173772378074428838729602537', 'partner_order': 'WlhEXsA84vng25tmfF6OHJzVSq1Ucoex', 'amount': 189, 'refund': 0, 'contents': 'RECHARGE_SPEND ', 'products_name': 'RECHARGE_SPEND', 'counts': 1, 'ssoid': '2076075925', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': '1259634601', 'ip': '58.255.79.104', 'mac': '', 'model': 'PDCM00', 'app_package': 'com.example.pay_demo', 'app_ver': '208006', 'sdk_ver': '260', 'partner_code': '2031', 'notify_url': 'http://pay.pay-test.wanyol.com/notify/receiver', 'status': 'OK', 'channel_id': '', 'channel_type': 'NATIVE', 'pay_type': 'wxpay', 'direct_pay': 'KEBI', 'game_type': 'WANGYOU', 'present_amount': 0, 'original_amount': 189, 'discount_info': '', 'extra': None, 'remark': 'new way', 'request_time': datetime.datetime(2021, 2, 22, 20, 26, 50), 'success_time': datetime.datetime(2021, 2, 22, 20, 26, 48), 'modify_time': datetime.datetime(2021, 2, 22, 20, 26, 51), 'trade_type': 'PAY', 'kebi_spent': 0, 'voucher_amount': 0, 'voucher_info': '{"cutAmount":"0","id":"0","type":"0"}', 'country_code': 'CN', 'currency': 'CNY', 'openid': None, 'brand_type': 'OPPO', 'mobile_os_ver': '16', 'platform': '', 'screen_info': 'FULL', 'voucher_id': '0', 'factor': '', 'paid_amount': None, 'paid_usd': None, 'combine_order': 'N'}
2021-02-22 20:26:48,722-INFO-lib.common_biz.fiz_assert-34-订单表信息记录正确
2021-02-22 20:26:48,723-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `pay_tradeorder_4`.`trade_order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "KB202102222026502076075925538742"
2021-02-22 20:26:48,726-INFO-lib.common_biz.fiz_assert-45-trade订单详情：{'id': 7628, 'pay_req_id': 'KB202102222026502076075925538742', 'partner_order': 'WlhEXsA84vng25tmfF6OHJzVSq1Ucoex', 'partner_code': '2031', 'products_name': 'RECHARGE_SPEND', 'ssoid': '2076075925', 'origin_amount': 189, 'amount': 189, 'kb_amount': 0, 'voucher_amount': 0, 'present_amount': 0, 'refund': 0, 'country_code': 'CN', 'currency': 'CNY', 'pay_type': 'wxpay', 'channel_id': '', 'channel_type': 'NATIVE', 'direct_pay': 'KEBI', 'trade_type': 'PAY', 'combine_type': 'PRIMARY', 'status': 'OK', 'notify_url': 'http://pay.pay-test.wanyol.com/notify/receiver', 'attach': '', 'extra_info': '', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': '1259634601', 'ip': '58.255.79.104', 'mac': '', 'openid': None, 'model': 'PDCM00', 'brand_type': 'OPPO', 'app_package': 'com.example.pay_demo', 'app_ver': '208006', 'sdk_ver': '260', 'mobile_os_ver': '16', 'platform': '', 'screen_info': 'FULL', 'remark': None, 'request_time': datetime.datetime(2021, 2, 22, 20, 26, 51), 'success_time': datetime.datetime(2021, 2, 22, 20, 26, 51), 'modify_time': datetime.datetime(2021, 2, 22, 20, 26, 50)}
2021-02-22 20:26:48,726-INFO-lib.common_biz.fiz_assert-53-trade订单表信息记录正确
2021-02-22 20:26:48,727-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `virtual`.`tb_recharge202102` WHERE ssoid = '2076075925' and rechargeOrder = "KB202102222026502076075925538742"
2021-02-22 20:26:48,730-INFO-lib.common.db_operation.mysql_operation-51-查询数据为空
2021-02-22 20:26:48,730-INFO-lib.common_biz.fiz_assert-69-tb_recharge订单详情：None
2021-02-22 20:26:48,730-INFO-lib.common_biz.fiz_assert-77-tb_recharge订单表信息记录正确
2021-02-22 20:26:57,530-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境1-MYSQL：{'host': '10.52.44.235', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-02-22 20:26:57,807-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境1-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-02-22 20:26:57,849-INFO-lib.common.db_operation.redis_operation-33-连接redis集群[{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]成功
2021-02-22 20:26:57,850-INFO-lib.common.db_operation.redis_operation-74-connection list: [{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]
2021-02-22 20:26:58,282-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=0
2021-02-22 20:26:58,286-INFO-lib.common_biz.find_merchant_info-28-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601'}
2021-02-22 20:26:58,286-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-02-22 20:26:58,290-INFO-lib.common_biz.find_key-108-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-02-22 20:26:58,290-INFO-lib.common_biz.find_database_table-49-`pay_cocoin_2`.`pay_user_info_75`
2021-02-22 20:26:58,291-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select balance from `pay_cocoin_2`.`pay_user_info_75` where ssoid = "2076075925"
2021-02-22 20:26:58,294-INFO-fiz_db_operate-26-可币余额：111.3800
2021-02-22 20:26:58,302-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 20:26:58,302-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTI0MzIzNTkxNzUsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTHFLUlgvNDgxVm4wTlBnMHRsRTBoekt0UWlkOTU4Y1paT3JjWFVaaWdCbGc9In0.MEQCIDNerQ91ofjYoUWHcxjmBpIwDBFkoANGJahYcnZLFr3OAiAYXRHenkKELTRtELmqHC0KEG5WiDIP86ORppeeUp1gcA"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "25559709330953"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: ""
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-02-22 20:26:58,433-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "3c8f8f4609144daab6a3cb31d298a459"
s_p: "ZGlMbEtPdVhQTzZsaHFNbjNqUE13MDRuejNJNTRNQmtaMWVnOFhaQktnaFZVS1UyVkFmQXI3NFhvcmFRT0JzUGtlNXdOV3hsT0JuNWlqUTdkTkpmU0taOWJKbER6dXdEdmJOZHVQVGMzS09IWXZiMWxxM1hkS2tCMFVxaWk1SGY2SDFrb2lFQzVGZmJaRWtOVkFCWnl4MUpyemF6bENFb05reTZZNUJPRzYyM21vcXZidHNMd2xUMkNaWTJ6RXFmbDBlZEhrQ3YxVWduZDdaZzI4RzdyVjVxb0ZoNVRrUXY2eWRONXp5RUF0bmxMOTR5RVRicDd1MUEzR0tid3BTNUVBNzRKaG1ZWmZQbldCMmlMS1R2Rnc2Q0paa1ZKcUJ1NTRLVUk5UWkwSXJzYVpOMkJzcjk3a2Z2THZJTjBIaVRqemxSNTl4SG9zZlZEWVFCZ0pSMWNIV0hFSkJrNEs3MzZPQm5yVEF4WmlGS3RoSHNTT2pQT2w4VEF6UDdZbEZ6OG5uZ1o4cDRrNVRZRDhaaW1FeXpFaUdJY1VXb3JQQWdNa1JraXJwaElnbkZQTTVaR1ZrRHJoTUJvdWgyV3B6TlFTQndJWFI2MFNXZTBqcmpPWkhZeExQRERodUQwQUp3MklSM0h5ZE56Tk43TDFoRGlFZ2lWaTZ6amtXRERrbm1BdThUaEdXVlQ5NlZyQWRFc0xiZUduOU1sY1JLR0JPNWNpTnRSNFhpTFBCQ2IwVFM3Smd3VHFYbmFIN2Y2UlVKQkZEUjVMaXRKQkdJRnpaN1hJTWJUUUJyR2JwSUxtd1RoWjBIWTVjdGZUeDdPNjBlR1dkRjNtUjVWbElFSk1RUnNLQzM3YjQxN21SMU5DZzZ3eTU1T2FtU2lsVmJST25oT2RaT2I3akJDZ29BTGJac3B5aXV3OHo4SEhkakR3VW81UHgyblo3QjBma3NmMXNNWnVOTzhEbG53Z3pMSWhmbkE0YllvMWpPdGpldHIyaU5aWExyUkFtT1JabWpGNlJOcjRTR2c5OGRMYzJEc3VEcmgyMzNWYlZMZTJSNk1CZnA="
m_p: "Z0Qf0ztqZT882KfcEXDitYW7QA6GW29NO6xPKQGry4sj7SV71QL3zzp1aF2eugdQ"
e_t: "1614104820827"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "111.38"
  vouBalance: "0"
  vouList {
    id: 62299579
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299580
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299581
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299582
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299583
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299550
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299549
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299547
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299545
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299544
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299543
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299542
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299541
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299540
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299539
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299538
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299537
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299529
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 18
}
userinfo {
  username: "156******06"
}

2021-02-22 20:26:58,439-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 20:26:58,439-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "12.0"
  t_p: "3c8f8f4609144daab6a3cb31d298a459"
  imei: ""
  model: "PCRM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "rzazlCEo"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: ""
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
type: "heepay_10"
amount: "365.0"
cardno: ""
cardpwd: ""
ext: ""
basepay {
  channelId: ""
  notifyurl: "http://pay.pay-test.wanyol.com/notify/receiver"
  productName: "KB\342\200\224RECHARGE_PAY"
  productDesc: "KB\342\200\224RECHARGE_PAY"
  partnercode: "2031"
  appversion: "1.1.0"
  currencyName: "\345\217\257\345\270\201"
  rate: 1.0
  partnerorder: "null"
}
sign: "qzf8nbUr6X2DGAoJ9whq1R4NBlS5ltIUCSMTcMOmX8SlEtfJtKsA5OPP+k8sU9sw84zJ4FeSREqWrKV1jpzErBJ+WB81Mji26phbl5RdtUtksOPpvhFZKNsbTAyjH6OiWNoareZBsF4DC0Y1e8FgUIOQJf7rkBXAx4dTpNlDTOfYAifq9EyhWfXuoK+Hz+HUbSzB+aOBaeGBdWKjP303Iqir2YLccJXvYLaDoIJ8cJQEV+OplfxMILHFDSr9x8K9nZeuiE3H/Cqj9lIpPPcwmxT9R9UzjhN7TLoMGHywcHsl8Sp5Af3w3fmeLhVCuUCGBykfFxz/XUkMLz2M07xckw=="
ip: "58.252.5.75"
isNeedExpend: "0"
appId: ""
payTypeRMBType: "0"
tradeType: "common"
screenInfo: "FULL"

2021-02-22 20:26:58,548-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "5555"
  msg: "\350\257\267\346\261\202\345\244\261\350\264\245,\350\257\267\346\215\242\345\205\266\344\273\226\346\224\257\344\273\230\346\226\271\345\274\217(1016)"
}
payrequestid: "KB202102222027002076075925510222"
model: ""

2021-02-22 20:26:59,593-INFO-heepay-scarlet-50-回调参数：http://opaycenter-secure-test.wanyol.com/opaycenter/heepaynotify?ret_msg=-%b2%e9%d1%af%b4%a6%c0%ed&ret_code=0&bill_status=1&agent_id=1715258&bill_id=KB202102222027002076075925510222&jnet_bill_no=6880379532436892601381697018&card_settle_amt=0.00&card_real_amt=365.0&card_detail_data=&ext_param=&sign=76a28947328dc742906824c6727ddaa4
2021-02-22 20:26:59,738-INFO-heepay-scarlet-53-返回结果：
2021-02-22 20:26:59,744-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 20:26:59,744-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTI0MzIzNTkxNzUsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTHFLUlgvNDgxVm4wTlBnMHRsRTBoekt0UWlkOTU4Y1paT3JjWFVaaWdCbGc9In0.MEQCIDNerQ91ofjYoUWHcxjmBpIwDBFkoANGJahYcnZLFr3OAiAYXRHenkKELTRtELmqHC0KEG5WiDIP86ORppeeUp1gcA"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "02778635698729"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "SARbaIJE2uVQOvWHZDMjlKd0xh6YC5my"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-02-22 20:26:59,819-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "5aef0b8b4d6749908b2a63a0e593de51"
s_p: "QlJQeHYxbGtKM2o4ZXZWQUZlNmQxU0NIckQ5NDRUdkNFZzFZMDZlYVZZR0VKTm1tODRXOU5JS3RrNWN2bFlTUFc3Q005VXQ3cUVVTGRPdVlpWG9IVGVtc1A0cjQ0NGlLWU1kck53SExWeHIycGlFcEtGaTQweFNPZVF2bzhLQXlFTFgzN1J5Q1VKSDNFb3dST3FTcEdSS2Y2dHhTTkZLRjRZaWoxQ29lelFBQmZxYUFlTWtGaUQyTk9aN2VpUzJXcFZ4UXNvb1R5VXBuOEZVMTVuRnNmWHFVa2tleGlhcU1YQTNrUHdkZ3U2RlBoNUVmZFI3V2h6YXFVSGFPNzJpYWk3Wmw1SFR2amt5QnVVOU9kR1BrUEFMclFLTG55c0g5eGEzUTF1RGtmRklFYTltUWhVYUI2Q3I4NmlzbTZYVmFZYnkwakVQRUhUWXBkZ1h5aGc1UkVCV0xwTnFZZlpncnY5Z25RNXgxUnhNd1B0NWlkQnhVTzRUb3gyUG5vcmdLcm8zWXcwd0ZaNUN5ejlWazdkc3BaMFRHS2RhVzBiclpxVmRzd25XckMyOWNBaEpUcW5kYjVzZU8xSHFVTjI5MHdHYlo3UjhzdUhWQUJBQUVzbW5neHBKNGtwQTdRTzF2ZHFsckxJaDdiWWpnZlBJakthWGIydkdDbEw1Q3l5Qlk1cDBCUnRwencxVk51MHVVY0MwdFZXbGlsdDhmMTJsTVJNSVVJdk9XUEdVcVRpUFdrMFMyc0ZoNTZGcHpZZGhqa1d2QWg5MWUwNzVoa2pFejNhRXl1YWkwU1B2cktrdnQ0Znc0WWVrajNJU3lpUWxrUmFaa2dIbXJrbkQxTkFBRWRaSm5teERSVno0bVU0cDFtcUlQbXJWMHVKa251TVNCSHdKRlkxMFhxbmJvbTdpODZta2g1S2pTS2UzdzhoQkhpTVc2RzF2eEVqVGxTOGVvOHd4VkdyRXVWajhqd1FWUTEzTkxEMkdwdVJlZk1MYjF1aUdzZmNBV2JTd2d5cUMxSE45RnV4aTRBQ21rYWNaTXdZVWVmWkl3YUVFSXJZOG8="
m_p: "73b6IF06H9819y7Ohx5xd3lZjT7W0otM6eV0352Vg476QNK00VVWyh2171vJdv7w"
e_t: "1614104822229"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "476.38"
  vouBalance: "0"
  vouList {
    id: 62299579
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299580
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299581
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299582
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299583
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299550
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299549
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299547
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299545
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299544
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299543
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299542
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299541
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299540
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299539
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299538
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299537
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299529
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 18
}
userinfo {
  username: "156******06"
}

2021-02-22 20:26:59,824-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 20:26:59,824-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "5.0"
  t_p: "5aef0b8b4d6749908b2a63a0e593de51"
  imei: ""
  model: "PBDM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "944TvCEg"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
payrequestid: "KB202102222027002076075925510222"
version: "260"
queryType: "PAY"

2021-02-22 20:26:59,871-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "2002"
  msg: ""
}
successStatus: "1086"
origAmount: "365.00"

2021-02-22 20:26:59,872-INFO-lib.common_biz.find_database_table-49-`pay_cocoin_2`.`pay_user_info_75`
2021-02-22 20:26:59,873-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select balance from `pay_cocoin_2`.`pay_user_info_75` where ssoid = "2076075925"
2021-02-22 20:26:59,876-INFO-fiz_db_operate-26-可币余额：476.3800
2021-02-22 20:26:59,876-INFO-recharge-53-可币充值成功
2021-02-22 20:26:59,877-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `db_order_4`.`order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "KB202102222027002076075925510222"
2021-02-22 20:26:59,881-INFO-lib.common_biz.fiz_assert-25-订单详情：{'id': 14943, 'pay_req_id': 'KB202102222027002076075925510222', 'notify_id': '6880379532436892601381697018', 'partner_order': 'NV203113782656752021022220270016205562458944423474', 'amount': 36500, 'refund': 0, 'contents': 'KB—RECHARGE_PAY', 'products_name': 'KB—RECHARGE_PAY', 'counts': 1, 'ssoid': '2076075925', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': None, 'ip': '58.255.79.104', 'mac': '', 'model': 'PCRM00', 'app_package': 'com.example.pay_demo', 'app_ver': '1.1.0', 'sdk_ver': '260', 'partner_code': '2031', 'notify_url': 'http://pay.pay-test.wanyol.com/notify/receiver', 'status': 'OK', 'channel_id': '', 'channel_type': 'NATIVE', 'pay_type': 'heepay', 'direct_pay': 'KEBI', 'game_type': 'WANGYOU', 'present_amount': 0, 'original_amount': 36500, 'discount_info': '', 'extra': None, 'remark': 'new way', 'request_time': datetime.datetime(2021, 2, 22, 20, 27, 2), 'success_time': datetime.datetime(2021, 2, 22, 20, 27, 2), 'modify_time': datetime.datetime(2021, 2, 22, 20, 27, 2), 'trade_type': 'CZ', 'kebi_spent': 0, 'voucher_amount': 0, 'voucher_info': None, 'country_code': 'CN', 'currency': 'CNY', 'openid': None, 'brand_type': 'OPPO', 'mobile_os_ver': '17', 'platform': '', 'screen_info': 'FULL', 'voucher_id': None, 'factor': None, 'paid_amount': None, 'paid_usd': None, 'combine_order': 'N'}
2021-02-22 20:26:59,881-INFO-lib.common_biz.fiz_assert-34-订单表信息记录正确
2021-02-22 20:26:59,882-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `pay_tradeorder_4`.`trade_order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "KB202102222027002076075925510222"
2021-02-22 20:26:59,886-INFO-lib.common_biz.fiz_assert-45-trade订单详情：{'id': 7629, 'pay_req_id': 'KB202102222027002076075925510222', 'partner_order': 'NV203113782656752021022220270016205562458944423474', 'partner_code': '2031', 'products_name': 'KB—RECHARGE_PAY', 'ssoid': '2076075925', 'origin_amount': 36500, 'amount': 36500, 'kb_amount': 0, 'voucher_amount': 0, 'present_amount': 0, 'refund': 0, 'country_code': 'CN', 'currency': 'CNY', 'pay_type': 'heepay', 'channel_id': '', 'channel_type': 'NATIVE', 'direct_pay': 'KEBI', 'trade_type': 'CZ', 'combine_type': 'PRIMARY', 'status': 'OK', 'notify_url': 'http://pay.pay-test.wanyol.com/notify/receiver', 'attach': '', 'extra_info': '', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': None, 'ip': '58.255.79.104', 'mac': '', 'openid': None, 'model': 'PCRM00', 'brand_type': 'OPPO', 'app_package': 'com.example.pay_demo', 'app_ver': '1.1.0', 'sdk_ver': '260', 'mobile_os_ver': '17', 'platform': '', 'screen_info': 'FULL', 'remark': None, 'request_time': datetime.datetime(2021, 2, 22, 20, 27, 1), 'success_time': datetime.datetime(2021, 2, 22, 20, 27, 2), 'modify_time': datetime.datetime(2021, 2, 22, 20, 27, 2)}
2021-02-22 20:26:59,886-INFO-lib.common_biz.fiz_assert-53-trade订单表信息记录正确
2021-02-22 20:26:59,887-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `virtual`.`tb_recharge202102` WHERE ssoid = '2076075925' and rechargeOrder = "KB202102222027002076075925510222"
2021-02-22 20:26:59,890-INFO-lib.common_biz.fiz_assert-69-tb_recharge订单详情：{'id': 11, 'ssoid': '2076075925', 'imei': '', 'rechargeTime': datetime.datetime(2021, 2, 22, 20, 27, 2), 'amount': 36500, 'status': 'OK', 'rechargeOrder': 'KB202102222027002076075925510222', 'partnerId': '2031', 'rechargeChannel': '24', 'appPackage': 'com.example.pay_demo', 'model': '', 'clientIp': '', 'source': None, 'updateTime': datetime.datetime(2021, 2, 22, 20, 27, 2)}
2021-02-22 20:26:59,891-INFO-lib.common_biz.fiz_assert-77-tb_recharge订单表信息记录正确
2021-02-22 20:28:55,370-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境1-MYSQL：{'host': '10.52.44.235', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-02-22 20:28:55,608-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境1-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-02-22 20:28:55,652-INFO-lib.common.db_operation.redis_operation-33-连接redis集群[{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]成功
2021-02-22 20:28:55,652-INFO-lib.common.db_operation.redis_operation-74-connection list: [{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]
2021-02-22 20:28:56,022-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=0
2021-02-22 20:28:56,025-INFO-lib.common_biz.find_merchant_info-28-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601'}
2021-02-22 20:28:56,026-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-02-22 20:28:56,029-INFO-lib.common_biz.find_key-108-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-02-22 20:28:56,029-INFO-lib.common_biz.find_database_table-49-`pay_cocoin_2`.`pay_user_info_75`
2021-02-22 20:28:56,030-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select balance from `pay_cocoin_2`.`pay_user_info_75` where ssoid = "2076075925"
2021-02-22 20:28:56,033-INFO-fiz_db_operate-26-可币余额：476.3800
2021-02-22 20:28:56,041-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 20:28:56,041-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTI0MzIzNTkxNzUsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTHFLUlgvNDgxVm4wTlBnMHRsRTBoekt0UWlkOTU4Y1paT3JjWFVaaWdCbGc9In0.MEQCIDNerQ91ofjYoUWHcxjmBpIwDBFkoANGJahYcnZLFr3OAiAYXRHenkKELTRtELmqHC0KEG5WiDIP86ORppeeUp1gcA"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "77437175589786"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "g3Cbu2Sxy8nPZt0rmvkGqshoFpezOcwA"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-02-22 20:28:56,233-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "c7c67f5359a04b38944bce1918c07d58"
s_p: "RW1BNTJlazlIdmUwVXJmcU1QZUlZd3l1bU5TczNqd3VMN2lLUHR5VkhtZTQxRklPbGdJNWtUT01kekNrZjF1ZW5tajU5V1kzdnllT2VXV0xmd0FwTUJKa1lpTlptNGg4VGxzc2wySE9rODFob0dPTlVrZmIwYkdWeWRsenc5eWNyVEpRNzJPR0w5SlByc2xFRXlNUnN1ZzV2RTJjT2l3THdVMWhza2hTWExlSThmQnJsc3BwZ1B3dDh3bWVPSkkxMDg2UGZ2MjJEVEI3TDJIWmk0YWp0ckc2dEMyaWx5cDdvdEVsRW5tVmdKcm1UWXlqTFl2VmlCQXVLUW5PRDhCdUM1T2JEb3FlVHBHSGNGRUZXNk5PbmhtdUNlNWdBUzgwS3Z3dmV1a3JmTE92NWNIMjBaVFRDbzVaZVhzZGllQTdwQkRsQjFuUG5waEV3cWFWTTd2WXF2b0RUVkZ4MEtRMW1QQ0VhY25wend1Q1ZJT2U5Qk5WTzdjMThEM1U1YXBDazNjTnBCRWc0YVdERTNYYVJXSzhheEE2OHVDeGxmY3pnVHE5TmYweVB0SHczS1FTWGRCUmtqZzUybkFzS1djblF6TjhoTjVNWFp2RDJqV0NPcWFIS2dRQkZCVFYzQkE1aVNOcDE1NXR1Ykx5MWRMUkI3aFNOSmMyc29hWDlHTHRIdW9wRVdDaEozcU14aGJNQzIwTzdaUHFmcGtPYVlFd2V4NllJc1dGU01FZmVyYk5OcDJ5anZtSVRZSDZqVjVEODNSQ0didnk4em5OcjlRQjEyVWN2bU9aZXBQZnZlRlpQQURCY2NLMG94Rmo4S1NaMzNrdmlPbHM5VVBlQ2k3R2NqQUZUVzFZN1ZWZERReGxJcmVoc0tCeTJGejFQakJXcjhmTGpCZmQwMThydkEwT2JrNzJoN29uMG5OT2NjejdibDhnbU43OUZ5RW1nSFlsYVU1dkJONnZUOE9JeUtjOEdLZmVpdXgxNjZaUWhMV2ViamFlYTRGNVNNUDdINHgxTHZmZ0pscFV3eHQxdGRBbWpYNjU4aktxTG5FVkFkam8="
m_p: "32T5opc3N0KgT6Lmx5rt6ZjQ6TRyHn1TKPc5Yz4Nqe72YT79Smc8Ot5U9j4945gB"
e_t: "1614104938629"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "476.38"
  vouBalance: "0"
  vouList {
    id: 62299579
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299580
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299581
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299582
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299583
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299550
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299549
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299547
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299545
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299544
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299543
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299542
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299541
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299540
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299539
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299538
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299537
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299529
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 18
}
userinfo {
  username: "156******06"
}

2021-02-22 20:28:56,257-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 20:28:56,257-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "12.0"
  t_p: "c7c67f5359a04b38944bce1918c07d58"
  imei: ""
  model: "PDCM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "Ukfb0bGV"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: ""
  brandType: "OPPO"
  mobileos: "16"
  androidVersion: "29"
}
type: "wxpay"
amount: "5.8"
cardno: ""
cardpwd: ""
ext: ""
basepay {
  channelId: ""
  notifyurl: "http://pay.pay-test.wanyol.com/notify/receiver"
  productName: "RECHARGE_SPEND"
  productDesc: "RECHARGE_SPEND "
  partnercode: "2031"
  appversion: "208006"
  currencyName: "CNY"
  rate: 1.0
  partnerorder: "XghkMoWyzPeNxm5nwra2pcCslqvZ0ATY"
}
sign: "G0zGGUQYJjtbhxghtx8+V9f9bXxqk1T3XH35G9wbogA87ZPraETw8AS8m1CAsnO6Hz9h5sUfLvYk00phsD9PwiccErSuYtsVCMEdgneon1QKfW8y7F8LOgYLcUvvyPFqzL0OrojneriZkMsGxc4H/86ByQyrCSFvHdVTjZwNw/HUlbgngSeDW0H9SyaNtgUHgbPQvRTWobvmS9251DUtVgb6cXXvtSLAPIkU5nMbhoAuFxuOwV4Iy5mRn5hdKYZV6OUnJJmrZSQN/CdVVa097GChiLuTUHP9F+8DNSTFK/Hfyb7vT8ObCVh7waqs9r35yrjPrqm6uBW2MP/MzvZSUw=="
ip: "183.238.170.71"
expendRequest {
  header {
    version: "12.0"
    t_p: "c7c67f5359a04b38944bce1918c07d58"
    imei: ""
    model: "PDCM00"
    apntype: "1"
    package: "com.example.pay_demo"
    r_v: "Ukfb0bGV"
    ext: ""
    sdkVer: 260
    country: "CN"
    currency: "CNY"
    openId: ""
    brandType: "OPPO"
    mobileos: "16"
    androidVersion: "29"
  }
  price: 580
  count: 1
  productname: "RECHARGE_SPEND_PRICE=AMOUNT"
  productdesc: "RECHARGE_SPEND_PRICE=AMOUNT"
  partnerid: "2031"
  callBackUrl: "http://pay.pay-test.wanyol.com/notify/receiver"
  partnerOrder: "XghkMoWyzPeNxm5nwra2pcCslqvZ0ATY"
  channelId: ""
  ver: "208006"
  source: "auto_test"
  attach: ""
  sign: "WGRyIUL7h9e64YzgZJ7fVGFAUI4YRhBjveAEbrulIaJzarKUJ3js8fbo2JDbjzHv0wCfEiC7I5sXaTCLudB3z/SKuNgplsVswDDGQiAh1kf/em1m8zKqx58CnWTzE64upkhk2mg1Ep55vzXyRkYDLM8A2nsU9hhDPlApy9GO58U="
  factor: ""
}
isNeedExpend: "1"
appId: ""
payTypeRMBType: "0"
tradeType: "common"
screenInfo: "FULL"

2021-02-22 20:28:56,645-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "{\"appid\":\"wx93eea96ecc33f168\",\"noncestr\":\"b415333562ec44b8891435fe713ca6f8\",\"packageNm\":\"Sign=WXPay\",\"partnerid\":\"1259634601\",\"prepayid\":\"wx222028590159914f1a245b6f06408e0000\",\"sign\":\"38AB76D64C9EB635EB3B337DD0F2D0E7\",\"timestamp\":\"1613996939\"}"
}
payrequestid: "KB202102222028582076075925727072"
model: ""

2021-02-22 20:28:56,646-INFO-wxpay-scarlet-51-回调参数：<xml><transaction_id><![CDATA[4616141378073405061413502861]]></transaction_id>
<nonce_str><![CDATA[TyW8OJ2ib9clqF76wKxM4nARQDXNVCUL]]></nonce_str>
<bank_type><![CDATA[OTHERS]]></bank_type>
<openid><![CDATA[oCg6Xt8NvRi7jGuap_5B6XdY4oYk]]></openid>
<sign><![CDATA[CA431593FD0896624E40F70704B1AF00]]></sign>
<fee_type><![CDATA[CNY]]></fee_type>
<mch_id><![CDATA[1259634601]]></mch_id>
<cash_fee><![CDATA[1]]></cash_fee>
<out_trade_no><![CDATA[KB202102222028582076075925727072]]></out_trade_no>
<appid><![CDATA[wx93eea96ecc33f168]]></appid>
<total_fee>580</total_fee>
<trade_type><![CDATA[APP]]></trade_type>
<result_code><![CDATA[SUCCESS]]></result_code>
<attach><![CDATA[TEST]]></attach>
<time_end><![CDATA[20210222202856]]></time_end>
<is_subscribe><![CDATA[N]]></is_subscribe>
<return_code><![CDATA[SUCCESS]]></return_code>
</xml>
2021-02-22 20:28:58,021-INFO-wxpay-scarlet-55-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-02-22 20:28:58,022-INFO-wxpay-scarlet-57-回调解析成功
2021-02-22 20:28:58,030-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 20:28:58,030-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTI0MzIzNTkxNzUsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTHFLUlgvNDgxVm4wTlBnMHRsRTBoekt0UWlkOTU4Y1paT3JjWFVaaWdCbGc9In0.MEQCIDNerQ91ofjYoUWHcxjmBpIwDBFkoANGJahYcnZLFr3OAiAYXRHenkKELTRtELmqHC0KEG5WiDIP86ORppeeUp1gcA"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "62425711033446"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "bPO8x0z9qdNGWgM1siCt6FfHKrBSpRul"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-02-22 20:28:58,112-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "13bb04de617a4b70ad9243e7d30d6f2f"
s_p: "cW83R3B4MW5zN0luVmUwNVhOZFJvS3BiWWpaa0FTekx3MVkwck9TcWVnYkhvSWhpZ0tpY0pZcE9waWt1MXhwcWNyMHJPa2RGTHFzTFp5MnA4UzdvckJXRXNnVDRoNWtVZ21BYThlU2U5a2RnYlZ2SVNLcDBiblU2UGNhNmNLN0RpWUkzakl4cDQzZVVUMWhaWVhmNzNQWWJhbElMblRzcERxekhjWHFmckcxbkl1MVFkR0J0eUYwM3RJS3dkdTZGQnRhaGFKSXdCazR3VHNKOUR2dkozYUdpR2dTbjVYUHpMVlRibTlsUUsxVmYzYlhUekY4V05KQ2NmZ0pKd2Nwbm53c21DU0pIajV6T1NMc2J6RHRTWEJHeUJuclJMV0x4WWxxVDdEQ1kzeVVxdE8yRk1LMUNJTlFXSUY0Zlg5SzYwVWFPemM3aDJMekFIam5YTXFZZGZCNG9MSk55SFNpWUhLc2tqQ0xBNTRCdzdhdUhWQ0NodjQwZHlDbGJ5ZTE5MW94czNSRThrVXdyWFgweEhnWVRoU3NCY3MxTEZJdWFJYVJNMkxKOTVPdldPeFpDT0VOa0hGVWl0Q05jcnRKbnVuNk5ueWMzMlRFZDRVSjh5bUo2ZGhBUUo1OXRjaGlndlk0b3pxUkZGNHViZ3ZWdnJiMllhdHZjNGthNzFoV1l4MkJFYkdMbEdXRUxqYjNrZExnMW9mSEFqQTVxRWpxRFlzUGhNYVVMOHZBWWlFU1h5MWhSSElBNGRHZHJramdMOEIyU1pjVm1zZ0NWcTZtbElyVFZEUFI3bjllc1ZVd05wWUcySEFVY1ZnWjJzUXZXUzVsS3huTlR3TjZvS3NscjgxUnJKZ25OOEI4UGpXS1lHQmt4ZFhJUXNKNlczNkpoRlg4cGlkdW1kVWJaMUlyYWZDYXg5OTJ4ZEtvMVU1Y2JEQlZQWEhUUEdaQmQza2hqdnV6TU1LajU3amZDeUJoV3NwQmZFV2RrNU9JYVRpekkzZzlDQmswUFpMMEJPb2REeGlYelEyaEV1QVZmMGE3NjUzRUF4cm9CNFlyTnA3dXA="
m_p: "8s91iO4d21Y6WqWSqxHa79v97ngmU0PpzBlD1Xb28nIvsneIq29n9X0F7Ep01nyU"
e_t: "1614104940513"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "476.38"
  vouBalance: "0"
  vouList {
    id: 62299579
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299580
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299581
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299582
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299583
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299550
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299549
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299547
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299545
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299544
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299543
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299542
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299541
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299540
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299539
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299538
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299537
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299529
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 18
}
userinfo {
  username: "156******06"
}

2021-02-22 20:28:58,116-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 20:28:58,116-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "5.0"
  t_p: "13bb04de617a4b70ad9243e7d30d6f2f"
  imei: ""
  model: "PBDM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "ASzLw1Y0"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
payrequestid: "KB202102222028582076075925727072"
version: "260"
queryType: "PAY"

2021-02-22 20:28:58,170-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "2002"
  msg: ""
}
successStatus: "1086"
origAmount: "5.80"

2021-02-22 20:28:58,170-INFO-lib.common_biz.find_database_table-49-`pay_cocoin_2`.`pay_user_info_75`
2021-02-22 20:28:58,171-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select balance from `pay_cocoin_2`.`pay_user_info_75` where ssoid = "2076075925"
2021-02-22 20:28:58,174-INFO-fiz_db_operate-26-可币余额：476.3800
2021-02-22 20:28:58,174-INFO-recharge_spend-50-可币余额正常
2021-02-22 20:28:58,175-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `db_order_4`.`order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "KB202102222028582076075925727072"
2021-02-22 20:28:58,179-INFO-lib.common_biz.fiz_assert-25-订单详情：{'id': 14944, 'pay_req_id': 'KB202102222028582076075925727072', 'notify_id': '4616141378073405061413502861', 'partner_order': 'XghkMoWyzPeNxm5nwra2pcCslqvZ0ATY', 'amount': 580, 'refund': 0, 'contents': 'RECHARGE_SPEND ', 'products_name': 'RECHARGE_SPEND', 'counts': 1, 'ssoid': '2076075925', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': '1259634601', 'ip': '58.255.79.104', 'mac': '', 'model': 'PDCM00', 'app_package': 'com.example.pay_demo', 'app_ver': '208006', 'sdk_ver': '260', 'partner_code': '2031', 'notify_url': 'http://pay.pay-test.wanyol.com/notify/receiver', 'status': 'OK', 'channel_id': '', 'channel_type': 'NATIVE', 'pay_type': 'wxpay', 'direct_pay': 'KEBI', 'game_type': 'WANGYOU', 'present_amount': 0, 'original_amount': 580, 'discount_info': '', 'extra': None, 'remark': 'new way', 'request_time': datetime.datetime(2021, 2, 22, 20, 29), 'success_time': datetime.datetime(2021, 2, 22, 20, 28, 56), 'modify_time': datetime.datetime(2021, 2, 22, 20, 29), 'trade_type': 'PAY', 'kebi_spent': 0, 'voucher_amount': 0, 'voucher_info': '{"cutAmount":"0","id":"0","type":"0"}', 'country_code': 'CN', 'currency': 'CNY', 'openid': None, 'brand_type': 'OPPO', 'mobile_os_ver': '16', 'platform': '', 'screen_info': 'FULL', 'voucher_id': '0', 'factor': '', 'paid_amount': None, 'paid_usd': None, 'combine_order': 'N'}
2021-02-22 20:28:58,179-INFO-lib.common_biz.fiz_assert-34-订单表信息记录正确
2021-02-22 20:28:58,180-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `pay_tradeorder_4`.`trade_order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "KB202102222028582076075925727072"
2021-02-22 20:28:58,183-INFO-lib.common_biz.fiz_assert-45-trade订单详情：{'id': 7630, 'pay_req_id': 'KB202102222028582076075925727072', 'partner_order': 'XghkMoWyzPeNxm5nwra2pcCslqvZ0ATY', 'partner_code': '2031', 'products_name': 'RECHARGE_SPEND', 'ssoid': '2076075925', 'origin_amount': 580, 'amount': 580, 'kb_amount': 0, 'voucher_amount': 0, 'present_amount': 0, 'refund': 0, 'country_code': 'CN', 'currency': 'CNY', 'pay_type': 'wxpay', 'channel_id': '', 'channel_type': 'NATIVE', 'direct_pay': 'KEBI', 'trade_type': 'PAY', 'combine_type': 'PRIMARY', 'status': 'OK', 'notify_url': 'http://pay.pay-test.wanyol.com/notify/receiver', 'attach': '', 'extra_info': '', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': '1259634601', 'ip': '58.255.79.104', 'mac': '', 'openid': None, 'model': 'PDCM00', 'brand_type': 'OPPO', 'app_package': 'com.example.pay_demo', 'app_ver': '208006', 'sdk_ver': '260', 'mobile_os_ver': '16', 'platform': '', 'screen_info': 'FULL', 'remark': None, 'request_time': datetime.datetime(2021, 2, 22, 20, 28, 59), 'success_time': datetime.datetime(2021, 2, 22, 20, 29), 'modify_time': datetime.datetime(2021, 2, 22, 20, 29)}
2021-02-22 20:28:58,184-INFO-lib.common_biz.fiz_assert-53-trade订单表信息记录正确
2021-02-22 20:28:58,184-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `virtual`.`tb_recharge202102` WHERE ssoid = '2076075925' and rechargeOrder = "KB202102222028582076075925727072"
2021-02-22 20:28:58,186-INFO-lib.common.db_operation.mysql_operation-51-查询数据为空
2021-02-22 20:28:58,186-INFO-lib.common_biz.fiz_assert-69-tb_recharge订单详情：None
2021-02-22 20:28:58,186-INFO-lib.common_biz.fiz_assert-77-tb_recharge订单表信息记录正确
2021-02-22 20:28:58,187-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `virtual`.`tb_payment202102` WHERE ssoid = '2076075925' and partnerOrder = "XghkMoWyzPeNxm5nwra2pcCslqvZ0ATY"
2021-02-22 20:28:58,190-INFO-lib.common.db_operation.mysql_operation-51-查询数据为空
2021-02-22 20:28:58,190-INFO-lib.common_biz.fiz_assert-92-tb_payment订单详情：None
2021-02-22 20:28:58,190-INFO-lib.common_biz.fiz_assert-100-tb_payment订单表信息记录正确
2021-02-22 20:30:59,582-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境1-MYSQL：{'host': '10.52.44.235', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-02-22 20:30:59,856-INFO-lib.common.db_operation.mysql_operation-98-成功连接到测试环境1-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-02-22 20:30:59,926-INFO-lib.common.db_operation.redis_operation-33-连接redis集群[{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]成功
2021-02-22 20:30:59,926-INFO-lib.common.db_operation.redis_operation-74-connection list: [{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]
2021-02-22 20:31:00,296-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no, plan_id FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=1
2021-02-22 20:31:00,299-INFO-lib.common_biz.find_merchant_info-41-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601', 'plan_id': '120877'}
2021-02-22 20:31:00,300-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-02-22 20:31:00,303-INFO-lib.common_biz.find_key-108-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-02-22 20:31:00,307-INFO-lib.common.db_operation.mysql_operation-59-执行sql语句：update `db_order_0`.`autorenew_sign_info` set status = "UNSIGN" where ssoid = "2076075925" and partner_code = "2031" and renew_product_code = "20310001" and pay_type = "wxpay"
2021-02-22 20:31:00,320-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 20:31:00,320-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTI0MzIzNTkxNzUsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTHFLUlgvNDgxVm4wTlBnMHRsRTBoekt0UWlkOTU4Y1paT3JjWFVaaWdCbGc9In0.MEQCIDNerQ91ofjYoUWHcxjmBpIwDBFkoANGJahYcnZLFr3OAiAYXRHenkKELTRtELmqHC0KEG5WiDIP86ORppeeUp1gcA"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "6.0"
appKey: "1234"
count: 10000
order: "35209091829903"
ip: "121.13.218.236"
type: "1"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "AI6YZoqbQhGN8xwnFHfsEj5K3LeBd2Jp"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-02-22 20:31:00,372-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "af4d2312a54a4538a9a94b21a1d1803d"
s_p: "bnU1c1hqdlFYWFpZWk1YZDBTR2JGVVFEREp2ZE0welRiT0luNUo2OGQzSHRqaVY5dHp6QWNLc2NNeUV0bFU2ZkllM1Jna0VHb2RQVlMzc0MwV2pXS0J2RXBxMThkZmxvaG9pMU5BUXN1YjBEd20xMGwxamNZMjJ6djNKWnQ4OXN6UW5BdmRYS2dkZklGY05yblhFNGFJUUFNc0ZXeFNRaHVudGxSbUJVV1BZVjM3VFBDQVdnV2NrdmNUbjZDb2RjR3ZZMUFvbDlZMlFRSkJJejhHOHYwQzdtU0VtY20ycXRIckJVZGEyajNLQ3EyOTVSTUJ1dWdHMnBLVDkyQkVnMkNyMlozQ1pFdXhJeGlQdE9VNnFUWUowdWhDTzdaMEZuQ2pnM1dJV3JCc0dsdHQxSjRPZTZsclV2OHV2UkdJbmdGM1ZmQ2oyUHlxS29pbEZ6eVdoNnU2TGZTUzBuZWFCYTd4OWlMWmZzNkRVb0VFNXVTcUIzWEVKb2tHeDdlMGNNWEFpQU1BMGhaaWthNGZFdE15VlhBeGxJQnFKdG4zTmdnTm9PWTBtNDlVMjBLcGM0Rkt2bEg5SkRlOHh1WmRmalNXbDdLUDllcGU5M0tBWWo1MzdyR1kyWFlvQlFtNGJkVDhUa2I1UHJnNnVvcm5mSVlNUFNqeHdQNnZpaWl0S0R6d213b29oazBlbFhrejdrU0M0TVhWZ1ZhZGwwalZJemJIOGlFV2RVVG1WbDM4M1pLZGlhTGJCVDlhZzlGRHJ3VUZNWE9GRkRNdlVjTXB6QVYzYTN4ZUE3M0Y2NGRKdWpXRTU3U0o2dElOeEJPbENETEdnQjNLT3ZnMDlkTVNUZXhhWDBQMG0xWGk4Z3VXN0c3RWUzeWowTFZ3M2xVOTVmc2l6TWtrdUk3aE9ob3RoNkRnbk9MUExLZEREcm51TTFkWlFVWEl1R3pBSjVSMzdPYmxUZHpjdWFPZHRnY1U1UXF3b09rVnQ2WnZGSUdpeDZHMEZwdVRnalV6RzlTV09tdWhnUnVoZFdoQ09rZFJCTjZYZDFrZk1uUVJVR0FwWWg="
m_p: "7oc11KJGCq6iWusZqs50gPVVFb2xTaTP68EyU245yu7uhCAxxh9l2XfN3lChKz2H"
e_t: "1614105062806"
balanceResult {
  baseresult {
    code: "0000"
    msg: ""
  }
  balance: "0"
  vouBalance: "0"
  vouNum: 0
}
userinfo {
  username: "156******06"
}

2021-02-22 20:31:00,374-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 20:31:00,374-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "1.0"
  t_p: "af4d2312a54a4538a9a94b21a1d1803d"
  imei: ""
  model: "PCRM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "tlRmBUWP"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: ""
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
transType: "SIGNANDPAY"
renewProductCode: "20310001"
signPartnerOrder: "BdMbnoTXfzWNhQ48OaAjpVt3KPHivEu2"
type: "wxpay"
amount: "0.01"
oriAmount: "0.01"
ip: "58.252.5.75"
sign: "SaUf/MTdSXGfLTGPTX23nVv3Le5N58p70u97ltrdapBomr8ekXAvRPeaR3nNM8uWgHzT8Hl8dUcxSvbHnN1azOL3qB0jI40m2GI571N31A6dfeB/EvvV49651mbIOa2gJZ/oZkbUsH6vV6Vi8QFbGbyBdXrJXXdnscVA1kfSxmAgq3f2fxeu0cKD7RTc97sAvZDlDwZu3HUUCi1EX0OhCoyqBjDCYHxRsWr9drK/0roCMo21EEXSgzzyyKUOotp1UoOGziYNK8RUvcBSCG6Zj7Q3J2VB5NSqwLNTPYmFWbuylR+cLw3V5ZpN38xlO7pPlEylq12+0w5EAVeG9vZ7roJdnF1J2ajvYoBLsro4TNpQvTO11qsulLoFW87tIpYMSGLjT35Xzxnulc5HE8fgJ2wrpHCWISgFVRqO8+rB2cZ6UIb61CDP4SVRWX0PDHcr1OUzPx4VcdY2Y5NvqkCSaPvTzAs/4/v48LOcwqQnuqQjNLTEVUdN4s4h/pOP7tIP"
signAgreementNotifyUrl: "http://pay.pay-test.wanyol.com/notify/receiver"
appId: ""
isNeedExpend: "0"
basepay {
  channelId: ""
  notifyurl: "http://pay.pay-test.wanyol.com/notify/receiver"
  productName: "SIGN_PAY"
  productDesc: "SIGN_PAY"
  partnercode: "2031"
  appversion: "260"
  currencyName: "\344\272\272\346\260\221\345\270\201"
  rate: 1.0
  partnerorder: "BdMbnoTXfzWNhQ48OaAjpVt3KPHivEu2"
}
screenInfo: "FULL"

2021-02-22 20:31:00,806-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "{\"appid\":\"wx93eea96ecc33f168\",\"noncestr\":\"5e3143525d484ac996e9b1960e1eb7fd\",\"packageNm\":\"Sign=WXPay\",\"partnerid\":\"1259634601\",\"prepayid\":\"wx22203103172990a879fab4da2778700000\",\"sign\":\"23811AB8488FEA69854EB4DBECDEA577\",\"timestamp\":\"1613997063\"}"
}
payrequestid: "RM202102222031022076075925132672"
transType: "SIGNANDPAY"
signType: "APP"

2021-02-22 20:31:00,806-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT contract_code from `db_order_0`.`autorenew_sign_record` where pay_req_id = "RM202102222031022076075925132672"
2021-02-22 20:31:00,810-INFO-wxpay-scarlet-96-回调参数：<xml><change_type>ADD</change_type>
<contract_code>SN202102222031026815720533432436</contract_code>
<contract_expired_time>2022-02-22 20:31:00</contract_expired_time>
<contract_id>3653577673</contract_id>
<mch_id>1259634601</mch_id>
<openid>oCg6Xt8NvRi7jGuap_5B6XdY4oYk</openid>
<operate_time>2021-02-22 20:31:00</operate_time>
<plan_id>120877</plan_id>
<request_serial>647256390889654910</request_serial>
<result_code>SUCCESS</result_code>
<return_code>SUCCESS</return_code>
<return_msg>OK</return_msg>
<sign>09DBC018D1E51AD0A3E560A0AB6DA83C</sign>
</xml>
2021-02-22 20:31:00,905-INFO-wxpay-scarlet-100-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-02-22 20:31:00,905-INFO-wxpay-scarlet-102-回调解析成功
2021-02-22 20:31:00,905-INFO-wxpay-scarlet-51-回调参数：<xml><transaction_id><![CDATA[7288216415365635239442349242]]></transaction_id>
<nonce_str><![CDATA[3NSV1whZUlXO2BHCt0gRJEAxDe98zycY]]></nonce_str>
<bank_type><![CDATA[OTHERS]]></bank_type>
<openid><![CDATA[oCg6Xt8NvRi7jGuap_5B6XdY4oYk]]></openid>
<sign><![CDATA[777AAE09D88D507252892261620847C8]]></sign>
<fee_type><![CDATA[CNY]]></fee_type>
<mch_id><![CDATA[1259634601]]></mch_id>
<cash_fee><![CDATA[1]]></cash_fee>
<out_trade_no><![CDATA[RM202102222031022076075925132672]]></out_trade_no>
<appid><![CDATA[wx93eea96ecc33f168]]></appid>
<total_fee>1</total_fee>
<trade_type><![CDATA[APP]]></trade_type>
<result_code><![CDATA[SUCCESS]]></result_code>
<attach><![CDATA[TEST]]></attach>
<time_end><![CDATA[20210222203100]]></time_end>
<is_subscribe><![CDATA[N]]></is_subscribe>
<return_code><![CDATA[SUCCESS]]></return_code>
</xml>
2021-02-22 20:31:01,028-INFO-wxpay-scarlet-55-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-02-22 20:31:01,029-INFO-wxpay-scarlet-57-回调解析成功
2021-02-22 20:31:01,036-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 20:31:01,036-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTI0MzIzNTkxNzUsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTHFLUlgvNDgxVm4wTlBnMHRsRTBoekt0UWlkOTU4Y1paT3JjWFVaaWdCbGc9In0.MEQCIDNerQ91ofjYoUWHcxjmBpIwDBFkoANGJahYcnZLFr3OAiAYXRHenkKELTRtELmqHC0KEG5WiDIP86ORppeeUp1gcA"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "36628129346480"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "zpMA1tcFkqYd6GRnoOf25JjSQX4CVLe7"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-02-22 20:31:01,131-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "45947e33c78340acb0e8b818dd792dd9"
s_p: "cTg2cUxQTUFlSnh3U1M0OEZNU25BdHpnRHVkZURqMjdURjZueTV4NTRtNDNDT1NaUkxDR3hXcmNHTUpCblQ2OG9QZGlSWWNWVlVtOG0zc2R4UkJSNDViQjBRQXJGT29QMW5aRGFHVUt3VUpjWDZOT0J6RGhrbklPTlRXdHhqMUZiSTZMZ0E3NTJEa3hLTGpqVjV5d3oyMTZhRjhmS0FxSldwTW94bkc3YXE5aEJ6c0Z0dTNTSk5sVHdCam5lelJuUGpoSVhGMG1xTW9YR3RJeXRxa0Zpa3dKYXpyZWZVQkZHU3VlTGJNNUZXMXB0QnByVk5xQ1F1ekRzS3l2a2VWSWlhRFM5OWpUSDhBY3A1T09OSXlDa1hkRWxTY3FYYVd6d2MwbzNMVldkNGRLNjc1czFCaGxWbjFvQ1FwTmFoYjZhSldjdXo1b1dCV25VYnJDbUVLVnJzNFNkejB6REEzRDl3VXU0RlFxUzdhdWk3M21iNmJUS2pDcHNlVm9YRDJmQ1J1QzlsRnRQcnpLbVJ5VU9jN2VjbjRMNktjQTBHTFpjVFI5ZGpKNWhuTFhreDMzMlZFa3hjUnVGQ2RjMmZIUXQwMVBQYkpYMEtYYjN6dnNiYWVkdUkyZnI5VG5BclZxNFpsZ3hOUkt5MDVOcmNTZGlYS0YwR2d0d1BZVEtab3RBaTVBMUhBSW5rTW5lc1RkUVkyUjR0UDJVNkxVNXJpaU40Z1l5dnR0dkZZRWZjWE5vYUh5b1oyaGxCSlg5NFlLeWtqWk9sTXNhR3ZBbXNlNWRIZU93UUFabHdqaTB5UDZxVGNCdGI1dTBYYlpKdnlSSFJIeHFXY0k2OTg4a05VS3p1aGp5c04xVGlIR0lwQVFpdHlvamVuMmRqNndybWlHeW1HNU5jRXpETG44bUMwSEo5NHBBc3lnQWtxNFVib0R3dWxUWU01TnBlbW41RXhvSjROY3NNMjM5Wk04NXZRZDFYSGtTNHRDRkkwRnBObWVSRExJeFZ0aHh0Zzh2b3pCbzZVYXY3cWxWUXJyRmhmZk1ESUlOOWdhUHp2N0NDYWM="
m_p: "XHR285r43aw26XOj1UWe00P4pkO1a6HL5B9504G63Ae48qAkXZYUJ4g7366hxygQ"
e_t: "1614105063524"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "476.38"
  vouBalance: "0"
  vouList {
    id: 62299579
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299580
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299581
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299582
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299583
    type: 8
    minCousume: 0
    vouCount: 1000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299550
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299549
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299547
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299545
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299544
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299543
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299542
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299541
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299540
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299539
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299538
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299537
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299529
    type: 2
    minCousume: 1000
    vouCount: 999
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 18
}
userinfo {
  username: "156******06"
}

2021-02-22 20:31:01,135-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-02-22 20:31:01,135-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "5.0"
  t_p: "45947e33c78340acb0e8b818dd792dd9"
  imei: ""
  model: "PBDM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "6LgA752D"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
payrequestid: "RM202102222031022076075925132672"
version: "260"
queryType: "PAY"

2021-02-22 20:31:01,192-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "2002"
  msg: ""
}
successStatus: "1086"
origAmount: "0.01"

2021-02-22 20:31:01,193-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `db_order_4`.`order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "RM202102222031022076075925132672"
2021-02-22 20:31:01,197-INFO-lib.common_biz.fiz_assert-25-订单详情：{'id': 14945, 'pay_req_id': 'RM202102222031022076075925132672', 'notify_id': '7288216415365635239442349242', 'partner_order': 'BdMbnoTXfzWNhQ48OaAjpVt3KPHivEu2', 'amount': 1, 'refund': 0, 'contents': 'SIGN_PAY', 'products_name': 'SIGN_PAY', 'counts': 1, 'ssoid': '2076075925', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': '1259634601', 'ip': '58.255.79.104', 'mac': '', 'model': 'PCRM00', 'app_package': 'com.example.pay_demo', 'app_ver': '260', 'sdk_ver': '1.0', 'partner_code': '2031', 'notify_url': 'http://pay.pay-test.wanyol.com/notify/receiver', 'status': 'OK', 'channel_id': '', 'channel_type': 'NATIVE', 'pay_type': 'wxpay', 'direct_pay': 'ZHICHONG', 'game_type': 'WANGYOU', 'present_amount': 0, 'original_amount': 1, 'discount_info': '', 'extra': None, 'remark': None, 'request_time': datetime.datetime(2021, 2, 22, 20, 31, 3), 'success_time': datetime.datetime(2021, 2, 22, 20, 31), 'modify_time': datetime.datetime(2021, 2, 22, 20, 31), 'trade_type': 'CZ', 'kebi_spent': 0, 'voucher_amount': 0, 'voucher_info': None, 'country_code': 'CN', 'currency': 'CNY', 'openid': None, 'brand_type': 'OPPO', 'mobile_os_ver': None, 'platform': None, 'screen_info': None, 'voucher_id': None, 'factor': None, 'paid_amount': None, 'paid_usd': None, 'combine_order': 'N'}
2021-02-22 20:31:01,197-INFO-lib.common_biz.fiz_assert-34-订单表信息记录正确
2021-02-22 20:31:01,198-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `pay_tradeorder_4`.`trade_order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "RM202102222031022076075925132672"
2021-02-22 20:31:01,202-INFO-lib.common_biz.fiz_assert-45-trade订单详情：{'id': 7631, 'pay_req_id': 'RM202102222031022076075925132672', 'partner_order': 'BdMbnoTXfzWNhQ48OaAjpVt3KPHivEu2', 'partner_code': '2031', 'products_name': 'SIGN_PAY', 'ssoid': '2076075925', 'origin_amount': 1, 'amount': 1, 'kb_amount': 0, 'voucher_amount': 0, 'present_amount': 0, 'refund': 0, 'country_code': 'CN', 'currency': 'CNY', 'pay_type': 'wxpay', 'channel_id': '', 'channel_type': 'NATIVE', 'direct_pay': 'ZHICHONG', 'trade_type': 'CZ', 'combine_type': 'PRIMARY', 'status': 'OK', 'notify_url': 'http://pay.pay-test.wanyol.com/notify/receiver', 'attach': '', 'extra_info': '', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': '1259634601', 'ip': '58.255.79.104', 'mac': '', 'openid': None, 'model': 'PCRM00', 'brand_type': 'OPPO', 'app_package': 'com.example.pay_demo', 'app_ver': '260', 'sdk_ver': '1.0', 'mobile_os_ver': '', 'platform': '', 'screen_info': '', 'remark': None, 'request_time': datetime.datetime(2021, 2, 22, 20, 31, 3), 'success_time': None, 'modify_time': datetime.datetime(2021, 2, 22, 20, 31, 3)}
2021-02-22 20:31:01,202-INFO-lib.common_biz.fiz_assert-53-trade订单表信息记录正确
2021-02-22 20:31:01,202-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select status from  `db_order_0`.`autorenew_sign_info` where ssoid = "2076075925" and partner_code = "2031" and renew_product_code = "20310001" and pay_type = "wxpay"
2021-02-22 20:31:01,205-INFO-lib.common_biz.fiz_assert-135-签约信息表记录正确
2021-02-22 20:31:01,206-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select status from `db_order_0`.`autorenew_sign_record` where pay_req_id = "RM202102222031022076075925132672"
2021-02-22 20:31:01,209-INFO-lib.common_biz.fiz_assert-149-签约记录表记录正确
2021-02-22 20:31:01,210-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select * from `db_pay_notify_1`.`notify_info` where request_id = "BdMbnoTXfzWNhQ48OaAjpVt3KPHivEu2"
2021-02-22 20:31:01,213-INFO-lib.common_biz.fiz_assert-112-通知表信息详情：{'id': 148417, 'app_id': 10003, 'app_name': 'opaycenter(测试环境)', 'app_sub_id': '2031', 'notify_id': 'f1a054a294da412e9c891781794f1aac', 'request_id': 'BdMbnoTXfzWNhQ48OaAjpVt3KPHivEu2', 'notify_protocol': 'HTTP', 'notity_detail': '{"appId":10003,"appSubId":"2031","httpReqType":"POST","reqContent":"{\\"ssoid\\":\\"2076075925\\",\\"country\\":\\"CN\\",\\"partnerOrder\\":\\"BdMbnoTXfzWNhQ48OaAjpVt3KPHivEu2\\",\\"notifyType\\":\\"SIGN\\",\\"payType\\":\\"wxpay\\",\\"agreementNo\\":\\"3653577673\\",\\"sign\\":\\"c93lc/67kZQNX2rNbia3KBPr/onTOppF9EenyCJGi1WwaiSRlw5gYdNrj7s1M2PfDp4IGnC09TW2wB9bZKwXGx1jPjqDCeZSkCG6KO0vHYeEbi1YwiAVyXzF0uZZuNBf4L/JGFcJydLQ3XqrdznQbUloeV2D1xwc/beqDb09F+U=\\",\\"notifyId\\":\\"IM20210222203103431\\",\\"currency\\":\\"CNY\\",\\"partnerId\\":\\"2031\\",\\"renewProductCode\\":\\"20310001\\",\\"status\\":\\"OK\\"}","reqUrl":"http://pay.pay-test.wanyol.com/notify/receiver","requestId":"BdMbnoTXfzWNhQ48OaAjpVt3KPHivEu2","signType":"MD5","successResult":"OK","timeStamp":1613997063324,"version":"1.0"}', 'notify_count': 1, 'notify_response': 'OK', 'notify_handler': 'httpNotifyJsonHandler', 'fail_strategy': 'failStrategyHashImpl', 'status': 'SUCCESS', 'success_time': datetime.datetime(2021, 2, 22, 20, 31, 3), 'insert_time': datetime.datetime(2021, 2, 22, 20, 31, 3), 'update_time': datetime.datetime(2021, 2, 22, 20, 31, 3), 'extra_json': None, 'remark': None}
2021-02-22 20:31:01,213-INFO-lib.common_biz.fiz_assert-117-通知成功
