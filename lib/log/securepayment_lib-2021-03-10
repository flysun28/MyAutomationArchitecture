2021-03-10 15:07:10,810-INFO-lib.common.session.dubbo.dubbo-51-dubbo invoke语句：invoke com.oppo.voucher.api.CouponBatchGrant.batchGrant({'couponName': 'anto_grant1615360030808', 'useableFromTime': '2020-01-01 00:00:00', 'useableEndTime': '2022-12-31 00:00:00', 'settleType': '1', 'bizNo': '2031', 'scopeId': '7104f7bc23e445daba913a5a96a264ac', 'blackScopeId': '', 'subScopeId': '', 'couponType': 'KB_COUPON', 'couponDiscountType': 'XIAOFEI', 'conditionAmount': '0', 'cutAmount': '10', 'ratio': 0, 'maxCutAmount': '0', 'applyCount': 1, 'ssoidList': ['2076075925'], 'batchId': ''})
2021-03-10 15:07:10,834-DEBUG-lib.common.session.dubbo.dubbo-55-{"data":{"batchVouCreateResList":[{"ssoid":"2076075925","vouId":"64234622"}],"vouIdList":null,"batchId":"dee51251967d47b8a9ca3ea50c9b5aea"},"success":true,"errorDetail":"成功","resCode":"000000","resMsg":"成功"}

2021-03-10 15:07:10,834-INFO-lib.common.session.dubbo.dubbo-57-dubbo回参：{'data': {'batchVouCreateResList': [{'ssoid': '2076075925', 'vouId': '64234622'}], 'vouIdList': None, 'batchId': 'dee51251967d47b8a9ca3ea50c9b5aea'}, 'success': True, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功'}
2021-03-10 15:07:10,853-INFO-lib.common.session.dubbo.dubbo-51-dubbo invoke语句：invoke com.oppo.voucher.api.admin.CouponBatchInfoAdmin.operate({'couponBatchId': 'dee51251967d47b8a9ca3ea50c9b5aea', 'batchOperateType': 'PASS'})
2021-03-10 15:07:15,896-DEBUG-lib.common.session.dubbo.dubbo-55-{"data":{},"success":true,"errorDetail":"成功","resCode":"000000","resMsg":"成功"}

2021-03-10 15:07:15,896-INFO-lib.common.session.dubbo.dubbo-57-dubbo回参：{'data': {}, 'success': True, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功'}
2021-03-10 15:07:27,536-INFO-lib.common.session.dubbo.dubbo-51-dubbo invoke语句：invoke com.oppo.voucher.api.CouponBatchGrant.batchGrant({'couponName': 'anto_grant1615360047532', 'useableFromTime': '2020-01-01 00:00:00', 'useableEndTime': '2022-12-31 00:00:00', 'settleType': '1', 'bizNo': '2031', 'scopeId': '7104f7bc23e445daba913a5a96a264ac', 'blackScopeId': '', 'subScopeId': '', 'couponType': 'KB_COUPON', 'couponDiscountType': 'XIAOFEI', 'conditionAmount': '0', 'cutAmount': '10', 'ratio': 0, 'maxCutAmount': '0', 'applyCount': 1, 'ssoidList': ['2076075925'], 'batchId': ''})
2021-03-10 15:07:27,550-DEBUG-lib.common.session.dubbo.dubbo-55-{"data":{"batchVouCreateResList":[{"ssoid":"2076075925","vouId":"64234623"}],"vouIdList":null,"batchId":"e9311cd187064a54ba94b1a397f75646"},"success":true,"errorDetail":"成功","resCode":"000000","resMsg":"成功"}

2021-03-10 15:07:27,550-INFO-lib.common.session.dubbo.dubbo-57-dubbo回参：{'data': {'batchVouCreateResList': [{'ssoid': '2076075925', 'vouId': '64234623'}], 'vouIdList': None, 'batchId': 'e9311cd187064a54ba94b1a397f75646'}, 'success': True, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功'}
2021-03-10 15:07:27,568-INFO-lib.common.session.dubbo.dubbo-51-dubbo invoke语句：invoke com.oppo.voucher.api.admin.CouponBatchInfoAdmin.operate({'couponBatchId': 'e9311cd187064a54ba94b1a397f75646', 'batchOperateType': 'PASS'})
2021-03-10 15:07:32,597-DEBUG-lib.common.session.dubbo.dubbo-55-{"data":{},"success":true,"errorDetail":"成功","resCode":"000000","resMsg":"成功"}

2021-03-10 15:07:32,597-INFO-lib.common.session.dubbo.dubbo-57-dubbo回参：{'data': {}, 'success': True, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功'}
2021-03-10 15:07:50,128-INFO-lib.common.session.dubbo.dubbo-51-dubbo invoke语句：invoke com.oppo.voucher.api.CouponBatchGrant.batchGrant({'couponName': 'anto_grant1615360070126', 'useableFromTime': '2020-01-01 00:00:00', 'useableEndTime': '2022-12-31 00:00:00', 'settleType': '1', 'bizNo': '2031', 'scopeId': '7104f7bc23e445daba913a5a96a264ac', 'blackScopeId': '', 'subScopeId': '', 'couponType': 'KB_COUPON', 'couponDiscountType': 'XIAOFEI', 'conditionAmount': '0', 'cutAmount': '10', 'ratio': 0, 'maxCutAmount': '0', 'applyCount': 1, 'ssoidList': ['2076075925'], 'batchId': ''})
2021-03-10 15:07:50,158-DEBUG-lib.common.session.dubbo.dubbo-55-{"data":{"batchVouCreateResList":[{"ssoid":"2076075925","vouId":"62299797"}],"vouIdList":null,"batchId":"aac57533c2684cf9944e87431b5aa703"},"success":true,"errorDetail":"成功","resCode":"000000","resMsg":"成功"}

2021-03-10 15:07:50,159-INFO-lib.common.session.dubbo.dubbo-57-dubbo回参：{'data': {'batchVouCreateResList': [{'ssoid': '2076075925', 'vouId': '62299797'}], 'vouIdList': None, 'batchId': 'aac57533c2684cf9944e87431b5aa703'}, 'success': True, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功'}
2021-03-10 15:07:50,176-INFO-lib.common.session.dubbo.dubbo-51-dubbo invoke语句：invoke com.oppo.voucher.api.admin.CouponBatchInfoAdmin.operate({'couponBatchId': 'aac57533c2684cf9944e87431b5aa703', 'batchOperateType': 'PASS'})
2021-03-10 15:07:55,223-DEBUG-lib.common.session.dubbo.dubbo-55-{"data":{},"success":true,"errorDetail":"成功","resCode":"000000","resMsg":"成功"}

2021-03-10 15:07:55,223-INFO-lib.common.session.dubbo.dubbo-57-dubbo回参：{'data': {}, 'success': True, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功'}
2021-03-10 15:24:29,007-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.52.44.235', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-03-10 15:24:29,248-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-03-10 15:24:29,292-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]成功
2021-03-10 15:24:29,311-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]
2021-03-10 15:24:29,540-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]成功
2021-03-10 15:24:29,540-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]
2021-03-10 15:24:29,562-INFO-lib.common.db_operation.mysql_operation-118-成功连接到测试专用环境-MYSQL：{'host': '10.52.54.122', 'user': 'opay', 'pwd': '_UI7xHubrhTPIP1J_T4so7SU7ATCrUzm7cAh6TdBLLHWUSQUQqD8p45xVQzV3Czi', 'port': '33066'}
2021-03-10 15:24:29,562-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `test_account`.`account_test_env`
2021-03-10 15:24:29,716-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=0
2021-03-10 15:24:29,722-INFO-lib.common_biz.find_merchant_info-28-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601'}
2021-03-10 15:24:29,723-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-03-10 15:24:29,729-INFO-lib.common_biz.find_key-109-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-03-10 15:24:29,729-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no, plan_id FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=1
2021-03-10 15:24:29,732-INFO-lib.common_biz.find_merchant_info-41-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601', 'plan_id': '120877'}
2021-03-10 15:24:29,733-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-03-10 15:24:29,736-INFO-lib.common_biz.find_key-109-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-03-10 15:24:30,502-INFO-lib.common.db_operation.mysql_operation-59-执行sql语句：update `db_order_0`.`autorenew_sign_info` set status = "UNSIGN" where ssoid = "2076075925" and partner_code = "2031" and renew_product_code = "20310001" and pay_type = "wxpay"
2021-03-10 15:24:30,514-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 15:24:30,515-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "6.0"
appKey: "1234"
count: 10000
order: "50647472054714"
ip: "121.13.218.236"
type: "1"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "c6Uw5iNIjZvOqFzl9Mb4RpayTYfGstQB"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 15:24:30,660-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "a8ec1649dd074f3f9c3f8d7bcd60f830"
s_p: "WUtWNHBQTXBjWWhjTnd6QnpqTUJ1NzNlcEZXcmZuZ0xOaGdBMThUVVZrSFZmVVVlaXJoODl0clNnc1Z4NkJHZVJoTFk3a2VHR0t5SlhaYTdmaUQ1SE5Pd2NEdnJldWppcjBqNGJXdEpqVno4YVRmWHh5d2dIQk1LOEVwSnUyaGJ4OGwyMzFtS3lLUnd4ZTVWRDJMaEZ5bmJwZDVuc2dXYVFDZUlMTmplUzdaMlpyT29SZElGbnlKWnN0QXExRzJiWlNHWXNLMjM2MlExM1BrNXhzSUxxd01UNWRTb2FJREZBd3pMQXJ0T3l1dHZranF3NkhrVDJZRUNXc0tqempxeEJVeXBQMFJEU3F0NTczV0tCVEhDb1FxTkM3cko4bjdXbENpNndqOFh5Rncybk5KY0NSRGVwTUQ1ME9JZUJvUmswUUUwVUROTzJ5bGlSMUc5b1RRN2lBM2EwN21MaFZaQU5pMHpINENPTVRXR3BGN20yS1ZzYUJaelVOeVNnY0RPbHFabGx5VktyRTh4eTRSTG1yQlBHS2h4Mm12bGVMSk1ZWW1TMEQzMmVBdGRvNXBaTW5rZFJEeU53T1dXRjRUTWxHSXBaSVFEQ1JvRXh0dkF4bUNGdXphMmF4U3h2N0tmQUszeU4zVFJWWEdFa1FsMGlJd04wckFPVndoaXM5MUQ2M1VuV3NyQ2ZLb0JscUhMUE1GcmZpY01zQ09sbmoxMU9uWGQwcTR4eXRWSzdoWkRlVlVxMGNLakJlSm5JaDVmVWNUaUU3OEdMVHNMMTJhemlnMXdMSmlNRVlYU045ckZneGZjOFQzU2RYUTZyQXRINlU5bkdqcVVKRk80M1hKbWZCRW5ldzlSZDF1dlgyY3daTklOOEZrVktBZEd1SDlLY2E1Ylk3bzBzaVhoZmkzRlI0QUlxVjhPSE5NeUtVZ2NoUHVpMnAwS2o3d1N5a0tFRThFVVNWTWd4Rjh6dnRuQzFicWlnNHBEbmlvOVptZWs1aGUycTBzTzNYUk56dk1hakhaVXprdmFYNlNOd1BOZlpFa0lqOHlCRnJlNjJpODQ="
m_p: "Oa2xLuI7mV5Dnl0aa2575G4r4sS7Y7fUWKv6ax94H41i4J65R2X1v5vJDa5b8754"
e_t: "1615469074377"
balanceResult {
  baseresult {
    code: "0000"
    msg: ""
  }
  balance: "0"
  vouBalance: "0"
  vouNum: 0
}
userinfo {
  username: "156******06"
}

2021-03-10 15:24:30,664-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 15:24:30,664-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "12.0"
  t_p: "a8ec1649dd074f3f9c3f8d7bcd60f830"
  imei: ""
  model: "PCRM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "r0j4bWtJ"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: ""
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
transType: "SIGNANDPAY"
renewProductCode: "20310001"
signPartnerOrder: "HqzcMUCBt7va89lLQERYgpoZ50kAPnNd"
type: "wxpay"
amount: "0.01"
oriAmount: "0.01"
ip: "58.252.5.75"
sign: "lrl9BufXnfCC9cqVk6CS3a4067leKhQO81AMLaPopIIyYL22urnG2zBkj9cmfm8444TdHLlzAefX2jAhgzIEI+tzC1AHiXlEzqhoRXPxoJoV0zuIkSnJSdnY0Moqk8A+T9WTo7+2/OUSt1eDPQknDVoF1ZWbzJuJ42hz2l1vqK1jcG6Nm4xHbKxs9v3qIEIO4IMy+aQ0rsJnU2TGr+uYLKNWZamq5GCvSKF2ZSrw/Vo6CFJX8Z6/tuxV/RxSDDAFqqEC9wX4v7IVWgbYFf7ao8+r3JKYx/yWY98aLtV3a4aHqjPcPv4+EZQYGyIWUMdCALObbuCGuHe4ZoB/tnSp4tLEi/4FxaTGK++k682TJRAABaQI9Fku2uiGOTOxGZ9pY6vNkNbJKnu+qH3q/LHAsObUxFsSSJ/L6ZRwYNHpnf2lCOAwJZWaSDyq9tHnufw5soGiV98X270Jan16e5CMyacO/79rjfD0UW1XOoewswCQ8x9YlpC8MuTIeR2OYaoi"
signAgreementNotifyUrl: "http://pay.pay-test.wanyol.com/notify/receiver"
appId: ""
isNeedExpend: "0"
basepay {
  channelId: ""
  notifyurl: "http://pay.pay-test.wanyol.com/notify/receiver"
  productName: "SIGN_PAY"
  productDesc: "SIGN_PAY"
  partnercode: "2031"
  appversion: "260"
  currencyName: "\344\272\272\346\260\221\345\270\201"
  rate: 1.0
  partnerorder: "HqzcMUCBt7va89lLQERYgpoZ50kAPnNd"
}
screenInfo: "FULL"

2021-03-10 15:24:31,102-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "{\"appid\":\"wx93eea96ecc33f168\",\"noncestr\":\"69e250634d134e61902114f8cffbc706\",\"packageNm\":\"Sign=WXPay\",\"partnerid\":\"1259634601\",\"prepayid\":\"wx10152434764843bb62237c4d5dafa00000\",\"sign\":\"046FBDEC3CC5605FC87223975EDF0718\",\"timestamp\":\"1615361074\"}"
}
payrequestid: "RM202103101524342076075925017432"
transType: "SIGNANDPAY"
signType: "APP"

2021-03-10 15:24:31,103-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT contract_code from `db_order_0`.`autorenew_sign_record` where pay_req_id = "RM202103101524342076075925017432"
2021-03-10 15:24:31,107-INFO-wxpay-scarlet-97-回调参数：<xml><change_type>ADD</change_type>
<contract_code>SN202103101524345134700160217220</contract_code>
<contract_expired_time>2022-03-10 15:24:31</contract_expired_time>
<contract_id>1371395748</contract_id>
<mch_id>1259634601</mch_id>
<openid>oCg6Xt8NvRi7jGuap_5B6XdY4oYk</openid>
<operate_time>2021-03-10 15:24:31</operate_time>
<plan_id>120877</plan_id>
<request_serial>696892554084700484</request_serial>
<result_code>SUCCESS</result_code>
<return_code>SUCCESS</return_code>
<return_msg>OK</return_msg>
<sign>2679A4B38360476BE17D18FACDE6D7BB</sign>
</xml>
2021-03-10 15:24:32,446-INFO-wxpay-scarlet-101-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-03-10 15:24:32,446-INFO-wxpay-scarlet-103-回调解析成功
2021-03-10 15:24:32,446-INFO-wxpay-scarlet-52-回调参数：<xml><transaction_id><![CDATA[2939238930652812317213392015]]></transaction_id>
<nonce_str><![CDATA[LjEtcSgVTsDbeXPRq7MUOFW2NkiK34r5]]></nonce_str>
<bank_type><![CDATA[OTHERS]]></bank_type>
<openid><![CDATA[oCg6Xt8NvRi7jGuap_5B6XdY4oYk]]></openid>
<sign><![CDATA[54259A9A697B158EFEFA639EC5F588DB]]></sign>
<fee_type><![CDATA[CNY]]></fee_type>
<mch_id><![CDATA[1259634601]]></mch_id>
<cash_fee><![CDATA[1]]></cash_fee>
<out_trade_no><![CDATA[RM202103101524342076075925017432]]></out_trade_no>
<appid><![CDATA[wx93eea96ecc33f168]]></appid>
<total_fee>1</total_fee>
<trade_type><![CDATA[APP]]></trade_type>
<result_code><![CDATA[SUCCESS]]></result_code>
<attach><![CDATA[TEST]]></attach>
<time_end><![CDATA[20210310152432]]></time_end>
<is_subscribe><![CDATA[N]]></is_subscribe>
<return_code><![CDATA[SUCCESS]]></return_code>
</xml>
2021-03-10 15:24:32,550-INFO-wxpay-scarlet-56-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-03-10 15:24:32,550-INFO-wxpay-scarlet-58-回调解析成功
2021-03-10 15:24:32,560-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 15:24:32,560-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "33701859846384"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "13Q5ga7oWY8kd0wyfBe4t9ZxjHSXFrVN"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 15:24:32,678-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "079e8e3a392349209c7a87045ecbf6ed"
s_p: "SVJnNjBYdlBnRTRJUThaVzVIN2p6dnFSeGp5bGJvaHUxWWZyTHlyaVFuTEJtZGR5eG9jdGtkZmhYRXBmclBJWEdPRXUwMXlBQW10cnNEOWZyTGNXdmV2WnI5bzNRMDBDeVpxcDdNZUIzU29pYUY4WUhLeGs0cThjWktnTjdVMHB5UlJkWlJQOW80VnJoMWhVOFNQUkRNOEROd0ZBaTJWc2wyZ3dLWjg3UWxrWXZBQ3YzV3BKT2ZxNTRaWDVYM1NyS1NzcElHb0YxQmR0aTJsTFZVNkFOOW5ZeEVQM3N3dk5sdDBRNzFGSEc5akRzTDVScGo0M2NuS3RUNFJFYWRrNnRjdmQzdEJFOXhEUTBMMTlBU3p0cmZIZjdIaWFicEp1V1R1SjZGQnBiTnRZMnN0djNIOVVNVGNzZ0w2MXJKM2VWS3JDcVh1bHlHajI3SlZKSEF6MmhIMmp0MWg4ZWdaYnNCaXVsY3RNVk1JTTlZR0pkWThwdVBLNHlQZ2lVRGtKZzZmNW5XeWZKTXNHNDIxTGVTMEZMNFlxeEZNOHM4WWg2bVl3MGRuSGI3N3Qzc1laZEdyZkFReHpUYkI2RWU3a3g5WFR3SHZVMjVpWmdIcXFTSHFCaGFncEJUVFFwNjFoNkpBaVVaNTU5QVkwRTYwbHdQZWxNYm1zZTFwTzY1d3ZZeWFjRlhKVFpQUjNLdGtMWk01UzZ1eTV3ZmZhNUFFbTQ4QjVISGhucnlIOENkUHZlZDFDdFdKZjBzRFg1N3Nzclc5VmRPdmhFamxIYk5iakJjRVk4anNIbkNTcEhablV5QVBvdmJqeEYwZndlMWNIUkZkVWp5V0hFalBRMVV2Q2lWVGRSMkgwREZtdjFPaUZVR0hncEdOWmZJY3JkMkNLOHNOYnZQR2FwRURER21qYmFMVXFnc25zSmFqRFpyNWVnRXY1bUhWRjBFUFZWMmx4dUZRMjZIVzZzUDlzSEpiam1CYlA2R3Mxa0JUbk1LdkRsSDA1bDdkQjVDcXBEWFJnUHkzNVVNbklFUlFWd1NDUUVUWEdSYlAzTkJZeDFaejg="
m_p: "hSa2fIxoBD4U8h592bLh1c90LvExF8d0gvf8i9Z9E9bow1V4StwSP5ALMzkM5EZI"
e_t: "1615469076334"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0.02"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 1001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199706
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199705
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199704
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199703
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199702
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199692
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099683
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099682
    type: 2
    minCousume: 1300
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 11
}
userinfo {
  username: "156******06"
}

2021-03-10 15:24:32,678-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 15:24:32,678-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "5.0"
  t_p: "079e8e3a392349209c7a87045ecbf6ed"
  imei: ""
  model: "PBDM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "yRRdZRP9"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
payrequestid: "RM202103101524342076075925017432"
version: "260"
queryType: "PAY"

2021-03-10 15:24:32,740-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "2002"
  msg: ""
}
successStatus: "1086"
origAmount: "0.01"

2021-03-10 15:24:32,741-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `db_order_4`.`order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "RM202103101524342076075925017432"
2021-03-10 15:24:32,756-INFO-lib.common_biz.fiz_assert-34-订单详情：{'id': 15332, 'pay_req_id': 'RM202103101524342076075925017432', 'notify_id': '2939238930652812317213392015', 'partner_order': 'HqzcMUCBt7va89lLQERYgpoZ50kAPnNd', 'amount': 1, 'refund': 0, 'contents': 'SIGN_PAY', 'products_name': 'SIGN_PAY', 'counts': 1, 'ssoid': '2076075925', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': '1259634601', 'ip': '58.252.5.72', 'mac': '', 'model': 'PCRM00', 'app_package': 'com.example.pay_demo', 'app_ver': '260', 'sdk_ver': '12.0', 'partner_code': '2031', 'notify_url': 'http://pay.pay-test.wanyol.com/notify/receiver', 'status': 'OK', 'channel_id': '', 'channel_type': 'NATIVE', 'pay_type': 'wxpay', 'direct_pay': 'ZHICHONG', 'game_type': 'WANGYOU', 'present_amount': 0, 'original_amount': 1, 'discount_info': '', 'extra': None, 'remark': None, 'request_time': datetime.datetime(2021, 3, 10, 15, 24, 36), 'success_time': datetime.datetime(2021, 3, 10, 15, 24, 32), 'modify_time': datetime.datetime(2021, 3, 10, 15, 24, 32), 'trade_type': 'CZ', 'kebi_spent': 0, 'voucher_amount': 0, 'voucher_info': None, 'country_code': 'CN', 'currency': 'CNY', 'openid': None, 'brand_type': 'OPPO', 'mobile_os_ver': None, 'platform': None, 'screen_info': None, 'voucher_id': None, 'factor': None, 'paid_amount': None, 'paid_usd': None, 'combine_order': 'N', 'voucher_status': None, 'kebi_status': None, 'channel_status': None}
2021-03-10 15:24:32,756-INFO-lib.common_biz.fiz_assert-45-订单表信息记录正确
2021-03-10 15:24:32,757-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `pay_tradeorder_4`.`trade_order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "RM202103101524342076075925017432"
2021-03-10 15:24:32,763-INFO-lib.common_biz.fiz_assert-55-trade订单详情：{'id': 8018, 'pay_req_id': 'RM202103101524342076075925017432', 'partner_order': 'HqzcMUCBt7va89lLQERYgpoZ50kAPnNd', 'partner_code': '2031', 'products_name': 'SIGN_PAY', 'ssoid': '2076075925', 'origin_amount': 1, 'amount': 1, 'kb_amount': 0, 'voucher_amount': 0, 'present_amount': 0, 'refund': 0, 'country_code': 'CN', 'currency': 'CNY', 'pay_type': 'wxpay', 'channel_id': '', 'channel_type': 'NATIVE', 'direct_pay': 'ZHICHONG', 'trade_type': 'CZ', 'combine_type': 'PRIMARY', 'status': 'OK', 'notify_url': 'http://pay.pay-test.wanyol.com/notify/receiver', 'attach': '', 'extra_info': '', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': '1259634601', 'ip': '58.252.5.72', 'mac': '', 'openid': None, 'model': 'PCRM00', 'brand_type': 'OPPO', 'app_package': 'com.example.pay_demo', 'app_ver': '260', 'sdk_ver': '12.0', 'mobile_os_ver': '', 'platform': '', 'screen_info': '', 'remark': None, 'request_time': datetime.datetime(2021, 3, 10, 15, 24, 34), 'success_time': None, 'modify_time': datetime.datetime(2021, 3, 10, 15, 24, 36)}
2021-03-10 15:24:32,763-INFO-lib.common_biz.fiz_assert-63-trade订单表信息记录正确
2021-03-10 15:24:32,763-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select status from  `db_order_0`.`autorenew_sign_info` where ssoid = "2076075925" and partner_code = "2031" and renew_product_code = "20310001" and pay_type = "wxpay"
2021-03-10 15:24:32,766-INFO-lib.common_biz.fiz_assert-161-签约信息表记录正确
2021-03-10 15:24:32,767-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select status from `db_order_0`.`autorenew_sign_record` where pay_req_id = "RM202103101524342076075925017432"
2021-03-10 15:24:32,770-INFO-lib.common_biz.fiz_assert-176-签约记录表记录正确
2021-03-10 15:24:32,771-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select * from `db_pay_notify_1`.`notify_info` where request_id = "HqzcMUCBt7va89lLQERYgpoZ50kAPnNd"
2021-03-10 15:24:32,775-INFO-lib.common_biz.fiz_assert-135-通知表信息详情：{'id': 151875, 'app_id': 10003, 'app_name': 'opaycenter(测试环境)', 'app_sub_id': '2031', 'notify_id': '9b6a138adbd74c979b1bc3629b74a00f', 'request_id': 'HqzcMUCBt7va89lLQERYgpoZ50kAPnNd', 'notify_protocol': 'HTTP', 'notity_detail': '{"appId":10003,"appSubId":"2031","httpReqType":"POST","reqContent":"{\\"ssoid\\":\\"2076075925\\",\\"country\\":\\"CN\\",\\"partnerOrder\\":\\"HqzcMUCBt7va89lLQERYgpoZ50kAPnNd\\",\\"notifyType\\":\\"SIGN\\",\\"payType\\":\\"wxpay\\",\\"agreementNo\\":\\"1371395748\\",\\"sign\\":\\"cedL5InV5R7ap7nnOscTXK6TAeaNiJ9Irpg8y43xZ/C0qBz4ku07OfJHys+K575HDx6BmAWZoNCrUtq/PiH+6U93G6BwrEu2arVVTLtZFHMsjCOvD0GgFv3djyOHZMJUeTdYnEl6OWq9vhw4o/W70jQKm3p5mPuO9RZKVp/gD2I=\\",\\"notifyId\\":\\"IM20210310152436954\\",\\"currency\\":\\"CNY\\",\\"partnerId\\":\\"2031\\",\\"renewProductCode\\":\\"20310001\\",\\"status\\":\\"OK\\"}","reqUrl":"http://pay.pay-test.wanyol.com/notify/receiver","requestId":"HqzcMUCBt7va89lLQERYgpoZ50kAPnNd","signType":"MD5","successResult":"OK","timeStamp":1615361076154,"version":"1.0"}', 'notify_count': 1, 'notify_response': 'OK', 'notify_handler': 'httpNotifyJsonHandler', 'fail_strategy': 'failStrategyHashImpl', 'status': 'SUCCESS', 'success_time': datetime.datetime(2021, 3, 10, 15, 24, 36), 'insert_time': datetime.datetime(2021, 3, 10, 15, 24, 36), 'update_time': datetime.datetime(2021, 3, 10, 15, 24, 36), 'extra_json': None, 'remark': None}
2021-03-10 15:24:32,775-INFO-lib.common_biz.fiz_assert-141-通知成功
2021-03-10 15:29:10,775-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.52.44.235', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-03-10 15:29:11,028-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-03-10 15:29:11,102-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]成功
2021-03-10 15:29:11,102-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]
2021-03-10 15:29:11,354-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]成功
2021-03-10 15:29:11,354-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]
2021-03-10 15:29:11,376-INFO-lib.common.db_operation.mysql_operation-118-成功连接到测试专用环境-MYSQL：{'host': '10.52.54.122', 'user': 'opay', 'pwd': '_UI7xHubrhTPIP1J_T4so7SU7ATCrUzm7cAh6TdBLLHWUSQUQqD8p45xVQzV3Czi', 'port': '33066'}
2021-03-10 15:29:11,377-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `test_account`.`account_test_env`
2021-03-10 15:29:11,388-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=0
2021-03-10 15:29:11,392-INFO-lib.common_biz.find_merchant_info-28-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601'}
2021-03-10 15:29:11,392-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-03-10 15:29:11,395-INFO-lib.common_biz.find_key-109-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-03-10 15:29:11,396-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no, plan_id FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=1
2021-03-10 15:29:11,399-INFO-lib.common_biz.find_merchant_info-41-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601', 'plan_id': '120877'}
2021-03-10 15:29:11,400-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-03-10 15:29:11,403-INFO-lib.common_biz.find_key-109-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-03-10 15:29:11,815-INFO-lib.common.db_operation.mysql_operation-59-执行sql语句：update `db_order_0`.`autorenew_sign_info` set status = "UNSIGN" where ssoid = "2076075925" and partner_code = "2031" and renew_product_code = "20310001" and pay_type = "wxpay"
2021-03-10 15:29:11,828-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 15:29:11,828-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "6.0"
appKey: "1234"
count: 10000
order: "43267264093921"
ip: "121.13.218.236"
type: "1"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "AGQ2hOZiSRY4uXBjzyoEN9gtaWFTCLdp"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 15:29:11,891-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "a571e79db903466f8a102475e16aed8a"
s_p: "MDRzbWhXeEhZdTJUUW1qUVo3SGZocDBoMFVnUnBYT3RJdFFNNklBNjhsUHBQTnliZm9jWHR5RXFXMEtUd0oxRGtGa3Bkd1NKbk9zbHFNUGRJZUJYOUJjVFE4SURlRzNCRlhuTXhrQ2ZqTThJREJ2S01FbE9NQ1hDR05TdFdyN0NiTXdFOVlzaU9GcDk4YThGN3loMGpaQmhvNkNMQURGcUVxRzkwdTRTT2lFR29TV2dVZkJnaFJtVTBZZ3NhNjN0b2RvSTg1aVFaeXlWOXpVNjFRcDFwNmUwUXI3Qk5ibWNBd3RHYlJvUXVrdGZMSmdwUlNXYjd5bWFnNjNWRUh4MWlKNGNFMFNJd1pPeHo4azVGUTRqSUpHejgwTDcwbW8yeFdLVGtJdmpyN1ZJeW1iWm5VQWdTQmFWYmNVcHhKbkFjdDE5YUZQejQxQ1ROV2I1QXpSSUNjTTg1M21NVXIwbkZaaVdSMlE0TjBSa2ZzTUZ2cTlBMjU2RWJsWm8wbzBSQ01LMXpsNTNYWElTa1cwSFVWZnJyRzZ1Nkg0SzRHa0hueFA2OEVrSTBwbHlJSTVaTmwzaE90bEEyMms1bVhDeHE5UHA1eDVWVDR6bW83VnVreWFGOFlMbVd6UG5kbkVsQjFWd3JHMG4yQkg3a1JGRkxacm9pSjJwM3JjRjdCb3hpeGl1QllsNFpaUk93YmZHTUlRMEw3RDNSV1cwcDdIU3IyQlFkbEdva25EUmJHSFh6eFZlT1dtQTRSUkJjNVk1dU9Zek8xaTk5MHJPRjNJaW5UVGhHU0IxV05WT3F4aG44RlJ6QUtEQWU4SDZKbjJ4VGdaSWcxNUNaUEphRGVsQ1d4dkhXY2hickk5N1I2TEZmN0hDclZmMURvS2F5U2dmMEtCb2FqNXNLOVVodjdMdGlzazVlUGhUdzRtcXIyTTVqMWJPSjFWQVRXdUVtYTBRMVVaVkF4SG9EVzg3d2JDVzB3VElZWHRUaThLdTY3U29pOHlWUWlxazlPZWVJQzZHRHNvUm1iQW5HVko2QmFrSmdnRGMwckh6WUdhV1B5VHA="
m_p: "97mc3uAitxeLbS381d0nT9rigpo5OpF86yUbdb2xWk73b1y3wf5H31dTW87W8wm6"
e_t: "1615469355607"
balanceResult {
  baseresult {
    code: "0000"
    msg: ""
  }
  balance: "0"
  vouBalance: "0"
  vouNum: 0
}
userinfo {
  username: "156******06"
}

2021-03-10 15:29:11,894-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 15:29:11,894-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "12.0"
  t_p: "a571e79db903466f8a102475e16aed8a"
  imei: ""
  model: "PCRM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "OFp98a8F"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: ""
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
transType: "SIGNANDPAY"
renewProductCode: "20310001"
signPartnerOrder: "85mINflevxdt2ZyPOSYnT7VJLgkRAc1K"
type: "wxpay"
amount: "0.01"
oriAmount: "0.01"
ip: "58.252.5.75"
sign: "eDxy7V2MUaMy76rBJGokO1OM1jw7f1vcRnwMKBG+2dWPVsIP0fxwulj7kB1S/rq/lBODFVcsH0LL/U8TtZWSBJczMkSqgSdB+fN4I9xijXYfwPeZOk8TCLe2po40KSTmuB7tBmQf+hqewD3zD7a+I0Ym6YPuKDG590XM54bHzEIS7LAAfF8GhBgsoE0LLx9IBmR1+3O/Vwwb/HZ3EsBE2LHcc7Tk5MC15glzVSf3KCg+PcswytEKPcpEpSyp3puD4OvJqUVlHHcb6gSvZj8p1WDuaRX4lsuRZ6MuuPMjwFyx/lcG8cOO3VGfWHu80qF+dTdaUN75ZQGGl7Jzhv011Vyxqsj8cOSMl3N7DN6M5BO+PhmzP3DCkR4YTlwnXwysi/AH4o8yfzB6ze725YpI3uuTRXt3qUgnYy6qjMJhL8p2t5/BsdYzhh3alZUJcScMbUsRm+EjddjWNpYKmYIZFH9x937WohuUAQqmWy5tqnEn2jPvUWgQOUwSPr0lSibK"
signAgreementNotifyUrl: "http://pay.pay-test.wanyol.com/notify/receiver"
appId: ""
isNeedExpend: "0"
basepay {
  channelId: ""
  notifyurl: "http://pay.pay-test.wanyol.com/notify/receiver"
  productName: "SIGN_PAY"
  productDesc: "SIGN_PAY"
  partnercode: "2031"
  appversion: "260"
  currencyName: "\344\272\272\346\260\221\345\270\201"
  rate: 1.0
  partnerorder: "85mINflevxdt2ZyPOSYnT7VJLgkRAc1K"
}
screenInfo: "FULL"

2021-03-10 15:29:12,294-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "{\"appid\":\"wx93eea96ecc33f168\",\"noncestr\":\"ac686e24585b49afb90abc8290368a26\",\"packageNm\":\"Sign=WXPay\",\"partnerid\":\"1259634601\",\"prepayid\":\"wx1015291595567168db2283afb6d8830000\",\"sign\":\"4FD0FB84CA0951414B07976C4203FB12\",\"timestamp\":\"1615361356\"}"
}
payrequestid: "RM202103101529152076075925436672"
transType: "SIGNANDPAY"
signType: "APP"

2021-03-10 15:29:12,295-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT contract_code from `db_order_0`.`autorenew_sign_record` where pay_req_id = "RM202103101529152076075925436672"
2021-03-10 15:29:12,298-INFO-wxpay-scarlet-97-回调参数：<xml><change_type>ADD</change_type>
<contract_code>SN202103101529158411682215821865</contract_code>
<contract_expired_time>2022-03-10 15:29:12</contract_expired_time>
<contract_id>2447817907</contract_id>
<mch_id>1259634601</mch_id>
<openid>oCg6Xt8NvRi7jGuap_5B6XdY4oYk</openid>
<operate_time>2021-03-10 15:29:12</operate_time>
<plan_id>120877</plan_id>
<request_serial>626984939568418785</request_serial>
<result_code>SUCCESS</result_code>
<return_code>SUCCESS</return_code>
<return_msg>OK</return_msg>
<sign>B6B3AD6F03717C79790DD6640EB6C119</sign>
</xml>
2021-03-10 15:29:12,499-INFO-wxpay-scarlet-101-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-03-10 15:29:12,499-INFO-wxpay-scarlet-103-回调解析成功
2021-03-10 15:29:12,499-INFO-wxpay-scarlet-52-回调参数：<xml><transaction_id><![CDATA[3456924442212924067607975364]]></transaction_id>
<nonce_str><![CDATA[PzRBCH7LqM4XK39tQEbsdApgi1FGNY2u]]></nonce_str>
<bank_type><![CDATA[OTHERS]]></bank_type>
<openid><![CDATA[oCg6Xt8NvRi7jGuap_5B6XdY4oYk]]></openid>
<sign><![CDATA[B5C69C13401BD3E00B88885DD706EDDA]]></sign>
<fee_type><![CDATA[CNY]]></fee_type>
<mch_id><![CDATA[1259634601]]></mch_id>
<cash_fee><![CDATA[1]]></cash_fee>
<out_trade_no><![CDATA[RM202103101529152076075925436672]]></out_trade_no>
<appid><![CDATA[wx93eea96ecc33f168]]></appid>
<total_fee>1</total_fee>
<trade_type><![CDATA[APP]]></trade_type>
<result_code><![CDATA[SUCCESS]]></result_code>
<attach><![CDATA[TEST]]></attach>
<time_end><![CDATA[20210310152912]]></time_end>
<is_subscribe><![CDATA[N]]></is_subscribe>
<return_code><![CDATA[SUCCESS]]></return_code>
</xml>
2021-03-10 15:29:12,584-INFO-wxpay-scarlet-56-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-03-10 15:29:12,585-INFO-wxpay-scarlet-58-回调解析成功
2021-03-10 15:29:12,595-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 15:29:12,595-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "18036423187606"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "xQ7DoObqmHEnsdp4UXzZGJ3ShalPNW1K"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 15:29:12,680-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "ca2b152390c749a1927eb904a7f66909"
s_p: "Q2VKUXhkSVJRbWVJblFZQTl4cTdITHIxY3FhUE1rTFZOWlB1VXlJbUJSaXlwQUtoeUtVdWd2SU1ydEpnNWp6TjgyNUI5YmFkQnpNQ01iY1BXV0JOYUJsTWZoNndSQk1xN1pLQTlKNE02S2RoRE5pd3NRdnZZUzh1SGJTTFhjZ3lFZHpYaTBBYW9KRFRrMkFHUGFIYVA3NGx5ajRYOWUzSU1KNU9paWVUQ1Z4UTc0cUM3YkJPMFp1c3J3amdIQlpyWVo1YlRZYnZBTWJLN3UyY3BrS2tNdkFOMnhjZ3lrR1NRVUtGN2NjWWYza0Z3U0l4bWJnZmFrUjdkc09aNXNPczR2RXV0Y0pPTThycDl5MERDdENESVNZaGdHbzNvT3JHbk9wam13cDAxNGpaRjdJUnBybHI1UmhnZTFucHBjVjlBc3M3N0U0WVRtNG5FRmllRWpVRFB3WnoyOG1aam9OUjRxbDdMNVZUbWFTVm9xUDRjMnllWVg2aDdHdmhKeVNzYkkyQWFldWVFNkNsUnhqVTVkazBIeEdFcDZSWHZGMlNYTldDR2ZtV3pHekQyQUpac2lYR1BpWmg4dm9ONWNFWUhrUGFBaVBpamUxME1mbmdyR2NkeXFhSlU5cWFrR1FBbUJtR1lYTEl1QUc2RmpRcWpDR0ZLc0pPdFgwUWVQd3I4VE9ZV2N3dnA3bGp4d3FXTkVrT0c3OXFaTFlYVG5ZdWczYVlMOFVXREQ1WGY2NlZkTkRybXFRSUxtR0xxcURxWU11RHp0UEtZdVJXSnRYM0h3Wnc4bzA4SHJiYThBNzRFMEd6WTNOT3NCdm1wQTFkV2lXWlJzU1g0bUFkektsbjA0ZlMwTENjMVpnMjRrMGFuMTdpQzdJVVJLd3laamhkc2Y2V0Juc3ZWS0t5VlFVa09XYUxUaWpiUVVVbHpkcEpXeEYxem9mczZGYTRnd0o2aUEwQ1c4eDcyWFRHWk81a3BkaTZGNEtTYkJvbzVmbndyWDJKNHBHY3JiTTlUT3hzUUZpRWQxeFVoN1Q2cDYwb0FVNDk3anVXMnpCVE16RWE="
m_p: "TJjPu04a183EO0g1FEnE1JzI9Q9gTvYf7x9Ah6E6564M6ml2CRqU4RBWk2k6LZeI"
e_t: "1615469356365"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0.02"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 1001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199706
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199705
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199704
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199703
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199702
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199692
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099683
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099682
    type: 2
    minCousume: 1300
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 11
}
userinfo {
  username: "156******06"
}

2021-03-10 15:29:12,680-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 15:29:12,680-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "5.0"
  t_p: "ca2b152390c749a1927eb904a7f66909"
  imei: ""
  model: "PBDM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "vvYS8uHb"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
payrequestid: "RM202103101529152076075925436672"
version: "260"
queryType: "PAY"

2021-03-10 15:29:12,726-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "2002"
  msg: ""
}
successStatus: "1086"
origAmount: "0.01"

2021-03-10 15:29:12,727-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `db_order_4`.`order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "RM202103101529152076075925436672"
2021-03-10 15:29:12,731-INFO-lib.common_biz.fiz_assert-34-订单详情：{'id': 15333, 'pay_req_id': 'RM202103101529152076075925436672', 'notify_id': '3456924442212924067607975364', 'partner_order': '85mINflevxdt2ZyPOSYnT7VJLgkRAc1K', 'amount': 1, 'refund': 0, 'contents': 'SIGN_PAY', 'products_name': 'SIGN_PAY', 'counts': 1, 'ssoid': '2076075925', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': '1259634601', 'ip': '58.252.5.72', 'mac': '', 'model': 'PCRM00', 'app_package': 'com.example.pay_demo', 'app_ver': '260', 'sdk_ver': '12.0', 'partner_code': '2031', 'notify_url': 'http://pay.pay-test.wanyol.com/notify/receiver', 'status': 'OK', 'channel_id': '', 'channel_type': 'NATIVE', 'pay_type': 'wxpay', 'direct_pay': 'ZHICHONG', 'game_type': 'WANGYOU', 'present_amount': 0, 'original_amount': 1, 'discount_info': '', 'extra': None, 'remark': None, 'request_time': datetime.datetime(2021, 3, 10, 15, 29, 16), 'success_time': datetime.datetime(2021, 3, 10, 15, 29, 12), 'modify_time': datetime.datetime(2021, 3, 10, 15, 29, 12), 'trade_type': 'CZ', 'kebi_spent': 0, 'voucher_amount': 0, 'voucher_info': None, 'country_code': 'CN', 'currency': 'CNY', 'openid': None, 'brand_type': 'OPPO', 'mobile_os_ver': None, 'platform': None, 'screen_info': None, 'voucher_id': None, 'factor': None, 'paid_amount': None, 'paid_usd': None, 'combine_order': 'N', 'voucher_status': None, 'kebi_status': None, 'channel_status': None}
2021-03-10 15:29:12,731-INFO-lib.common_biz.fiz_assert-45-订单表信息记录正确
2021-03-10 15:29:12,732-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `pay_tradeorder_4`.`trade_order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "RM202103101529152076075925436672"
2021-03-10 15:29:12,736-INFO-lib.common_biz.fiz_assert-55-trade订单详情：{'id': 8019, 'pay_req_id': 'RM202103101529152076075925436672', 'partner_order': '85mINflevxdt2ZyPOSYnT7VJLgkRAc1K', 'partner_code': '2031', 'products_name': 'SIGN_PAY', 'ssoid': '2076075925', 'origin_amount': 1, 'amount': 1, 'kb_amount': 0, 'voucher_amount': 0, 'present_amount': 0, 'refund': 0, 'country_code': 'CN', 'currency': 'CNY', 'pay_type': 'wxpay', 'channel_id': '', 'channel_type': 'NATIVE', 'direct_pay': 'ZHICHONG', 'trade_type': 'CZ', 'combine_type': 'PRIMARY', 'status': 'OK', 'notify_url': 'http://pay.pay-test.wanyol.com/notify/receiver', 'attach': '', 'extra_info': '', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': '1259634601', 'ip': '58.252.5.72', 'mac': '', 'openid': None, 'model': 'PCRM00', 'brand_type': 'OPPO', 'app_package': 'com.example.pay_demo', 'app_ver': '260', 'sdk_ver': '12.0', 'mobile_os_ver': '', 'platform': '', 'screen_info': '', 'remark': None, 'request_time': datetime.datetime(2021, 3, 10, 15, 29, 16), 'success_time': None, 'modify_time': datetime.datetime(2021, 3, 10, 15, 29, 16)}
2021-03-10 15:29:12,736-INFO-lib.common_biz.fiz_assert-63-trade订单表信息记录正确
2021-03-10 15:29:12,736-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select status from  `db_order_0`.`autorenew_sign_info` where ssoid = "2076075925" and partner_code = "2031" and renew_product_code = "20310001" and pay_type = "wxpay"
2021-03-10 15:29:12,739-INFO-lib.common_biz.fiz_assert-161-签约信息表记录正确
2021-03-10 15:29:12,740-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select status from `db_order_0`.`autorenew_sign_record` where pay_req_id = "RM202103101529152076075925436672"
2021-03-10 15:29:12,743-INFO-lib.common_biz.fiz_assert-176-签约记录表记录正确
2021-03-10 15:29:12,744-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select * from `db_pay_notify_1`.`notify_info` where request_id = "85mINflevxdt2ZyPOSYnT7VJLgkRAc1K"
2021-03-10 15:29:12,748-INFO-lib.common_biz.fiz_assert-135-通知表信息详情：{'id': 151878, 'app_id': 10003, 'app_name': 'opaycenter(测试环境)', 'app_sub_id': '2031', 'notify_id': '0c97345cb0764faea560bc67659ca52a', 'request_id': '85mINflevxdt2ZyPOSYnT7VJLgkRAc1K', 'notify_protocol': 'HTTP', 'notity_detail': '{"appId":10003,"appSubId":"2031","httpReqType":"POST","reqContent":"{\\"ssoid\\":\\"2076075925\\",\\"country\\":\\"CN\\",\\"partnerOrder\\":\\"85mINflevxdt2ZyPOSYnT7VJLgkRAc1K\\",\\"notifyType\\":\\"SIGN\\",\\"payType\\":\\"wxpay\\",\\"agreementNo\\":\\"2447817907\\",\\"sign\\":\\"FsG5mxIcvGz/eQfZ/+9cBWFveitjf5Iuf/VMch6Phg+dXezmcm9Hr+KC3QrbyLQCsxqcHNjaovgG2+GpzJlsBUysKskNoSqKi/G9CLPlZXGhjZCm9+Yy42Zt4BkLCRIxRmjFIQbAc9SZQvJdG+u0/TDOHUMjhmFGgHY0+vGIRqs=\\",\\"notifyId\\":\\"IM20210310152916339\\",\\"currency\\":\\"CNY\\",\\"partnerId\\":\\"2031\\",\\"renewProductCode\\":\\"20310001\\",\\"status\\":\\"OK\\"}","reqUrl":"http://pay.pay-test.wanyol.com/notify/receiver","requestId":"85mINflevxdt2ZyPOSYnT7VJLgkRAc1K","signType":"MD5","successResult":"OK","timeStamp":1615361356213,"version":"1.0"}', 'notify_count': 1, 'notify_response': 'OK', 'notify_handler': 'httpNotifyJsonHandler', 'fail_strategy': 'failStrategyHashImpl', 'status': 'SUCCESS', 'success_time': datetime.datetime(2021, 3, 10, 15, 29, 16), 'insert_time': datetime.datetime(2021, 3, 10, 15, 29, 16), 'update_time': datetime.datetime(2021, 3, 10, 15, 29, 16), 'extra_json': None, 'remark': None}
2021-03-10 15:29:12,748-INFO-lib.common_biz.fiz_assert-141-通知成功
2021-03-10 15:34:21,906-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.52.44.235', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-03-10 15:34:22,196-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-03-10 15:34:22,253-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]成功
2021-03-10 15:34:22,253-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]
2021-03-10 15:34:22,467-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]成功
2021-03-10 15:34:22,467-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]
2021-03-10 15:34:22,488-INFO-lib.common.db_operation.mysql_operation-118-成功连接到测试专用环境-MYSQL：{'host': '10.52.54.122', 'user': 'opay', 'pwd': '_UI7xHubrhTPIP1J_T4so7SU7ATCrUzm7cAh6TdBLLHWUSQUQqD8p45xVQzV3Czi', 'port': '33066'}
2021-03-10 15:34:22,489-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `test_account`.`account_test_env`
2021-03-10 15:34:22,502-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=0
2021-03-10 15:34:22,506-INFO-lib.common_biz.find_merchant_info-28-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601'}
2021-03-10 15:34:22,506-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-03-10 15:34:22,510-INFO-lib.common_biz.find_key-109-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-03-10 15:34:22,510-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no, plan_id FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=1
2021-03-10 15:34:22,513-INFO-lib.common_biz.find_merchant_info-41-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601', 'plan_id': '120877'}
2021-03-10 15:34:22,514-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-03-10 15:34:22,517-INFO-lib.common_biz.find_key-109-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-03-10 15:34:22,926-DEBUG-lib.common.session.http.protobuf-35-无需加入随机字节，标志位：1
2021-03-10 15:34:22,926-INFO-lib.common.session.http.protobuf-36-传入的参数：header {
  version: "16.0"
  token: ""
  model: "PAAM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "RvDf0ABC"
  sign: "CC955D1FC09386124482A6FCFD00E6BA"
  sdkVer: "220"
  appVerison: "260"
  ip: "0.0.0.0"
  openId: "E28C3DF751C14EFAB2D9893DC83058B6c7ab335d8d6d240bca10fdf35c0be85e"
  brandType: "OPPO"
  mobileos: "12"
  androidVersion: "28"
}
partnerOrder: "HF202103101534229970173469172728558845602750"
partnerId: "72724313"
country: "CN"
payType: "wxpay"
channel: "wxpay"
payAmount: "0.01"
currency: "CNY"
product {
  name: "NO_LOGIN_PAY"
  desc: "\350\257\235\350\264\271\345\205\205\345\200\274"
  count: "1"
  priceLocal: "1"
}
returnUrl: "finzpay://nearme.atlas.com"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/receiver"
partnerParams: ""
extendParams: ""
businessChannelId: ""
walletVersion: "0"
oppoucVersion: "80407"
screenInfo: "FULL"

2021-03-10 15:34:23,396-INFO-lib.common.session.http.protobuf-58-返回的参数isSuccess: true
code: "0000"
msg: "{\"appid\":\"wx4eb8c6906f493312\",\"noncestr\":\"9be8f940e1db4af1b0d8b74cbf504059\",\"packageNm\":\"Sign=WXPay\",\"partnerid\":\"1287273601\",\"prepayid\":\"wx101534270544777e73f796fc955a880000\",\"sign\":\"AF7C48C2C2E86762A3E4C2AC9BE114E9\",\"timestamp\":\"1615361667\"}"
data {
  payRequestId: "RM202103101534260V42QC503I471142"
  payUrl: "{\"appid\":\"wx4eb8c6906f493312\",\"noncestr\":\"9be8f940e1db4af1b0d8b74cbf504059\",\"packageNm\":\"Sign=WXPay\",\"partnerid\":\"1287273601\",\"prepayid\":\"wx101534270544777e73f796fc955a880000\",\"sign\":\"AF7C48C2C2E86762A3E4C2AC9BE114E9\",\"timestamp\":\"1615361667\"}"
  parameters: "0000"
}

2021-03-10 15:34:23,397-INFO-wxpay-scarlet-52-回调参数：<xml><transaction_id><![CDATA[5586854144359024452007918902]]></transaction_id>
<nonce_str><![CDATA[IkoNXMVvimDgn8YUL1fP0GF6Kc9qBx5t]]></nonce_str>
<bank_type><![CDATA[OTHERS]]></bank_type>
<openid><![CDATA[oCg6Xt8NvRi7jGuap_5B6XdY4oYk]]></openid>
<sign><![CDATA[0855EA2083FE868DBEBF04B1C0025E9D]]></sign>
<fee_type><![CDATA[CNY]]></fee_type>
<mch_id><![CDATA[1259634601]]></mch_id>
<cash_fee><![CDATA[1]]></cash_fee>
<out_trade_no><![CDATA[RM202103101534260V42QC503I471142]]></out_trade_no>
<appid><![CDATA[wx93eea96ecc33f168]]></appid>
<total_fee>1</total_fee>
<trade_type><![CDATA[APP]]></trade_type>
<result_code><![CDATA[SUCCESS]]></result_code>
<attach><![CDATA[TEST]]></attach>
<time_end><![CDATA[20210310153423]]></time_end>
<is_subscribe><![CDATA[N]]></is_subscribe>
<return_code><![CDATA[SUCCESS]]></return_code>
</xml>
2021-03-10 15:34:23,531-INFO-wxpay-scarlet-56-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-03-10 15:34:23,531-INFO-wxpay-scarlet-58-回调解析成功
2021-03-10 15:34:23,541-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 15:34:23,541-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "24898558718965"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "L5lJ7GUkztxpQabPVY21gEBNsfZ69vuO"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 15:34:23,623-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "0d908b0801214efc9f3ba891dc3a339f"
s_p: "ZG1Qc1NWSEVTa2lJVklLeGRaWHdYVDRsZGY5ODdiVFpUUjJ0ODk3TERralI0Nkl3eEZhM0JvTHVtZDNGa2taUmRiOEVBWHBNOWRYdU54czVXTHVicjBsSlh4UlJqRFhubHBndDhpbmlWZVVvbkpYcWE0Wk9kb0JXc0ExbmNUN0lmdUdOU2NOVnpTRU10a3NQN3VQbU1LbmdPQzVlcjhPTzFCVGZ0Z3BadmlQR0IwcmJTVmlaVUNaMldVam10Q3pSbHpoV2RyR2hXZjRxRlRYblcyZ216aXZ0VzFIUmx2cmozaGJCbERPdzNUQzZwWm4yYXgzVWk0cFpCRXVXM2xUWFdWVjVEd29Va0xuM1RLMDR0cU1OQm9xcXl5YVR5R0JuY2NlMkQ0M0I4RHNlOE1Yam55SnJDcW9sR1NYYkZqNEdCQzlhOHpjWUNRenZCTk5pdm10SVFLc1I2UFVVSncxeTB3MkNZUm9LeFlMOElucEtPRzF0WndsMnlHZ3dSYXBzRTZ4VHRBWGtBQUVYdnExR0VTRzlmQ1Nha1dseW1QSG4xQko1M3FnR0xWeEprWDJPRWhVeWJlQ3d2NmlSbm5sdGMweWVjYjZtWUVWcmhTMUt6bFJrakFKUFFwSFBPWkN2STQwbmJpUHBPMWx0MzhPeExHWDZyNlVwVWZjV0J2TzFtOExLSkVHNE91aVJvR0FNRkRnbG5DS1hPeG90ZWV6ZDVWSmZpaEhybFVzczBRM3Qwc0l0RlhUNnNEYkV0NUpVVjZXQlFhUmVrRWMxYXpyVVN3ZlN6QkdpMEVHQWxTZ1YyODZmTFBXNU5BYXNvNmJTQ05GcVRYVlRYTUVYdnhMdFZLT3JyanU4RnVxTmh0R3NIcUJ5QXpIZ1A4anRLNk9jeXZDTjNHdWgxZm9yZGthY1p6NVpMSWthMDFMUjJ3aWdMY1dTQlhjbmI4dVdnTkZueG5iWmwwWWg4YUpUaHllUnd0SkdaS0J0Y3F6aU1FUFFzZm9pQ1JCU2NJWkdaaEdIdVJDUkFiaExJRjNLcjc3cmthU0g4dFl5SDRkakxPbm8="
m_p: "OKSH2ioZ5nqeS4h1W474k521LMSJ2Zs8hUcuhjbEuRM9fWE7d0A2I313el353oD7"
e_t: "1615469667311"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0.02"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 1001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199706
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199705
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199704
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199703
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199702
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199692
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099683
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099682
    type: 2
    minCousume: 1300
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 11
}
userinfo {
  username: "156******06"
}

2021-03-10 15:34:23,623-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 15:34:23,623-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "5.0"
  t_p: "0d908b0801214efc9f3ba891dc3a339f"
  imei: ""
  model: "PBDM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "TftgpZvi"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
payrequestid: "RM202103101534260V42QC503I471142"
version: "260"
queryType: "no_login"

2021-03-10 15:34:23,670-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "2002"
  msg: ""
}
successStatus: "1086"
origAmount: "0.01"

2021-03-10 15:34:23,671-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select * from `db_pay_notify_1`.`notify_info` where request_id = "HF202103101534229970173469172728558845602750"
2021-03-10 15:34:23,675-INFO-lib.common_biz.fiz_assert-135-通知表信息详情：{'id': 151881, 'app_id': 10003, 'app_name': 'opaycenter(测试环境)', 'app_sub_id': '72724313', 'notify_id': 'c19b13cf14bc46dd88654d32878c3629', 'request_id': 'HF202103101534229970173469172728558845602750', 'notify_protocol': 'HTTP', 'notity_detail': '{"appId":10003,"appSubId":"72724313","httpReqType":"POST","reqContent":"{\\"country\\":\\"CN\\",\\"partnerOrder\\":\\"HF202103101534229970173469172728558845602750\\",\\"payResult\\":\\"OK\\",\\"systemOrder\\":\\"RM202103101534260V42QC503I471142\\",\\"sign\\":\\"hxCRVQTi5dxGAP9Z5r3rL3sOYx6LlywTMCm/6Ddj4KG5P53GgNtVu2E9EPxcMJ7kOTuQkdT7N60/M+hvA7nmDyB5m7L6YWKdyrQDOAw5/75PnVXwbbA6M36iXrsEN3NL7J1qKrgtE0oWt7aRWMC69o2PUazxnKjKPVXtLnp+/Nk=\\",\\"notify_url\\":\\"http://pay.pay-test.wanyol.com/notify/receiver\\",\\"productName\\":\\"NO_LOGIN_PAY\\",\\"sendTime\\":\\"1615361667227\\",\\"productDesc\\":\\"话费充值\\",\\"price\\":\\"1\\",\\"notifyId\\":\\"IM20210310153427535\\",\\"orders\\":\\"NO_LOGIN_PAY0.0172724313HF202103101534229970173469172728558845602750\\",\\"payChannel\\":\\"wxpay\\",\\"currency\\":\\"CNY\\",\\"partnerId\\":\\"72724313\\",\\"paySuccessTime\\":\\"2021-03-10 15:34:23\\"}","reqUrl":"http://pay.pay-test.wanyol.com/notify/receiver","requestId":"HF202103101534229970173469172728558845602750","signType":"MD5","successResult":"OK","timeStamp":1615361667227,"version":"1.0"}', 'notify_count': 1, 'notify_response': 'OK', 'notify_handler': 'httpNotifyJsonHandler', 'fail_strategy': 'failStrategyHashImpl', 'status': 'SUCCESS', 'success_time': datetime.datetime(2021, 3, 10, 15, 34, 27), 'insert_time': datetime.datetime(2021, 3, 10, 15, 34, 27), 'update_time': datetime.datetime(2021, 3, 10, 15, 34, 27), 'extra_json': None, 'remark': None}
2021-03-10 15:34:23,675-INFO-lib.common_biz.fiz_assert-141-通知成功
2021-03-10 15:34:59,482-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.52.44.235', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-03-10 15:34:59,769-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-03-10 15:34:59,812-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]成功
2021-03-10 15:34:59,813-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]
2021-03-10 15:35:00,034-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]成功
2021-03-10 15:35:00,034-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]
2021-03-10 15:35:00,054-INFO-lib.common.db_operation.mysql_operation-118-成功连接到测试专用环境-MYSQL：{'host': '10.52.54.122', 'user': 'opay', 'pwd': '_UI7xHubrhTPIP1J_T4so7SU7ATCrUzm7cAh6TdBLLHWUSQUQqD8p45xVQzV3Czi', 'port': '33066'}
2021-03-10 15:35:00,055-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `test_account`.`account_test_env`
2021-03-10 15:35:00,065-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=0
2021-03-10 15:35:00,068-INFO-lib.common_biz.find_merchant_info-28-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601'}
2021-03-10 15:35:00,069-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-03-10 15:35:00,072-INFO-lib.common_biz.find_key-109-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-03-10 15:35:00,073-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no, plan_id FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=1
2021-03-10 15:35:00,075-INFO-lib.common_biz.find_merchant_info-41-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601', 'plan_id': '120877'}
2021-03-10 15:35:00,076-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-03-10 15:35:00,079-INFO-lib.common_biz.find_key-109-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-03-10 15:35:00,483-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 15:35:00,483-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "6.0"
appKey: "1234"
count: 10000
order: "14562474579826"
ip: "121.13.218.236"
type: "1"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "Jp7our3aC8jh06TwVn9xEBvWNdk2yAgF"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 15:35:00,582-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "960918149722407ea02427b40a3ec160"
s_p: "SmEzUzRsMFRhS1d5SEhOWVE3RHBBTE5LamZpZmFNMzRFQ1hMbFdERkFhZndmc0VGNlV2MUZBcERKSFdRZVpMT01mdUxZV1l0YmpmODR5NWpLTklDbUtpRGdYTlZBQXRrNTBHbkxkR1R0M29GYkRPSG96N0duQ2dwTEV0Z01EcFB5TXdUMnRGa0I1MVpac0RIbGF1R3N5SXM5SDBsUUpIOEYxczlTcncyNElkMktWTW1vTkVsRXFhZ2NPUEpId0picHdWbjN3UURZREZIZWdyZlZPcjhuZHdNaVVFWTI2WkxOcW16dEVSdWlPbW1SQlNlY1VPSjY1RWxnOEx1SHd6UlBOV1l3ZHhEcjRWUEJIUms2NklGcGd3OExJNzF1NHJDaGk2cXRaR3BCUzFLRjBsWFFpVmdpQ1NRWGpBVHU2Nk5BaUhoOXNvS1FVanhMVUhCcGVPZUthZzNQa2hVU2QxU0htS0JBM1JuTlB1U2Z1ZkdQaWRSWEtRS0FKT2c2VlF5NjIyVXpKYmJUd1JzVWE2eThDMjVxZ3d1S0JaS0llS1NJUm0yV3VNS3FYMXh4VkhnajdVRDRYc010eFpjd2QzMzBRa3Mxa0dyaGw2RjZENjBERU1wVERxYnVIZ2U3b1l1VWo3MDlYcVJiVFpjTFdzcmxjalhGRWx1YWlXNG1IZk0yUEY0djFMeENUZzB5UTdZenBBVkNUdkFkakVQREtmTkZQSkh4Z2xFRWE2V083RHFyQ2FUdENiRERvZE5jUVlXNGR0UWJQSjM2ck5BaU1TWUdTTVMxYlhNcFFCOEFiYzR0eVVYd050dXR5Y0UyTEJ3aVdqRVVIaTBXNEVJSjVSNXVyVzMyU1RJRkEzSTFUc2JHb2NoSXdFUk5XampuYnpWaW1jZXg2c2tpYVZ3bmlrZVI4d0J6T2thV0JvVWh4MjFRd2dZQ1RrM3RyaU9vTVJlamVjZU9DenNibVJlazdVTG5HNVNNVVkwQm1aenJRUXVEV084d2VqRXBLVkhRUXhNenhDeTl6Y250dlZOZXlwV1h0UFFIa2twRldvbUJXMXo="
m_p: "9KECB1CUVEE4hqP0i57n0Z2K17rfr9xM6wWrjR9MrCW8Bc74lPPPP829kQ7Hwe8n"
e_t: "1615469704298"
balanceResult {
  baseresult {
    code: "0000"
    msg: ""
  }
  balance: "0"
  vouBalance: "0"
  vouNum: 0
}
userinfo {
  username: "156******06"
}

2021-03-10 15:35:00,585-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 15:35:00,585-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "12.0"
  t_p: "960918149722407ea02427b40a3ec160"
  imei: ""
  model: "PCRM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "uLYWYtbj"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: ""
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
type: "wxpay"
amount: "0.01"
cardno: ""
cardpwd: ""
ext: ""
basepay {
  channelId: ""
  notifyurl: "http://pay.pay-test.wanyol.com/notify/receiver"
  productName: "DIRECT_PAY"
  productDesc: "DIRECT_PAY"
  partnercode: "2031"
  appversion: "1.1.0"
  currencyName: "\344\272\272\346\260\221\345\270\201"
  rate: 1.0
  partnerorder: "wPspyfD1gG5jo32eJLx9iKVSmqZnlEAH"
}
sign: "1kKKfJFmam0X1I+PmGR//Lyy4JBxvI/Ff58P0Xdmzxq5NClAeRzEMAPG7J2Mty1Qi01rBFkiRPLKnR/qTXieZokL8pkigvLSLzfHKKGZS09o747X1JrdR7NiUnrmdLTiUBPct/spQJ3Y2edjPWSWPFhwM049PtlMc57F7KTTfYzZvLzbWkPmDn/BfvyuPWmVBAQLgHk08Gugma8ubh7D8hpdbmHY1IIqXy9AJdWokHeSFgMgrzTcL+juAzHWpt/q2m7j0msEc8IEC5VpC8JIobd3CiGf//ys/Hes54dR+qQzVcXTHvNqzhQ6prbTZBJHkvK5gr0pjtpDk+PGBTUlBg=="
ip: "58.252.5.75"
isNeedExpend: "0"
appId: ""
payTypeRMBType: "0"
tradeType: "common"
screenInfo: "FULL"

2021-03-10 15:35:00,952-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "{\"appid\":\"wx93eea96ecc33f168\",\"noncestr\":\"8889092e5c014085beaaa5d5b3dbbf0e\",\"packageNm\":\"Sign=WXPay\",\"partnerid\":\"1259634601\",\"prepayid\":\"wx1015350461941998789ecfeaf063d90000\",\"sign\":\"4213F602CF77952F6187BAC37D94EA04\",\"timestamp\":\"1615361704\"}"
}
payrequestid: "RM202103101535042076075925358772"
model: ""

2021-03-10 15:35:01,952-INFO-wxpay-scarlet-52-回调参数：<xml><transaction_id><![CDATA[8165823473383669922652021517]]></transaction_id>
<nonce_str><![CDATA[Yu4xkq6dTheUnrXolZw1Kis8zcamBpJ2]]></nonce_str>
<bank_type><![CDATA[OTHERS]]></bank_type>
<openid><![CDATA[oCg6Xt8NvRi7jGuap_5B6XdY4oYk]]></openid>
<sign><![CDATA[93754D359C207D03400A9DAE76E1A108]]></sign>
<fee_type><![CDATA[CNY]]></fee_type>
<mch_id><![CDATA[1259634601]]></mch_id>
<cash_fee><![CDATA[1]]></cash_fee>
<out_trade_no><![CDATA[RM202103101535042076075925358772]]></out_trade_no>
<appid><![CDATA[wx93eea96ecc33f168]]></appid>
<total_fee>1</total_fee>
<trade_type><![CDATA[APP]]></trade_type>
<result_code><![CDATA[SUCCESS]]></result_code>
<attach><![CDATA[TEST]]></attach>
<time_end><![CDATA[20210310153501]]></time_end>
<is_subscribe><![CDATA[N]]></is_subscribe>
<return_code><![CDATA[SUCCESS]]></return_code>
</xml>
2021-03-10 15:35:02,144-INFO-wxpay-scarlet-56-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-03-10 15:35:02,144-INFO-wxpay-scarlet-58-回调解析成功
2021-03-10 15:35:02,154-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 15:35:02,154-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "07226723508067"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "8mnsvRacy4AqB2glYhUzSJE09oH1D3eZ"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 15:35:02,231-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "e5479479d63c4a6db29cbaa88fb327bf"
s_p: "Rk9tS1RsWk9kME9SZ0FVb3VUYUJMSGN0aDdzZXRsWUduaGU2dkJQMVNmQU02WG9JeGppcTJWaUNYOVdNZXVHQWxXYnBDcDhyTEtaekRSNlY2QVNtOXlWd1BaVWZpazFTQzBYZURLWk10R0g4QmdOdUxtSTJYZ2k1akhXclVCcmxYQWRzN3VSSEJtOEwzTThQRVk0d21KRGY5UUM5ZFRQOHhwZ1FkY21XM3o2aXhXSktmSmJidDh5a0FSNks0Y2ZlRWpXSkNYWWo0OGQ3c3ltU0t1cTJIeEw0a0xUcEtSYnpZeE1GSzVpcm9OM1FkWUdSSkt4WFZTeDA2Rm1qUzZ1WlBsV1FrTXFzYnRpZGgyckh5NkVyS1Ryc1F1eUNFZjZ6SURSRWU3cFlPRHJXdmtERjY4cWZYdnJidnlSYWpvT0ZqN3VqTHI2eXpoazNRZ3RuMUhJdkhjTjV0Q1BpcGJuTHQ3ZlhYa2JnZlNDdUJPY0RHT0xTZFk2OElqMjVUZHhMS2NEbXo3cXNxUU9SM0pPOGxIdjE0Yjg4a21RU053YTNQY2szWkhYWDY5YWt6cERhMXN3ZTFSSG4zYWhnc0t5OHdrbUsyNmp4QkNFYmRveWRPMnJheGJBVTU3NGJUbk1UUHZzcmtoV3NUSzk2dUJwZ0dMejB3Y2lTSWl0c2R3Y0VzTmpMQXlDdGtMU1U4UVVmUGVTSmJHWFJDT25QbjNTRmY3ejdac0Q0R2ZwWkNpS2NwdU9uUXdWcnZDYlg0VHN1ZTNqTE9odlZKcUY1SW82dDRVNFZTWEh1TlpYYk43SUZIUGNPeURBeVpOalZadUNLQWhUNEpwQUdBdHliYlBBeEd3cXhlM2t6MUZ0bWhVcVBmbllnV2RtV3hySWpwVlY1dnRpMVhMYUhad0ZXNUxUeU4zdjZrVlpTVTc4ZlFVTDNJSWlwNVpyeEVpMGlKcHR1RXlVSjZBOG4yOVJ4WmNjOGhNWUJqSkloSTRQUlN4TnlPeUN4Y3haOXJUaWFzSFpwMEF5ZXRiT1RLY29xdnFHcmdjSzlBWEM4dWFNSmFWdk4="
m_p: "bnATDzhbG5HP6n3B1g0s8z8xYoW76SsJWsl9PP96ko7nDu6sqikz83SFEzWt5a5P"
e_t: "1615469705921"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0.02"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 1001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199706
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199705
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199704
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199703
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199702
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199692
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099683
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099682
    type: 2
    minCousume: 1300
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 11
}
userinfo {
  username: "156******06"
}

2021-03-10 15:35:02,231-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 15:35:02,231-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "5.0"
  t_p: "e5479479d63c4a6db29cbaa88fb327bf"
  imei: ""
  model: "PBDM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "ZMtGH8Bg"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
payrequestid: "RM202103101535042076075925358772"
version: "260"
queryType: "direct"

2021-03-10 15:35:02,289-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "2002"
  msg: ""
}
successStatus: "1086"
origAmount: "0.01"

2021-03-10 15:35:02,290-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `db_order_4`.`order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "RM202103101535042076075925358772"
2021-03-10 15:35:02,294-INFO-lib.common_biz.fiz_assert-34-订单详情：{'id': 15334, 'pay_req_id': 'RM202103101535042076075925358772', 'notify_id': '8165823473383669922652021517', 'partner_order': 'wPspyfD1gG5jo32eJLx9iKVSmqZnlEAH', 'amount': 1, 'refund': 0, 'contents': 'DIRECT_PAY', 'products_name': 'DIRECT_PAY', 'counts': 1, 'ssoid': '2076075925', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': '1259634601', 'ip': '58.252.5.72', 'mac': '', 'model': 'PCRM00', 'app_package': 'com.example.pay_demo', 'app_ver': '1.1.0', 'sdk_ver': '260', 'partner_code': '2031', 'notify_url': 'http://pay.pay-test.wanyol.com/notify/receiver', 'status': 'OK', 'channel_id': '', 'channel_type': 'NATIVE', 'pay_type': 'wxpay', 'direct_pay': 'ZHICHONG', 'game_type': 'WANGYOU', 'present_amount': 0, 'original_amount': 1, 'discount_info': '', 'extra': None, 'remark': None, 'request_time': datetime.datetime(2021, 3, 10, 15, 35, 5), 'success_time': datetime.datetime(2021, 3, 10, 15, 35, 1), 'modify_time': datetime.datetime(2021, 3, 10, 15, 35, 1), 'trade_type': 'PAY', 'kebi_spent': 0, 'voucher_amount': 0, 'voucher_info': None, 'country_code': 'CN', 'currency': 'CNY', 'openid': None, 'brand_type': 'OPPO', 'mobile_os_ver': '17', 'platform': '', 'screen_info': 'FULL', 'voucher_id': None, 'factor': None, 'paid_amount': None, 'paid_usd': None, 'combine_order': 'N', 'voucher_status': None, 'kebi_status': None, 'channel_status': None}
2021-03-10 15:35:02,294-INFO-lib.common_biz.fiz_assert-45-订单表信息记录正确
2021-03-10 15:35:02,295-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `pay_tradeorder_4`.`trade_order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "RM202103101535042076075925358772"
2021-03-10 15:35:02,299-INFO-lib.common_biz.fiz_assert-55-trade订单详情：{'id': 8020, 'pay_req_id': 'RM202103101535042076075925358772', 'partner_order': 'wPspyfD1gG5jo32eJLx9iKVSmqZnlEAH', 'partner_code': '2031', 'products_name': 'DIRECT_PAY', 'ssoid': '2076075925', 'origin_amount': 1, 'amount': 1, 'kb_amount': 0, 'voucher_amount': 0, 'present_amount': 0, 'refund': 0, 'country_code': 'CN', 'currency': 'CNY', 'pay_type': 'wxpay', 'channel_id': '', 'channel_type': 'NATIVE', 'direct_pay': 'ZHICHONG', 'trade_type': 'PAY', 'combine_type': 'PRIMARY', 'status': 'OK', 'notify_url': 'http://pay.pay-test.wanyol.com/notify/receiver', 'attach': '', 'extra_info': '', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': '1259634601', 'ip': '58.252.5.72', 'mac': '', 'openid': None, 'model': 'PCRM00', 'brand_type': 'OPPO', 'app_package': 'com.example.pay_demo', 'app_ver': '1.1.0', 'sdk_ver': '260', 'mobile_os_ver': '17', 'platform': '', 'screen_info': 'FULL', 'remark': None, 'request_time': datetime.datetime(2021, 3, 10, 15, 35, 4), 'success_time': None, 'modify_time': datetime.datetime(2021, 3, 10, 15, 35, 5)}
2021-03-10 15:35:02,299-INFO-lib.common_biz.fiz_assert-63-trade订单表信息记录正确
2021-03-10 15:35:02,299-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select * from `db_pay_notify_1`.`notify_info` where request_id = "wPspyfD1gG5jo32eJLx9iKVSmqZnlEAH"
2021-03-10 15:35:02,303-INFO-lib.common_biz.fiz_assert-135-通知表信息详情：{'id': 151882, 'app_id': 10003, 'app_name': 'opaycenter(测试环境)', 'app_sub_id': '2031', 'notify_id': '1dc30f871a4a45fc90c90546c73a961c', 'request_id': 'wPspyfD1gG5jo32eJLx9iKVSmqZnlEAH', 'notify_protocol': 'HTTP', 'notity_detail': '{"appId":10003,"appSubId":"2031","httpReqType":"POST","reqContent":"{\\"country\\":\\"CN\\",\\"partnerOrder\\":\\"wPspyfD1gG5jo32eJLx9iKVSmqZnlEAH\\",\\"payResult\\":\\"OK\\",\\"systemOrder\\":\\"RM202103101535042076075925358772\\",\\"sign\\":\\"fRAJz4EJY7zXr541/HM/8onUQOD0JYFAPiC4IVSL8Kpo57bh4vJSFxaHPDLgRcBu8lKjwXAHOaLp+qxRLj3AkWicj+arm/DA5haTyc29pRGAHwC9nCBK0PD2QINI9KwX8HfFejvStykiH+vNsqQTK4o/OVFlBmsTuXUwvO18MSE=\\",\\"notify_url\\":\\"http://pay.pay-test.wanyol.com/notify/receiver\\",\\"productName\\":\\"DIRECT_PAY\\",\\"sendTime\\":\\"1615361705851\\",\\"productDesc\\":\\"DIRECT_PAY\\",\\"price\\":\\"1\\",\\"notifyId\\":\\"IM20210310153505284\\",\\"orders\\":\\"DIRECT_PAY0.012031wPspyfD1gG5jo32eJLx9iKVSmqZnlEAH\\",\\"payChannel\\":\\"wxpay\\",\\"currency\\":\\"CNY\\",\\"partnerId\\":\\"2031\\",\\"paySuccessTime\\":\\"2021-03-10 15:35:01\\"}","reqUrl":"http://pay.pay-test.wanyol.com/notify/receiver","requestId":"wPspyfD1gG5jo32eJLx9iKVSmqZnlEAH","signType":"MD5","successResult":"OK","timeStamp":1615361705851,"version":"1.0"}', 'notify_count': 1, 'notify_response': 'OK', 'notify_handler': 'httpNotifyJsonHandler', 'fail_strategy': 'failStrategyHashImpl', 'status': 'SUCCESS', 'success_time': datetime.datetime(2021, 3, 10, 15, 35, 6), 'insert_time': datetime.datetime(2021, 3, 10, 15, 35, 6), 'update_time': datetime.datetime(2021, 3, 10, 15, 35, 6), 'extra_json': None, 'remark': None}
2021-03-10 15:35:02,303-INFO-lib.common_biz.fiz_assert-141-通知成功
2021-03-10 15:53:04,201-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.52.44.235', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-03-10 15:53:04,489-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-03-10 15:53:04,532-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]成功
2021-03-10 15:53:04,533-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]
2021-03-10 15:53:04,761-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]成功
2021-03-10 15:53:04,762-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]
2021-03-10 15:53:04,785-INFO-lib.common.db_operation.mysql_operation-118-成功连接到测试专用环境-MYSQL：{'host': '10.52.54.122', 'user': 'opay', 'pwd': '_UI7xHubrhTPIP1J_T4so7SU7ATCrUzm7cAh6TdBLLHWUSQUQqD8p45xVQzV3Czi', 'port': '33066'}
2021-03-10 15:53:04,785-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `test_account`.`account_test_env`
2021-03-10 15:53:04,797-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=0
2021-03-10 15:53:04,800-INFO-lib.common_biz.find_merchant_info-28-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601'}
2021-03-10 15:53:04,801-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-03-10 15:53:04,804-INFO-lib.common_biz.find_key-109-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-03-10 15:53:04,805-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no, plan_id FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=1
2021-03-10 15:53:04,808-INFO-lib.common_biz.find_merchant_info-41-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601', 'plan_id': '120877'}
2021-03-10 15:53:04,808-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-03-10 15:53:04,811-INFO-lib.common_biz.find_key-109-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-03-10 15:56:53,849-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.52.44.235', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-03-10 15:56:54,185-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-03-10 15:56:54,242-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]成功
2021-03-10 15:56:54,243-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]
2021-03-10 15:56:54,463-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]成功
2021-03-10 15:56:54,463-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]
2021-03-10 15:56:54,486-INFO-lib.common.db_operation.mysql_operation-118-成功连接到测试专用环境-MYSQL：{'host': '10.52.54.122', 'user': 'opay', 'pwd': '_UI7xHubrhTPIP1J_T4so7SU7ATCrUzm7cAh6TdBLLHWUSQUQqD8p45xVQzV3Czi', 'port': '33066'}
2021-03-10 15:56:54,486-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `test_account`.`account_test_env`
2021-03-10 15:56:54,498-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=0
2021-03-10 15:56:54,501-INFO-lib.common_biz.find_merchant_info-28-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601'}
2021-03-10 15:56:54,502-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-03-10 15:56:54,505-INFO-lib.common_biz.find_key-109-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-03-10 15:56:54,505-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no, plan_id FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=1
2021-03-10 15:56:54,509-INFO-lib.common_biz.find_merchant_info-41-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601', 'plan_id': '120877'}
2021-03-10 15:56:54,509-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-03-10 15:56:54,512-INFO-lib.common_biz.find_key-109-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-03-10 15:56:54,938-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`t_key` WHERE application_id = '100002'
2021-03-10 15:56:54,942-INFO-lib.common.db_operation.mysql_operation-51-查询数据为空
2021-03-10 15:56:54,942-INFO-lib.common_biz.find_key-72-'NoneType' object is not subscriptable
2021-03-10 16:03:09,513-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.52.44.235', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-03-10 16:03:09,798-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-03-10 16:03:09,842-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]成功
2021-03-10 16:03:09,843-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]
2021-03-10 16:03:10,084-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]成功
2021-03-10 16:03:10,084-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]
2021-03-10 16:03:10,104-INFO-lib.common.db_operation.mysql_operation-118-成功连接到测试专用环境-MYSQL：{'host': '10.52.54.122', 'user': 'opay', 'pwd': '_UI7xHubrhTPIP1J_T4so7SU7ATCrUzm7cAh6TdBLLHWUSQUQqD8p45xVQzV3Czi', 'port': '33066'}
2021-03-10 16:03:10,105-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `test_account`.`account_test_env`
2021-03-10 16:03:10,116-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=0
2021-03-10 16:03:10,120-INFO-lib.common_biz.find_merchant_info-28-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601'}
2021-03-10 16:03:10,120-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-03-10 16:03:10,124-INFO-lib.common_biz.find_key-109-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-03-10 16:03:10,124-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no, plan_id FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=1
2021-03-10 16:03:10,127-INFO-lib.common_biz.find_merchant_info-41-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601', 'plan_id': '120877'}
2021-03-10 16:03:10,128-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-03-10 16:03:10,131-INFO-lib.common_biz.find_key-109-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-03-10 16:03:10,556-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT app_key FROM `db_platform_gateway`.`server_app_info` WHERE app_id = '100002'
2021-03-10 16:03:10,562-INFO-lib.common_biz.find_key-96-查询到秘钥信息：BB36C34EB6644AB9694315AF7D68E629
2021-03-10 16:03:10,562-INFO-lib.common.session.http.http_json-38-http://pay-gateway.pay-test.wanyol.com/gateway/nearme.account.query
2021-03-10 16:03:10,562-INFO-lib.common.session.http.http_json-39-传入的参数：{'app_id': '100002', 'service': 'nearme.account.query', 'format': 'JSON', 'charset': 'UTF8', 'sign_type': 'MD5', 'sign': 'F2724B217DAE48F4C6659A41B2B7EFB3', 'timestamp': '2021-03-10 16:03:10', 'version': '1.0', 'bizContent': "{'ssoid': '2076075925'}"}
2021-03-10 16:03:10,604-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'data': {'ssoid': '2076075925', 'timeStamp': 1615363394329, 'useableBalance': 2, 'totalGiveBalance': 0, 'createTime': 1612151249000, 'chargeBalance': 2, 'freezeBalance': 0, 'giveBalance': 0}, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功', 'success': True}
2021-03-10 16:03:10,629-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 16:03:10,629-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "49146064668821"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: ""
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 16:03:10,733-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "f57ac7ab9bd249faa7a1672ff00d8ad7"
s_p: "clJMcmhCbmRPNXFwbU04Z1VxWnhZTnkxckt2MGZIU0VrSXNoQmNTc1owa2c3ZFM4QUNjdFFJUHBxbUZtM3h1dWRkUm5tNTFOMkM4S2xLcVNLcERaejhzd1IxMUduaFJCemo4eDRRNXhQQlZsNlRKb3REbU50UkhIRk9uRlpEbXUydFlpUERETmNkRjBXdmFzYVZQbUFqTVNaTVVxUk9HMTV0bVFnYVFZOHJ6a0ZXZk5TTHhZQlhyVHdJd1dyR3NPTjZTZE5MbWlvZFB6WDdUSTFPUUllMHlEcE92S2dlcGc4cWxDNFNhekZaMWZ4eVBUWGhLcVYwRXYySWt4eldhUmpLUkFqRnZiNktLdkVpSXZUUFhrN3N4WjgxU0JMdGpJMWQyRDQzazVsY2FqcUNKeEFQVHhBaG04OElCeTB3dndhcFRINUlBNjNjdTY3Q0J6cmc3QXdMbzVHSmdFWHREaEw5T0lXRE5sTlluRTFOSnpsTnBCS05JM3FxRGZiRVN1SG4xbnlQVUR2VUhSNG1Kb1FFc213TFhWTnVEeFdmM0hNRHU3MDhjb2pmSW1yRGcxaW45Z0MxUldubXd3T01LWHQ0WEtidmtzTVpOQkcyNXdjUnhiUEZKNzRqQlJvbFNoRGxETzd2TjZPVUlOTWJ5Ym9JaVdOWjRWTzFKU1ZnTWpLOTFtU1FiZ1BWZExOVWlMQ2c1M3FsSmRhSncxY0ZWUnRwN3cyc1pRbGJtMUxLZ2pTNFdLdUJqV3Y5eWgwYzh1bjhleVhKb21rSFpmcldYWWZtMW9NUHJaWXdSa2NjajdqNU1vQ1RmdkFlYUZaSzhpY0htb3FaSm83R3RNZGtYWUxYTTgwR2YxWkd3NmxWSVJLa0U2NkY4aWRvSHY1Z0xZUXZ3QXN5Y0tOYUZROTIyT1RBZHlOdkZPbm4zTjZ0b0lsM0Q2Y0FKR1N3QlBYRmNpUWc0M1o3dVNmV1J3SjUzY21TQWhZN1FzUVI0bkNyOXVRSmZ2a3pMV3c4SGV1MXFJMm1yU1VCUEhid1FFTldDeWprV09qOWhENWVHbEtkdUI="
m_p: "Fm7h93DElb2MqUn9w4oH3vv68mipKk708PO4K44uRmkMY47h4ho30k7jX1YveChN"
e_t: "1615471394422"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0.02"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 1001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199706
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199705
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199704
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199703
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199702
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199692
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099683
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099682
    type: 2
    minCousume: 1300
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 11
}
userinfo {
  username: "156******06"
}

2021-03-10 16:03:10,735-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 16:03:10,735-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "12.0"
  t_p: "f57ac7ab9bd249faa7a1672ff00d8ad7"
  imei: ""
  model: "PCRM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "mQgaQY8r"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: ""
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
type: "wxpay"
amount: "0.05"
cardno: ""
cardpwd: ""
ext: ""
basepay {
  channelId: ""
  notifyurl: "http://pay.pay-test.wanyol.com/notify/receiver"
  productName: "KB\342\200\224RECHARGE_PAY"
  productDesc: "KB\342\200\224RECHARGE_PAY"
  partnercode: "2031"
  appversion: "1.1.0"
  currencyName: "\345\217\257\345\270\201"
  rate: 1.0
  partnerorder: "null"
}
sign: "p1/K/qzJIxqgXLI6M7ygP+MfpE5XVdC/ckyBKrq/HgGNgGUHj8u0T5Bwuic3Hedk9Z1yCyjvaHVFNy9AhZKJIY8c7yOlv1saU0mVE3cK6TRhxzodzLCMNniRFDuRZx/lb48LgHo89kuM/6LHYqOQiJTSxB93khcKbtK0DhfNtRcwu9OrPKJOAsKQfY5o85/5gDEaSxfvUaYfr3JAcg/O4QUjOhT5vto0Q6e6px+gzMg9QZEWokIIL5gXvV81KIYLGJlrv1VT6+ApzuagbmFaGzs7HRAxsBX8TuJccN5GGtFnmdsr4Rn2K/PMQ/mLcb4eR7kRQo8bq3+luBSSnESMsw=="
ip: "58.252.5.75"
isNeedExpend: "0"
appId: ""
payTypeRMBType: "0"
tradeType: "common"
screenInfo: "FULL"

2021-03-10 16:03:11,113-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "{\"appid\":\"wx93eea96ecc33f168\",\"noncestr\":\"0cd57fe6fe334f74a527c43c8b503f52\",\"packageNm\":\"Sign=WXPay\",\"partnerid\":\"1259634601\",\"prepayid\":\"wx1016031478419199876fa576c93a400000\",\"sign\":\"D93DA3EEE0733BF3DDDD93FA4FF4E275\",\"timestamp\":\"1615363394\"}"
}
payrequestid: "KB202103101603142076075925138012"
model: ""

2021-03-10 16:03:12,114-INFO-wxpay-scarlet-52-回调参数：<xml><transaction_id><![CDATA[7875896797878860649816175286]]></transaction_id>
<nonce_str><![CDATA[CHvR0hqbj1mKPdA589pOGgy6FnQDVfYr]]></nonce_str>
<bank_type><![CDATA[OTHERS]]></bank_type>
<openid><![CDATA[oCg6Xt8NvRi7jGuap_5B6XdY4oYk]]></openid>
<sign><![CDATA[232CC6A9BE903923AF9EACB4C9C2E986]]></sign>
<fee_type><![CDATA[CNY]]></fee_type>
<mch_id><![CDATA[1259634601]]></mch_id>
<cash_fee><![CDATA[1]]></cash_fee>
<out_trade_no><![CDATA[KB202103101603142076075925138012]]></out_trade_no>
<appid><![CDATA[wx93eea96ecc33f168]]></appid>
<total_fee>5</total_fee>
<trade_type><![CDATA[APP]]></trade_type>
<result_code><![CDATA[SUCCESS]]></result_code>
<attach><![CDATA[TEST]]></attach>
<time_end><![CDATA[20210310160312]]></time_end>
<is_subscribe><![CDATA[N]]></is_subscribe>
<return_code><![CDATA[SUCCESS]]></return_code>
</xml>
2021-03-10 16:03:12,343-INFO-wxpay-scarlet-56-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-03-10 16:03:12,344-INFO-wxpay-scarlet-58-回调解析成功
2021-03-10 16:03:12,354-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 16:03:12,354-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "06783703597547"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "TaBeLW7Oown1giXfJ3CNsu8lmhj04Kz2"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 16:03:12,426-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "deff939aa6dc4d01b6a17ee8ff78d575"
s_p: "bWJYRGYyY2gwVGsyR0UzVUpncDdENlRldVJyamk1eVRDdXhtNmg3dUJRelNLVFJMZHoyeDdpVTBwRG1mMEFXYm83Y1NTQzJXYjd0YTRUaFlyZEhGZnJrNFB6dDQ3MDVwZkM3ZHJvWG5MU1BZcWhuS2lLYjE0eXBid053bXB1UlNoSDJPWkh0SXpIMzVPTU82RGR0SWFXWVg3dnhaQzRXQVplb1Z1ZUdmUG1sYklPWkx2N2JJTlljRXVCMWJNU3ppVXlWcXpmT3VzU1MxS2NUb05NM0xCNmJ0bm93ZHREREJ0WEI5aXlmVjhSWkprVXN4V2hZNHhseEJySW43V0d5aFRyNlpjeDVBZmJFbEs3VUl3M0VKYnlyTDNCOXJncDhKN01VWnFmc3ZDbVRxd25sNnNDajRFVUFwMEowQVQwNFNVeXVBU0dYU0JLZktUMGtQMjNMQXh5M2lsbVFtd0xEUkxNdFlKSzNkZkJHbnhCVXg3VnVKd0JHVlQxamR6WGRBZkFNWFFKUmVXYTF6Ukt3a3pDYXhqQkZxWHlFc2x4TEIzNEpEcHI5ek9uYzc0WGhyN2NiTkk5cFFLNkJoZzlXNXVBM2hPTHppQ0FKdk9KNzd1UkZqdkdCc1RtR1NiSkNlejMzMGpISXdNOWpINEZDYkZGc0JlWFBiMFRPYUM5SkdISnNGbWswbEFRbnU5OXFOM1h5RlBuMFhFcnNIVlNFZlVaeHlyTm9kdjRadVpGNlM3NXJrZVdJcGJCVGRJaFVJQnMzckVmWnpXNXpSU0lmVDhUNmlEbmdqd2hXa1ppZDQ0eTVjUWRMSU1YTUUwTXdhQmpKblZ2bnF6elhTdXo2RWNQNlpvcHpxd3NRTFhsVXd6T2dPSmIxZmZEbW1aVFFRZDBGVENpemFtT2lxRG5weUQ2cTd6OHNXSHlqM3VjUkR1M3VTVDR2cnloQUs4dG5hMnFJNUdsWGIyQUtueFZqSXNvMldlNWdVWnU2aHZWeVBlYjRRVE85Z0E4VUNBUkJteXh4UUZkMzZUM1ROUGFUVWxzYUlpb2tidm9kZWFpQTc="
m_p: "yQHpM95VsmawR1llm3fe7fR677A13eCUEDjuyGGZ9JXD538tTo173eL15p0X2MD7"
e_t: "1615471396123"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0.07"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 1001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199706
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199705
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199704
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199703
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199702
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199692
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099683
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099682
    type: 2
    minCousume: 1300
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 11
}
userinfo {
  username: "156******06"
}

2021-03-10 16:03:12,427-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 16:03:12,427-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "5.0"
  t_p: "deff939aa6dc4d01b6a17ee8ff78d575"
  imei: ""
  model: "PBDM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "i5yTCuxm"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
payrequestid: "KB202103101603142076075925138012"
version: "260"
queryType: "PAY"

2021-03-10 16:03:12,472-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "2002"
  msg: ""
}
successStatus: "1086"
origAmount: "0.05"

2021-03-10 16:03:12,473-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT app_key FROM `db_platform_gateway`.`server_app_info` WHERE app_id = '100002'
2021-03-10 16:03:12,476-INFO-lib.common_biz.find_key-96-查询到秘钥信息：BB36C34EB6644AB9694315AF7D68E629
2021-03-10 16:03:12,476-INFO-lib.common.session.http.http_json-38-http://pay-gateway.pay-test.wanyol.com/gateway/nearme.account.query
2021-03-10 16:03:12,476-INFO-lib.common.session.http.http_json-39-传入的参数：{'app_id': '100002', 'service': 'nearme.account.query', 'format': 'JSON', 'charset': 'UTF8', 'sign_type': 'MD5', 'sign': '96346011B474C9B3342F56E119BF52D2', 'timestamp': '2021-03-10 16:03:12', 'version': '1.0', 'bizContent': "{'ssoid': '2076075925'}"}
2021-03-10 16:03:12,502-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'data': {'ssoid': '2076075925', 'timeStamp': 1615363396225, 'useableBalance': 7, 'totalGiveBalance': 0, 'createTime': 1612151249000, 'chargeBalance': 7, 'freezeBalance': 0, 'giveBalance': 0}, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功', 'success': True}
2021-03-10 16:03:12,503-INFO-recharge-52-可币充值成功
2021-03-10 16:03:12,504-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `db_order_4`.`order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "KB202103101603142076075925138012"
2021-03-10 16:03:12,522-INFO-lib.common_biz.fiz_assert-34-订单详情：{'id': 15336, 'pay_req_id': 'KB202103101603142076075925138012', 'notify_id': '7875896797878860649816175286', 'partner_order': 'NV203113782656752021031016031421724031509651600457', 'amount': 5, 'refund': 0, 'contents': 'KB—RECHARGE_PAY', 'products_name': 'KB—RECHARGE_PAY', 'counts': 1, 'ssoid': '2076075925', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': '1259634601', 'ip': '121.12.147.248', 'mac': '', 'model': 'PCRM00', 'app_package': 'com.example.pay_demo', 'app_ver': '1.1.0', 'sdk_ver': '260', 'partner_code': '2031', 'notify_url': 'http://pay.pay-test.wanyol.com/notify/receiver', 'status': 'OK', 'channel_id': '', 'channel_type': 'NATIVE', 'pay_type': 'wxpay', 'direct_pay': 'KEBI', 'game_type': 'WANGYOU', 'present_amount': 0, 'original_amount': 5, 'discount_info': '', 'extra': None, 'remark': 'new way', 'request_time': datetime.datetime(2021, 3, 10, 16, 3, 16), 'success_time': datetime.datetime(2021, 3, 10, 16, 3, 12), 'modify_time': datetime.datetime(2021, 3, 10, 16, 3, 16), 'trade_type': 'CZ', 'kebi_spent': 0, 'voucher_amount': 0, 'voucher_info': None, 'country_code': 'CN', 'currency': 'CNY', 'openid': None, 'brand_type': 'OPPO', 'mobile_os_ver': '17', 'platform': '', 'screen_info': 'FULL', 'voucher_id': None, 'factor': None, 'paid_amount': None, 'paid_usd': None, 'combine_order': 'N', 'voucher_status': None, 'kebi_status': None, 'channel_status': None}
2021-03-10 16:03:12,522-INFO-lib.common_biz.fiz_assert-45-订单表信息记录正确
2021-03-10 16:03:12,523-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `pay_tradeorder_4`.`trade_order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "KB202103101603142076075925138012"
2021-03-10 16:03:12,526-INFO-lib.common_biz.fiz_assert-55-trade订单详情：{'id': 8022, 'pay_req_id': 'KB202103101603142076075925138012', 'partner_order': 'NV203113782656752021031016031421724031509651600457', 'partner_code': '2031', 'products_name': 'KB—RECHARGE_PAY', 'ssoid': '2076075925', 'origin_amount': 5, 'amount': 5, 'kb_amount': 0, 'voucher_amount': 0, 'present_amount': 0, 'refund': 0, 'country_code': 'CN', 'currency': 'CNY', 'pay_type': 'wxpay', 'channel_id': '', 'channel_type': 'NATIVE', 'direct_pay': 'KEBI', 'trade_type': 'CZ', 'combine_type': 'PRIMARY', 'status': 'OK', 'notify_url': 'http://pay.pay-test.wanyol.com/notify/receiver', 'attach': '', 'extra_info': '', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': '1259634601', 'ip': '121.12.147.248', 'mac': '', 'openid': None, 'model': 'PCRM00', 'brand_type': 'OPPO', 'app_package': 'com.example.pay_demo', 'app_ver': '1.1.0', 'sdk_ver': '260', 'mobile_os_ver': '17', 'platform': '', 'screen_info': 'FULL', 'remark': None, 'request_time': datetime.datetime(2021, 3, 10, 16, 3, 15), 'success_time': datetime.datetime(2021, 3, 10, 16, 3, 16), 'modify_time': datetime.datetime(2021, 3, 10, 16, 3, 16)}
2021-03-10 16:03:12,527-INFO-lib.common_biz.fiz_assert-63-trade订单表信息记录正确
2021-03-10 16:03:12,527-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `virtual`.`tb_recharge202103` WHERE ssoid = '2076075925' and rechargeOrder = "KB202103101603142076075925138012"
2021-03-10 16:03:12,531-INFO-lib.common_biz.fiz_assert-83-tb_recharge订单详情：{'id': 21, 'ssoid': '2076075925', 'imei': '', 'rechargeTime': datetime.datetime(2021, 3, 10, 16, 3, 16), 'amount': 5, 'status': 'OK', 'rechargeOrder': 'KB202103101603142076075925138012', 'partnerId': '2031', 'rechargeChannel': '46', 'appPackage': 'com.example.pay_demo', 'model': '', 'clientIp': '', 'source': None, 'updateTime': datetime.datetime(2021, 3, 10, 16, 3, 16)}
2021-03-10 16:03:12,531-INFO-lib.common_biz.fiz_assert-91-tb_recharge订单表信息记录正确
2021-03-10 16:04:52,676-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.52.44.235', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-03-10 16:04:52,990-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-03-10 16:04:53,063-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]成功
2021-03-10 16:04:53,063-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]
2021-03-10 16:04:53,284-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]成功
2021-03-10 16:04:53,284-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]
2021-03-10 16:04:53,306-INFO-lib.common.db_operation.mysql_operation-118-成功连接到测试专用环境-MYSQL：{'host': '10.52.54.122', 'user': 'opay', 'pwd': '_UI7xHubrhTPIP1J_T4so7SU7ATCrUzm7cAh6TdBLLHWUSQUQqD8p45xVQzV3Czi', 'port': '33066'}
2021-03-10 16:04:53,306-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `test_account`.`account_test_env`
2021-03-10 16:04:53,318-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=0
2021-03-10 16:04:53,321-INFO-lib.common_biz.find_merchant_info-28-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601'}
2021-03-10 16:04:53,322-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-03-10 16:04:53,325-INFO-lib.common_biz.find_key-109-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-03-10 16:04:53,326-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no, plan_id FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=1
2021-03-10 16:04:53,329-INFO-lib.common_biz.find_merchant_info-41-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601', 'plan_id': '120877'}
2021-03-10 16:04:53,329-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-03-10 16:04:53,332-INFO-lib.common_biz.find_key-109-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-03-10 16:04:53,775-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT app_key FROM `db_platform_gateway`.`server_app_info` WHERE app_id = '100002'
2021-03-10 16:04:53,778-INFO-lib.common_biz.find_key-96-查询到秘钥信息：BB36C34EB6644AB9694315AF7D68E629
2021-03-10 16:04:53,778-INFO-lib.common.session.http.http_json-38-http://pay-gateway.pay-test.wanyol.com/gateway/nearme.account.query
2021-03-10 16:04:53,778-INFO-lib.common.session.http.http_json-39-传入的参数：{'app_id': '100002', 'service': 'nearme.account.query', 'format': 'JSON', 'charset': 'UTF8', 'sign_type': 'MD5', 'sign': 'CCBC7219982FC048E7536405C544A902', 'timestamp': '2021-03-10 16:04:53', 'version': '1.0', 'bizContent': "{'ssoid': '2076075925'}"}
2021-03-10 16:04:53,817-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'data': {'ssoid': '2076075925', 'timeStamp': 1615363497542, 'useableBalance': 7, 'totalGiveBalance': 0, 'createTime': 1612151249000, 'chargeBalance': 7, 'freezeBalance': 0, 'giveBalance': 0}, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功', 'success': True}
2021-03-10 16:04:53,834-INFO-lib.common.session.dubbo.dubbo-51-dubbo invoke语句：invoke NearmeAccountOperate.addSubtractOperate({'amountMoney': '7', 'batchId': '65160991051014222151459866622871', 'bizNo': 'IHRcLxfV50vKYiwCFsntabuGU8S1qWg6', 'operateType': 'DEDUCT', 'requestId': '02950019033833052552422498214480', 'source': 'test', 'ssoid': '2076075925', 'timeStamp': 1615363493832})
2021-03-10 16:04:53,876-DEBUG-lib.common.session.dubbo.dubbo-55-{"data":null,"success":false,"errorDetail":"可币余额不足","resCode":"100004","resMsg":"调用失败"}

2021-03-10 16:04:53,876-INFO-lib.common.session.dubbo.dubbo-57-dubbo回参：{'data': None, 'success': False, 'errorDetail': '可币余额不足', 'resCode': '100004', 'resMsg': '调用失败'}
2021-03-10 16:04:53,886-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 16:04:53,886-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "43231168669473"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "dkE1Nbu0YJpACIl328KL5qQxOZ6FwUhz"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 16:04:53,957-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "4fd5ee575f0541599c63d49c4a031499"
s_p: "VXVRYnA1UnlOQU1xT3I0d0VlWlh1RjVUWE5jaXZhSnNPangzQ2IzWHhkdXpRS3BBQU5LUUcxcHU3dzJWZnBlT1ZxOFZhWkFxNVV0Rlk3SnA0eVFBNUFpR2g5ekdQT0NyeEpuZ1VpUDA3S29NWlluQzJud1AycmlYNGU0cFMzanZiVlg2Q0ZoNndzTTQ0U3JDVmd4YloxMm9VOXpvbU91Wm53TDVtenFiVE02Z3dEc1FhYms0RUQ4b2F0QkZKdHBlZnBlelhibGxBZERsb0RkT0JNRnlPcjRzaHRPVXhLVndDYXJTNU1yWlA5TXZaTm92MDNqTlA5enJkbW5RV1V6cDdOckJnWG1XS0pZclU1UWlxRzNFQWZkclFKaWRRS1hBMWc3ZVBMdjRqeTRINnhBQlVmTVY0NDV6TkV1WFJ2dDFROHBudTdVQTZRdnBaSTJYVXFLQ0VuNDY3YUJqUXJ0Qk15OE9iZFY0NkJQNHRLQUlaTGRUUXJXRHlhRVdtY0pyUlo4MzY5OExrbFEwVFZRM3VuMDRBYzZGbk9HVXlTdHBWZlFwaldSRGttcmtoT0EwNVB0a0F3ZldYdDJXOVd2NG13aFNBTWNoTzlLWlJIaHhDWkF2dURGeGNTdGlNMzBHRnRNa0JlejBTVjdrd1VhQk1TYm5sSGt0NjE4V3BjbkhRdUJOdFdDdWd2eXFlZWhtU2NvZWpCRTlFaG12NDlZeG9adlRKTVRJS2pFYmZmdmRNQXFXNURkaU5kZXJHb3lJZUt6MHNlTXQ3d2JlUVZYbXg3aGVOSDJVcnoxT3VOQ1B3bGlpMXEzaWVIaHJhUHJPdzJMdUprRW9aMHRDNmQwTVRNeDRQbFdBTjgxZVZMV1U5MlhDbTJYTnVaRG5nQ044VDFuTVV5Rnp5U1FCcjlpSTB4a09mTVl1cXkxekJvclFXSVhRYmJyZ0VPZFpWQjd0RUhFWWtzVUd2VTRhUllNbmdaaVBPczQ3eVBkT0txeDRRaHFkWEt6b3NlSVRPd08wZGtUcGZCVjJ0Zmp2RzZ0R3F3a2NwUjZuZWdHNDVjbno="
m_p: "azWQ5e48eG05qMe93UAV5sF5PW887M9mvqiSKmp3VN4Q011fjy81jB43AJvX3GxD"
e_t: "1615471497653"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0.07"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 1001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199706
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199705
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199704
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199703
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199702
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199692
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099683
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099682
    type: 2
    minCousume: 1300
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 11
}
userinfo {
  username: "156******06"
}

2021-03-10 16:04:53,979-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 16:04:53,979-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "12.0"
  t_p: "4fd5ee575f0541599c63d49c4a031499"
  imei: ""
  model: "PDCM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "zGPOCrxJ"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: ""
  brandType: "OPPO"
  mobileos: "16"
  androidVersion: "29"
}
type: "wxpay"
amount: "0.01"
cardno: ""
cardpwd: ""
ext: ""
basepay {
  channelId: ""
  notifyurl: "http://pay.pay-test.wanyol.com/notify/receiver"
  productName: "RECHARGE_SPEND"
  productDesc: "RECHARGE_SPEND "
  partnercode: "2031"
  appversion: "208006"
  currencyName: "CNY"
  rate: 1.0
  partnerorder: "YFO4a5KeChAWU8kTLjNp31my0SxG7gtc"
}
sign: "eJ1an8nPNPzHaDI1kmwagtNMHyRKQAvwJMqeFvAcUQFrB74EBx5zgnB0PkNel+YiLIaCgP8T784jb9axQFz2OzjqOjcLvJB0I/Sy4nFsG+wyExdg3CciboSCzWpzQ7FVvfD/H9cJjaqEShmUZ6+6tR6vIpJTjsUUZL1smH6p33ZbYC6MhqBjTOuZFqz7hROb9+Mp6AZLXOa5la45c7nFXYn2M7FVNEJ4YBkdPNBPTEoHUT3rw8Yq2xfhDqkgXYwxRbnb2EhtQlcYpEqWUgTyEsBXGlPwjww/ROe/ofkJ0hiesZ1kINw0EIzk7bmXqIMVsJNfQfuAj9qyVaO8Cl+7kQ=="
ip: "183.238.170.71"
expendRequest {
  header {
    version: "12.0"
    t_p: "4fd5ee575f0541599c63d49c4a031499"
    imei: ""
    model: "PDCM00"
    apntype: "1"
    package: "com.example.pay_demo"
    r_v: "zGPOCrxJ"
    ext: ""
    sdkVer: 260
    country: "CN"
    currency: "CNY"
    openId: ""
    brandType: "OPPO"
    mobileos: "16"
    androidVersion: "29"
  }
  price: 1
  count: 1
  productname: "RECHARGE_SPEND_PRICE=AMOUNT"
  productdesc: "RECHARGE_SPEND_PRICE=AMOUNT"
  partnerid: "2031"
  callBackUrl: "http://pay.pay-test.wanyol.com/notify/receiver"
  partnerOrder: "YFO4a5KeChAWU8kTLjNp31my0SxG7gtc"
  channelId: ""
  ver: "208006"
  source: "auto_test"
  attach: ""
  sign: "NVS0GQBO7HxSLZg4QONw4MyAu1cqWHzfDiAlxhu3/wrMyGEiecw14wGuFFBXFXHtld7we8qaJL+rQv3egtou/uEwNSphgeDIOxOVIGBdXzZumNIcODjoROxC4VAccsx/hFxZobjeT9J4O219zJYcWs+g145IUUy0vXxy+H+gER8="
  factor: ""
}
isNeedExpend: "1"
appId: ""
payTypeRMBType: "0"
tradeType: "common"
screenInfo: "FULL"

2021-03-10 16:04:54,431-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "{\"appid\":\"wx93eea96ecc33f168\",\"noncestr\":\"71d4b3729b3d4194ace50d04b86a1811\",\"packageNm\":\"Sign=WXPay\",\"partnerid\":\"1259634601\",\"prepayid\":\"wx1016045808363274c51de639d432e50000\",\"sign\":\"F2E0A4907256139C9F74F0D1A54F95CB\",\"timestamp\":\"1615363498\"}"
}
payrequestid: "KB202103101604572076075925835682"
model: ""

2021-03-10 16:04:54,432-INFO-wxpay-scarlet-52-回调参数：<xml><transaction_id><![CDATA[8866804708054998575151214400]]></transaction_id>
<nonce_str><![CDATA[o5JwO0VhqtSjEBP1GsHaN6vLI74yrZcu]]></nonce_str>
<bank_type><![CDATA[OTHERS]]></bank_type>
<openid><![CDATA[oCg6Xt8NvRi7jGuap_5B6XdY4oYk]]></openid>
<sign><![CDATA[C38A2450E3C9BB74F50F8E89A408B38E]]></sign>
<fee_type><![CDATA[CNY]]></fee_type>
<mch_id><![CDATA[1259634601]]></mch_id>
<cash_fee><![CDATA[1]]></cash_fee>
<out_trade_no><![CDATA[KB202103101604572076075925835682]]></out_trade_no>
<appid><![CDATA[wx93eea96ecc33f168]]></appid>
<total_fee>1</total_fee>
<trade_type><![CDATA[APP]]></trade_type>
<result_code><![CDATA[SUCCESS]]></result_code>
<attach><![CDATA[TEST]]></attach>
<time_end><![CDATA[20210310160454]]></time_end>
<is_subscribe><![CDATA[N]]></is_subscribe>
<return_code><![CDATA[SUCCESS]]></return_code>
</xml>
2021-03-10 16:04:54,542-INFO-wxpay-scarlet-56-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-03-10 16:04:54,542-INFO-wxpay-scarlet-58-回调解析成功
2021-03-10 16:04:54,552-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 16:04:54,552-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "31726665484312"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "dJCRxwDI2svThcng4ulkeiLAWMYKpmPS"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 16:04:54,623-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "b3c75c5ebfaf42d282b6898ca822488e"
s_p: "M3J6bkxtNmVDSTE1S0U1Z1E5TUtQWlhMYVBOY1BSUEZCQnlBMTU5NnJGS3NsN3ZKSHpDWVZIZXZMV2pYQ0RBZmREVFBFSlRPQ0pqa2Q4eGZNYzFyemtQclY4WnROZExWUEpMc0pJZktGQ0kyTHlzYjdhaE03T3RzRVVlZFE5OGN3WEswRWhLZkRCelBqSUFuZW9XbHVzMUthZzRlUk5wNk5lSHVQSFp0Rndxbm9DMlpnRXRsbmZnc05JdHJUbTdmQ2VzWm40Z3FYcFNWSm9RSndpR25xR0R2V2Nwblp4cXB1RDZXV2g0QWpIRFlaeGxUMDhhYVNxUE1BZVZ5bFA0UXo1TE54dmhCaTgwWTVrVGdpd3lQc2pwNDlyYlY5eGNsemFjdGZJNEhjaXpnNlcxaXlSd2J5M2tseGhNNUpOdmVaTVI3Y1JsNThUN2MzSUhZVjUycUVybjRGSkNGVkdsRE5WRUl4YmI5bXBFZjFlNlgwT1dmNWdESm9EaW1mUko4RWNwSWNXenJ3TGRGb3ZFbUhyMDM0Tk5jeTdZODYwSHJ5Q08yOGpjSDdpYjFjWTZaV0VvRzFCcEZGT0c4Sk1FeFo0N0tZWkd6MkNxT0Z6eDM5ZWdnNmtjZUY0b0o0WXhTRW9vT3V6SGs5VnNPVURZaXBUOGtlRmFRZFRlZ053cFVld3Jva1RzbzJkVFFRWldNblZjdzBuTW5tMW80VWdTTnJXZXVwYXF6U0s5bDhEUVpSbHZsdGswSGVCRVJwcEh0dktrNVNMNXhiSHFJbk1WdzI1VWVCR2RZRDFhS1l6aEo5WmtocDgzRzJMVTh6dHloT041V3E2ZlBteFN2bU94UmgxQ2xub2JqNWJkZHFBSVpkdmh1bGNnOHJLdWVPV3g5dks3WWJINGtHSjdnY2lOc2VaMU9KUXZpYTBPTG1aclg2MWhydnVKNW1ORmltV1VhSlNCdkhBNTI1SEtZNjBhVHBVNllCSzhJM0w2dUpBYmlESkcycnVOakt5QjRiVkQ1Q2VoMktFd0xNd0lGdXhOcUF5bTF4d0E0ZEY1UDJLdlk="
m_p: "68iqA2We3X6NP0N0jt7fzAsoeDFz8176vnQIxnzxG2vkN4G96P37496TCg8N7V6O"
e_t: "1615471498316"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0.07"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 1001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199706
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199705
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199704
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199703
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199702
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199692
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099683
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099682
    type: 2
    minCousume: 1300
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 11
}
userinfo {
  username: "156******06"
}

2021-03-10 16:04:54,623-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 16:04:54,623-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "5.0"
  t_p: "b3c75c5ebfaf42d282b6898ca822488e"
  imei: ""
  model: "PBDM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "DBzPjIAn"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
payrequestid: "KB202103101604572076075925835682"
version: "260"
queryType: "PAY"

2021-03-10 16:04:54,671-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "2002"
  msg: ""
}
successStatus: "1086"
origAmount: "0.01"

2021-03-10 16:04:54,672-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT app_key FROM `db_platform_gateway`.`server_app_info` WHERE app_id = '100002'
2021-03-10 16:04:54,675-INFO-lib.common_biz.find_key-96-查询到秘钥信息：BB36C34EB6644AB9694315AF7D68E629
2021-03-10 16:04:54,675-INFO-lib.common.session.http.http_json-38-http://pay-gateway.pay-test.wanyol.com/gateway/nearme.account.query
2021-03-10 16:04:54,675-INFO-lib.common.session.http.http_json-39-传入的参数：{'app_id': '100002', 'service': 'nearme.account.query', 'format': 'JSON', 'charset': 'UTF8', 'sign_type': 'MD5', 'sign': '8E8F6A6CE44F98990E8122B71B2642D2', 'timestamp': '2021-03-10 16:04:54', 'version': '1.0', 'bizContent': "{'ssoid': '2076075925'}"}
2021-03-10 16:04:54,694-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'data': {'ssoid': '2076075925', 'timeStamp': 1615363498420, 'useableBalance': 7, 'totalGiveBalance': 0, 'createTime': 1612151249000, 'chargeBalance': 7, 'freezeBalance': 0, 'giveBalance': 0}, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功', 'success': True}
2021-03-10 16:04:54,694-INFO-recharge_spend-56-可币余额异常
2021-03-10 16:06:07,249-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.52.44.235', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-03-10 16:06:07,533-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-03-10 16:06:07,601-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]成功
2021-03-10 16:06:07,602-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]
2021-03-10 16:06:07,845-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]成功
2021-03-10 16:06:07,845-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]
2021-03-10 16:06:07,871-INFO-lib.common.db_operation.mysql_operation-118-成功连接到测试专用环境-MYSQL：{'host': '10.52.54.122', 'user': 'opay', 'pwd': '_UI7xHubrhTPIP1J_T4so7SU7ATCrUzm7cAh6TdBLLHWUSQUQqD8p45xVQzV3Czi', 'port': '33066'}
2021-03-10 16:06:07,872-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `test_account`.`account_test_env`
2021-03-10 16:06:07,885-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=0
2021-03-10 16:06:07,888-INFO-lib.common_biz.find_merchant_info-28-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601'}
2021-03-10 16:06:07,889-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-03-10 16:06:07,892-INFO-lib.common_biz.find_key-109-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-03-10 16:06:07,893-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no, plan_id FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=1
2021-03-10 16:06:07,896-INFO-lib.common_biz.find_merchant_info-41-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601', 'plan_id': '120877'}
2021-03-10 16:06:07,897-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-03-10 16:06:07,899-INFO-lib.common_biz.find_key-109-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-03-10 16:06:08,259-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT app_key FROM `db_platform_gateway`.`server_app_info` WHERE app_id = '100002'
2021-03-10 16:06:08,262-INFO-lib.common_biz.find_key-96-查询到秘钥信息：BB36C34EB6644AB9694315AF7D68E629
2021-03-10 16:06:08,263-INFO-lib.common.session.http.http_json-38-http://pay-gateway.pay-test.wanyol.com/gateway/nearme.account.query
2021-03-10 16:06:08,263-INFO-lib.common.session.http.http_json-39-传入的参数：{'app_id': '100002', 'service': 'nearme.account.query', 'format': 'JSON', 'charset': 'UTF8', 'sign_type': 'MD5', 'sign': '1D92E128A706062F8E8B39879D20F691', 'timestamp': '2021-03-10 16:06:08', 'version': '1.0', 'bizContent': "{'ssoid': '2076075925'}"}
2021-03-10 16:06:08,309-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'data': {'ssoid': '2076075925', 'timeStamp': 1615363572029, 'useableBalance': 7, 'totalGiveBalance': 0, 'createTime': 1612151249000, 'chargeBalance': 7, 'freezeBalance': 0, 'giveBalance': 0}, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功', 'success': True}
2021-03-10 16:06:08,328-INFO-lib.common.session.dubbo.dubbo-51-dubbo invoke语句：invoke NearmeAccountOperate.addSubtractOperate({'amountMoney': '7', 'batchId': '20076823273291909235977743565272', 'bizNo': 'qRmdIbXpl2FjDrt7WuocMYCETVx4Bk35', 'operateType': 'DEDUCT', 'requestId': '10008233465679703990891208916525', 'source': 'test', 'ssoid': '2076075925', 'timeStamp': 1615363568323})
2021-03-10 16:06:08,350-DEBUG-lib.common.session.dubbo.dubbo-55-{"data":null,"success":false,"errorDetail":"可币余额不足","resCode":"100004","resMsg":"调用失败"}

2021-03-10 16:06:08,350-INFO-lib.common.session.dubbo.dubbo-57-dubbo回参：{'data': None, 'success': False, 'errorDetail': '可币余额不足', 'resCode': '100004', 'resMsg': '调用失败'}
2021-03-10 16:06:08,361-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 16:06:08,361-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "76486887477827"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "jVRTzZlpxPIFnBiX0YbC6LGM8u5wy72e"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 16:06:08,435-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "5f7ef6983ca34a6f8427335fccdce217"
s_p: "aGM3ZWZrRjlCZnRLTHU3UTIzV1QzNVdTQTZQNm9lOUFIZzcwZlg3NFJFanViRmRBSUFoclZQd1F2RDlOcFpiSk1YSEtDTlJlVmszRXhiMHlyVWg1MmliOXprMjJQendvQ01IMkFDeHpvN1JVVnRxbjR3a1dhQ0pHNGdpZUN2bXZnaHV1WjRNNlJ1VUF4Q2JzaXB1VWZYSUczQmJZZ0NkdmNzdmQ4ZGg1Zk5yNDdRRzZVcFJZdEZTbllzZm5ObXFidEhXU1IxQXE1WVFpbkFBZjVTcExjTlh1SW54TEhjR2E3QTdjM1ZtcnFEMW5MbDV3ZTF4elJ3SWVuZ2hBU0lpOXp5cmV5elRWcG9ycXhkTjZPd0RxS29vTzdjRzRFTUdJbTF3TDRzSnpCS1dyMzFudFFMWkJxcFpGQnpwS0pKbTFodTJDdURlRVJmUUJkMUVpRHNKZ3RJSDFYN1hXODRqN3FhUzhPRDRnN1JTYnBGQTZ2WmVySXZ4bTFpWGljSEtaSkdaelA5MXdLME1lb0FLV2xXdmd0MmlkYXM4SEh6aGNENHZ0bzV3eG9FNFFHekQ4NWg0ekRyVkp4em1QdXZ3djlWZWZkb3lmODM0NTZXbFFJWEt6VjVTQnlEbFNWU2ZTeVAxeHQ5YTNxRFF2QTdrQnNlMVVsMjlPZHRjTnRkb2t0ZGdQVHdxa0ZoY3BiMnBQZzA5NHJmZkt0eGFNMEx0Q1E0U1FyWWVKRTdkRHJhTHcxZzlTdG5MYmVOeHBEMGpzN2c1NlRwNm9rejk3Vm1jaWdoaXJseEprT1NkUktUWnNoVzNGRmU1UFZBNjI4YUZjODN1OUZUNDlRN29RM29ITmdaUHFISkpPTk1ydW00RkhRSGRibDZpTW9VRklBcnJKN2JVUnNvMFkxN20zaFpjb2R6cWVuOEd6Vjh6UkZ1SENpNFdFM2Vpck9SREtsNXNSR0lUZmpEclBqdGU0MmZQR3F2dGtJOXNSODZrUk11MDl1YXlRS2ltYnhlS2xKVkpCcDdzSldxVU5OZ1BlcXpaVHc0aXhzQ1NxTjFvY20yMEw="
m_p: "8eM93ifuY061HS3wgqN67XYScu99h9Xml66n5au3KG4uS9zfZ937izp57nq1k410"
e_t: "1615471572126"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0.07"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 1001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199706
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199705
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199704
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199703
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199702
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199692
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099683
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099682
    type: 2
    minCousume: 1300
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 11
}
userinfo {
  username: "156******06"
}

2021-03-10 16:06:08,456-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 16:06:08,456-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "12.0"
  t_p: "5f7ef6983ca34a6f8427335fccdce217"
  imei: ""
  model: "PDCM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "vD9NpZbJ"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: ""
  brandType: "OPPO"
  mobileos: "16"
  androidVersion: "29"
}
type: "wxpay"
amount: "0.01"
cardno: ""
cardpwd: ""
ext: ""
basepay {
  channelId: ""
  notifyurl: "http://pay.pay-test.wanyol.com/notify/receiver"
  productName: "RECHARGE_SPEND"
  productDesc: "RECHARGE_SPEND "
  partnercode: "2031"
  appversion: "208006"
  currencyName: "CNY"
  rate: 1.0
  partnerorder: "jurpsDxm2ei74Hf1vVlUWc8Yb5QoyGNF"
}
sign: "c4ge0ItEi9oYUBefIUgFC3Z7c16UrKXpn26JiS4Ik8dXX+neLDEiDY0nS2ng55f6rSd1N5Xt8bmZIs7+UbqCmZlnvChBcwCOzHwRQDfmjChjI7aLiF34AOgowv0D87CFpujR4qGZ6Ee7XXU23OuUHy4uEhLOcHNhoPWU53IkZnww3gfr2gGBHoPIr14+bjUa4/K7dh3EBHa9jQ6Ae5IB1/sGD44qu7Fyk35Rp8Gl77u0JiRMe6wjVhSZ5bEPyzKV/rEMMClvhUYf/jk6l/Xh2KKbKPO4oIxDL+VY1VJZIn/v19e+70yuvp88bZXOjRVmWzcJDYrqJ7LsxfrUbbbf4w=="
ip: "183.238.170.71"
expendRequest {
  header {
    version: "12.0"
    t_p: "5f7ef6983ca34a6f8427335fccdce217"
    imei: ""
    model: "PDCM00"
    apntype: "1"
    package: "com.example.pay_demo"
    r_v: "vD9NpZbJ"
    ext: ""
    sdkVer: 260
    country: "CN"
    currency: "CNY"
    openId: ""
    brandType: "OPPO"
    mobileos: "16"
    androidVersion: "29"
  }
  price: 1
  count: 1
  productname: "RECHARGE_SPEND_PRICE=AMOUNT"
  productdesc: "RECHARGE_SPEND_PRICE=AMOUNT"
  partnerid: "2031"
  callBackUrl: "http://pay.pay-test.wanyol.com/notify/receiver"
  partnerOrder: "jurpsDxm2ei74Hf1vVlUWc8Yb5QoyGNF"
  channelId: ""
  ver: "208006"
  source: "auto_test"
  attach: ""
  sign: "BnNaxy+TpIfMOn+2cbxDX9ftl8Um5e/J8KB1jrKOh1m4xoaWbB92MLXUAwUlExDBwiKZSJygb9r1jlMEFodwrsfQ+kOkOsO9+/4p6ma5YCxU6U9thhBkRyyAcw3dkAOq8RanK0Q3o1lcJPexmxcRNTagt3k7JmHSvzAoFy93WqA="
  factor: ""
}
isNeedExpend: "1"
appId: ""
payTypeRMBType: "0"
tradeType: "common"
screenInfo: "FULL"

2021-03-10 16:06:08,864-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "{\"appid\":\"wx93eea96ecc33f168\",\"noncestr\":\"d038e16bfb6e461587a44aac80637420\",\"packageNm\":\"Sign=WXPay\",\"partnerid\":\"1259634601\",\"prepayid\":\"wx10160612522864d6331ce68e8516410000\",\"sign\":\"0B2508DE1ED553B1780CCE432186390B\",\"timestamp\":\"1615363572\"}"
}
payrequestid: "KB202103101606122076075925501232"
model: ""

2021-03-10 16:06:08,864-INFO-wxpay-scarlet-52-回调参数：<xml><transaction_id><![CDATA[5038867596863964063162579754]]></transaction_id>
<nonce_str><![CDATA[QzMHkLftxV49OEe2oGy0w6KmIJNSF1Ps]]></nonce_str>
<bank_type><![CDATA[OTHERS]]></bank_type>
<openid><![CDATA[oCg6Xt8NvRi7jGuap_5B6XdY4oYk]]></openid>
<sign><![CDATA[473FB7CA8110C92EFB6BD5628028F587]]></sign>
<fee_type><![CDATA[CNY]]></fee_type>
<mch_id><![CDATA[1259634601]]></mch_id>
<cash_fee><![CDATA[1]]></cash_fee>
<out_trade_no><![CDATA[KB202103101606122076075925501232]]></out_trade_no>
<appid><![CDATA[wx93eea96ecc33f168]]></appid>
<total_fee>1</total_fee>
<trade_type><![CDATA[APP]]></trade_type>
<result_code><![CDATA[SUCCESS]]></result_code>
<attach><![CDATA[TEST]]></attach>
<time_end><![CDATA[20210310160608]]></time_end>
<is_subscribe><![CDATA[N]]></is_subscribe>
<return_code><![CDATA[SUCCESS]]></return_code>
</xml>
2021-03-10 16:06:08,971-INFO-wxpay-scarlet-56-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-03-10 16:06:08,971-INFO-wxpay-scarlet-58-回调解析成功
2021-03-10 16:06:08,981-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 16:06:08,981-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "09761219262731"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "Vc7fNKqZ4JIhUBDyL2T5aklOie0Cdr9Q"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 16:06:09,048-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "b1ebb8577f084de980ee51d3bbc0e431"
s_p: "bTkycW5BOWRnZmpiNjBMeUJPVURhNGlDZmpLNVNxeUVXMlFhcDNNeTNFTFprT01SRXBmdUd3M2NPOWNrUXNja0EyNUsxNWlVR0M5blR1SU0zS1NCaDAyMFlXQ0pUdzV6ZkJPZGZtM2lmRzJPdEF6ck9JdUlwZnJRMkt0dFpqV25IYkZvSmY2R3gzNGUwZHoyUk9JVUlSWmxHWW0xQ1gxc0ZGUG1obFZqOVhTejJ5UGxYd0lybGlPUUxhQnVRaU9FeTh4UU1ZbTRCSXBTTjFPZ1lUZlVhMldCeXFKbDZ4SzU4RVJuWWlaSGFMVkZ6dUdubHNRZ2pEZ0p3ZFRYU0YxU291YWo1Z3dSdm5yYWIySnViTmJjNkxXS0dTUlRva1BNQjlOckgySU81VzBldlpwYVFrRGJaZm1MQ3M2Uldvb0hHUnVScXhhRnRIZ01mZHNkTHc5MlE3R2dOaXQ4OFlud3FTVWV6bFlFbWlNdkE1VmlEQ2Y4QW5YRUVaMjhma2llcHJVMjB1NFd0NlIwZWlYenhCNldUYnBiOGNpZDgyZGxvcmVJRFVnMTRzYkFwdUExRU5iejdBT0xVZUtvM1l2dUJvdHVtTmNYRXF6Y1BYbWVoSUhtR3hKY05oT0x6UUdoRUtFMG5nWktTTU9jZU1aTHpqeXFvQzBnZzhWRzFpQW1ZNmxWaWd6Z1ZkRTF1bEIxNk5mSGlZWjlWOGNjYnd3MWF6VGZpUzBkY1FRVGIybHFSQ2xndzVaTGRkZVNtS3V5U0lCc2RvbDlYN2R2OHloa2xhR0hDckdBSlh0SlBZV25sMVFqUjFxMFBQUHJscVJucXVmRE12eThkRHE2S0k5MEdjYlhMTGtOM3psTWtNRWp4VFMwTWRrVzZjWWFiSzdCTVNpNktnRDBBamVxQkNzZzZ1c1R5S2t1aHhkaVI5QXcybTVPdWJENFB6ckNnalpHSHg2UEZsZXAzQWNJVHBSZnJCRHU4eEt2cW9GNm9GTUN1VVBUdEJpekx6R2o1b2l3SmRYMFd5QzhDMzR6ZFpudlo4WTNTcjVCMGJ2UEVMcFI="
m_p: "keKosi85jfK8455TBvc9eq9PURyt0628d1P76nm6W6HsPSkeoD1e6L94qqo41JoR"
e_t: "1615471572744"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0.07"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 1001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199706
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199705
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199704
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199703
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199702
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199692
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099683
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099682
    type: 2
    minCousume: 1300
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 11
}
userinfo {
  username: "156******06"
}

2021-03-10 16:06:09,049-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 16:06:09,049-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "5.0"
  t_p: "b1ebb8577f084de980ee51d3bbc0e431"
  imei: ""
  model: "PBDM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "IUIRZlGY"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
payrequestid: "KB202103101606122076075925501232"
version: "260"
queryType: "PAY"

2021-03-10 16:06:09,092-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "2002"
  msg: ""
}
successStatus: "1086"
origAmount: "0.01"

2021-03-10 16:06:09,093-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT app_key FROM `db_platform_gateway`.`server_app_info` WHERE app_id = '100002'
2021-03-10 16:06:09,096-INFO-lib.common_biz.find_key-96-查询到秘钥信息：BB36C34EB6644AB9694315AF7D68E629
2021-03-10 16:06:09,096-INFO-lib.common.session.http.http_json-38-http://pay-gateway.pay-test.wanyol.com/gateway/nearme.account.query
2021-03-10 16:06:09,096-INFO-lib.common.session.http.http_json-39-传入的参数：{'app_id': '100002', 'service': 'nearme.account.query', 'format': 'JSON', 'charset': 'UTF8', 'sign_type': 'MD5', 'sign': '02C23ACCDC1DAA8F0CA87B41D2F1EE41', 'timestamp': '2021-03-10 16:06:09', 'version': '1.0', 'bizContent': "{'ssoid': '2076075925'}"}
2021-03-10 16:06:09,117-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'data': {'ssoid': '2076075925', 'timeStamp': 1615363572839, 'useableBalance': 7, 'totalGiveBalance': 0, 'createTime': 1612151249000, 'chargeBalance': 7, 'freezeBalance': 0, 'giveBalance': 0}, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功', 'success': True}
2021-03-10 16:06:09,118-INFO-recharge_spend-56-可币余额异常
2021-03-10 16:06:18,464-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.52.44.235', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-03-10 16:06:18,766-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-03-10 16:06:18,821-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]成功
2021-03-10 16:06:18,821-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]
2021-03-10 16:06:19,035-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]成功
2021-03-10 16:06:19,036-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]
2021-03-10 16:06:19,056-INFO-lib.common.db_operation.mysql_operation-118-成功连接到测试专用环境-MYSQL：{'host': '10.52.54.122', 'user': 'opay', 'pwd': '_UI7xHubrhTPIP1J_T4so7SU7ATCrUzm7cAh6TdBLLHWUSQUQqD8p45xVQzV3Czi', 'port': '33066'}
2021-03-10 16:06:19,056-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `test_account`.`account_test_env`
2021-03-10 16:06:19,068-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=0
2021-03-10 16:06:19,071-INFO-lib.common_biz.find_merchant_info-28-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601'}
2021-03-10 16:06:19,072-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-03-10 16:06:19,075-INFO-lib.common_biz.find_key-109-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-03-10 16:06:19,075-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no, plan_id FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=1
2021-03-10 16:06:19,078-INFO-lib.common_biz.find_merchant_info-41-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601', 'plan_id': '120877'}
2021-03-10 16:06:19,079-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-03-10 16:06:19,082-INFO-lib.common_biz.find_key-109-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-03-10 16:06:19,448-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT app_key FROM `db_platform_gateway`.`server_app_info` WHERE app_id = '100002'
2021-03-10 16:06:19,452-INFO-lib.common_biz.find_key-96-查询到秘钥信息：BB36C34EB6644AB9694315AF7D68E629
2021-03-10 16:06:19,452-INFO-lib.common.session.http.http_json-38-http://pay-gateway.pay-test.wanyol.com/gateway/nearme.account.query
2021-03-10 16:06:19,452-INFO-lib.common.session.http.http_json-39-传入的参数：{'app_id': '100002', 'service': 'nearme.account.query', 'format': 'JSON', 'charset': 'UTF8', 'sign_type': 'MD5', 'sign': '5325EA074CB0AC9887A89398AE91299C', 'timestamp': '2021-03-10 16:06:19', 'version': '1.0', 'bizContent': "{'ssoid': '2076075925'}"}
2021-03-10 16:06:19,493-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'data': {'ssoid': '2076075925', 'timeStamp': 1615363583215, 'useableBalance': 7, 'totalGiveBalance': 0, 'createTime': 1612151249000, 'chargeBalance': 7, 'freezeBalance': 0, 'giveBalance': 0}, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功', 'success': True}
2021-03-10 16:06:19,509-INFO-lib.common.session.dubbo.dubbo-51-dubbo invoke语句：invoke NearmeAccountOperate.addSubtractOperate({'amountMoney': '7', 'batchId': '43470933862202738955003717026891', 'bizNo': 'RuIqBQ8L90E4CFeZipjbrA3oH1JYznKW', 'operateType': 'DEDUCT', 'requestId': '31399161686609641266352916172107', 'source': 'test', 'ssoid': '2076075925', 'timeStamp': 1615363579507})
2021-03-10 16:06:19,525-DEBUG-lib.common.session.dubbo.dubbo-55-{"data":null,"success":false,"errorDetail":"可币余额不足","resCode":"100004","resMsg":"调用失败"}

2021-03-10 16:06:19,525-INFO-lib.common.session.dubbo.dubbo-57-dubbo回参：{'data': None, 'success': False, 'errorDetail': '可币余额不足', 'resCode': '100004', 'resMsg': '调用失败'}
2021-03-10 16:06:19,535-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 16:06:19,535-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "26465317223870"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "Zdhys4a8L5HRmen6X3g2UMfxroPOYju7"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 16:06:19,603-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "f02fd4119c6d4a3fa929bb582b03ce1a"
s_p: "R2xNRDhlcHNQWUNsdkVsQ0doM2NvWkh6Vmx1c0dwY1ZiSUxPb3FGc3huNWdvMUxHZ3NwdXI3S2VUbTdIVm5DbWVkcHpUWjRldU9IQUtuOUpBVkswZGRzWDVkZEYwTXV6cVlVZE1FcGVrZU1xWUUwSUNYSGFweW9CZ0FNU2xRZ0M2Q2lyeUhvaWMwUWlJTFRGY1UwV2VUUWw3VktMRjhsMWtQbDg5b2M0VVpkdHFoZzJDZ0h6WVVReWJkMlhGN011T05INjN3Mzc1dG1aN1VuNk5uMW1MRmhXMmt1VTJrdWpYczMwWDRUUnc2eGNJS0Q0Yk4ySkNkaUlNeXJRSWVEN2hTYVRXdlJlM1F4NTdzSTQwOTdyb1BheVRDeFFmdFRxMTJXWFVBcVVXZEN6TDhlNW5MMFg3d3BJUG0xdVhSQlN1OUNYcjdQREY1bGNsY3VIUjNONnNkNjN2Q2hCQU5WVGxqUEppaGRVaFlRcEhVaUpBY0VEOGNMM2RyV204dTNWcHFGeVFLeEVjUDJsSVFkemFPNmxWOGhSS2hkTDh6WkZST1Z1dGx5cGl3MGgwaE5LWmZqVWh6cWdHV0FmWHJKck1OM0ZVRlhGVEJvdTFiM1ZlODR2RENuSkxoNUxIUzZ2UmF0a29ldm9MSm1OVjZoOG02bVJxRU9sUXlHYTZPQVBGQ3UzTmpkTE9BV29zZElyeE1OZEFQalFMVGhCWlczcGVLRUhEelFjZmdrU2FCVDkxRTFRNnRQdng0U0dGR0tzUENHazV0V0tpbXVLbVlGMlhqbWNCVUo4Sm9seTE0QjRrck1hRWJ3eDNhT0o1Sk5iMUpLMmhrNFpmZHF0dklkakRFQW04aW9sajRYbXJiQTU5TDdFNFFiS1hoM3hIVjBkTEp5QzZqV1RtQndyQ3VGYkRCQnF0ZEFqWEhoWDRTZGkzMFNaQk9wT0dQckw2bjVLM0ZzeWpNOVRNMWhnUk9NeUg2UWp6ZVhjSktQdlZOdllocVdLUTFIRzB5Ymt1cGVmVEZSUmlxYW1Gbng4VmZER1NveHRMdlBZVzJDMmZnQ2c="
m_p: "jALYdz18kpvmm2vrKY9zOv79DlLERdK7855q0sT95g7F5w315v2s7daEV7411637"
e_t: "1615471583298"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0.07"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 1001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199706
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199705
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199704
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199703
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199702
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199692
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099683
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099682
    type: 2
    minCousume: 1300
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 11
}
userinfo {
  username: "156******06"
}

2021-03-10 16:06:19,628-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 16:06:19,628-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "12.0"
  t_p: "f02fd4119c6d4a3fa929bb582b03ce1a"
  imei: ""
  model: "PDCM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "ddsX5ddF"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: ""
  brandType: "OPPO"
  mobileos: "16"
  androidVersion: "29"
}
type: "wxpay"
amount: "0.01"
cardno: ""
cardpwd: ""
ext: ""
basepay {
  channelId: ""
  notifyurl: "http://pay.pay-test.wanyol.com/notify/receiver"
  productName: "RECHARGE_SPEND"
  productDesc: "RECHARGE_SPEND "
  partnercode: "2031"
  appversion: "208006"
  currencyName: "CNY"
  rate: 1.0
  partnerorder: "gWKLSp2yZoVqsXiJafj8dc9ktAwGDxzY"
}
sign: "Paujb7QE+CGRgxZMCzBuUErqaoz73RjRf1Mqiz8wP5C4Oum7KPqqbbZ1WUkrfb6ohnasGSFJYCSQiH21CiKRSjumj29iIv0U41axg72MbIZNpWUgxuK60AT9KSqsAO5Hb172kI7ojx7Gq9EBN2KvggxnULNFUYr239pT63knmEzLes3K0V7L1+SpC/yndr0k8NUaLjiAEfCEewc9JsX2MQNyZcfMUz9r4RIKfM/rba79MfWu4RV1Y0MOAZM5++huY+XaVib5DZMlypxKlqKq7PBIo+rrLNfrk59NqelqFR+UVVJiXZO4ZEWHevZqR/wE1CbnZ1/cKW4aTP9VnrA11A=="
ip: "183.238.170.71"
expendRequest {
  header {
    version: "12.0"
    t_p: "f02fd4119c6d4a3fa929bb582b03ce1a"
    imei: ""
    model: "PDCM00"
    apntype: "1"
    package: "com.example.pay_demo"
    r_v: "ddsX5ddF"
    ext: ""
    sdkVer: 260
    country: "CN"
    currency: "CNY"
    openId: ""
    brandType: "OPPO"
    mobileos: "16"
    androidVersion: "29"
  }
  price: 1
  count: 1
  productname: "RECHARGE_SPEND_PRICE=AMOUNT"
  productdesc: "RECHARGE_SPEND_PRICE=AMOUNT"
  partnerid: "2031"
  callBackUrl: "http://pay.pay-test.wanyol.com/notify/receiver"
  partnerOrder: "gWKLSp2yZoVqsXiJafj8dc9ktAwGDxzY"
  channelId: ""
  ver: "208006"
  source: "auto_test"
  attach: ""
  sign: "Gg7+sGnaN8FNCvuKAgijpid9VuGha88BoPZ0JnW1SAJcPaPUaA8YBeyt25vGBp12WM/B90dNpRMK8FwMQ9TAY8BykMz/D0/S2VHiKcRAXjiKRXbV6H2s4tg7I5QBQ4gYnhSxVxlf9+j0PzfBZy21aowbb2JFkzdyRXCxXdSFGn0="
  factor: ""
}
isNeedExpend: "1"
appId: ""
payTypeRMBType: "0"
tradeType: "common"
screenInfo: "FULL"

2021-03-10 16:06:20,002-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "{\"appid\":\"wx93eea96ecc33f168\",\"noncestr\":\"abba4fc16063406a9b4fa04c2191554e\",\"packageNm\":\"Sign=WXPay\",\"partnerid\":\"1259634601\",\"prepayid\":\"wx10160623671685c41406e3431d61440000\",\"sign\":\"745FBE1815CD064059D380FE19BDCB87\",\"timestamp\":\"1615363583\"}"
}
payrequestid: "KB202103101606232076075925688312"
model: ""

2021-03-10 16:06:20,003-INFO-wxpay-scarlet-52-回调参数：<xml><transaction_id><![CDATA[9962068112808220849200406226]]></transaction_id>
<nonce_str><![CDATA[Fxgs42VCKoDwvTmPR8lA3OBdIhYJb1qE]]></nonce_str>
<bank_type><![CDATA[OTHERS]]></bank_type>
<openid><![CDATA[oCg6Xt8NvRi7jGuap_5B6XdY4oYk]]></openid>
<sign><![CDATA[2D9A95623F12E6B5AF81A47026216452]]></sign>
<fee_type><![CDATA[CNY]]></fee_type>
<mch_id><![CDATA[1259634601]]></mch_id>
<cash_fee><![CDATA[1]]></cash_fee>
<out_trade_no><![CDATA[KB202103101606232076075925688312]]></out_trade_no>
<appid><![CDATA[wx93eea96ecc33f168]]></appid>
<total_fee>1</total_fee>
<trade_type><![CDATA[APP]]></trade_type>
<result_code><![CDATA[SUCCESS]]></result_code>
<attach><![CDATA[TEST]]></attach>
<time_end><![CDATA[20210310160620]]></time_end>
<is_subscribe><![CDATA[N]]></is_subscribe>
<return_code><![CDATA[SUCCESS]]></return_code>
</xml>
2021-03-10 16:06:20,107-INFO-wxpay-scarlet-56-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-03-10 16:06:20,108-INFO-wxpay-scarlet-58-回调解析成功
2021-03-10 16:06:20,118-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 16:06:20,118-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "81660875247291"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "KatFqCSrWnm7QLdg3vs6zR4bf9jDTNJ8"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 16:06:20,195-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "eb439c2472444aadaa07713ddf2f9d70"
s_p: "b0Z0UUdjRzJ2ZjNRaEZNN0pBQ3ZFdzRBMVFiNExLTzZYNDZ4bGp6dFE1aWNmUTI4ZnlNQmNEMExNWTZqMkVuYU5XeFdyRHZFMUVTNDlHNElTN25JZDdISTFjNkRNUldjSmZUVUhvTDBDbmszS2c1VzgzczJGTzJ4T3dvbFBsQnBIWmd6REhqbE9OSjFEQzhnNnpocFhJdTBmWWJINDNUMllhQVhzWXVBUHZRNTVtYnBhdklCWGZRYTlwVTZJT1ZNeWk0V3RSWHI5NGZmR0RuYmdCcnFPU0lkb1FiS3pCN2NMcTg2NlQwdkd6bmhEVWJWSzY5WXZLcVZDSE0wZ2l1bDJHV1RHbFVsRWdya3pCQzJGcjdydDR5RFZTbFBkejdqZDhpSmkwYzJGcnJJY1hkWnpxWTV6aWdtR0lkZEdESFJ3aGdzTjR6Qjl1bllIV2FCQ2hVT25XUkR6VDVHRFZwZnhVYkdHWkxWYkZKUXdKN0RFYU9RT3lhSUNWZ0dRQzMwSXhhemdBZnpORU5nM3R0QVhRZGZSWnIybkhrN2c4Wkt4NjRqR0lFMGpkQUUwd1Qxc0FQYlhTUHdlU2hIYnYwY0l3dGY2Q2NWeTVnb3BweTVCaTBhbndxTlEySEN5SUI3VWRsQlRDS05SV0FINzRFamxRVmRYMlZ0R0ZaTkVQN3NoQlNNTXVWRFFrb3ZpSnNPWHZ6T2dJTmN3NzdyeWZIbnZER0FscFJSc1F1UnAwSkthMXJNMklkRnRoSnlEdnpBYmFqcTk4Umtqam54UjNSNlhlVzRENm1Wd2VFdEp0eHNhd0Q0bTlVUWs3bkZucTFVb0tOZWxab1ZSQVM5QjRJd2VKbjJTWTJzNUVLVzJlZ3hJWDNib2NYTURMSFNXV2tPYTZwd2ttbWdWSzBJNml6ejMxS2tKNHNscmNBQkRrWmFTanhkWnlmZjlpcVNhRTBIbENFWklyRWR0ZzlDSnBUNVEzS21aQVZnWDV5bHZjdWdnNnd3QWowZ1pYSU5vNWowTFpXSkFQbHMxcDJsQ3VXVllSYWhFaHh1VFI4bVQybWs="
m_p: "dAmPZ47CsCZ3kG611BwSW0ChUEkwxfr04tzruLr922kZ8zs34B66w5IMO0YfxA1r"
e_t: "1615471583882"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0.07"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 1001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199706
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199705
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199704
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199703
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199702
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199692
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099683
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099682
    type: 2
    minCousume: 1300
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 11
}
userinfo {
  username: "156******06"
}

2021-03-10 16:06:20,195-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 16:06:20,195-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "5.0"
  t_p: "eb439c2472444aadaa07713ddf2f9d70"
  imei: ""
  model: "PBDM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "6DMRWcJf"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
payrequestid: "KB202103101606232076075925688312"
version: "260"
queryType: "PAY"

2021-03-10 16:06:20,235-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "2002"
  msg: ""
}
successStatus: "1086"
origAmount: "0.01"

2021-03-10 16:06:20,236-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT app_key FROM `db_platform_gateway`.`server_app_info` WHERE app_id = '100002'
2021-03-10 16:06:20,240-INFO-lib.common_biz.find_key-96-查询到秘钥信息：BB36C34EB6644AB9694315AF7D68E629
2021-03-10 16:06:20,240-INFO-lib.common.session.http.http_json-38-http://pay-gateway.pay-test.wanyol.com/gateway/nearme.account.query
2021-03-10 16:06:20,240-INFO-lib.common.session.http.http_json-39-传入的参数：{'app_id': '100002', 'service': 'nearme.account.query', 'format': 'JSON', 'charset': 'UTF8', 'sign_type': 'MD5', 'sign': 'A29BBDE6D46BD39C978993833DB21969', 'timestamp': '2021-03-10 16:06:20', 'version': '1.0', 'bizContent': "{'ssoid': '2076075925'}"}
2021-03-10 16:06:20,261-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'data': {'ssoid': '2076075925', 'timeStamp': 1615363583983, 'useableBalance': 7, 'totalGiveBalance': 0, 'createTime': 1612151249000, 'chargeBalance': 7, 'freezeBalance': 0, 'giveBalance': 0}, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功', 'success': True}
2021-03-10 16:06:20,261-INFO-recharge_spend-57-可币余额异常
2021-03-10 16:07:01,362-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.52.44.235', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-03-10 16:07:01,691-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-03-10 16:07:01,735-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]成功
2021-03-10 16:07:01,735-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]
2021-03-10 16:07:01,965-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]成功
2021-03-10 16:07:01,965-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]
2021-03-10 16:07:01,987-INFO-lib.common.db_operation.mysql_operation-118-成功连接到测试专用环境-MYSQL：{'host': '10.52.54.122', 'user': 'opay', 'pwd': '_UI7xHubrhTPIP1J_T4so7SU7ATCrUzm7cAh6TdBLLHWUSQUQqD8p45xVQzV3Czi', 'port': '33066'}
2021-03-10 16:07:01,987-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `test_account`.`account_test_env`
2021-03-10 16:07:01,999-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=0
2021-03-10 16:07:02,002-INFO-lib.common_biz.find_merchant_info-28-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601'}
2021-03-10 16:07:02,003-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-03-10 16:07:02,006-INFO-lib.common_biz.find_key-109-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-03-10 16:07:02,007-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no, plan_id FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=1
2021-03-10 16:07:02,010-INFO-lib.common_biz.find_merchant_info-41-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601', 'plan_id': '120877'}
2021-03-10 16:07:02,010-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-03-10 16:07:02,013-INFO-lib.common_biz.find_key-109-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-03-10 16:07:02,391-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT app_key FROM `db_platform_gateway`.`server_app_info` WHERE app_id = '100002'
2021-03-10 16:07:02,394-INFO-lib.common_biz.find_key-96-查询到秘钥信息：BB36C34EB6644AB9694315AF7D68E629
2021-03-10 16:07:02,395-INFO-lib.common.session.http.http_json-38-http://pay-gateway.pay-test.wanyol.com/gateway/nearme.account.query
2021-03-10 16:07:02,395-INFO-lib.common.session.http.http_json-39-传入的参数：{'app_id': '100002', 'service': 'nearme.account.query', 'format': 'JSON', 'charset': 'UTF8', 'sign_type': 'MD5', 'sign': '9F8CE055260C3DF0F6B3CA0AD4AB1145', 'timestamp': '2021-03-10 16:07:02', 'version': '1.0', 'bizContent': "{'ssoid': '2076075925'}"}
2021-03-10 16:07:02,434-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'data': {'ssoid': '2076075925', 'timeStamp': 1615363626155, 'useableBalance': 7, 'totalGiveBalance': 0, 'createTime': 1612151249000, 'chargeBalance': 7, 'freezeBalance': 0, 'giveBalance': 0}, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功', 'success': True}
2021-03-10 16:07:02,450-INFO-lib.common.session.dubbo.dubbo-51-dubbo invoke语句：invoke NearmeAccountOperate.addSubtractOperate({'amountMoney': '7', 'batchId': '15160168178585865351210471734165', 'bizNo': 'lzYf8EKRZ1IUeQ6aoTp47y0N3ChdgSPv', 'operateType': 'DEDUCT', 'requestId': '45359150140450709219123818505650', 'source': 'test', 'ssoid': '2076075925', 'timeStamp': 1615363622448})
2021-03-10 16:07:02,470-DEBUG-lib.common.session.dubbo.dubbo-55-{"data":null,"success":false,"errorDetail":"可币余额不足","resCode":"100004","resMsg":"调用失败"}

2021-03-10 16:07:02,470-INFO-lib.common.session.dubbo.dubbo-57-dubbo回参：{'data': None, 'success': False, 'errorDetail': '可币余额不足', 'resCode': '100004', 'resMsg': '调用失败'}
2021-03-10 16:07:02,471-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT app_key FROM `db_platform_gateway`.`server_app_info` WHERE app_id = '100002'
2021-03-10 16:07:02,474-INFO-lib.common_biz.find_key-96-查询到秘钥信息：BB36C34EB6644AB9694315AF7D68E629
2021-03-10 16:07:02,474-INFO-lib.common.session.http.http_json-38-http://pay-gateway.pay-test.wanyol.com/gateway/nearme.account.query
2021-03-10 16:07:02,474-INFO-lib.common.session.http.http_json-39-传入的参数：{'app_id': '100002', 'service': 'nearme.account.query', 'format': 'JSON', 'charset': 'UTF8', 'sign_type': 'MD5', 'sign': '9F8CE055260C3DF0F6B3CA0AD4AB1145', 'timestamp': '2021-03-10 16:07:02', 'version': '1.0', 'bizContent': "{'ssoid': '2076075925'}"}
2021-03-10 16:07:02,495-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'data': {'ssoid': '2076075925', 'timeStamp': 1615363626217, 'useableBalance': 7, 'totalGiveBalance': 0, 'createTime': 1612151249000, 'chargeBalance': 7, 'freezeBalance': 0, 'giveBalance': 0}, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功', 'success': True}
2021-03-10 16:07:02,505-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 16:07:02,505-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "41448987322258"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "VQxsbloDgaCmTIL5hXERWG06nBvqZd3z"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 16:07:02,573-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "59f968661e9940b788129e5696b0618a"
s_p: "VkFZVHZpdER3Y3U5UjkwNjlpeHNhaHV3eGxobUdxc1lkMmJRQVRKOFNHeHU5SklzVjdDajVHdlVGVGFJVFB3VUdxd1o1ZFc0T1YyM0hHbHJ0UVdmeW03ckpUSnJBNHdmRkJOcXpwbEU4ZUlSNVBOUnVmOUtoMXV6dDhsU0pOU0JJT3FHTnhrWE9tSWNhb3paT2tPN1AxaTVFY2VDVGtJcEw2VkZhOUlCSVFDMDV4Y04yd3VySzBZOUh4S3l1bngydGRaMlNpTkd3cUJvMzZJSGxLcjk1d0FiRUZGRHVVSHp1aUpDd0k5bUl6d05LVnZXelNnRDVDYnpMQ0xWdVNwT3pnSjdvNlhQT0tkZEkxSXVzd0NTbHFtWTFWaXBldjdGNnVYWmJMRWV5bXlOSTB3MW9zbDk4Q1p1ckdKd0Y5alMzYkpBeEk0aW1XTVlKT0hWNVR4ZTU4Y0ZEMEtZZk1tcXVBbG1KbWRwVDZLQlJKVnRGbVJhcnhIYUlJU2o1OGVXTHIzenBqY3hDOWlLbzVLazhkMkEySlhkcHlJMlZyU05QN21QdXU5VVBPQkJuTlJRUVdvNGdjOFUybG9uNkpGdG1KTTRTclVpZDJzSVBWeFh2UVF2WVVLY21IY3VIUnZvbDc0R0FZV0tpV1BTTFhXTjJWd3NFblJCMTNGcGJWVzI2M1BaRk4wQWxCY0xaWElHNldobDh2clZxSlFvckQ4ekhNcHprRDR2UWJjdmNEeWZOaXlEQklLclRKTzlvMGlJamFyY1lFS3ZPSDBiaWkyQ2NMNzdGSmYzZGtEOFRJRmlpaUFIQURoNHJtVVNZQmtQVEt2MlpRQTVHcXA1YmZGTExmR2VWNVlXUHU1Umc2NWhZY0swZWpINGdSTkJ6cml6T3RGdE5aMXpJSlhydjBJcVVna2o3VmxXcG1FQzJJY3lFSmlyejhVVXdpN0VtYTdHanZvQjJpRm5iYzJjQjRHMGQ3TTdIQWJNcGZTTGNHZ2VhMkJiWGhiRUE1eGNPbHpXakZGeDhpUkZwSjJQbUphODU0WEhmcE5ydWxOajR3UE0="
m_p: "Uz83EJtt867O38D5n037n2Ybk34ws35l8DYjH9uH8fr43790j412IK03m7aYn7w7"
e_t: "1615471626267"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0.07"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 1001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199706
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199705
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199704
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199703
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199702
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199692
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099683
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099682
    type: 2
    minCousume: 1300
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 11
}
userinfo {
  username: "156******06"
}

2021-03-10 16:07:02,594-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 16:07:02,594-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "12.0"
  t_p: "59f968661e9940b788129e5696b0618a"
  imei: ""
  model: "PDCM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "HGlrtQWf"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: ""
  brandType: "OPPO"
  mobileos: "16"
  androidVersion: "29"
}
type: "wxpay"
amount: "0.01"
cardno: ""
cardpwd: ""
ext: ""
basepay {
  channelId: ""
  notifyurl: "http://pay.pay-test.wanyol.com/notify/receiver"
  productName: "RECHARGE_SPEND"
  productDesc: "RECHARGE_SPEND "
  partnercode: "2031"
  appversion: "208006"
  currencyName: "CNY"
  rate: 1.0
  partnerorder: "TU8gBQ4IuecoqiN5E0PM7HLwWt1D6XnR"
}
sign: "MSfM6xUR7xDsO25O+eeawcwaYa8FDXFQLxm26tyXUwJPUz0pER8Zx7AWXrlh+iBolNU8EqU30oIlXNOtTSMHYW8soxo11VypCX0ufXT/Rkgd6RUvBRofeOEMYTwzE9N+sVV1b+w3h35qf0wsd0rJBSVT9IS1WTniloyaiLZvf+Oiqkr1cwxhlkn8lOW2BJKky+V12ejNGBBH073Le0GybuBPnUMuwkJ+jZ7BzbUNwjVRNwCL7BOGyhO1dTnuu/1ZgGmEj6GBW8/9DCKuhjCKf9T/5Ev2jRmd3ILHNGyRcdBkUwS+K6ZKE/qraHsuLMinyPN2Ouq+gUKiRguP1qLOQg=="
ip: "183.238.170.71"
expendRequest {
  header {
    version: "12.0"
    t_p: "59f968661e9940b788129e5696b0618a"
    imei: ""
    model: "PDCM00"
    apntype: "1"
    package: "com.example.pay_demo"
    r_v: "HGlrtQWf"
    ext: ""
    sdkVer: 260
    country: "CN"
    currency: "CNY"
    openId: ""
    brandType: "OPPO"
    mobileos: "16"
    androidVersion: "29"
  }
  price: 1
  count: 1
  productname: "RECHARGE_SPEND_PRICE=AMOUNT"
  productdesc: "RECHARGE_SPEND_PRICE=AMOUNT"
  partnerid: "2031"
  callBackUrl: "http://pay.pay-test.wanyol.com/notify/receiver"
  partnerOrder: "TU8gBQ4IuecoqiN5E0PM7HLwWt1D6XnR"
  channelId: ""
  ver: "208006"
  source: "auto_test"
  attach: ""
  sign: "D3sr0Zp4le2sK0+1BynAcD9IMgD68PxrFAfAgTAPmGDiHzOpKgKswFacSh2YPL8p5JpwLnR0kV0wNd20i0GLpSmmnnUwX/dnFXPRMgT7sd+1Kvyy2Pj8q1L2cHnKO2CvZremv3Q0RNsSkDlzRIfUEp+JQ1jGReY61Q8S02DHhBk="
  factor: ""
}
isNeedExpend: "1"
appId: ""
payTypeRMBType: "0"
tradeType: "common"
screenInfo: "FULL"

2021-03-10 16:07:03,026-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "{\"appid\":\"wx93eea96ecc33f168\",\"noncestr\":\"4e7902737c5546b5bac6c4f8f72385bc\",\"packageNm\":\"Sign=WXPay\",\"partnerid\":\"1259634601\",\"prepayid\":\"wx10160706684331f7b0b33232e0bfa60000\",\"sign\":\"8592EB8CDC8C26A03ABEE11C4FEDDD3B\",\"timestamp\":\"1615363626\"}"
}
payrequestid: "KB202103101607062076075925854812"
model: ""

2021-03-10 16:07:03,026-INFO-wxpay-scarlet-52-回调参数：<xml><transaction_id><![CDATA[0255833466589729426043836220]]></transaction_id>
<nonce_str><![CDATA[bIOQKVtyWni4MC8r3YAf1S5pGFawj2LE]]></nonce_str>
<bank_type><![CDATA[OTHERS]]></bank_type>
<openid><![CDATA[oCg6Xt8NvRi7jGuap_5B6XdY4oYk]]></openid>
<sign><![CDATA[10F3AE34980369637354D6D8F4AFCB73]]></sign>
<fee_type><![CDATA[CNY]]></fee_type>
<mch_id><![CDATA[1259634601]]></mch_id>
<cash_fee><![CDATA[1]]></cash_fee>
<out_trade_no><![CDATA[KB202103101607062076075925854812]]></out_trade_no>
<appid><![CDATA[wx93eea96ecc33f168]]></appid>
<total_fee>1</total_fee>
<trade_type><![CDATA[APP]]></trade_type>
<result_code><![CDATA[SUCCESS]]></result_code>
<attach><![CDATA[TEST]]></attach>
<time_end><![CDATA[20210310160703]]></time_end>
<is_subscribe><![CDATA[N]]></is_subscribe>
<return_code><![CDATA[SUCCESS]]></return_code>
</xml>
2021-03-10 16:07:03,129-INFO-wxpay-scarlet-56-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-03-10 16:07:03,129-INFO-wxpay-scarlet-58-回调解析成功
2021-03-10 16:07:03,139-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 16:07:03,139-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "02257463341263"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "IW4fMknZDoPNSxJiv8HX7QhUscVBz3rl"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 16:07:03,208-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "fb8c7049a3e94d44ba5aabd97399b744"
s_p: "RW1JN2ZXczMzMHlwSEowY2FjSFRzQ21ROGJtdmNscjZLWWtrblBTQ1pZNHIzNmNVOWFwTTFLaG11TlVBSWJTRlF1WllkVG9XMUhyaHNRNzdPb1c2YmpselcxSG9EcmxvMWkxNWVsWGMzZzU1dXhLemZyQ2tyU3NEbXZWbVJhbHZ2TWZaODAzNlVYcmFmQ3V1S1JQU3RhWGRDZmtkd3VvMHdsSEc3NjhONHdieWdwb1N6b1AxOEFTSkFod2NYYUp2aHFHNFp4cWlDZ25BeW5UeEYydFY0b1FMUHI1MjdTT0tHenVra2lEcGdyOUZabEdDYjROYUNoeFA4UFpYRjFlVGdDRmMyamtRaVhob3pDY3pyTnlxSDBpSDQ5eXcxeTN2U0ZkRjhJVUVQV293MVJOc1BFd0JsWGxxOGlWb2ZlYW9Ca1Y4QTl1bjJINHhDdWU5bUpMVmhMcmM0bFpjNlFHMGVPUmtqTTExRHJBVVNobnMwQ01YUnFYaEFKMjl4R2VLZTcyd0tsSVE4TnlZT3o5bng5bjhuTm05cmh2eEtwSlZtaDl1ZEVEa0VINktWMzY4dFVMZW9XaE1aZXpsblhNdDdubzNzdGp0bjczWFBLUG9xQzlUTlRKUkdIaUdvRG1sRzF3VTRJUHlvcHRidUJjdGFVam9CVzd3dFJONjd5d1BpcDJsWUZLZkE2RnBieXdmUHZuTnlNcng4MXdXWTZuaFpNbTdjY0lVeUwwczNZbHg2eFJ0Q1U0Zzd6RnltUkIwUm9lc2xCSEJFWG1Ob0E2VzI0aEhaUEtuQzM4bDZyQ3lWaGlQNmZNMDhvR25IV0kyRTY1UGhQeU5udzNWYUt0T240SzZkbjVjdWdSU1RiV0E3eUp5YTJyQzhJU2I2alVWOUwzejA3VW5DeEZSWXNuazJWRUVQQmlxOWdOMmtadjRnTVNYY2FOYnRKYWRBQkNnSEVaRndTcGx4aVNvdUpReW1HZE13dWFrcHJvUFFqUXRhcmNCdU4xeHJJdFNNdkcxWDlwZk9xWUFaaDFvaDFBcks4T1lTMmZFWUFleEpDcGs="
m_p: "3o9l3EMgB6jy645892shbLIIp26z4BoAX2781iCR45H13EosuEoC7g2FRK3yI684"
e_t: "1615471626898"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0.07"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 1001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199706
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199705
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199704
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199703
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199702
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199692
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099683
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099682
    type: 2
    minCousume: 1300
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 11
}
userinfo {
  username: "156******06"
}

2021-03-10 16:07:03,208-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 16:07:03,208-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "5.0"
  t_p: "fb8c7049a3e94d44ba5aabd97399b744"
  imei: ""
  model: "PBDM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "OoW6bjlz"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
payrequestid: "KB202103101607062076075925854812"
version: "260"
queryType: "PAY"

2021-03-10 16:07:03,250-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "2002"
  msg: ""
}
successStatus: "1086"
origAmount: "0.01"

2021-03-10 16:07:03,250-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT app_key FROM `db_platform_gateway`.`server_app_info` WHERE app_id = '100002'
2021-03-10 16:07:03,253-INFO-lib.common_biz.find_key-96-查询到秘钥信息：BB36C34EB6644AB9694315AF7D68E629
2021-03-10 16:07:03,254-INFO-lib.common.session.http.http_json-38-http://pay-gateway.pay-test.wanyol.com/gateway/nearme.account.query
2021-03-10 16:07:03,254-INFO-lib.common.session.http.http_json-39-传入的参数：{'app_id': '100002', 'service': 'nearme.account.query', 'format': 'JSON', 'charset': 'UTF8', 'sign_type': 'MD5', 'sign': '38865CBDE276D17936AE07D0EF69DFCF', 'timestamp': '2021-03-10 16:07:03', 'version': '1.0', 'bizContent': "{'ssoid': '2076075925'}"}
2021-03-10 16:07:03,274-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'data': {'ssoid': '2076075925', 'timeStamp': 1615363626996, 'useableBalance': 7, 'totalGiveBalance': 0, 'createTime': 1612151249000, 'chargeBalance': 7, 'freezeBalance': 0, 'giveBalance': 0}, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功', 'success': True}
2021-03-10 16:07:03,274-INFO-recharge_spend-55-可币余额正常
2021-03-10 16:07:03,275-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `db_order_4`.`order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "KB202103101607062076075925854812"
2021-03-10 16:07:03,279-INFO-lib.common_biz.fiz_assert-34-订单详情：{'id': 15340, 'pay_req_id': 'KB202103101607062076075925854812', 'notify_id': '0255833466589729426043836220', 'partner_order': 'TU8gBQ4IuecoqiN5E0PM7HLwWt1D6XnR', 'amount': 1, 'refund': 0, 'contents': 'RECHARGE_SPEND ', 'products_name': 'RECHARGE_SPEND', 'counts': 1, 'ssoid': '2076075925', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': '1259634601', 'ip': '121.12.147.248', 'mac': '', 'model': 'PDCM00', 'app_package': 'com.example.pay_demo', 'app_ver': '208006', 'sdk_ver': '260', 'partner_code': '2031', 'notify_url': 'http://pay.pay-test.wanyol.com/notify/receiver', 'status': 'OK', 'channel_id': '', 'channel_type': 'NATIVE', 'pay_type': 'wxpay', 'direct_pay': 'KEBI', 'game_type': 'WANGYOU', 'present_amount': 0, 'original_amount': 1, 'discount_info': '', 'extra': None, 'remark': 'new way', 'request_time': datetime.datetime(2021, 3, 10, 16, 7, 6), 'success_time': datetime.datetime(2021, 3, 10, 16, 7, 3), 'modify_time': datetime.datetime(2021, 3, 10, 16, 7, 7), 'trade_type': 'PAY', 'kebi_spent': 0, 'voucher_amount': 0, 'voucher_info': '{"cutAmount":"0","id":"0","type":"0"}', 'country_code': 'CN', 'currency': 'CNY', 'openid': None, 'brand_type': 'OPPO', 'mobile_os_ver': '16', 'platform': '', 'screen_info': 'FULL', 'voucher_id': '0', 'factor': '', 'paid_amount': None, 'paid_usd': None, 'combine_order': 'N', 'voucher_status': None, 'kebi_status': None, 'channel_status': None}
2021-03-10 16:07:03,279-INFO-lib.common_biz.fiz_assert-45-订单表信息记录正确
2021-03-10 16:07:03,280-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `pay_tradeorder_4`.`trade_order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "KB202103101607062076075925854812"
2021-03-10 16:07:03,284-INFO-lib.common_biz.fiz_assert-55-trade订单详情：{'id': 8026, 'pay_req_id': 'KB202103101607062076075925854812', 'partner_order': 'TU8gBQ4IuecoqiN5E0PM7HLwWt1D6XnR', 'partner_code': '2031', 'products_name': 'RECHARGE_SPEND', 'ssoid': '2076075925', 'origin_amount': 1, 'amount': 1, 'kb_amount': 0, 'voucher_amount': 0, 'present_amount': 0, 'refund': 0, 'country_code': 'CN', 'currency': 'CNY', 'pay_type': 'wxpay', 'channel_id': '', 'channel_type': 'NATIVE', 'direct_pay': 'KEBI', 'trade_type': 'PAY', 'combine_type': 'PRIMARY', 'status': 'OK', 'notify_url': 'http://pay.pay-test.wanyol.com/notify/receiver', 'attach': '', 'extra_info': '', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': '1259634601', 'ip': '121.12.147.248', 'mac': '', 'openid': None, 'model': 'PDCM00', 'brand_type': 'OPPO', 'app_package': 'com.example.pay_demo', 'app_ver': '208006', 'sdk_ver': '260', 'mobile_os_ver': '16', 'platform': '', 'screen_info': 'FULL', 'remark': None, 'request_time': datetime.datetime(2021, 3, 10, 16, 7, 6), 'success_time': datetime.datetime(2021, 3, 10, 16, 7, 7), 'modify_time': datetime.datetime(2021, 3, 10, 16, 7, 6)}
2021-03-10 16:07:03,284-INFO-lib.common_biz.fiz_assert-63-trade订单表信息记录正确
2021-03-10 16:07:03,285-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `virtual`.`tb_recharge202103` WHERE ssoid = '2076075925' and rechargeOrder = "KB202103101607062076075925854812"
2021-03-10 16:07:03,288-INFO-lib.common.db_operation.mysql_operation-51-查询数据为空
2021-03-10 16:07:03,288-INFO-lib.common_biz.fiz_assert-83-tb_recharge订单详情：None
2021-03-10 16:07:03,288-INFO-lib.common_biz.fiz_assert-91-tb_recharge订单表信息记录正确
2021-03-10 16:07:03,289-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `virtual`.`tb_payment202103` WHERE ssoid = '2076075925' and partnerOrder = "TU8gBQ4IuecoqiN5E0PM7HLwWt1D6XnR"
2021-03-10 16:07:03,292-INFO-lib.common.db_operation.mysql_operation-51-查询数据为空
2021-03-10 16:07:03,292-INFO-lib.common_biz.fiz_assert-111-tb_payment订单详情：None
2021-03-10 16:07:03,293-INFO-lib.common_biz.fiz_assert-119-tb_payment订单表信息记录正确
2021-03-10 16:07:03,293-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select * from `db_pay_notify_1`.`notify_info` where request_id = "TU8gBQ4IuecoqiN5E0PM7HLwWt1D6XnR"
2021-03-10 16:07:03,297-INFO-lib.common_biz.fiz_assert-135-通知表信息详情：{'id': 151933, 'app_id': 10001, 'app_name': '可币系统(测试环境)', 'app_sub_id': '2031', 'notify_id': 'a503bcc757ef47debdc062abd26aaa41', 'request_id': 'TU8gBQ4IuecoqiN5E0PM7HLwWt1D6XnR', 'notify_protocol': 'HTTP', 'notity_detail': '{"appId":10001,"appSubId":"2031","httpReqType":"POST","reqContent":"{\\"attach\\":\\"\\",\\"count\\":1,\\"date\\":\\"20210310\\",\\"kbVouAmount\\":0,\\"partnerId\\":\\"2031\\",\\"partnerOrder\\":\\"TU8gBQ4IuecoqiN5E0PM7HLwWt1D6XnR\\",\\"paySuccessTime\\":\\"2021-03-10 16:07:06\\",\\"price\\":1,\\"productDesc\\":\\"RECHARGE_SPEND\\",\\"productName\\":\\"RECHARGE_SPEND\\",\\"sign\\":\\"Q6kmLi2X/xs3uK87uUhZ5o7aAbrwoG07BtIV13j7BdoP3oDW/ap+m9Npi/q5OywMZ1yMGbv1vYUd6Y7OgKRRSEXqN9RejjTZYOC8xsz5oqRm78v38Ur1joGUvwWdoPDVAPkVbpIphwz39z8vWQVkWqe5IpGDJDbdNfIygenag70=\\",\\"spendType\\":0,\\"ssoid\\":\\"2076075925\\"}","reqUrl":"http://pay.pay-test.wanyol.com/notify/receiver","requestId":"TU8gBQ4IuecoqiN5E0PM7HLwWt1D6XnR","sign":"A3B71418298820BC2A69A23DD34C7C75","signType":"MD5","successResult":"OK","timeStamp":1615363626844,"version":"1.0"}', 'notify_count': 1, 'notify_response': 'OK', 'notify_handler': 'httpNotifyJsonHandler', 'fail_strategy': 'failStrategyHashImpl', 'status': 'SUCCESS', 'success_time': datetime.datetime(2021, 3, 10, 16, 7, 7), 'insert_time': datetime.datetime(2021, 3, 10, 16, 7, 7), 'update_time': datetime.datetime(2021, 3, 10, 16, 7, 7), 'extra_json': None, 'remark': None}
2021-03-10 16:07:03,297-INFO-lib.common_biz.fiz_assert-141-通知成功
2021-03-10 16:34:50,052-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.52.44.235', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-03-10 16:34:50,372-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-03-10 16:34:50,423-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]成功
2021-03-10 16:34:50,423-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]
2021-03-10 16:34:50,668-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]成功
2021-03-10 16:34:50,668-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]
2021-03-10 16:34:50,683-INFO-lib.common.db_operation.mysql_operation-118-成功连接到测试专用环境-MYSQL：{'host': '10.52.54.122', 'user': 'opay', 'pwd': '_UI7xHubrhTPIP1J_T4so7SU7ATCrUzm7cAh6TdBLLHWUSQUQqD8p45xVQzV3Czi', 'port': '33066'}
2021-03-10 16:34:50,683-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `test_account`.`account_test_env`
2021-03-10 16:34:51,139-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT app_key FROM `db_platform_gateway`.`server_app_info` WHERE app_id = '100002'
2021-03-10 16:34:51,142-INFO-lib.common_biz.find_key-96-查询到秘钥信息：BB36C34EB6644AB9694315AF7D68E629
2021-03-10 16:34:51,143-INFO-lib.common.session.http.http_json-38-http://pay-gateway.pay-test.wanyol.com/gateway/nearme.account.query
2021-03-10 16:34:51,143-INFO-lib.common.session.http.http_json-39-传入的参数：{'app_id': '100002', 'service': 'nearme.account.query', 'format': 'JSON', 'charset': 'UTF8', 'sign_type': 'MD5', 'sign': 'E7B709A94D80FD4077482B868541A717', 'timestamp': '2021-03-10 16:34:51', 'version': '1.0', 'bizContent': "{'ssoid': '2076075925'}"}
2021-03-10 16:34:51,210-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'data': {'ssoid': '2076075925', 'timeStamp': 1615365294922, 'useableBalance': 7, 'totalGiveBalance': 0, 'createTime': 1612151249000, 'chargeBalance': 7, 'freezeBalance': 0, 'giveBalance': 0}, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功', 'success': True}
2021-03-10 16:34:51,223-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 16:34:51,223-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "84262125087777"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "pIXd67NT9DniVKLAUeoEJzlHjZv1G8fQ"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 16:34:51,392-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "25f395eb788e41a283e4c3dd25f2e8ae"
s_p: "NzhDcFlOb25WTmxJV1VkOGlscjU0Nm5tMGpyT3Q2cUd3Mkc1R2NHcnBoUG9RQlE0WHRCOTZUanVsMk1PV0RqVXRudE9CYUF2TnhRaElhYmVCMzJVR1RqVXJpU3FRdGVCRTJWWnd6S1dSQ1czbHNFTWl3UkpwaUZGVVI3aTNDT0t3MEJzNXBGNXdFanZLdnFPRTBRZHg4RHhBZ1hTUXJmS203VktDRUFydk5Cd2pjWVBzV2FSRWpnNHl5TTF6dmNKT2M2M3lLZ01KNHFBQzk4RDB0dG5GNXltSmtMWjhtcXREbE5sN0pTQXVBVFozS1p6d0F6RU96WXo5a1Fzam9QbkNORmZkUlZmbEdXeU1Gb3VwZW9Md1g0QnhoenRZQlFrSXVsN1AzY3BzUHAxRXc4aUc2T2xOMklSU0dCN3RCOXNlMXpTWFJMdUNUYlV5REtyMGp1VUZVbkVkZUphcWM2TUFxRTNmVzlUdXE0YXdwYnc2UklDMHBGc2d6dGNPeWxSUWwyd053aEFvekJpcnNSZUlSY2xFeXZabUxvalVLWTlOeDd6VThUd1NueTZvekZtWVBXRE16ZjJteFdPTkxTQTJEeHVPNnNpRWpCWUVtdVM5cVNmcGxnU0cyMW9jdFpMcUVrd0hES3VxMUVQbkZwb1dnUEZqOU5XbFIxVFk5dWJ3SkZEZ01WcXdXV05OUkp2bXNkV2lIOEtjdHhWcUxHcHVSQ2RQdGFIS0VmN29zcUFHWUdPd01jWWFxSmxOdmE3WlQ5U1pZS1dkWk83NWJ2dmlWNlJiWjJmRG9sR21NSFpxZEE0RzNWbmFxOWZVZlhBSnI1Nnk4N3VKdTNjQmNYS2pUV05XRTNIblBHb3JvalZheE1COVBBbjMzUjc4aXBEUkdYZTNyeUp4Z28xSjVXa0JLekJoejB0MFFPaElzMm1XNFFqYkdkZkNROXk0NzI1YkZVcktYY1dIVGsxWFNMekx5TXVINTVSdmlYWGNZb3RkMUo5MEpJbUJoZk80bWZweE1kV1VRNlVuUjg5bWNydnoxbVJvTDk3aTR6dWppYlI="
m_p: "043IDuVb6W7Qb0kEkKB482bi63NVH75Zdb5616qk76i1n8X0N49JXY68dP32L32l"
e_t: "1615473295067"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0.07"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 1001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199706
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199705
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199704
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199703
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199702
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199692
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099683
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099682
    type: 2
    minCousume: 1300
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 11
}
userinfo {
  username: "156******06"
}

2021-03-10 16:34:51,412-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 16:34:51,412-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "6.0"
  t_p: "25f395eb788e41a283e4c3dd25f2e8ae"
  imei: ""
  model: "PCRM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "SqQteBE2"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: "42E1F48352C04B80910A7BBB7FDDE8022d5334806a8d9b083e64c9324c08c040"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
price: 700
count: 1
productname: "ONLY_KB_SPEND"
productdesc: "ONLY_KB_SPEND"
partnerid: "2031"
callBackUrl: "http://pay.pay-test.wanyol.com/notify/receiver"
partnerOrder: "t7EziYqZ9hv8pemJrS2a3OLHlo60bKNc"
channelId: ""
ver: "1.1.0"
source: "PaySDK"
attach: ""
sign: "KjWndHKRd8v78mspvMzP+Y+gPZtGtSnBmQDe5mH9QNvRpA24J9qbdFO7KfjTFOyE/7TnJRnsQmcM8r1fjPtJX5M+UX39pXfAsH6pHmGkEF3Q2KK43UvSbbAO+VRHi7AaVAP1ZRTNbPRhmsLRlo3MluvaGswZb5KbEvYdrSLq95g="
order: "9241408320585"
ip: "120.197.152.211"
factor: ""

2021-03-10 16:34:51,534-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "1010"
  msg: "\347\224\250\346\210\267\344\275\231\351\242\235\344\270\215\350\266\263"
}

2021-03-10 16:34:51,551-INFO-lib.common.session.dubbo.dubbo-51-dubbo invoke语句：invoke NearmeAccountOperate.addSubtractOperate({'amountMoney': '0.01', 'batchId': '38607596537181804354863918960243', 'bizNo': 'IKY1Svmgof70PjQFc3JxzkhXun5Bd9is', 'operateType': 'PRESENT', 'requestId': '97371384831835905040852672675700', 'source': 'test', 'ssoid': '2076075925', 'timeStamp': 1615365291549})
2021-03-10 16:34:51,600-DEBUG-lib.common.session.dubbo.dubbo-55-{"data":{"ssoid":"2076075925","timeStamp":0,"amount":0.01,"success":true,"appId":null,"sign":null,"signType":null,"failReason":null,"remark":null,"extraJson":null,"accountOperateType":"PRESENT"},"success":true,"errorDetail":"成功","resCode":"000000","resMsg":"成功"}

2021-03-10 16:34:51,600-INFO-lib.common.session.dubbo.dubbo-57-dubbo回参：{'data': {'ssoid': '2076075925', 'timeStamp': 0, 'amount': 0.01, 'success': True, 'appId': None, 'sign': None, 'signType': None, 'failReason': None, 'remark': None, 'extraJson': None, 'accountOperateType': 'PRESENT'}, 'success': True, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功'}
2021-03-10 16:34:51,614-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select scopeId from `oppopay_voucher`.`vou_usescope` where appPackageName = "all"
2021-03-10 16:34:51,655-INFO-lib.common.session.dubbo.dubbo-51-dubbo invoke语句：invoke com.oppo.voucher.api.CouponBatchGrant.batchGrant({'couponName': 'anto_grant1615365291655', 'useableFromTime': '2020-01-01 00:00:00', 'useableEndTime': '2022-12-31 00:00:00', 'settleType': '1', 'bizNo': '2031', 'scopeId': '7104f7bc23e445daba913a5a96a264ac', 'blackScopeId': '', 'subScopeId': '', 'couponType': 'KB_COUPON', 'couponDiscountType': 'DIKOU', 'conditionAmount': '7.569999999999999', 'cutAmount': '7.56', 'ratio': 0, 'maxCutAmount': '0', 'applyCount': '1', 'ssoidList': ['2076075925'], 'batchId': ''})
2021-03-10 16:34:51,694-DEBUG-lib.common.session.dubbo.dubbo-55-{"data":{"batchVouCreateResList":[{"ssoid":"2076075925","vouId":"62299798"}],"vouIdList":null,"batchId":"e6ef3385a0b14df7828c60bcbda2e7a5"},"success":true,"errorDetail":"成功","resCode":"000000","resMsg":"成功"}

2021-03-10 16:34:51,694-INFO-lib.common.session.dubbo.dubbo-57-dubbo回参：{'data': {'batchVouCreateResList': [{'ssoid': '2076075925', 'vouId': '62299798'}], 'vouIdList': None, 'batchId': 'e6ef3385a0b14df7828c60bcbda2e7a5'}, 'success': True, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功'}
2021-03-10 16:34:51,711-INFO-lib.common.session.dubbo.dubbo-51-dubbo invoke语句：invoke com.oppo.voucher.api.admin.CouponBatchInfoAdmin.operate({'couponBatchId': 'e6ef3385a0b14df7828c60bcbda2e7a5', 'batchOperateType': 'PASS'})
2021-03-10 16:34:56,740-DEBUG-lib.common.session.dubbo.dubbo-55-{"data":{},"success":true,"errorDetail":"成功","resCode":"000000","resMsg":"成功"}

2021-03-10 16:34:56,740-INFO-lib.common.session.dubbo.dubbo-57-dubbo回参：{'data': {}, 'success': True, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功'}
2021-03-10 16:34:56,750-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 16:34:56,750-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "75375598605520"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "pl9v0Kb7AaCTB8nog32QPeqrMXZx4Gmz"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 16:34:56,838-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "548c58d42d95426ab3c3ee67c72c9bf6"
s_p: "ZklFYlVtb2FJSHd3MnhYM0ZqNVN5MEJFc2o2Y0Zvb3N6N2d3VmJ3SkJxQ1Vja05OdllsSW1ybWE4ekJXU2VkN0ZoMDJENkhORklWc2hLNmxyM1pzQzlnTU9Qd01QMHEyMFFTRUFPeEtib0VjQWR3eVdUREdiVExKQkhhaW1YYnNZbEVORTFtNkhudms2VlRtazRvNVI5QlR1N1lLajJLenpaVGhzMVBacHh2TFh5alltSGcxbWxkMkw5ZGo1Y0RhWWkyN2p4bUp1bnBpVkNORkZsRTU5YzFTd1ZpQkRXMk5xUjBwVUNBTVhTbWJNVWdLcFNOVXVHbWxhajFxck12QjhSYlRDbHo3R3JkVDd2aWVFSG10Vk5XeU92WGdEY1BZR01nYUszVXpVVjFIQmw0THpYZWZ0dFdyU2xlRDJqOEs4SDkya3JIV0FHZkZFSzlXVGxXTzhhUU5ReG5mSTl6NEQzbkFMSXpZeVJlczBNcmVJREhUSTBHSERGa2Y0Q0c4WUx5SjFZZlNFd2Z4a0pUOFRTNjR6bmU4cWJLMUMxQWZ6M3piT1BoYWYyRm1CY0JWSHM4cXA0dTloTnExY2xYWGVpc1czeUJCVXliRDM5eHpTdTFSRTAwRVhwVEI1N0N5clV2Yks5VEN6cUxPQThyQmt4ajBwa09VejRqbm9WZXB3V3ZTSVpKM1JSd3hpMkpFU2o5NFc4VTZ0enVDZHc1V2Q1ekRXbzRWSUFXam9OcjVGRWJsZElvMzMyWU1pS3ppZDM4Y1FVUFdpeXFvUG1WRlYyWnJ0aW0wRWV6ZnlNaXRab2hkV3FlT2RUbXFCVDdXZHhuY1VnY2psUFNKRnFlSUJjbVVDVWd0VkFCRjRHWkhNWEFBWTFIcDhnNktXTWJNVmwxS2Y4eUxJTW5XNzZONVFtWVlYN0J0RVEwRDVCdHZTanQzcVNTcHV6VVgzYlJmRmNubXBrN0VpNjMyY2xaS05zNXh4Z3hwanNQdHp6cjZHekdzRUpISmlJUWVVT2tlVndpNm10emlWZ1BYYU1ISm1OdWNaSUNvTXB4Q251cUU="
m_p: "hFfb3Eh399a365of6DXSh45e3YW79HG5PI98OJ0hju0cpjpX7cbwkx2x49RKNVI0"
e_t: "1615473300511"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0.08"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 1001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299798
    type: 2
    minCousume: 757
    vouCount: 756
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199706
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199705
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199704
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199703
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199702
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199692
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099683
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099682
    type: 2
    minCousume: 1300
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 12
}
userinfo {
  username: "156******06"
}

2021-03-10 16:34:56,855-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 16:34:56,856-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "6.0"
  t_p: "548c58d42d95426ab3c3ee67c72c9bf6"
  imei: ""
  model: "PCRM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "YKj2KzzZ"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: "42E1F48352C04B80910A7BBB7FDDE8022d5334806a8d9b083e64c9324c08c040"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
price: 757
count: 1
productname: "KB_AND_VOU_SPEND"
productdesc: "KB_AND_VOU_SPEND"
partnerid: "2031"
callBackUrl: "http://pay.pay-test.wanyol.com/notify/receiver"
partnerOrder: "rLOhWvBdpAi2yn5eTKl60MwoPzjY3xum"
channelId: ""
ver: "1.1.0"
source: "PaySDK"
attach: ""
sign: "P9QbEbKTXamIFY9WzWIAqnik/W/rNlldeUEa94my2BHlGFSpttCwlTdhiGJdeeSJr1RO2SXOTzCoUBFCvpoxnlmUi8O0jjkGYeME2EUDP5fuDG8fu8ilZFvkg2YgUavr0sQUbIQSJNfJhIv2G2XoUg1uIVx1mnAGEGlDQ6NQpKY="
appKey: "1234"
voucherId: 62299798
voucherType: 2
voucherCount: 756
order: "5589731365178"
ip: "120.197.152.211"
factor: ""
screenInfo: "FULL"

2021-03-10 16:34:57,027-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: ""
}
rpay: "0"
gpay: "0"

2021-03-10 16:34:57,028-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT pay_req_id FROM `db_order_4`.`order_info_75` WHERE ssoid = "2076075925" and partner_order = "rLOhWvBdpAi2yn5eTKl60MwoPzjY3xum"
2021-03-10 16:34:57,032-INFO-fiz_db_operate-55-查询到partnerOrder：rLOhWvBdpAi2yn5eTKl60MwoPzjY3xum， 对应支付订单号：{'pay_req_id': 'KB202103101635002076075925111122'}
2021-03-10 16:34:57,033-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `db_order_4`.`order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "KB202103101635002076075925111122"
2021-03-10 16:34:57,036-INFO-lib.common_biz.fiz_assert-34-订单详情：{'id': 15343, 'pay_req_id': 'KB202103101635002076075925111122', 'notify_id': None, 'partner_order': 'rLOhWvBdpAi2yn5eTKl60MwoPzjY3xum', 'amount': 0, 'refund': 0, 'contents': 'KB_AND_VOU_SPEND', 'products_name': 'KB_AND_VOU_SPEND', 'counts': 1, 'ssoid': '2076075925', 'mobile_num': '', 'imei': '', 'imsi': '', 'imsi2': None, 'ip': '58.252.5.72', 'mac': '', 'model': 'PCRM00', 'app_package': 'com.example.pay_demo', 'app_ver': '', 'sdk_ver': '', 'partner_code': '2031', 'notify_url': 'http://pay.pay-test.wanyol.com/notify/receiver', 'status': 'OK', 'channel_id': '', 'channel_type': 'NATIVE', 'pay_type': 'KEBI', 'direct_pay': 'KEBI', 'game_type': None, 'present_amount': 0, 'original_amount': 757, 'discount_info': '', 'extra': None, 'remark': None, 'request_time': datetime.datetime(2021, 3, 10, 16, 35), 'success_time': None, 'modify_time': datetime.datetime(2021, 3, 10, 16, 35, 1), 'trade_type': 'PAY', 'kebi_spent': 1, 'voucher_amount': 756, 'voucher_info': '{"cutAmount":"756","id":"62299798","type":"2"}', 'country_code': 'CN', 'currency': 'CNY', 'openid': None, 'brand_type': None, 'mobile_os_ver': None, 'platform': '', 'screen_info': 'FULL', 'voucher_id': '62299798', 'factor': '', 'paid_amount': None, 'paid_usd': None, 'combine_order': None}
2021-03-10 16:34:57,037-INFO-lib.common_biz.fiz_assert-45-订单表信息记录正确
2021-03-10 16:34:57,037-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `pay_tradeorder_4`.`trade_order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "KB202103101635002076075925111122"
2021-03-10 16:34:57,041-INFO-lib.common_biz.fiz_assert-55-trade订单详情：{'id': 8029, 'pay_req_id': 'KB202103101635002076075925111122', 'partner_order': 'rLOhWvBdpAi2yn5eTKl60MwoPzjY3xum', 'partner_code': '2031', 'products_name': 'KB_AND_VOU_SPEND', 'ssoid': '2076075925', 'origin_amount': 757, 'amount': 0, 'kb_amount': 1, 'voucher_amount': 756, 'present_amount': 0, 'refund': 0, 'country_code': 'CN', 'currency': 'CNY', 'pay_type': 'KEBI', 'channel_id': '', 'channel_type': 'NATIVE', 'direct_pay': 'KEBI', 'trade_type': 'PAY', 'combine_type': 'PRIMARY', 'status': 'OK', 'notify_url': 'http://pay.pay-test.wanyol.com/notify/receiver', 'attach': '', 'extra_info': '', 'mobile_num': '', 'imei': '', 'imsi': '', 'imsi2': None, 'ip': '58.252.5.72', 'mac': '', 'openid': None, 'model': 'PCRM00', 'brand_type': None, 'app_package': 'com.example.pay_demo', 'app_ver': '', 'sdk_ver': '', 'mobile_os_ver': '', 'platform': '', 'screen_info': 'FULL', 'remark': None, 'request_time': datetime.datetime(2021, 3, 10, 16, 35, 1), 'success_time': datetime.datetime(2021, 3, 10, 16, 35, 1), 'modify_time': datetime.datetime(2021, 3, 10, 16, 35)}
2021-03-10 16:34:57,041-INFO-lib.common_biz.fiz_assert-63-trade订单表信息记录正确
2021-03-10 16:34:57,042-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select * from `db_pay_notify_1`.`notify_info` where request_id = "rLOhWvBdpAi2yn5eTKl60MwoPzjY3xum"
2021-03-10 16:34:57,045-INFO-lib.common_biz.fiz_assert-135-通知表信息详情：{'id': 151937, 'app_id': 10001, 'app_name': '可币系统(测试环境)', 'app_sub_id': '2031', 'notify_id': 'b8916d507e7e4512b159772dd14441df', 'request_id': 'rLOhWvBdpAi2yn5eTKl60MwoPzjY3xum', 'notify_protocol': 'HTTP', 'notity_detail': '{"appId":10001,"appSubId":"2031","httpReqType":"POST","reqContent":"{\\"attach\\":\\"\\",\\"count\\":1,\\"date\\":\\"20210310\\",\\"kbVou\\":{\\"kbVouAmount\\":756,\\"notClearCount\\":756,\\"orderAmt\\":757,\\"payVouDesc\\":\\"\\",\\"spendType\\":2,\\"vouCountDetail\\":\\"62299798:756;\\"},\\"kbVouAmount\\":756,\\"partnerId\\":\\"2031\\",\\"partnerOrder\\":\\"rLOhWvBdpAi2yn5eTKl60MwoPzjY3xum\\",\\"paySuccessTime\\":\\"2021-03-10 16:35:00\\",\\"price\\":757,\\"productDesc\\":\\"KB_AND_VOU_SPEND\\",\\"productName\\":\\"KB_AND_VOU_SPEND\\",\\"sign\\":\\"K1EdzxiVupwbnfRF8uvrBiULYu/Ni/0nKz1y2Jyz9ladhmGcCgsuRaIEGz/GO3yU/miU7Y9RoxloGCyLyhocTvPC5SJnRqd+4PQL/SyxoufOnqUWieKcJJMbUgjkvejzdwK+G3XdXSFuZ5Oogl9w+VkGTAYJv0wJI+7Nt5mIChE=\\",\\"spendType\\":2,\\"ssoid\\":\\"2076075925\\"}","reqUrl":"http://pay.pay-test.wanyol.com/notify/receiver","requestId":"rLOhWvBdpAi2yn5eTKl60MwoPzjY3xum","sign":"51AB429F660921CA4643C4A2E9B7F1ED","signType":"MD5","successResult":"OK","timeStamp":1615365300730,"version":"1.0"}', 'notify_count': 1, 'notify_response': 'OK', 'notify_handler': 'httpNotifyJsonHandler', 'fail_strategy': 'failStrategyHashImpl', 'status': 'SUCCESS', 'success_time': datetime.datetime(2021, 3, 10, 16, 35, 1), 'insert_time': datetime.datetime(2021, 3, 10, 16, 35, 1), 'update_time': datetime.datetime(2021, 3, 10, 16, 35, 1), 'extra_json': None, 'remark': None}
2021-03-10 16:34:57,045-INFO-lib.common_biz.fiz_assert-141-通知成功
2021-03-10 16:34:57,047-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select status, usable_amt from `oppopay_voucher`.`vou_info_16` where vouId='62299798'
2021-03-10 16:34:57,050-INFO-lib.common_biz.fiz_assert-194-优惠券详情：{'status': '6', 'usable_amt': None}
2021-03-10 16:34:57,050-INFO-lib.common_biz.fiz_assert-198-优惠券表记录正确
2021-03-10 16:35:10,941-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.52.44.235', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-03-10 16:35:11,240-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-03-10 16:35:11,290-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]成功
2021-03-10 16:35:11,291-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]
2021-03-10 16:35:11,541-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]成功
2021-03-10 16:35:11,541-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]
2021-03-10 16:35:11,564-INFO-lib.common.db_operation.mysql_operation-118-成功连接到测试专用环境-MYSQL：{'host': '10.52.54.122', 'user': 'opay', 'pwd': '_UI7xHubrhTPIP1J_T4so7SU7ATCrUzm7cAh6TdBLLHWUSQUQqD8p45xVQzV3Czi', 'port': '33066'}
2021-03-10 16:35:11,564-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `test_account`.`account_test_env`
2021-03-10 16:35:11,963-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT app_key FROM `db_platform_gateway`.`server_app_info` WHERE app_id = '100002'
2021-03-10 16:35:11,966-INFO-lib.common_biz.find_key-96-查询到秘钥信息：BB36C34EB6644AB9694315AF7D68E629
2021-03-10 16:35:11,967-INFO-lib.common.session.http.http_json-38-http://pay-gateway.pay-test.wanyol.com/gateway/nearme.account.query
2021-03-10 16:35:11,967-INFO-lib.common.session.http.http_json-39-传入的参数：{'app_id': '100002', 'service': 'nearme.account.query', 'format': 'JSON', 'charset': 'UTF8', 'sign_type': 'MD5', 'sign': '289C2DE28009701B6CA08B3C3833BA44', 'timestamp': '2021-03-10 16:35:11', 'version': '1.0', 'bizContent': "{'ssoid': '2076075925'}"}
2021-03-10 16:35:11,999-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'data': {'ssoid': '2076075925', 'timeStamp': 1615365315713, 'useableBalance': 7, 'totalGiveBalance': 0, 'createTime': 1612151249000, 'chargeBalance': 7, 'freezeBalance': 0, 'giveBalance': 0}, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功', 'success': True}
2021-03-10 16:35:12,010-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 16:35:12,010-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "35620395670861"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "LYbae9Njh4qw6ci8QAfdZBg3EStnKvHx"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 16:35:12,082-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "859267c21df24924a4d200cf8b449fe5"
s_p: "MnVSYVJWblpBQWprOWY2alN6SU9IODJseEYxMEQyTDVDWlQ2ejI2UVRYMEpmaTQ0SUxuSkcyMVZNYmIzMURwelRCM0E2RndKTnlMd3ZoUjFLRTY5ZnZzbjRsZGIzQmlaeVNPM1luY2oxVEVrZ2ZESXQyZDRiYk9LWExLM1RUWjhGa0U3b25KWVZhQm52bHdHWXYzWTBURHB4T3dIc3FYVWROZFE2bWYwUXVZTUFOZFE4cjVkRHlaSzR1Sk54UERjUkw2NExxb3pXQjA0dlNDWTZqOU5Ndm14bkd2cHFYUmJBZmxKbmUxTzBOVzRndWcxb1hoanZ2NzNndjhjNXRkUjZTWUVucHJROEpZUzF4bUlvWEF1R0FaSWY3bWU4cmdQTkg2NnFReUFpbEdpWWhRZmRrNDV3OXpLanJJcGxhV09rR0JQUUF4T2xFQXpsZ1pWMzNNYzNCdTdsbUU0T0plVmZ1ZTM5dlhObXlSWmVsV1gwUUVVS2JJTWdrU3ZIOTlNUUhFeTFzNG9lRXdxOTA5cXBlOGNSR0hRRXhsT0ZQUHg5M0Q4Y2s2eE03cG9DZWM0a2ZSRTZRamtNY0xiUkp2STZNcDJTQTBiVW5SN3ptU3lPTzFhNGFWTURvaVJKY3ZNNGdZdG5EVk44MWlmRGxKbnFSdmZSOWVoV3pXRGE5QUhwOUJzUkZkYkprNGNvdHdkakZjeHVNVk1kU3pEdlRDZDdXdlB5REJVSW1LRGRobWJzZkc0RENvN2VqVFYwbnNSM0RvMDUzMFh5cGdyd0JYYU83aHNRcHo3VXBBcGFrbGVTMGlyVHZtZVRTRHBrOTJnd0p0VnZPMlIyTzdwcHVQckRjd05xMUowVVhIUVZoZm9Cc3pxWlJEOGhEWERCT0QzNHV1eFZCZ2l6bDZhSGVuVG1wUWF1QVNvWWpmQzJQOW9DSVVzNDBVa0hVekZpaXI1T3MyUXBqMmR0d1U1a1hIUThSUnVsTXBOU29wdmFISGgwb1pRNWdkMU11dDZyNDIyNzFnRDdtcmkzOTR3ekFuc3BiTmE2b0dQZXNVQlhGQk4="
m_p: "0r7Tal4w1d1S5EE4IyRRIIR3LSP75oD6BF71314eaQRFlm24gZocRT7SyuzuXFra"
e_t: "1615473315766"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0.07"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 1001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199706
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199705
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199704
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199703
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199702
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199692
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099683
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099682
    type: 2
    minCousume: 1300
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 11
}
userinfo {
  username: "156******06"
}

2021-03-10 16:35:12,105-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 16:35:12,105-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "6.0"
  t_p: "859267c21df24924a4d200cf8b449fe5"
  imei: ""
  model: "PCRM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "BnvlwGYv"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: "42E1F48352C04B80910A7BBB7FDDE8022d5334806a8d9b083e64c9324c08c040"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
price: 700
count: 1
productname: "ONLY_KB_SPEND"
productdesc: "ONLY_KB_SPEND"
partnerid: "2031"
callBackUrl: "http://pay.pay-test.wanyol.com/notify/receiver"
partnerOrder: "Fw8C9zr6ZTmqgUOhSl7IvnyDNJP2MtYL"
channelId: ""
ver: "1.1.0"
source: "PaySDK"
attach: ""
sign: "dPtHw8q6oysb4S6u9DaPQR7NGYrd8pgtPNju9NMV0u4YnZCLFaSsf+6QCLpvc7lOWFYV7T5lRPUNWrP1gZH8CSafLt/1/13v0I44QAsIuu/ADTtBlmoebH7voelAdvaaPUDqAdUjvj3HHat2fAHGHGI1kpR6BTe04V+w48jjQJw="
order: "4374574629386"
ip: "120.197.152.211"
factor: ""

2021-03-10 16:35:12,210-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "1010"
  msg: "\347\224\250\346\210\267\344\275\231\351\242\235\344\270\215\350\266\263"
}

2021-03-10 16:35:12,225-INFO-lib.common.session.dubbo.dubbo-51-dubbo invoke语句：invoke NearmeAccountOperate.addSubtractOperate({'amountMoney': '0.01', 'batchId': '75842924218949759662184084388354', 'bizNo': 'nWwIJ0SvMt5yEpVfN3To1g8HPzsaqi2C', 'operateType': 'PRESENT', 'requestId': '27287378284461585395778684049102', 'source': 'test', 'ssoid': '2076075925', 'timeStamp': 1615365312223})
2021-03-10 16:35:12,245-DEBUG-lib.common.session.dubbo.dubbo-55-{"data":{"ssoid":"2076075925","timeStamp":0,"amount":0.01,"success":true,"appId":null,"sign":null,"signType":null,"failReason":null,"remark":null,"extraJson":null,"accountOperateType":"PRESENT"},"success":true,"errorDetail":"成功","resCode":"000000","resMsg":"成功"}

2021-03-10 16:35:12,245-INFO-lib.common.session.dubbo.dubbo-57-dubbo回参：{'data': {'ssoid': '2076075925', 'timeStamp': 0, 'amount': 0.01, 'success': True, 'appId': None, 'sign': None, 'signType': None, 'failReason': None, 'remark': None, 'extraJson': None, 'accountOperateType': 'PRESENT'}, 'success': True, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功'}
2021-03-10 16:35:12,260-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select scopeId from `oppopay_voucher`.`vou_usescope` where appPackageName = "all"
2021-03-10 16:35:12,275-INFO-lib.common.session.dubbo.dubbo-51-dubbo invoke语句：invoke com.oppo.voucher.api.CouponBatchGrant.batchGrant({'couponName': 'anto_grant1615365312275', 'useableFromTime': '2020-01-01 00:00:00', 'useableEndTime': '2022-12-31 00:00:00', 'settleType': '1', 'bizNo': '2031', 'scopeId': '7104f7bc23e445daba913a5a96a264ac', 'blackScopeId': '', 'subScopeId': '', 'couponType': 'KB_COUPON', 'couponDiscountType': 'DIKOU', 'conditionAmount': '9.74', 'cutAmount': '9.73', 'ratio': 0, 'maxCutAmount': '0', 'applyCount': '1', 'ssoidList': ['2076075925'], 'batchId': ''})
2021-03-10 16:35:12,295-DEBUG-lib.common.session.dubbo.dubbo-55-{"data":{"batchVouCreateResList":[{"ssoid":"2076075925","vouId":"62299799"}],"vouIdList":null,"batchId":"b3f648b5b5794462a2088fb557bc433d"},"success":true,"errorDetail":"成功","resCode":"000000","resMsg":"成功"}

2021-03-10 16:35:12,295-INFO-lib.common.session.dubbo.dubbo-57-dubbo回参：{'data': {'batchVouCreateResList': [{'ssoid': '2076075925', 'vouId': '62299799'}], 'vouIdList': None, 'batchId': 'b3f648b5b5794462a2088fb557bc433d'}, 'success': True, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功'}
2021-03-10 16:35:12,311-INFO-lib.common.session.dubbo.dubbo-51-dubbo invoke语句：invoke com.oppo.voucher.api.admin.CouponBatchInfoAdmin.operate({'couponBatchId': 'b3f648b5b5794462a2088fb557bc433d', 'batchOperateType': 'PASS'})
2021-03-10 16:35:17,353-DEBUG-lib.common.session.dubbo.dubbo-55-{"data":{},"success":true,"errorDetail":"成功","resCode":"000000","resMsg":"成功"}

2021-03-10 16:35:17,353-INFO-lib.common.session.dubbo.dubbo-57-dubbo回参：{'data': {}, 'success': True, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功'}
2021-03-10 16:35:17,363-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 16:35:17,363-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "11877694158789"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "g6Xt1TiUPlh374S9RHIzMWDBrcGZYpkN"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 16:35:17,435-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "209980658e714d31ac668783fbec94de"
s_p: "M0l1V0hoQkNDb3FoemRSTW9GblJheFZ6RVRtdTBSUGZTcGhaZjhaUXdGVFNuOW9CNFF0UnBUZzRpNGU4bzMyM0Fxb0RxYUR5d0VxWG5INzJqeGJ0N0EzOUJjU0ZFd0U4c0dsVXVvYjAyenF4NnBSY3V5dkttRHVBSE1qZFZTblRWeGdBSkNvYmhTM1JVT1RGMExYYkFKcXNnZjFCcVhpeTBGYkJ6V0ZPVXlScU9LUXlUMmZicmVuZUd6YnpHWHJtNzk0MDVRZlpadEtjZXpUSmhzWmYxdGpNd2tiWHgzekRvN3Q0NGpkck9YNDBwZmoydFk5WDVQWE52OFRObGFRcHk3VUpGdmVHYXVoM2t5bHRWNUVTM2cxNXJ3ZDdHTng3NVNBSHdNRk9weHRNdGdpZEg1bjdHdnE2VzJqVmxlOENicThPdExUSnlEcUlkN1YyTWZDR3hQQnBmNGJjVE83Y0s3RXhRN0pvNWtReENKdGRkQ1VTc292RXB6VWh0RVZrZ016ZDhyOVpRRU5zcVF2SklJOTl2WFA4WFBjU2ZiYTZSejNNaXgzRTZqbnpZWXdwZlBjWFhKU1VDV0d2WG5JaDRxNDBEU3N4TkJSeUJwdzY4bkx3TjhESlBqd1pkQVNuTlI1bTdOQW9DTEhwUzlpczBLUDJxRHhxY1dDNFBnRGQycHF1cXdtWUUxa3VocHR3dVo4NHlUclJ1RjlEMWw4aVRxMlg2UzNIcHZ1eVNRd2l3bHd1QkdrRFhwMTV3OFVZM01qMFA2NUNMeUtoOUd2YXF3NWxjOTFvWFlkc3FndGpYczVkSm5YUWlJYUM0WXpHREZsc1NYUnkya29SdVRPRTNvQ3p4M3pnbHRtd2xLd1J3bDRVdktwWDkwNmF6YTExWThZNzVNdUJyRUtKelJIVGZKZzZubExPdjR0bnpUVGFRQjU0d056MUk5NDAydWx1NmpMMmNyZ0R3TXRsN2JPajczekhSb1BOb1djNWJ5YkNWUlRaSTJRZWVRc0IxSG5VOHladGFUZEJ4U1ljdGpnekRmVzZuNW1aMFlDblJNbUY="
m_p: "MYWnrxb0IRFN07I75m88AJnCs8KB57j3v6E54895ftj0N0JfG434b3369fNJwg1X"
e_t: "1615473321120"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0.08"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 1001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62299799
    type: 2
    minCousume: 974
    vouCount: 973
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199706
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199705
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199704
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199703
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199702
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199692
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099683
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099682
    type: 2
    minCousume: 1300
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 12
}
userinfo {
  username: "156******06"
}

2021-03-10 16:35:17,455-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 16:35:17,455-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "6.0"
  t_p: "209980658e714d31ac668783fbec94de"
  imei: ""
  model: "PCRM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "VSnTVxgA"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: "42E1F48352C04B80910A7BBB7FDDE8022d5334806a8d9b083e64c9324c08c040"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
price: 974
count: 1
productname: "KB_AND_VOU_SPEND"
productdesc: "KB_AND_VOU_SPEND"
partnerid: "2031"
callBackUrl: "http://pay.pay-test.wanyol.com/notify/receiver"
partnerOrder: "Q6jspC5T7mxI9rMSEGP1y3VFoDultONA"
channelId: ""
ver: "1.1.0"
source: "PaySDK"
attach: ""
sign: "NCTvr36LIPGixn0bfBEwyaCXkdbW3dpOhE/cCE/P95LtWi9lFklt/sxvlhg9YBgXhpimFB8iw/9VzV5fsKUubhjfLdk2V5USOgLu+fQNXBuij8PW9fXsZ9NxThRVA+r0xYgrc3rlGos/JisKtAHTs/g+qq6rtLmqDWMIlGquhXQ="
appKey: "1234"
voucherId: 62299799
voucherType: 2
voucherCount: 973
order: "5731073207357"
ip: "120.197.152.211"
factor: ""
screenInfo: "FULL"

2021-03-10 16:35:17,600-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: ""
}
rpay: "0"
gpay: "0"

2021-03-10 16:35:17,601-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT pay_req_id FROM `db_order_4`.`order_info_75` WHERE ssoid = "2076075925" and partner_order = "Q6jspC5T7mxI9rMSEGP1y3VFoDultONA"
2021-03-10 16:35:17,604-INFO-fiz_db_operate-55-查询到partnerOrder：Q6jspC5T7mxI9rMSEGP1y3VFoDultONA， 对应支付订单号：{'pay_req_id': 'KB202103101635212076075925020052'}
2021-03-10 16:35:17,605-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `db_order_4`.`order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "KB202103101635212076075925020052"
2021-03-10 16:35:17,609-INFO-lib.common_biz.fiz_assert-34-订单详情：{'id': 15345, 'pay_req_id': 'KB202103101635212076075925020052', 'notify_id': None, 'partner_order': 'Q6jspC5T7mxI9rMSEGP1y3VFoDultONA', 'amount': 0, 'refund': 0, 'contents': 'KB_AND_VOU_SPEND', 'products_name': 'KB_AND_VOU_SPEND', 'counts': 1, 'ssoid': '2076075925', 'mobile_num': '', 'imei': '', 'imsi': '', 'imsi2': None, 'ip': '58.252.5.72', 'mac': '', 'model': 'PCRM00', 'app_package': 'com.example.pay_demo', 'app_ver': '', 'sdk_ver': '', 'partner_code': '2031', 'notify_url': 'http://pay.pay-test.wanyol.com/notify/receiver', 'status': 'OK', 'channel_id': '', 'channel_type': 'NATIVE', 'pay_type': 'KEBI', 'direct_pay': 'KEBI', 'game_type': None, 'present_amount': 0, 'original_amount': 974, 'discount_info': '', 'extra': None, 'remark': None, 'request_time': datetime.datetime(2021, 3, 10, 16, 35, 21), 'success_time': None, 'modify_time': datetime.datetime(2021, 3, 10, 16, 35, 21), 'trade_type': 'PAY', 'kebi_spent': 1, 'voucher_amount': 973, 'voucher_info': '{"cutAmount":"973","id":"62299799","type":"2"}', 'country_code': 'CN', 'currency': 'CNY', 'openid': None, 'brand_type': None, 'mobile_os_ver': None, 'platform': '', 'screen_info': 'FULL', 'voucher_id': '62299799', 'factor': '', 'paid_amount': None, 'paid_usd': None, 'combine_order': None}
2021-03-10 16:35:17,609-INFO-lib.common_biz.fiz_assert-45-订单表信息记录正确
2021-03-10 16:35:17,610-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `pay_tradeorder_4`.`trade_order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "KB202103101635212076075925020052"
2021-03-10 16:35:17,614-INFO-lib.common_biz.fiz_assert-55-trade订单详情：{'id': 8031, 'pay_req_id': 'KB202103101635212076075925020052', 'partner_order': 'Q6jspC5T7mxI9rMSEGP1y3VFoDultONA', 'partner_code': '2031', 'products_name': 'KB_AND_VOU_SPEND', 'ssoid': '2076075925', 'origin_amount': 974, 'amount': 0, 'kb_amount': 1, 'voucher_amount': 973, 'present_amount': 0, 'refund': 0, 'country_code': 'CN', 'currency': 'CNY', 'pay_type': 'KEBI', 'channel_id': '', 'channel_type': 'NATIVE', 'direct_pay': 'KEBI', 'trade_type': 'PAY', 'combine_type': 'PRIMARY', 'status': 'OK', 'notify_url': 'http://pay.pay-test.wanyol.com/notify/receiver', 'attach': '', 'extra_info': '', 'mobile_num': '', 'imei': '', 'imsi': '', 'imsi2': None, 'ip': '58.252.5.72', 'mac': '', 'openid': None, 'model': 'PCRM00', 'brand_type': None, 'app_package': 'com.example.pay_demo', 'app_ver': '', 'sdk_ver': '', 'mobile_os_ver': '', 'platform': '', 'screen_info': 'FULL', 'remark': None, 'request_time': datetime.datetime(2021, 3, 10, 16, 35, 21), 'success_time': datetime.datetime(2021, 3, 10, 16, 35, 21), 'modify_time': datetime.datetime(2021, 3, 10, 16, 35, 21)}
2021-03-10 16:35:17,614-INFO-lib.common_biz.fiz_assert-63-trade订单表信息记录正确
2021-03-10 16:35:17,615-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select * from `db_pay_notify_1`.`notify_info` where request_id = "Q6jspC5T7mxI9rMSEGP1y3VFoDultONA"
2021-03-10 16:35:17,618-INFO-lib.common_biz.fiz_assert-135-通知表信息详情：{'id': 151939, 'app_id': 10001, 'app_name': '可币系统(测试环境)', 'app_sub_id': '2031', 'notify_id': '69cff0f9bd5f43ae94460bbe63f0471b', 'request_id': 'Q6jspC5T7mxI9rMSEGP1y3VFoDultONA', 'notify_protocol': 'HTTP', 'notity_detail': '{"appId":10001,"appSubId":"2031","httpReqType":"POST","reqContent":"{\\"attach\\":\\"\\",\\"count\\":1,\\"date\\":\\"20210310\\",\\"kbVou\\":{\\"kbVouAmount\\":973,\\"notClearCount\\":973,\\"orderAmt\\":974,\\"payVouDesc\\":\\"\\",\\"spendType\\":2,\\"vouCountDetail\\":\\"62299799:973;\\"},\\"kbVouAmount\\":973,\\"partnerId\\":\\"2031\\",\\"partnerOrder\\":\\"Q6jspC5T7mxI9rMSEGP1y3VFoDultONA\\",\\"paySuccessTime\\":\\"2021-03-10 16:35:21\\",\\"price\\":974,\\"productDesc\\":\\"KB_AND_VOU_SPEND\\",\\"productName\\":\\"KB_AND_VOU_SPEND\\",\\"sign\\":\\"VCLKLIjhoE+kf+J8t0G+XsuhKk9CJEC5NUoISUFMAMXl2bB9Ayx4h/dXW8Pd+CiO0JQ/2eKh/SEbrM/LaPqPdC21r9bfN0TJrI1GM+Sa92nP9QzL+hpAapCt09S0STmYtxkJBSSy/kShTQ3qRsFjvSDkFqacGcPZ3qK7nAj1U/A=\\",\\"spendType\\":2,\\"ssoid\\":\\"2076075925\\"}","reqUrl":"http://pay.pay-test.wanyol.com/notify/receiver","requestId":"Q6jspC5T7mxI9rMSEGP1y3VFoDultONA","sign":"FCC47D1E5A3235913E2B13E171856016","signType":"MD5","successResult":"OK","timeStamp":1615365321303,"version":"1.0"}', 'notify_count': 1, 'notify_response': 'OK', 'notify_handler': 'httpNotifyJsonHandler', 'fail_strategy': 'failStrategyHashImpl', 'status': 'SUCCESS', 'success_time': datetime.datetime(2021, 3, 10, 16, 35, 21), 'insert_time': datetime.datetime(2021, 3, 10, 16, 35, 21), 'update_time': datetime.datetime(2021, 3, 10, 16, 35, 21), 'extra_json': None, 'remark': None}
2021-03-10 16:35:17,618-INFO-lib.common_biz.fiz_assert-141-通知成功
2021-03-10 16:35:17,620-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select status, usable_amt from `oppopay_voucher`.`vou_info_16` where vouId='62299799'
2021-03-10 16:35:17,623-INFO-lib.common_biz.fiz_assert-194-优惠券详情：{'status': '6', 'usable_amt': None}
2021-03-10 16:35:17,623-INFO-lib.common_biz.fiz_assert-198-优惠券表记录正确
2021-03-10 16:37:50,975-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.52.44.235', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-03-10 16:37:51,243-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-03-10 16:37:51,286-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]成功
2021-03-10 16:37:51,286-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]
2021-03-10 16:37:51,515-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]成功
2021-03-10 16:37:51,515-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]
2021-03-10 16:37:51,537-INFO-lib.common.db_operation.mysql_operation-118-成功连接到测试专用环境-MYSQL：{'host': '10.52.54.122', 'user': 'opay', 'pwd': '_UI7xHubrhTPIP1J_T4so7SU7ATCrUzm7cAh6TdBLLHWUSQUQqD8p45xVQzV3Czi', 'port': '33066'}
2021-03-10 16:37:51,538-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `test_account`.`account_test_env`
2021-03-10 16:37:51,904-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT app_key FROM `db_platform_gateway`.`server_app_info` WHERE app_id = '100002'
2021-03-10 16:37:51,907-INFO-lib.common_biz.find_key-96-查询到秘钥信息：BB36C34EB6644AB9694315AF7D68E629
2021-03-10 16:37:51,908-INFO-lib.common.session.http.http_json-38-http://pay-gateway.pay-test.wanyol.com/gateway/nearme.account.query
2021-03-10 16:37:51,908-INFO-lib.common.session.http.http_json-39-传入的参数：{'app_id': '100002', 'service': 'nearme.account.query', 'format': 'JSON', 'charset': 'UTF8', 'sign_type': 'MD5', 'sign': '95C68812573C9F8A1D1B836C56B4204C', 'timestamp': '2021-03-10 16:37:51', 'version': '1.0', 'bizContent': "{'ssoid': '2076075925'}"}
2021-03-10 16:37:55,661-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'data': {'ssoid': '2076075925', 'timeStamp': 1615365479371, 'useableBalance': 7, 'totalGiveBalance': 0, 'createTime': 1612151249000, 'chargeBalance': 7, 'freezeBalance': 0, 'giveBalance': 0}, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功', 'success': True}
2021-03-10 16:37:55,672-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 16:37:55,672-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "81508751747281"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "y5q6PlmJBECh3NW2SvkrR1AuDMedfjzb"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 16:37:55,750-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "e73d0a2a347245edab6216b35d254b79"
s_p: "RklwZ25JNVdmSjduOUxma3M4MkhZWU1DdkY3dmpZVE9va094VHZKOHJNdFpYZHZTRDJBd0k5UllBRGRhbWE0NlRkazRyRzlBcklISGVBdWRqa2dwQmpIVkVyMmN6YXBRd3dVU3kzSlg1bEZsNFRIa1ZkSk1wMGJGZVZIbUt2N2xFT0RRSVFPNHA5SVNmTzhIZ1B6dkM0S3p4aGlaeU02ZUtCdXJnTUdSZEpyU09JY2ptWVpZUlVDa2tlQ3I0OUtxQnF1bW9Ra3oxNG53NlROSzVMTmNZS2d5Wm4zM1V3ZFVCR2s3eTB3aExlWkZwSkR1WEp5UVA4OHFFc0NmWXBYNEtYamZ0MERYaVltalZRazdxZE9HdEhJeUtBenJhWUJoQk9VNDVIRjcwNHI2am00QmljSnc5TEhLaW9nckJpdEtCdUNVZnY5c2MzT2pKMjV4V213d0ZyeENQNjYwTkozSkVGa2hrUjRzcGFWTTVCbEp1cUpERHpmdzVMZms2M2RaYW9hbUlqT1dKeGhyY1h1dXY1VU5ZNGpsODY5RkNqSUE5ZUJoM0JkbFJmR0Mzc0s5V1hlVm1mWjV0R05EWGYwVkpZaE9yTW5raGpyYk9pWEc1V0c1WWZSVHBJWVd4UWw4U2M1MWowSUs1WU9jVEpYY3pkU1o3TUZRdThhRlVxQlN2NUQ2dm5RZDcxcUI2dVBEY1lPVzlZN3hlaWhUang0NlBha2VEQkpVbkdUbEk2bHJraFpmZTh1ZFNYcVdMSFZ5TWhUQ1REcVFiNzZ3a2RFbXZteHlFMk9zdFNiMUxPV2ZnbjNHblg4THNaYTQwODRhWlZNaXM0WVpOS094VWhBaTFXN2o3aGg4bmVTYmJjU3lBQ0J6a3h5elZRdUM3aHdnakJxNHNxcVZMMEpEeDhnMDFCQW1lbGM1c3lUbkVjd3F5VlgxS1E4bHdYb0pZd3ZQM0tFZmtBYlJlMzhwSW9IT3RieFRqbmR5TXkyVnZ1cTJOM3Y5OGNkYzM1N2Exbjg5a2dsY09sc29iRzBwWVNsb1ZlVVZzaXJVTTFZZ1JYVDg="
m_p: "Th7r10UwA0I982o3T889zo38WNpp0OFmHa26054R04N1bH9qX7xA8q6fmgAN3xPL"
e_t: "1615473479428"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0.07"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 1001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199706
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199705
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199704
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199703
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199702
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199692
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099683
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099682
    type: 2
    minCousume: 1300
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 11
}
userinfo {
  username: "156******06"
}

2021-03-10 16:39:28,048-INFO-lib.common.session.dubbo.dubbo-51-dubbo invoke语句：invoke NearmeAccountOperate.addSubtractOperate({'amountMoney': '10', 'batchId': '18759594526955341205776002436896', 'bizNo': 'BAaUdj2t95Q6DJCVlTWbwOXMkIR4xNHp', 'operateType': 'PRESENT', 'requestId': '08852403232487896276154587502629', 'source': 'test', 'ssoid': '2076075925', 'timeStamp': 1615365568045})
2021-03-10 16:39:28,079-DEBUG-lib.common.session.dubbo.dubbo-55-{"data":{"ssoid":"2076075925","timeStamp":0,"amount":10.0,"success":true,"appId":null,"sign":null,"signType":null,"failReason":null,"remark":null,"extraJson":null,"accountOperateType":"PRESENT"},"success":true,"errorDetail":"成功","resCode":"000000","resMsg":"成功"}

2021-03-10 16:39:28,079-INFO-lib.common.session.dubbo.dubbo-57-dubbo回参：{'data': {'ssoid': '2076075925', 'timeStamp': 0, 'amount': 10.0, 'success': True, 'appId': None, 'sign': None, 'signType': None, 'failReason': None, 'remark': None, 'extraJson': None, 'accountOperateType': 'PRESENT'}, 'success': True, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功'}
2021-03-10 16:40:04,349-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境3-MYSQL：{'host': '10.52.46.169', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-03-10 16:40:04,617-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境3-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-03-10 16:40:04,662-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]成功
2021-03-10 16:40:04,662-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]
2021-03-10 16:40:04,931-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]成功
2021-03-10 16:40:04,931-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]
2021-03-10 16:40:04,954-INFO-lib.common.db_operation.mysql_operation-118-成功连接到测试专用环境-MYSQL：{'host': '10.52.54.122', 'user': 'opay', 'pwd': '_UI7xHubrhTPIP1J_T4so7SU7ATCrUzm7cAh6TdBLLHWUSQUQqD8p45xVQzV3Czi', 'port': '33066'}
2021-03-10 16:40:04,954-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `test_account`.`account_test_env`
2021-03-10 16:40:05,339-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT app_key FROM `db_platform_gateway`.`server_app_info` WHERE app_id = '100002'
2021-03-10 16:40:05,343-INFO-lib.common_biz.find_key-96-查询到秘钥信息：BB36C34EB6644AB9694315AF7D68E629
2021-03-10 16:40:05,343-INFO-lib.common.session.http.http_json-38-http://secure-gateway.pay-test3.wanyol.com/gateway/nearme.account.query
2021-03-10 16:40:05,343-INFO-lib.common.session.http.http_json-39-传入的参数：{'app_id': '100002', 'service': 'nearme.account.query', 'format': 'JSON', 'charset': 'UTF8', 'sign_type': 'MD5', 'sign': 'CEFD3206AC2170B262221128F0F004A3', 'timestamp': '2021-03-10 16:40:05', 'version': '1.0', 'bizContent': "{'ssoid': '2076075925'}"}
2021-03-10 16:40:06,089-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'data': {'ssoid': '2076075925', 'timeStamp': 1615365609801, 'useableBalance': 0, 'totalGiveBalance': 0, 'chargeBalance': 0, 'freezeBalance': 0, 'giveBalance': 0}, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功', 'success': True}
2021-03-10 16:40:06,106-INFO-lib.common.session.dubbo.dubbo-51-dubbo invoke语句：invoke NearmeAccountOperate.addSubtractOperate({'amountMoney': '0.01', 'batchId': '45515001589797726702419783558873', 'bizNo': 'KCBPavVMGbmwEjcnz8fNIdOJUrups9DW', 'operateType': 'PRESENT', 'requestId': '74669262044957373966080638040987', 'source': 'test', 'ssoid': '2076075925', 'timeStamp': 1615365606104})
2021-03-10 16:40:06,126-DEBUG-lib.common.session.dubbo.dubbo-55-{"data":{"ssoid":"2076075925","timeStamp":0,"amount":0.01,"success":true,"appId":null,"sign":null,"signType":null,"failReason":null,"remark":null,"extraJson":null,"accountOperateType":"PRESENT"},"success":true,"errorDetail":"成功","resCode":"000000","resMsg":"成功"}

2021-03-10 16:40:06,126-INFO-lib.common.session.dubbo.dubbo-57-dubbo回参：{'data': {'ssoid': '2076075925', 'timeStamp': 0, 'amount': 0.01, 'success': True, 'appId': None, 'sign': None, 'signType': None, 'failReason': None, 'remark': None, 'extraJson': None, 'accountOperateType': 'PRESENT'}, 'success': True, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功'}
2021-03-10 16:40:06,145-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select scopeId from `oppopay_voucher`.`vou_usescope` where appPackageName = "all"
2021-03-10 16:40:06,153-INFO-lib.common.session.dubbo.dubbo-51-dubbo invoke语句：invoke com.oppo.voucher.api.CouponBatchGrant.batchGrant({'couponName': 'anto_grant1615365606153', 'useableFromTime': '2020-01-01 00:00:00', 'useableEndTime': '2022-12-31 00:00:00', 'settleType': '1', 'bizNo': '2031', 'scopeId': '7104f7bc23e445daba913a5a96a264ac', 'blackScopeId': '', 'subScopeId': '', 'couponType': 'KB_COUPON', 'couponDiscountType': 'DIKOU', 'conditionAmount': '0.48', 'cutAmount': '0.47', 'ratio': 0, 'maxCutAmount': '0', 'applyCount': '1', 'ssoidList': ['2076075925'], 'batchId': ''})
2021-03-10 16:40:06,174-DEBUG-lib.common.session.dubbo.dubbo-55-{"data":{"batchVouCreateResList":[{"ssoid":"2076075925","vouId":"64234624"}],"vouIdList":null,"batchId":"771489223a9e4f7a96c11447b757b6c1"},"success":true,"errorDetail":"成功","resCode":"000000","resMsg":"成功"}

2021-03-10 16:40:06,174-INFO-lib.common.session.dubbo.dubbo-57-dubbo回参：{'data': {'batchVouCreateResList': [{'ssoid': '2076075925', 'vouId': '64234624'}], 'vouIdList': None, 'batchId': '771489223a9e4f7a96c11447b757b6c1'}, 'success': True, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功'}
2021-03-10 16:40:06,191-INFO-lib.common.session.dubbo.dubbo-51-dubbo invoke语句：invoke com.oppo.voucher.api.admin.CouponBatchInfoAdmin.operate({'couponBatchId': '771489223a9e4f7a96c11447b757b6c1', 'batchOperateType': 'PASS'})
2021-03-10 16:40:11,235-DEBUG-lib.common.session.dubbo.dubbo-55-{"data":{},"success":true,"errorDetail":"成功","resCode":"000000","resMsg":"成功"}

2021-03-10 16:40:11,235-INFO-lib.common.session.dubbo.dubbo-57-dubbo回参：{'data': {}, 'success': True, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功'}
2021-03-10 16:40:11,248-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 16:40:11,248-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "19828881884041"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "XHLZgbUCfaTvKBYJhx7V3OEckDw2oGAW"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 16:40:11,371-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "cd892b279dd34e53ad91c09845a9b889"
s_p: "SzZkMVJwVjdHd2xYSlp0M3dXOHBoZjdjbGd5NnFzNG12a3Q2OHlmczBodENxSDhrNnBpd25veXE2enhKUWwwcDdpamYwMm1RUmliZ2pYSmZ2WFJncXVtSFBrbzBoaXJqOGF2RUZ1VGZreFhxNUlzUWpheUIySGlwbUJxYXRrZlFvWVl2c0duZHNmZjI0ZTV2SURNR0pRbFJiSVpuZk5sWERuOU5lSDNkdG04d0JJRDRDbm5pWXBQbE1RYnd3SkxFaFZ1YVdqcWZmR1ROVWdaZTlkdlY4eFl6cHQ1Z1o4V2xDbGVJRXZWNXNwalNBNDVrVjRoUGFMY1dLY01IQnNrYXN4T2FaUGdNNldhcXBXTlJPQ0kzTFVZVWhJU2VaUWJXN2xVWGVseHNEZ3dBNkpZRkFHRlZsbmo1eVFYZ0FGbzNHZXdtdThvTHpNRzBscmEwT0t3UEtJSnlYUG0xeXZXVlJDTFJIdVJBemZ4NkFjTFFPS3RqRk0yZnVST1lDVDVwMzg2aU5EaVhTTW5wNFFFaU5FYnh0MWxNMURIS0djZk5ReTN4cmJCT09zU3NZZDhOODc0ZDlqOVFIZzR0ZGtETlJMM1Q0WWJFWWRQb3JtTG9IdGJuRDBDeEM5Nm16Q0Y0MGNuRUZVTVh6a1pnMmwzN2pjamRZck0zRmRsZ1ZuMUs5cFJORFhXUFo2eTBHSWJremVlQjRHVDJTZ0gyZDVrdjg3aFFpNFMxVGdYaGc1WDlqdk5saFVZU0l2VjBVd1J3NG5FQU9IaXRQcFhWV004Sk5jMHJxTXNlUDdXZmdhR2ZpaWw0QUk2N3ZyaVJ5M3lLenh5aFh4RHRWaHNXWWhCU2REQXdYZzRhYkhRb3BpZlNGOUk2ZWFKSjY4VUZaYVJ4Y2p2QnVNMksxY1dneHV3YUpQVTcwN3R1NzBqQ01yS3A3QzVxRmFjWnpQN2hGOWN1TDZZS2lobzBsT2hLUThtbVk1Qk1YOWZqWmRCYk4xeDRoYng4WnV5NW9GeVRxUktRZnh1SGt2anRIWE5pYUJoN2RwaTllMFpTQ3diM1Yzckk="
m_p: "10nlODVyWTK54r4GNLSj6q5ePC3Dd1Xb5qjt51094Ar9GX8BH58F08KQ86HMdlD8"
e_t: "1615473615060"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0.01"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 2000
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64234624
    type: 2
    minCousume: 48
    vouCount: 47
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 2
}
userinfo {
  username: "156******06"
}

2021-03-10 16:40:11,391-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 16:40:11,391-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "6.0"
  t_p: "cd892b279dd34e53ad91c09845a9b889"
  imei: ""
  model: "PCRM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "ipmBqatk"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: "42E1F48352C04B80910A7BBB7FDDE8022d5334806a8d9b083e64c9324c08c040"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
price: 48
count: 1
productname: "KB_AND_VOU_SPEND"
productdesc: "KB_AND_VOU_SPEND"
partnerid: "2031"
callBackUrl: "http://secure.pay-test3.wanyol.com/notify/receiver"
partnerOrder: "v2ZdEl6WeQ9C1kP7KBjqLUyacpSszOmJ"
channelId: ""
ver: "1.1.0"
source: "PaySDK"
attach: ""
sign: "LZYAmdalJqbPU+MIUy4x7wi+Ho0N+jvdizghriyrGYg76JbRDcsvpPVNO+3BveSCRg6gkGRxtIQ+jIr86KZOZxKRQI0ZdZcPSLLeDBe9w/aGZPZNlmberyG2VyzBq0f+NfCVKWV/Ur3JNhdLTjihyRjOd3MG48/fel426oosnP0="
appKey: "1234"
voucherId: 64234624
voucherType: 2
voucherCount: 47
order: "5312781769115"
ip: "120.197.152.211"
factor: ""
screenInfo: "FULL"

2021-03-10 16:40:11,560-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: ""
}
rpay: "0"
gpay: "0"

2021-03-10 16:40:11,561-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT pay_req_id FROM `db_order_4`.`order_info_75` WHERE ssoid = "2076075925" and partner_order = "v2ZdEl6WeQ9C1kP7KBjqLUyacpSszOmJ"
2021-03-10 16:40:11,564-INFO-fiz_db_operate-55-查询到partnerOrder：v2ZdEl6WeQ9C1kP7KBjqLUyacpSszOmJ， 对应支付订单号：{'pay_req_id': 'KB202103101640152076075925581012'}
2021-03-10 16:40:11,565-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `db_order_4`.`order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "KB202103101640152076075925581012"
2021-03-10 16:40:11,570-INFO-lib.common_biz.fiz_assert-34-订单详情：{'id': 21699, 'pay_req_id': 'KB202103101640152076075925581012', 'notify_id': None, 'partner_order': 'v2ZdEl6WeQ9C1kP7KBjqLUyacpSszOmJ', 'amount': 0, 'refund': 0, 'contents': 'KB_AND_VOU_SPEND', 'products_name': 'KB_AND_VOU_SPEND', 'counts': 1, 'ssoid': '2076075925', 'mobile_num': '', 'imei': '', 'imsi': '', 'imsi2': None, 'ip': '183.238.170.71', 'mac': '', 'model': 'PCRM00', 'app_package': 'com.example.pay_demo', 'app_ver': '', 'sdk_ver': '', 'partner_code': '2031', 'notify_url': 'http://secure.pay-test3.wanyol.com/notify/receiver', 'status': 'OK', 'channel_id': '', 'channel_type': 'NATIVE', 'pay_type': 'KEBI', 'direct_pay': 'KEBI', 'game_type': None, 'present_amount': 0, 'original_amount': 48, 'discount_info': '', 'extra': None, 'remark': None, 'request_time': datetime.datetime(2021, 3, 10, 16, 40, 15), 'success_time': None, 'modify_time': datetime.datetime(2021, 3, 10, 16, 40, 15), 'trade_type': 'PAY', 'kebi_spent': 1, 'voucher_amount': 47, 'voucher_info': '{"cutAmount":"47","id":"64234624","price":"48","type":"2"}', 'country_code': 'CN', 'currency': 'CNY', 'openid': None, 'brand_type': None, 'mobile_os_ver': None, 'platform': '', 'screen_info': 'FULL', 'combine_order': None, 'voucher_id': '64234624', 'factor': '', 'voucher_status': None, 'kebi_status': None, 'channel_status': None}
2021-03-10 16:40:11,571-INFO-lib.common_biz.fiz_assert-45-订单表信息记录正确
2021-03-10 16:40:11,571-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `pay_tradeorder_4`.`trade_order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "KB202103101640152076075925581012"
2021-03-10 16:40:11,576-INFO-lib.common_biz.fiz_assert-55-trade订单详情：{'id': 11409, 'pay_req_id': 'KB202103101640152076075925581012', 'partner_order': 'v2ZdEl6WeQ9C1kP7KBjqLUyacpSszOmJ', 'partner_code': '2031', 'products_name': 'KB_AND_VOU_SPEND', 'ssoid': '2076075925', 'origin_amount': 48, 'amount': 0, 'kb_amount': 1, 'voucher_amount': 47, 'present_amount': 0, 'refund': 0, 'country_code': 'CN', 'currency': 'CNY', 'pay_type': 'KEBI', 'channel_id': '', 'channel_type': 'NATIVE', 'direct_pay': 'KEBI', 'trade_type': 'PAY', 'combine_type': 'PRIMARY', 'status': 'OK', 'notify_url': 'http://secure.pay-test3.wanyol.com/notify/receiver', 'attach': '', 'extra_info': '', 'mobile_num': '', 'imei': '', 'imsi': '', 'imsi2': None, 'ip': '183.238.170.71', 'mac': '', 'openid': None, 'model': 'PCRM00', 'brand_type': None, 'app_package': 'com.example.pay_demo', 'app_ver': '', 'sdk_ver': '', 'mobile_os_ver': '', 'platform': '', 'screen_info': 'FULL', 'remark': None, 'request_time': datetime.datetime(2021, 3, 10, 16, 40, 15), 'success_time': datetime.datetime(2021, 3, 10, 16, 40, 15), 'modify_time': datetime.datetime(2021, 3, 10, 16, 40, 15)}
2021-03-10 16:40:11,576-INFO-lib.common_biz.fiz_assert-63-trade订单表信息记录正确
2021-03-10 16:40:11,576-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select * from `db_pay_notify_1`.`notify_info` where request_id = "v2ZdEl6WeQ9C1kP7KBjqLUyacpSszOmJ"
2021-03-10 16:40:11,580-INFO-lib.common_biz.fiz_assert-135-通知表信息详情：{'id': 141738, 'app_id': 10001, 'app_name': '可币系统(测试环境)', 'app_sub_id': '2031', 'notify_id': 'ab02c83a1410495f8b0335f9eb6fc2aa', 'request_id': 'v2ZdEl6WeQ9C1kP7KBjqLUyacpSszOmJ', 'notify_protocol': 'HTTP', 'notity_detail': '{"appId":10001,"appSubId":"2031","httpReqType":"POST","reqContent":"{\\"attach\\":\\"\\",\\"count\\":1,\\"date\\":\\"20210310\\",\\"kbVou\\":{\\"kbVouAmount\\":47,\\"notClearCount\\":47,\\"orderAmt\\":48,\\"payVouDesc\\":\\"\\",\\"spendType\\":2,\\"vouCountDetail\\":\\"64234624:47;\\"},\\"kbVouAmount\\":47,\\"partnerId\\":\\"2031\\",\\"partnerOrder\\":\\"v2ZdEl6WeQ9C1kP7KBjqLUyacpSszOmJ\\",\\"paySuccessTime\\":\\"2021-03-10 16:40:15\\",\\"price\\":48,\\"productDesc\\":\\"KB_AND_VOU_SPEND\\",\\"productName\\":\\"KB_AND_VOU_SPEND\\",\\"sign\\":\\"X6FWe+VMn+DE2x6AAAUPMf6eMvG47Fem2bjnaqs7XvRetg+9iu+vtLpg/uuOH3Py1Xk5abNfWn0OKGTuT9AHQlFOKfuiR+VrA+eWZlPKGHeOyhGzVZh+Locn9gtD8+Fm26dRr5XPZpANiMeJF1ob3CDCYlQ+bVMApYfChlghHU8=\\",\\"spendType\\":2,\\"ssoid\\":\\"2076075925\\"}","reqUrl":"http://secure.pay-test3.wanyol.com/notify/receiver","requestId":"v2ZdEl6WeQ9C1kP7KBjqLUyacpSszOmJ","sign":"E342F5CC8B3A96108BAED191110FABFD","signType":"MD5","successResult":"OK","timeStamp":1615365615247,"version":"1.0"}', 'notify_count': 1, 'notify_response': 'OK', 'notify_handler': 'httpNotifyJsonHandler', 'fail_strategy': 'failStrategyHashImpl', 'status': 'SUCCESS', 'success_time': datetime.datetime(2021, 3, 10, 16, 40, 15), 'insert_time': datetime.datetime(2021, 3, 10, 16, 40, 15), 'update_time': datetime.datetime(2021, 3, 10, 16, 40, 15), 'extra_json': None, 'remark': None}
2021-03-10 16:40:11,580-INFO-lib.common_biz.fiz_assert-141-通知成功
2021-03-10 16:40:11,581-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select status, usable_amt from `oppopay_voucher`.`vou_info_16` where vouId='64234624'
2021-03-10 16:40:11,585-INFO-lib.common_biz.fiz_assert-194-优惠券详情：{'status': '6', 'usable_amt': None}
2021-03-10 16:40:11,585-INFO-lib.common_biz.fiz_assert-198-优惠券表记录正确
2021-03-10 16:44:18,815-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境3-MYSQL：{'host': '10.52.46.169', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-03-10 16:44:19,100-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境3-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-03-10 16:44:19,185-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]成功
2021-03-10 16:44:19,185-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]
2021-03-10 16:44:19,405-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]成功
2021-03-10 16:44:19,405-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]
2021-03-10 16:44:19,427-INFO-lib.common.db_operation.mysql_operation-118-成功连接到测试专用环境-MYSQL：{'host': '10.52.54.122', 'user': 'opay', 'pwd': '_UI7xHubrhTPIP1J_T4so7SU7ATCrUzm7cAh6TdBLLHWUSQUQqD8p45xVQzV3Czi', 'port': '33066'}
2021-03-10 16:44:19,427-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `test_account`.`account_test_env`
2021-03-10 16:44:19,433-INFO-lib.common.session.http.http_json-38-http://secure.pay-test3.wanyol.com/voucher/grantSingle
2021-03-10 16:44:19,434-INFO-lib.common.session.http.http_json-39-传入的参数：{'amount': 1, 'appId': '2031', 'appSubName': 'AUTO_TEST', 'blackScopeId': '', 'checkName': 'TEST_ACCOUNT', 'configId': '', 'count': 1, 'country': 'CN', 'currency': 'CNY', 'expireTime': '2022-03-10 16:44:19', 'ext1': '', 'ext2': '', 'maxAmount': 1, 'name': 'AUTO_TEST', 'partnerOrder': 'AUTO202103101644191057538371323409589588139716', 'ratio': '', 'remark': '', 'salePrice': 0, 'scopeId': '7104f7bc23e445daba913a5a96a264ac', 'settleType': 1, 'sign': 'AC4029F5DA7F29649D19E0DD28E9AA6E', 'ssoid': '2076075925', 'subScopeId': '', 'timezone': '', 'type': 2, 'useableTime': '2021-01-01 00:00:00'}
2021-03-10 16:44:20,437-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'batchVouCreateResList': [], 'msg': 'success', 'code': '0000', 'vouIdList': ['64134460'], 'batchId': ''}
2021-03-10 16:44:44,941-INFO-lib.common.session.dubbo.dubbo-51-dubbo invoke语句：invoke com.oppo.voucher.api.CouponBatchGrant.batchGrant({'couponName': 'anto_grant1615365884939', 'useableFromTime': '2020-01-01 00:00:00', 'useableEndTime': '2022-12-31 00:00:00', 'settleType': '1', 'bizNo': '2031', 'scopeId': '7104f7bc23e445daba913a5a96a264ac', 'blackScopeId': '', 'subScopeId': '', 'couponType': 'KB_COUPON', 'couponDiscountType': 'XIAOFEI', 'conditionAmount': '0', 'cutAmount': '10', 'ratio': 0, 'maxCutAmount': '0', 'applyCount': 1, 'ssoidList': ['2076075925'], 'batchId': ''})
2021-03-10 16:44:44,957-DEBUG-lib.common.session.dubbo.dubbo-55-{"data":{"batchVouCreateResList":[{"ssoid":"2076075925","vouId":"64234625"}],"vouIdList":null,"batchId":"8f6f6a400f20412ebb6379205027747b"},"success":true,"errorDetail":"成功","resCode":"000000","resMsg":"成功"}

2021-03-10 16:44:44,957-INFO-lib.common.session.dubbo.dubbo-57-dubbo回参：{'data': {'batchVouCreateResList': [{'ssoid': '2076075925', 'vouId': '64234625'}], 'vouIdList': None, 'batchId': '8f6f6a400f20412ebb6379205027747b'}, 'success': True, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功'}
2021-03-10 16:44:44,974-INFO-lib.common.session.dubbo.dubbo-51-dubbo invoke语句：invoke com.oppo.voucher.api.admin.CouponBatchInfoAdmin.operate({'couponBatchId': '8f6f6a400f20412ebb6379205027747b', 'batchOperateType': 'PASS'})
2021-03-10 16:44:50,013-DEBUG-lib.common.session.dubbo.dubbo-55-{"data":{},"success":true,"errorDetail":"成功","resCode":"000000","resMsg":"成功"}

2021-03-10 16:44:50,013-INFO-lib.common.session.dubbo.dubbo-57-dubbo回参：{'data': {}, 'success': True, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功'}
2021-03-10 16:46:40,040-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境3-MYSQL：{'host': '10.52.46.169', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-03-10 16:46:40,357-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境3-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-03-10 16:46:40,402-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]成功
2021-03-10 16:46:40,402-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]
2021-03-10 16:46:40,636-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]成功
2021-03-10 16:46:40,636-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]
2021-03-10 16:46:40,659-INFO-lib.common.db_operation.mysql_operation-118-成功连接到测试专用环境-MYSQL：{'host': '10.52.54.122', 'user': 'opay', 'pwd': '_UI7xHubrhTPIP1J_T4so7SU7ATCrUzm7cAh6TdBLLHWUSQUQqD8p45xVQzV3Czi', 'port': '33066'}
2021-03-10 16:46:40,659-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `test_account`.`account_test_env`
2021-03-10 16:46:40,665-INFO-lib.common.session.http.http_json-38-http://secure.pay-test3.wanyol.com/voucher/grantSingle
2021-03-10 16:46:40,665-INFO-lib.common.session.http.http_json-39-传入的参数：{'amount': 1, 'appId': '2031', 'appSubName': 'AUTO_TEST', 'blackScopeId': '', 'checkName': 'TEST_ACCOUNT', 'configId': '', 'count': 1, 'country': 'CN', 'currency': 'CNY', 'expireTime': '2022-03-10 16:46:40', 'ext1': '', 'ext2': '', 'maxAmount': 1, 'name': 'AUTO_TEST', 'partnerOrder': 'AUTO202103101646404179265304058478009498756417', 'ratio': '', 'remark': '', 'salePrice': 0, 'scopeId': '7104f7bc23e445daba913a5a96a264ac', 'settleType': 1, 'sign': 'BFB0C7C14DD6EAAB237ACB92F7A098DD', 'ssoid': '2076075925', 'subScopeId': '', 'timezone': '', 'type': 1, 'useableTime': '2021-01-01 00:00:00'}
2021-03-10 16:46:40,822-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'batchVouCreateResList': [], 'msg': 'success', 'code': '0000', 'vouIdList': ['64134461'], 'batchId': ''}
2021-03-10 16:53:36,109-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境3-MYSQL：{'host': '10.52.46.169', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-03-10 16:53:36,374-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境3-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-03-10 16:53:36,434-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]成功
2021-03-10 16:53:36,434-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]
2021-03-10 16:53:36,683-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]成功
2021-03-10 16:53:36,684-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]
2021-03-10 16:53:36,699-INFO-lib.common.db_operation.mysql_operation-118-成功连接到测试专用环境-MYSQL：{'host': '10.52.54.122', 'user': 'opay', 'pwd': '_UI7xHubrhTPIP1J_T4so7SU7ATCrUzm7cAh6TdBLLHWUSQUQqD8p45xVQzV3Czi', 'port': '33066'}
2021-03-10 16:53:36,700-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `test_account`.`account_test_env`
2021-03-10 16:53:36,745-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=0
2021-03-10 16:53:36,749-INFO-lib.common_biz.find_merchant_info-28-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1603465160'}
2021-03-10 16:53:36,749-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1603465160' AND pay_channel = 'wxpay'
2021-03-10 16:53:36,752-INFO-lib.common_biz.find_key-109-查询到秘钥信息：g4rTCeoBJFG4KyWCjTQCqltfEDma3yxR
2021-03-10 16:53:36,753-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no, plan_id FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=1
2021-03-10 16:53:36,756-INFO-lib.common_biz.find_merchant_info-41-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601', 'plan_id': '120877'}
2021-03-10 16:53:36,757-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1603465160' AND pay_channel = 'wxpay'
2021-03-10 16:53:36,760-INFO-lib.common_biz.find_key-109-查询到秘钥信息：g4rTCeoBJFG4KyWCjTQCqltfEDma3yxR
2021-03-10 16:53:37,158-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT app_key FROM `db_platform_gateway`.`server_app_info` WHERE app_id = '100002'
2021-03-10 16:53:37,162-INFO-lib.common_biz.find_key-96-查询到秘钥信息：BB36C34EB6644AB9694315AF7D68E629
2021-03-10 16:53:37,162-INFO-lib.common.session.http.http_json-38-http://secure-gateway.pay-test3.wanyol.com/gateway/nearme.account.query
2021-03-10 16:53:37,162-INFO-lib.common.session.http.http_json-39-传入的参数：{'app_id': '100002', 'service': 'nearme.account.query', 'format': 'JSON', 'charset': 'UTF8', 'sign_type': 'MD5', 'sign': 'AFBD790EC05AC115CFF9D1EE6D723C11', 'timestamp': '2021-03-10 16:53:37', 'version': '1.0', 'bizContent': "{'ssoid': '2076075925'}"}
2021-03-10 16:53:38,695-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'data': {'ssoid': '2076075925', 'timeStamp': 1615366422414, 'useableBalance': 0, 'totalGiveBalance': 0, 'chargeBalance': 0, 'freezeBalance': 0, 'giveBalance': 0}, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功', 'success': True}
2021-03-10 16:53:38,696-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT app_key FROM `db_platform_gateway`.`server_app_info` WHERE app_id = '100002'
2021-03-10 16:53:38,699-INFO-lib.common_biz.find_key-96-查询到秘钥信息：BB36C34EB6644AB9694315AF7D68E629
2021-03-10 16:53:38,699-INFO-lib.common.session.http.http_json-38-http://secure-gateway.pay-test3.wanyol.com/gateway/nearme.account.query
2021-03-10 16:53:38,699-INFO-lib.common.session.http.http_json-39-传入的参数：{'app_id': '100002', 'service': 'nearme.account.query', 'format': 'JSON', 'charset': 'UTF8', 'sign_type': 'MD5', 'sign': '034A6752EAD2024E84EFE1575E448866', 'timestamp': '2021-03-10 16:53:38', 'version': '1.0', 'bizContent': "{'ssoid': '2076075925'}"}
2021-03-10 16:53:38,746-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'data': {'ssoid': '2076075925', 'timeStamp': 1615366422465, 'useableBalance': 0, 'totalGiveBalance': 0, 'chargeBalance': 0, 'freezeBalance': 0, 'giveBalance': 0}, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功', 'success': True}
2021-03-10 16:53:38,757-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 16:53:38,757-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "87368999672052"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: ""
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 16:53:38,861-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "32eda508c9854bfca30d805020edbd83"
s_p: "RGdVeHROMkNYV0FSY0FucDg1eGJsTHRjaGI4ckx1T0xCYzJUekxVNjZZMzFKMjRwZ251dHI0ZnNjdm1SbWl3YmxrcllvYzNiTHNuS1dOR2p2am1OVWZCY0QxeVg1a2M0VWFyaTliWXJ2V2hoRHVOMEM2ZENZeEhDdnY3OVdnY1llUzYzNEZqdzIxUDNJVHVtUGRxTWFhTlpOZEZVZk45b3hGcnhMRmxVUkxGUnhFR015VXJiVFo4QWt2dVU0TmtaeXZsVW9VYzlZUUVjN09oZFpZSzBodmZOZG5MM3dDZ0ZOSXN5MTRtWnhsWnpScnRGYU1WUG1YWVg1UkoyUzV2MHYyQ0FPNEk4cHcyZDVpYXBhUVE4ZENodmROWVhFZlR2UnFBTHBmTEtvUTk0WVA0d25CSENMY0RCczhrd3gyVGVXbWc1NndzdEFsb0drQm5GMUp5WnFLVmVTRG8wZEhrWkRMVW9lc3J4S2ZDZUt4MjdaeEtKcTZpTHM5NDNYSnJzQnlmQW5keWk5RVVtT3Zjd0c0ZTIxZ2swaWVycGpqOG41WmVqS2tUa0dIQ3ZsQUppOXB2UjZnanlUekVUb0V2S3ljVlFsUjRKVUdRdEpKVDhtNjBjNU1HTTN3d1BtWFBsRlEwb3ZHbEZzS2hTUWZ6Zk95ZXA2cHlnUG51SHJ3eTBEVDhYVUp0SmJ2TFZrdmdtMDVyUGN4dEJaWVZXZGlSbDl6cXY3MEdtdzMwRkxubnd4VE5lZmhvQXoxeThrc2Q5eWVxbVBBeGdVZjUxbGc2MzY0bllzaUQ4NHkwcEFCQWhEeTRtNFBubWo5ZFVjQzNLRzR3QVBlaXFEaVFjcjR4aFFLQjBNT2tHSUg0bnVSM0U1STQ0bThyc0w1dzVGdFdtTVNoZ1RFeERKSHNOTGZOWEI2SDZKT0lvZDlMYVVUR2NubEVLSUlFc2xWR1lwT045SXd5dGNRN1ZvSWNwVVhUYWlrZjl1UmxDQ0RpcWliM1RnNE5yUGxOcUwwMHpPc3FkWEl6ZGtucTJwZjV1dlFlTkNhZUdLZWJzV1NRNGU3cWU="
m_p: "2l116uEn04NHo01y59W55k76ZKtt589um5rx5VDaN57nr4J5VvH99gHf53yvYMgc"
e_t: "1615474422542"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 3001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134460
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 2
}
userinfo {
  username: "156******06"
}

2021-03-10 16:53:38,863-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 16:53:38,863-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "12.0"
  t_p: "32eda508c9854bfca30d805020edbd83"
  imei: ""
  model: "PCRM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "8rLuOLBc"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: ""
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
type: "wxpay"
amount: "0.01"
cardno: ""
cardpwd: ""
ext: ""
basepay {
  channelId: ""
  notifyurl: "http://secure.pay-test3.wanyol.com/notify/receiver"
  productName: "KB\342\200\224RECHARGE_PAY"
  productDesc: "KB\342\200\224RECHARGE_PAY"
  partnercode: "2031"
  appversion: "1.1.0"
  currencyName: "\345\217\257\345\270\201"
  rate: 1.0
  partnerorder: "null"
}
sign: "eJYCyb8IEXwYpo6rhjmelcbaedqDTCifwPPQP5fMZod/uESNbA22C1RrilFPHKkxzFIcSePpaSGD61hesWC4H3uATnB/NgRm7HF5V2INZLZhIqoKUEZFzqZCauEgyJDdxx7UZo2R47rDhWgUPfTVAIfSSTNzDYwon/esVRAbgbesmAw4y+i2MgGEeCq3QDaojGfgYcBKNyCFMwnUrYEjxjS0Hqv93hNejguzS2COCfkVcEbh5wiAeyXFcuASgSJfz916a2ZjtGz49Hvt/RLTdoZUv5hZWkYymdfg0PzIelZkYPtujvJjEI29pksvh/61QIac7m/pAsL/MYg90AvHyg=="
ip: "58.252.5.75"
isNeedExpend: "0"
appId: ""
payTypeRMBType: "0"
tradeType: "common"
screenInfo: "FULL"

2021-03-10 16:53:39,282-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "{\"appid\":\"wx93eea96ecc33f168\",\"noncestr\":\"ebd721ecccda4670a0623ac94c38c804\",\"packageNm\":\"Sign=WXPay\",\"partnerid\":\"1603465160\",\"prepayid\":\"wx1016534293798468e65fd1dd993b6e0000\",\"sign\":\"2A8C35CF039E5E3F170C523EE674D5BB\",\"timestamp\":\"1615366422\"}"
}
payrequestid: "KB202103101653422076075925452452"
model: ""

2021-03-10 16:53:40,282-INFO-wxpay-scarlet-52-回调参数：<xml><transaction_id><![CDATA[0637419572627555909897038772]]></transaction_id>
<nonce_str><![CDATA[K32kCFA0YJobE4TtQlucRynI5rpMLBGh]]></nonce_str>
<bank_type><![CDATA[OTHERS]]></bank_type>
<openid><![CDATA[oCg6Xt8NvRi7jGuap_5B6XdY4oYk]]></openid>
<sign><![CDATA[9FEB754B95105D881ABB27B9F1944313]]></sign>
<fee_type><![CDATA[CNY]]></fee_type>
<mch_id><![CDATA[1603465160]]></mch_id>
<cash_fee><![CDATA[1]]></cash_fee>
<out_trade_no><![CDATA[KB202103101653422076075925452452]]></out_trade_no>
<appid><![CDATA[wx93eea96ecc33f168]]></appid>
<total_fee>1</total_fee>
<trade_type><![CDATA[APP]]></trade_type>
<result_code><![CDATA[SUCCESS]]></result_code>
<attach><![CDATA[TEST]]></attach>
<time_end><![CDATA[20210310165340]]></time_end>
<is_subscribe><![CDATA[N]]></is_subscribe>
<return_code><![CDATA[SUCCESS]]></return_code>
</xml>
2021-03-10 16:53:41,823-INFO-wxpay-scarlet-56-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-03-10 16:53:41,824-INFO-wxpay-scarlet-58-回调解析成功
2021-03-10 16:53:41,836-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 16:53:41,836-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "17064000764594"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "CH5iZQheOclm3UIupWqjzTsKMyL4xF76"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 16:53:41,919-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "689729055dd04535b5a0a63a5842a74e"
s_p: "ZVdhZVZVZzl3aUI3SFpMT3VxTG52b1dBS0hRckJLZ1g1SkRlWUQxekU3WlJrTkk3eFlGNVd0N2lrRThLRDFjVU1qNkhWZjhJam9FQ1RLSlluQ0sxUmNuMFFiSTJWckpBbTY4SklvQ0xMbHgxOWZhaXVnSWRnUGRaRE1JWW1Ca1Uwd2d6VFZ0d011a3FDOTlVcVNmcGIzVkptTHhlNDR3aEVkczVNdGoxbkJwSjFjam1BYnQ4eTBrMXdlUHNFdDFCWjNFaFRicHMxa1FmcVJwRmszemg3YmRDYzdFbFQ3UXpKaHlqWUpFZ2JnaHVESE5ZRUI1OFNpZU9STkRabmdDQTdGSHNiQ3Aybk5lV2s3N256NHpYVkZuS3dZc2tRbjM3V25NRktXWURLcFF0dHV2NFhCV2dwMVpWVVNkRGN0RG9BOVpiMmJYdlFLNVVtS1BJWGpXYnJLalE4WFpnclBwQUhrUkEyRG5WYWFMZmR3YkZaR2hScjl0bTVOcERkS1lHMFU4VFlHdm1TOUxhNnJBZm5ibjFnRWVYc3h6MzR5eWtuc1E5RlpEUzFQTE94Nm0yaVdxOEg2VExLdkJXSkltSnNiTWFZZ3ZPbUhYYnlpUXlNWkthNGVpcndtUWNKZVV1bVdjd042QWhvRHlIY1BqOEhxWVZRU0RXR3RKdmsyUWVOZWhWZnEzVldyYnJ0RUhVRzR5dHZEejdqSDA0dklzdHdaekxBRkN6am1ldDhobGdDNUNScGVqU2RLUjltcU45MVVZVjI0ZW91S05QeDBvVHRhdUFZY3BJZm5qZU1QQ29IVHEwbHBtd21NRkFmaHNZUkF6WElvZXk5eUFFampRMjR3cnNGVGdnT3Q5S2F1VEZoVUkwTklHR2V3STlhdEk4QnNheUNwVGZHdUQ3WGU2bnZEOVBkTlB0REUwVU53eXhIUG83MDREdE51M1BqOVFYMTFEbUlQSjByNlg3bTRsalhLOElKN1NCUjNpN21ZZmlTdEFUYWFNZWx2UHdGOEo1UW82ZDc0bXlybmtISzBQWU9WU1RCQzR0VWtNZms0NUI="
m_p: "cDQl9zA9firL65OcouEmN0u9jlnT7Av209xLA19oKnCX7k5CDC9Ih3Y372vtg8cH"
e_t: "1615474425611"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 3001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134460
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 2
}
userinfo {
  username: "156******06"
}

2021-03-10 16:53:41,919-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 16:53:41,919-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "5.0"
  t_p: "689729055dd04535b5a0a63a5842a74e"
  imei: ""
  model: "PBDM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "xYF5Wt7i"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
payrequestid: "KB202103101653422076075925452452"
version: "260"
queryType: "PAY"

2021-03-10 16:53:42,033-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "2001"
  msg: "\344\270\215\350\277\233\350\241\214\346\266\210\350\264\271\350\260\203\347\224\250\357\274\214\345\271\266\345\205\205\345\200\274\347\273\223\346\236\234\346\234\252\347\237\245"
}
successStatus: "1086"
discountAmount: "0"
origAmount: "0.01"

2021-03-10 16:54:08,356-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境3-MYSQL：{'host': '10.52.46.169', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-03-10 16:54:08,612-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境3-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-03-10 16:54:08,660-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]成功
2021-03-10 16:54:08,661-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]
2021-03-10 16:54:08,876-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]成功
2021-03-10 16:54:08,876-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]
2021-03-10 16:54:08,890-INFO-lib.common.db_operation.mysql_operation-118-成功连接到测试专用环境-MYSQL：{'host': '10.52.54.122', 'user': 'opay', 'pwd': '_UI7xHubrhTPIP1J_T4so7SU7ATCrUzm7cAh6TdBLLHWUSQUQqD8p45xVQzV3Czi', 'port': '33066'}
2021-03-10 16:54:08,890-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `test_account`.`account_test_env`
2021-03-10 16:54:08,902-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=0
2021-03-10 16:54:08,906-INFO-lib.common_biz.find_merchant_info-28-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1603465160'}
2021-03-10 16:54:08,906-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1603465160' AND pay_channel = 'wxpay'
2021-03-10 16:54:08,910-INFO-lib.common_biz.find_key-109-查询到秘钥信息：g4rTCeoBJFG4KyWCjTQCqltfEDma3yxR
2021-03-10 16:54:08,910-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no, plan_id FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=1
2021-03-10 16:54:08,914-INFO-lib.common_biz.find_merchant_info-41-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601', 'plan_id': '120877'}
2021-03-10 16:54:08,914-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1603465160' AND pay_channel = 'wxpay'
2021-03-10 16:54:08,917-INFO-lib.common_biz.find_key-109-查询到秘钥信息：g4rTCeoBJFG4KyWCjTQCqltfEDma3yxR
2021-03-10 16:54:09,298-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT app_key FROM `db_platform_gateway`.`server_app_info` WHERE app_id = '100002'
2021-03-10 16:54:09,301-INFO-lib.common_biz.find_key-96-查询到秘钥信息：BB36C34EB6644AB9694315AF7D68E629
2021-03-10 16:54:09,302-INFO-lib.common.session.http.http_json-38-http://secure-gateway.pay-test3.wanyol.com/gateway/nearme.account.query
2021-03-10 16:54:09,302-INFO-lib.common.session.http.http_json-39-传入的参数：{'app_id': '100002', 'service': 'nearme.account.query', 'format': 'JSON', 'charset': 'UTF8', 'sign_type': 'MD5', 'sign': 'F4DE3790C99EBB92AE68CF1689941EDD', 'timestamp': '2021-03-10 16:54:09', 'version': '1.0', 'bizContent': "{'ssoid': '2076075925'}"}
2021-03-10 16:54:09,413-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'data': {'ssoid': '2076075925', 'timeStamp': 1615366453130, 'useableBalance': 1, 'totalGiveBalance': 0, 'chargeBalance': 1, 'freezeBalance': 0, 'giveBalance': 0}, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功', 'success': True}
2021-03-10 16:54:09,424-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 16:54:09,424-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "96371711422164"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "fm2GPSwpvDKERCkyMIeYN0ao7HX8iOzc"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 16:54:09,519-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "6d35915361474b9eb3747e333646b069"
s_p: "SFpxRUdGMFJHQU1lM2VCVDNlN3F1ZUw2NzZQWXEzUnAzcVJCOHNPRUpPWWpwS0dVb21IY3A3SnRmUXNZV0p5Wk9wajlwMkY3OHBiNER0cERNT3RNS25rS0tsZW44amVrQ0Rpa3JuVzFaV0lXNjNWcUs1bG44TWlWSGFyb3pDRjBYRzlBSmIxS3lnYXVLOXBKTWo5SnphQW1kTnJEVU9pOGFuNXNyTUg1R3ZhSWVqT2tFZU5xamJoUWpoMEtoU1NWemFxUm5ZTXZvaDNLY1AzY0wzSVAzTEhHNW0xa1Z4c2pRcXBCWTlPMlhKOWxZNWVSd3ZNWVhPYzgzSjZsckRUZEE3SUlrRlhKaHdqMlE5aVNyYjNPQmlHNWpndnI0aUFYODRWUmpVQnNoWFR2OHBnaXIydnhGRDRhODA0cEs0U3J2WmlIdTBmem54MThWRHZ2MXhHbDRMbDFlbDdhamZGbkxITWV2b3JKa29vd2JmbTVrUHhkcThGU3Q4TkFsMUM1Ym12VUtxT3hmODk3VFp5UmZtMjVOdjhtcWpsclpJR1IyUlQ4MWpSRG9Xazdydmpjc1JWMHNJak1hMWoxRlo2bW9YT29iZDdjRHZFZDd2Nmxxc2dUcG1BczJ0aXRMM05QOGRpbUhiZmIwR0ZERzA0VWZpbDR1aXZ4eXNqaTI2aG43VVNod3pmMkxCNDlhVWdGR3YxcnlPQVFocFFtY2RMMEtiMldFZndNRVpUalBNOXJZNE13NzlpcDhIaTlYTzRHeGZTWDBmYlJIdmpGOTBuWEhKT1dYQW5PZHhpbXRUejg2dDRHWGtvcFpxdjE3Uk5ocXBmNHJkd2tmZkFRamROU1dPNHRoUks0YnN6NnBqZ1JBSWQyRmFtSUpWZTFxQ21IMTF1QlVxdG0xRkRXYk01cDBaVnViOXcwcU1ZcDJkdEE5ZE9sSGY4enNPSUJxOGxiT3JMaExlcVdPd3dRdkdCMXdjOVRkMDE2T0RKUVEyQTdGWm5ISWRYaHd6ZnRWdlJETTl4bkxqRUF5dU83VEZyeUlNSnUyZ3pLN3FIWENnd3M="
m_p: "G8UlIJj77qhYo22pRkWXTcWrXkd0HOx97y2sZqUb9b8y328kUuDaT4utc64N04Ka"
e_t: "1615474453202"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0.01"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 3001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134460
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 2
}
userinfo {
  username: "156******06"
}

2021-03-10 16:54:09,547-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 16:54:09,547-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "6.0"
  t_p: "6d35915361474b9eb3747e333646b069"
  imei: ""
  model: "PCRM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "WJyZOpj9"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: "42E1F48352C04B80910A7BBB7FDDE8022d5334806a8d9b083e64c9324c08c040"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
price: 1
count: 1
productname: "ONLY_KB_SPEND"
productdesc: "ONLY_KB_SPEND"
partnerid: "2031"
callBackUrl: "http://secure.pay-test3.wanyol.com/notify/receiver"
partnerOrder: "SX1Dy3qCGW4mQlweVIEBZTz7jnOAHMph"
channelId: ""
ver: "1.1.0"
source: "PaySDK"
attach: ""
sign: "cCrEEBmg9oTOwxQ0+PjHdCD77ewlfau8pIL7JZpWOqkU563Rkp4+ivG8L19tUaHXDWGQA9GOadoqyj95LOTNbsBfGVRA2eDiR1OOfDYyhfOc6Rq/RRJTnYoVgBrH03kLQIYL7EIDNrBNCOiPJaHxIeFoOi0f1ADovdhO3Nmj5rw="
order: "1690518396256"
ip: "120.197.152.211"
factor: ""

2021-03-10 16:54:09,788-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: ""
}
rpay: "0"
gpay: "0"

2021-03-10 16:54:09,788-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT app_key FROM `db_platform_gateway`.`server_app_info` WHERE app_id = '100002'
2021-03-10 16:54:09,792-INFO-lib.common_biz.find_key-96-查询到秘钥信息：BB36C34EB6644AB9694315AF7D68E629
2021-03-10 16:54:09,792-INFO-lib.common.session.http.http_json-38-http://secure-gateway.pay-test3.wanyol.com/gateway/nearme.account.query
2021-03-10 16:54:09,793-INFO-lib.common.session.http.http_json-39-传入的参数：{'app_id': '100002', 'service': 'nearme.account.query', 'format': 'JSON', 'charset': 'UTF8', 'sign_type': 'MD5', 'sign': 'F4DE3790C99EBB92AE68CF1689941EDD', 'timestamp': '2021-03-10 16:54:09', 'version': '1.0', 'bizContent': "{'ssoid': '2076075925'}"}
2021-03-10 16:54:09,816-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'data': {'ssoid': '2076075925', 'timeStamp': 1615366453537, 'useableBalance': 0, 'totalGiveBalance': 0, 'chargeBalance': 0, 'freezeBalance': 0, 'giveBalance': 0}, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功', 'success': True}
2021-03-10 16:54:09,828-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 16:54:09,828-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "91248440973172"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: ""
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 16:54:09,917-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "43d4374d5e644a74a20bb5f4e5a53a0c"
s_p: "ZUp6YlBqYWhDNmxVYk1qR3F6TGtqclA3MkFKaEQ2dE5vNmx0SmRVSmRWWlhwVmtMSUo0M2xpNDRoVW90bEM5MTlhNEVSc0ZKVTQxVXprYjQyVUlGQmFQdzdOSWVOUW9scmh5eTVNMzNXdGdnM2thRDRQMmg2Zk9NbVFBTGZDcFNhd0M2dkJOVEg0bXJFbXF1Y0VGYTVLT2N1YTZOSG0zZGRoSzUzUG1VRkd6SUhqQm1Bekw2VVBoa0FGeDU2ZTVTeE9QTVhIR0tLV0gyR3ZPdXJCek9aSThxV25KSEpzWDJRQUx1MEpwdFk5YTdDSXhROWsxcDF5Zkd1aUE4Z08zYm9yZDBTWmVGS3RheEZSM09VYVRrN3dQbUJ1czFCNHM1a1ppM21HWmVNejdCdEhKa1ZoUjJnc29zYmRmN3R5T0lldWFEZno4MzBRWko0NUtUamRlazJWWEJXSEZsVEw1bjJaUWREOGNtcG1ZeTRxVEJ1MUVCaE10dktKWXpkaHNVblVYV3ZxOUhlWGU1THlCM2djWTcyOFBhdjEyZ21nTlprOTlPTnk2TXQzejRyT2RUa2RFVkdVUWNUalVCbEZyQzluZUUxVkZYMjhGcW1KZ3ZFQ2pvNUFNTkJpdzVVMUNEU1N2MlRjNUppdFd2aUY5a2dQbm81SzdpTGo1N1h5OG5PR0pjUDdzdTlvMXZ5NVRodkVkb1pISzduRngxdm55eExpR1pEdzFzdnNROXVZN0lvZHJLcTBmNmNZSndIRFdSYXEwZ3lJSDNkcG02UE1seVJVbmUwWUVCUzF4aHROTW82eVQxUGNoakdENXdZcTA5Z0ZQVEc0QUkzeldKMGVCcmFGS3l6NWlCSTdRU3paczIwVmhBem9CaVVNTHg0cVVVVGY1ZGdnZkhOSHp0T2xpdjdtMmxGV0VyT0h3MFVIenNLYTVQcXJ0TGFydW04cEcxNGNRb2QzcjdxMzRRZktHY1dic1ZGRFIxN0Q1V0NFM3pCY0tCanR0T0JoNHlMdFE0YUdkZHd4d2pGbHkydlFQMUU2MzVUU09jVFRvekZHVEc="
m_p: "MXXW98EX14Aq141655Tx0j400u1SjHm838iwSWVup8q57KSH50oWh98Ns7Ig36gh"
e_t: "1615474453611"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 3001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134460
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 2
}
userinfo {
  username: "156******06"
}

2021-03-10 16:54:09,918-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 16:54:09,918-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "12.0"
  t_p: "43d4374d5e644a74a20bb5f4e5a53a0c"
  imei: ""
  model: "PCRM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "6NHm3ddh"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: ""
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
type: "wxpay"
amount: "0.01"
cardno: ""
cardpwd: ""
ext: ""
basepay {
  channelId: ""
  notifyurl: "http://secure.pay-test3.wanyol.com/notify/receiver"
  productName: "KB\342\200\224RECHARGE_PAY"
  productDesc: "KB\342\200\224RECHARGE_PAY"
  partnercode: "2031"
  appversion: "1.1.0"
  currencyName: "\345\217\257\345\270\201"
  rate: 1.0
  partnerorder: "null"
}
sign: "NHDnRm1gcqWRknUwmX9e90DcjqdsGSvUwbptFpjUrUOITRfxc9CYUfMRTQvgURJQx6takfmL2CbgL1ZvqFQLRpGJo9Jm43H9Q470ntCdTd/8XRrBJdMUDV2DG0VwCqKYKSAmnB2cxWvTySdMv6smK12gR9r6HVxcKWWpos9JjglcTmoV7xsfI2JaHXWuqJQGEGxYJsXFbDg26z92YLnuir0y5nMUudcjGckCGCv3ppdWLAEeZZhSrcX90/QhPAxnnuw8U0YfDLSZLoQVO01TaKY7v3O9Al/d7lz2M4VFMS8eUmGXBFC4oPhocENrvZnglbeL6NzvKM60oDb0/yhBBw=="
ip: "58.252.5.75"
isNeedExpend: "0"
appId: ""
payTypeRMBType: "0"
tradeType: "common"
screenInfo: "FULL"

2021-03-10 16:54:10,328-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "{\"appid\":\"wx93eea96ecc33f168\",\"noncestr\":\"34d776b6e81e4301bf994abaa06f2fb1\",\"packageNm\":\"Sign=WXPay\",\"partnerid\":\"1603465160\",\"prepayid\":\"wx1016541397724156cc40161c2283ee0000\",\"sign\":\"C572A391DB656E4BF3CF82165BBF9C3F\",\"timestamp\":\"1615366454\"}"
}
payrequestid: "KB202103101654132076075925630242"
model: ""

2021-03-10 16:54:11,330-INFO-wxpay-scarlet-52-回调参数：<xml><transaction_id><![CDATA[6178088382488498020642118823]]></transaction_id>
<nonce_str><![CDATA[rKmk7EcCYndGTB4hjxDUN6tqOX3oWS0p]]></nonce_str>
<bank_type><![CDATA[OTHERS]]></bank_type>
<openid><![CDATA[oCg6Xt8NvRi7jGuap_5B6XdY4oYk]]></openid>
<sign><![CDATA[F03171F0A1F0078727BB62B7F81CDB0F]]></sign>
<fee_type><![CDATA[CNY]]></fee_type>
<mch_id><![CDATA[1603465160]]></mch_id>
<cash_fee><![CDATA[1]]></cash_fee>
<out_trade_no><![CDATA[KB202103101654132076075925630242]]></out_trade_no>
<appid><![CDATA[wx93eea96ecc33f168]]></appid>
<total_fee>1</total_fee>
<trade_type><![CDATA[APP]]></trade_type>
<result_code><![CDATA[SUCCESS]]></result_code>
<attach><![CDATA[TEST]]></attach>
<time_end><![CDATA[20210310165411]]></time_end>
<is_subscribe><![CDATA[N]]></is_subscribe>
<return_code><![CDATA[SUCCESS]]></return_code>
</xml>
2021-03-10 16:54:11,531-INFO-wxpay-scarlet-56-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-03-10 16:54:11,532-INFO-wxpay-scarlet-58-回调解析成功
2021-03-10 16:54:11,542-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 16:54:11,543-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "90468664190539"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "mBClvnDYe4bIME0axozkTjdNp1JP7r6i"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 16:54:11,629-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "adeadb39c0924a858ed01f54f1e1f61a"
s_p: "RWFvNTVpRkFGQmN0SGtKdHRaYWEwMEpzeTZuYUFQdERZTXdoejFoUmxVVFdXR2llbXpkNjFnbzREUTJldDBhMHFYWnRUdmxZbk5STHE0TmNNRDhrZTVqSzZ6N1FsS0pGcFBhT2N6Mks2bjFYM0FqRzFMNlRlVDk5em1kSjhIQUR3Qm5FeUQwQzNadURMUkcxNnVzRUhNU3FmQ1V0SHZMYU9TcjJDU3J1RjdyNmRtS2hFVmdYNjhoVFp0ZnBJZ01udlhCTTFvZFpGNzFOTERzSElOODhuVEhvdzJ4QmxwUVBJdlp1NVY4OHBHRWVhb0d6ZlpSZWJmRzdIWE9aTXZZdWc2bDcybzFwT2JZSlR1aXhWaTFDMlF1MENYWlNGOG5WMm91SEg1ZTBwQ2dyN0pGQnRKVVZSajA5YWIxcHZXWko3VVdLT3htTFN4RU80b0JsY2JtTkpDYmtnVlVqRE1jaWppbGx6bHJheUpLc3ZWQzFyQnFUMmgyRG4xbjNwU3NDSEtUZDBwWDJFdk1FMFl5TEZxbE51TjhnUUt4R1djckZFQUVGbjdIaXRXRllSVVN6UnZLYVJXdW9CYmh0WVM0TkJEYzJLOWhzNFdhSkd1T0p6bzNNblVuaUQ0SGRvSUdtcHR2bWEyQjE0WjJ1YTZBRjhnWks1QjF3SnlTN09Jc1F5YXp1ZnFUSTZBSG1qYXBwcklCTEZWcTVZUWZ6SFVZV1B1bW9wM0JWMks2cWFYaGw2R1Z5YktuWkQyUXFNM1M5T2tnTm1CNHA5NE1OcE4wVjVhQVlwZTBMVzRzMjNHQ3JaM1JnbVkxd1FBWDhjdUZqRkhYT2FUMDlVcEQ0RVl0aEVhdnF5dUNPdHlBdTJucTAwNlA1NEJkVzQ4NldDT0lKN2JPQnNXeFRMVlFFWWpOdVRNcUdkUU5RSkhUTEpiR2FmQ2FNNldJUjJ4NVZ1b2g2OTVjMEJ5VkZDMWVsSmhuU1lZa0tvdVBTbGpBazNNa3ppRGRLOGVXcmFxaEgwWlI2VjRBU3FSeG9pVVFrNFdXREx2R0hEVWhLdVFON0FsWWc="
m_p: "K0EH81W32JGi08NjMeYqM3RT8VEGZUl0475z5QClTki3xVcN7IOmY3oP4aM9ypxd"
e_t: "1615474455322"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0.01"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 3001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134460
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 2
}
userinfo {
  username: "156******06"
}

2021-03-10 16:54:11,629-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 16:54:11,629-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "5.0"
  t_p: "adeadb39c0924a858ed01f54f1e1f61a"
  imei: ""
  model: "PBDM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "1L6TeT99"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
payrequestid: "KB202103101654132076075925630242"
version: "260"
queryType: "PAY"

2021-03-10 16:54:11,714-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "2002"
  msg: ""
}
successStatus: "1086"
origAmount: "0.01"

2021-03-10 16:54:11,715-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT app_key FROM `db_platform_gateway`.`server_app_info` WHERE app_id = '100002'
2021-03-10 16:54:11,718-INFO-lib.common_biz.find_key-96-查询到秘钥信息：BB36C34EB6644AB9694315AF7D68E629
2021-03-10 16:54:11,718-INFO-lib.common.session.http.http_json-38-http://secure-gateway.pay-test3.wanyol.com/gateway/nearme.account.query
2021-03-10 16:54:11,718-INFO-lib.common.session.http.http_json-39-传入的参数：{'app_id': '100002', 'service': 'nearme.account.query', 'format': 'JSON', 'charset': 'UTF8', 'sign_type': 'MD5', 'sign': '8600593372D994CB63047EC30AB87BD9', 'timestamp': '2021-03-10 16:54:11', 'version': '1.0', 'bizContent': "{'ssoid': '2076075925'}"}
2021-03-10 16:54:11,740-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'data': {'ssoid': '2076075925', 'timeStamp': 1615366455460, 'useableBalance': 1, 'totalGiveBalance': 0, 'chargeBalance': 1, 'freezeBalance': 0, 'giveBalance': 0}, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功', 'success': True}
2021-03-10 16:54:11,741-INFO-recharge-52-可币充值成功
2021-03-10 16:54:11,742-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `db_order_4`.`order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "KB202103101654132076075925630242"
2021-03-10 16:54:11,747-INFO-lib.common_biz.fiz_assert-34-订单详情：{'id': 21702, 'pay_req_id': 'KB202103101654132076075925630242', 'notify_id': '6178088382488498020642118823', 'partner_order': 'NV203113782656752021031016541302142770674948935404', 'amount': 1, 'refund': 0, 'contents': 'KB—RECHARGE_PAY', 'products_name': 'KB—RECHARGE_PAY', 'counts': 1, 'ssoid': '2076075925', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': '1603465160', 'ip': '58.255.79.104', 'mac': '', 'model': 'PCRM00', 'app_package': 'com.example.pay_demo', 'app_ver': '1.1.0', 'sdk_ver': '260', 'partner_code': '2031', 'notify_url': 'http://secure.pay-test3.wanyol.com/notify/receiver', 'status': 'OK', 'channel_id': '', 'channel_type': 'NATIVE', 'pay_type': 'wxpay', 'direct_pay': 'KEBI', 'game_type': 'WANGYOU', 'present_amount': 0, 'original_amount': 1, 'discount_info': '', 'extra': None, 'remark': 'new way', 'request_time': datetime.datetime(2021, 3, 10, 16, 54, 15), 'success_time': datetime.datetime(2021, 3, 10, 16, 54, 11), 'modify_time': datetime.datetime(2021, 3, 10, 16, 54, 15), 'trade_type': 'CZ', 'kebi_spent': 0, 'voucher_amount': 0, 'voucher_info': None, 'country_code': 'CN', 'currency': 'CNY', 'openid': None, 'brand_type': 'OPPO', 'mobile_os_ver': '17', 'platform': '', 'screen_info': 'FULL', 'combine_order': 'N', 'voucher_id': None, 'factor': None, 'voucher_status': None, 'kebi_status': 'OK', 'channel_status': 'OK'}
2021-03-10 16:54:11,747-INFO-lib.common_biz.fiz_assert-45-订单表信息记录正确
2021-03-10 16:54:11,748-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `pay_tradeorder_4`.`trade_order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "KB202103101654132076075925630242"
2021-03-10 16:54:11,752-INFO-lib.common_biz.fiz_assert-55-trade订单详情：{'id': 11412, 'pay_req_id': 'KB202103101654132076075925630242', 'partner_order': 'NV203113782656752021031016541302142770674948935404', 'partner_code': '2031', 'products_name': 'KB—RECHARGE_PAY', 'ssoid': '2076075925', 'origin_amount': 1, 'amount': 1, 'kb_amount': 0, 'voucher_amount': 0, 'present_amount': 0, 'refund': 0, 'country_code': 'CN', 'currency': 'CNY', 'pay_type': 'wxpay', 'channel_id': '', 'channel_type': 'NATIVE', 'direct_pay': 'KEBI', 'trade_type': 'CZ', 'combine_type': 'PRIMARY', 'status': 'OK', 'notify_url': 'http://secure.pay-test3.wanyol.com/notify/receiver', 'attach': '', 'extra_info': '', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': '1603465160', 'ip': '58.255.79.104', 'mac': '', 'openid': None, 'model': 'PCRM00', 'brand_type': 'OPPO', 'app_package': 'com.example.pay_demo', 'app_ver': '1.1.0', 'sdk_ver': '260', 'mobile_os_ver': '17', 'platform': '', 'screen_info': 'FULL', 'remark': None, 'request_time': datetime.datetime(2021, 3, 10, 16, 54, 14), 'success_time': datetime.datetime(2021, 3, 10, 16, 54, 15), 'modify_time': datetime.datetime(2021, 3, 10, 16, 54, 15)}
2021-03-10 16:54:11,752-INFO-lib.common_biz.fiz_assert-63-trade订单表信息记录正确
2021-03-10 16:54:11,752-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `virtual`.`tb_recharge202103` WHERE ssoid = '2076075925' and rechargeOrder = "KB202103101654132076075925630242"
2021-03-10 16:54:11,756-INFO-lib.common_biz.fiz_assert-83-tb_recharge订单详情：{'id': 11635, 'ssoid': '2076075925', 'imei': '', 'rechargeTime': datetime.datetime(2021, 3, 10, 16, 54, 15), 'amount': 1, 'status': 'OK', 'rechargeOrder': 'KB202103101654132076075925630242', 'partnerId': '2031', 'rechargeChannel': '46', 'appPackage': 'com.example.pay_demo', 'model': '', 'clientIp': '', 'source': None, 'updateTime': datetime.datetime(2021, 3, 10, 16, 54, 15)}
2021-03-10 16:54:11,756-INFO-lib.common_biz.fiz_assert-91-tb_recharge订单表信息记录正确
2021-03-10 16:54:11,756-INFO-lib.common.session.http.http_json-38-http://secure.pay-test3.wanyol.com/voucher/grantSingle
2021-03-10 16:54:11,756-INFO-lib.common.session.http.http_json-39-传入的参数：{'amount': '1', 'appId': '2031', 'appSubName': 'AUTO_TEST', 'blackScopeId': '', 'checkName': 'TEST_ACCOUNT', 'configId': '', 'count': 1, 'country': 'CN', 'currency': 'CNY', 'expireTime': '2022-03-10 16:54:09', 'ext1': '', 'ext2': '', 'maxAmount': 1, 'name': 'AUTO_TEST', 'partnerOrder': 'AUTO202103101654113094800747485034668953037491', 'ratio': '', 'remark': '', 'salePrice': 0, 'scopeId': '7104f7bc23e445daba913a5a96a264ac', 'settleType': 1, 'sign': '86C013B8D83731F1E964162479F5503B', 'ssoid': '2076075925', 'subScopeId': '', 'timezone': '', 'type': 2, 'useableTime': '2021-01-01 00:00:00'}
2021-03-10 16:54:11,839-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'batchVouCreateResList': [], 'msg': 'success', 'code': '0000', 'vouIdList': ['64134462'], 'batchId': ''}
2021-03-10 16:54:11,850-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 16:54:11,851-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "30150434221509"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "HWR83cCTxotaKdp0zDYAqZn5uwkfyQ9I"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 16:54:11,940-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "d154d336f2bf467aa5e16095e73acc69"
s_p: "bTZDU09tc1NoM1RhR3BmM2VaclpjTk9MQVRrVmE3RGExcU12UHMxZkpvQmFtSFl2eVd5NXR2NFNhRTZzN1RxZEhhVFo4d1Vka3oxa3l5NE1nUE1IZVhENmlsUlVjYjVRQmdYaDJRd2J4SnpSM1VYZXpPSUhydlUxSG5DZWhqb2h3MEhkaEgwckw4cFBGR1g2RmJydEpyaEJsSUpjakdnaTFHdWJHTWZnUFV5R2E3QTVCenJsU09KMHJKNnVBYThIZlJPY3hCcnRDOUlpYThTcVZHU0RsQVlEcEpEUDhEQW9UajE4cDRXU3o5N0JiT1ppODhVaWVxc0FxS1Q5WmNzVk5xQUhrbXpraEpzQVJGZXhKN085aGpVSjRiNEVkb1hJVXJud09GbENxY0Uyb29YeVhJTVdxTngzeWk2ak1MY1FFWUVMM0t1UGw0SHhNaURaaHRjVGpUVlBYOFh1R1A1cFVDNjhOd2NGNm9yakRZTjd3cHNVY0ZERjRWaDVoZW50ZUF3YkNBbWJpN2hhTlJiOUo5RXpkbGlBZ0o4d2JsYnB4Q3djT3haSTNWV3NlOUVuRFR1enlBRWYyNTZESFJucXRPUWhKcFlRNlI4NFpueTVYOTdSbEpVeHRGbTExY1JJUEZSUXhQaEtXRmJlZW5NdGFzbnpxazQxbkRsQkFHQ2NScHpJS2t1SDA4SVRBWlQzalNHcXRZR3RsdmlqZ2tsNXFaRnVTa1FMVUpqZkJkc2c2cHZUQTRvU0hwY3JlUThtcEN1WlFrQ0RRdDBvV1ltUDQ1QkpOVjRnNFIwTE1YTVNGZnhPVkNTT1BZUUZoaVhEWm1zTTUwTXFXN1FwaDJUVmJkOXkxdlFZb0p2cVU5dFJDT1FBcW81TlVVRndJWFdsNlNWU3hQb2lRVUZGTFh5Sm5jcnBwaGtUT0k1RDNuTWxMcE9MUFM0djRYeXNka2w1bll3aUxNa2ZIbmlZUzlkTnJVbm1WWk13NEtzS3ZGZVBIWVVqcVVaT0R5dGhwaW1obG5IUjVjbExNTlhYRGFjbENTUFV6RWx6NWoxSVVUenA="
m_p: "A1OVB0K392ojjRT24b319Sr4Ic5JmHacPL55a1ZT35M5eNRVth3c6cOlr8zea4f7"
e_t: "1615474455631"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0.01"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 3001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134462
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134460
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 3
}
userinfo {
  username: "156******06"
}

2021-03-10 16:54:53,504-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境3-MYSQL：{'host': '10.52.46.169', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-03-10 16:54:53,802-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境3-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-03-10 16:54:53,853-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]成功
2021-03-10 16:54:53,853-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]
2021-03-10 16:54:54,086-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]成功
2021-03-10 16:54:54,086-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]
2021-03-10 16:54:54,100-INFO-lib.common.db_operation.mysql_operation-118-成功连接到测试专用环境-MYSQL：{'host': '10.52.54.122', 'user': 'opay', 'pwd': '_UI7xHubrhTPIP1J_T4so7SU7ATCrUzm7cAh6TdBLLHWUSQUQqD8p45xVQzV3Czi', 'port': '33066'}
2021-03-10 16:54:54,100-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `test_account`.`account_test_env`
2021-03-10 16:54:54,114-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=0
2021-03-10 16:54:54,118-INFO-lib.common_biz.find_merchant_info-28-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1603465160'}
2021-03-10 16:54:54,119-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1603465160' AND pay_channel = 'wxpay'
2021-03-10 16:54:54,123-INFO-lib.common_biz.find_key-109-查询到秘钥信息：g4rTCeoBJFG4KyWCjTQCqltfEDma3yxR
2021-03-10 16:54:54,124-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no, plan_id FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=1
2021-03-10 16:54:54,127-INFO-lib.common_biz.find_merchant_info-41-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601', 'plan_id': '120877'}
2021-03-10 16:54:54,128-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1603465160' AND pay_channel = 'wxpay'
2021-03-10 16:54:54,131-INFO-lib.common_biz.find_key-109-查询到秘钥信息：g4rTCeoBJFG4KyWCjTQCqltfEDma3yxR
2021-03-10 16:54:54,525-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT app_key FROM `db_platform_gateway`.`server_app_info` WHERE app_id = '100002'
2021-03-10 16:54:54,529-INFO-lib.common_biz.find_key-96-查询到秘钥信息：BB36C34EB6644AB9694315AF7D68E629
2021-03-10 16:54:54,529-INFO-lib.common.session.http.http_json-38-http://secure-gateway.pay-test3.wanyol.com/gateway/nearme.account.query
2021-03-10 16:54:54,530-INFO-lib.common.session.http.http_json-39-传入的参数：{'app_id': '100002', 'service': 'nearme.account.query', 'format': 'JSON', 'charset': 'UTF8', 'sign_type': 'MD5', 'sign': 'E08D42E4999154CF790D0C228A50F0B4', 'timestamp': '2021-03-10 16:54:54', 'version': '1.0', 'bizContent': "{'ssoid': '2076075925'}"}
2021-03-10 16:54:54,562-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'data': {'ssoid': '2076075925', 'timeStamp': 1615366498283, 'useableBalance': 1, 'totalGiveBalance': 0, 'chargeBalance': 1, 'freezeBalance': 0, 'giveBalance': 0}, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功', 'success': True}
2021-03-10 16:54:54,573-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 16:54:54,573-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "34778014284782"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "oqRNYFV4HUkMwTZc9vbytuOBSpehaDrm"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 16:54:54,701-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "42a3a6ec37ba4da2a238f2e826005c37"
s_p: "RTYwaE9pdmVrVmJyU0ZOVXJ4WWQ2ZXQxWllSaUVQb1R6Y2duZ3NrczhwVWFROEdUeE56aXF2MmVEMHA5VTNiandMMW5rRmVEaWtvYlE0M1dlb2E0S0luWVpUNU9KTXJNQWp5eWxzMHhWT2xKc0xYdFE4SVdrNjlkVk1mNDdDMnFuWWZ0cHNqMFJBcnltYWI4WVlzcE1KTzdXZmJmUVR2MG5LSWNvSHdPd2dZNGhNZ3NqRXFhQlM3aUhhWnFOdDlOSHQ3R1lvbUZ1V1lXZFBmREZvcmFVeTJMMVJ0S2JDQkhyTEYyamdVSXV6ZEN3YjMwZ2VrYW5iOGtMcTFTUlNoUjRpV2JwQ0lubDVQWHl6MktkaURrUzBvTVNUelZadDFmMEhSMFJuakFaMjFwUzdYeWl0THpNYXZpU2d5SXZQQXNQR2dmZzV6aEFRWTVwRjZiT2ljSTRkeTlxeUdEejNCZ1NvMlBVb0JtVlNnTzA4NFhRaHdjdGtha0d1MlZCWTF5bWJaRW5GdlVBUTI0RFBueEFhejhYWTQ3eWlTN1JlamZONTk0cGhJOHptNmNBS01sMFZUd3NmYmxId0ZkNnMyOWhTNFpnVDZPRnZHdVNDTGJ5QU5QM1M2OHZiUjkyUzNXSGlvaFltRGlkRko0R2lvTHBDSlM3eVM2SEIxRVVab0YzYzlSQ0NXUU5yeGc5S2lnRGhSMWE3dXo4bElFQnN4Z3gzUHBDaWpYN0hsQzc5alFHSGZGd2VFMDZOaVkzbnJsUUxVeWZqS3ZTU25Ma1k5NThQZ1VKb1ZoSlZkeG5qUXNkdTB4SzljNVFmaFpsWXZCSkx1TlQ2enlYeXRXUGJ2M0FvVkU3NllGWXhsMzU0a3dwc1JBdVd4Qkw2OEExSUlxTHZQU2YzQURIb0JvZ29RTk93bndwSDFXUHJPWnhCd2JteUp2SUNnZzN1eGYwWWZWSnQwRWxZeXdoeFhRUnd2cFFPUFA0RHZwb2FHNUdMZ2NiOTVraTlyV2I1Q2M1RjBVSzNhV0RFRk1HSVNpWGdKYmptMEZDaHRpM1JFYnkzOEk="
m_p: "FkjsIYOL6lM2THpA3D860hE822jkeO3rjqYEsp0cw6K2po7021G41fcYUudrg2II"
e_t: "1615474498379"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0.01"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 3001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134462
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134460
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 3
}
userinfo {
  username: "156******06"
}

2021-03-10 16:54:54,723-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 16:54:54,723-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "6.0"
  t_p: "42a3a6ec37ba4da2a238f2e826005c37"
  imei: ""
  model: "PCRM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "b8YYspMJ"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: "42E1F48352C04B80910A7BBB7FDDE8022d5334806a8d9b083e64c9324c08c040"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
price: 1
count: 1
productname: "ONLY_KB_SPEND"
productdesc: "ONLY_KB_SPEND"
partnerid: "2031"
callBackUrl: "http://secure.pay-test3.wanyol.com/notify/receiver"
partnerOrder: "ld5YBqUai91Fh2jLgOfkmpIHW6ecKTCv"
channelId: ""
ver: "1.1.0"
source: "PaySDK"
attach: ""
sign: "MSDd1I8kveaZ9Y7wd48XKNVs82l0ccMnFJBvauYA1/Kn4uIDZJg4FoSc7fLUxB16qF4PXg9jugoKHGnlgF4rA+n9YaYIqV0cC0FIZhXz3AAs036Z9vfphGUH5Fobx6N+A4kUE3OeUmlUhYLq9P6HWi2d9pZO2i1OblT9FINUyVY="
order: "4567964207596"
ip: "120.197.152.211"
factor: ""

2021-03-10 16:54:54,893-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: ""
}
rpay: "0"
gpay: "0"

2021-03-10 16:54:54,894-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT app_key FROM `db_platform_gateway`.`server_app_info` WHERE app_id = '100002'
2021-03-10 16:54:54,897-INFO-lib.common_biz.find_key-96-查询到秘钥信息：BB36C34EB6644AB9694315AF7D68E629
2021-03-10 16:54:54,897-INFO-lib.common.session.http.http_json-38-http://secure-gateway.pay-test3.wanyol.com/gateway/nearme.account.query
2021-03-10 16:54:54,897-INFO-lib.common.session.http.http_json-39-传入的参数：{'app_id': '100002', 'service': 'nearme.account.query', 'format': 'JSON', 'charset': 'UTF8', 'sign_type': 'MD5', 'sign': 'E08D42E4999154CF790D0C228A50F0B4', 'timestamp': '2021-03-10 16:54:54', 'version': '1.0', 'bizContent': "{'ssoid': '2076075925'}"}
2021-03-10 16:54:54,956-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'data': {'ssoid': '2076075925', 'timeStamp': 1615366498675, 'useableBalance': 0, 'totalGiveBalance': 0, 'chargeBalance': 0, 'freezeBalance': 0, 'giveBalance': 0}, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功', 'success': True}
2021-03-10 16:54:54,970-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 16:54:54,971-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "07437703018400"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: ""
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 16:54:55,060-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "e66891934cef40ba8378d48bc61745b9"
s_p: "bVhlaGJBY2NUaVN6SjRJV2J6NDhCT20zWVlFNGhoYW9ObTVuTjNBM2c0bGx2ejIwU0NQMTBLR1R1bDRESUJYRUNMdmtGdEh4T1E0Mkx5QnMyRkR2bUhxUE1SbkhlN2xPc3dyczN1bHhhUGpIVlN0WjN6VXV5QWJKRnU2VjVNTHEyVGRZQzRjaEloMVVkZEJTc0hzT2tkMjdTNjhUdEo3dkgxUzRCNkdYQjVqTFZPQXhMN3FCRmhaaThVZ2x1aHBLQ29NaTZQcFI4amxKUWh1dHFCd1Q2U25XVUltMnM4ZUJNRWplMFhyaE9TQnRFb3RkRWhCMnhXdDVRUlRtZnY1WFIzU2FYTnE1dXZvb3NOaUhQN1hERE5WbUhpdGo5RFpuVmZmemM2Q25iQ1FqWUNTdW4xU0dNdHR5cmx3eEpyOFJUQ0xnaHhncGtoMlJpUXhYNVRMQ1N4c0VuczJEOWkwQU5rbWZ0ZmVycXpPUlJacXdtMlFIS0J4WEp3a2xFWDRYWWsyQ3U1aE5ZSnd2bGdCaXdPNFBTMWVQNkQ5ZmNQbDNYc2lQcXJVUGh4dnhGNmhXZEJNMjdIWXVvWEI4R2F2QWVFamNqcWxkNlNGZVQ3QnoySEV1TEt0bE9hamNTREhzT0hCSzE3VzFvbXJ0Y0FONU5ZOFhHdU96V2dIdWc3TnBGeEMzZ2RNZlM0aGVDYlh1bzd5RGthNlpodmpvd2tOQUs3MVBtZkFXeW1iSXBlTXVnUWxWaDdwbU0zZUNLWm41Z3lBZjV2VVliUFJDeEIzc252NGVDdUUyd0ZBSXUzbHlpVTAxYldGcE5xOVIydXlvR1dSSXJ1eklPM2NtQzNOcURwZG9RVEdjM0R5THljZzhqdjJkUHJBUmZkc2xFRVF3MGt6eTFoYldwSUR5UFhQUGxnRFNzUVk3NHdTWmdsVmxBVkhuUTN3SHllOXEzdVVFV0Uza0dGSXROMGN0NHRacTFvNmZvM3VPdHQ3RXN3aUU5NXZmR3VLYUhVcUJDZThEZ1Z5aTU4QVdINUh1TG8zSWw3dHNDWlRBNEdQaFFWMmk="
m_p: "8tq812602C086m1IV05n5xjSG506ifj374t77o28256ym6IQ7FQ75kR87825BWTE"
e_t: "1615474498751"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 3001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134462
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134460
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 3
}
userinfo {
  username: "156******06"
}

2021-03-10 16:54:55,062-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 16:54:55,062-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "12.0"
  t_p: "e66891934cef40ba8378d48bc61745b9"
  imei: ""
  model: "PCRM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "Bs2FDvmH"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: ""
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
type: "wxpay"
amount: "0.01"
cardno: ""
cardpwd: ""
ext: ""
basepay {
  channelId: ""
  notifyurl: "http://secure.pay-test3.wanyol.com/notify/receiver"
  productName: "KB\342\200\224RECHARGE_PAY"
  productDesc: "KB\342\200\224RECHARGE_PAY"
  partnercode: "2031"
  appversion: "1.1.0"
  currencyName: "\345\217\257\345\270\201"
  rate: 1.0
  partnerorder: "null"
}
sign: "zDleQxzCwXtZnENpiNODqNrZ65EXROQseDP7i8DnUTdlxluuXEFQwzYd+rm5YSU3NKxm4QlLwiL+Pl7KQ+F3MdrB+1z5iwa4dLhxxXAnspVdV1HlxhPNXabkw8UCRfYsvBOMPF966zVFn03cbGbn71gF1SIxtz1uQq9pCYhtPbBbzRHCsNyIOS0JQ1tFR57Vtq4QPIVdK7wd0t4UP0gUStqW40GqCt/AxfJyWsdYH/vwVSccCrBa5iW3FCFfMkjeHaPIMAyjGuBCp0pqt2NPbCirSpmCoZstxD2ASHKvHnk0zosFTGXTBDb6uzWqgSaVgM0k1zZeWadjSUxmOHMUeA=="
ip: "58.252.5.75"
isNeedExpend: "0"
appId: ""
payTypeRMBType: "0"
tradeType: "common"
screenInfo: "FULL"

2021-03-10 16:54:55,503-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "{\"appid\":\"wx93eea96ecc33f168\",\"noncestr\":\"d9d40bae75b74293bdeb6568ac8c0419\",\"packageNm\":\"Sign=WXPay\",\"partnerid\":\"1603465160\",\"prepayid\":\"wx101654591447717479fd24525903a40000\",\"sign\":\"CD75448B5B583B75D6EDB5AF655E8BE1\",\"timestamp\":\"1615366499\"}"
}
payrequestid: "KB202103101654582076075925732472"
model: ""

2021-03-10 16:54:56,504-INFO-wxpay-scarlet-52-回调参数：<xml><transaction_id><![CDATA[2427019645233027518769409489]]></transaction_id>
<nonce_str><![CDATA[90KRwsNgBYyTpCudoVZWfnULAGzFjtb4]]></nonce_str>
<bank_type><![CDATA[OTHERS]]></bank_type>
<openid><![CDATA[oCg6Xt8NvRi7jGuap_5B6XdY4oYk]]></openid>
<sign><![CDATA[B08AABDA7646A3876C581E210F91C687]]></sign>
<fee_type><![CDATA[CNY]]></fee_type>
<mch_id><![CDATA[1603465160]]></mch_id>
<cash_fee><![CDATA[1]]></cash_fee>
<out_trade_no><![CDATA[KB202103101654582076075925732472]]></out_trade_no>
<appid><![CDATA[wx93eea96ecc33f168]]></appid>
<total_fee>1</total_fee>
<trade_type><![CDATA[APP]]></trade_type>
<result_code><![CDATA[SUCCESS]]></result_code>
<attach><![CDATA[TEST]]></attach>
<time_end><![CDATA[20210310165456]]></time_end>
<is_subscribe><![CDATA[N]]></is_subscribe>
<return_code><![CDATA[SUCCESS]]></return_code>
</xml>
2021-03-10 16:54:56,691-INFO-wxpay-scarlet-56-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-03-10 16:54:56,691-INFO-wxpay-scarlet-58-回调解析成功
2021-03-10 16:54:56,702-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 16:54:56,702-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "72118637133886"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "VuWsP5lDiNKxHZTqAh2Icekm08GfwtUp"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 16:54:56,795-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "04bdfab647074bffa06696caab12ff99"
s_p: "RWIyZlFRU1NLN3MwUHVSTVJ3YkhKZ2JwQUU0VjBRemNDYVdQbjJvOFpGYTVvalhqR25UdmNnMEF3RHFvc1ZXaVJ1TmtONDNZNWZnVUZyazVSV2pJdjREZ3QzSlRyUERObjFCTTFLb3VwdXdMRWdyZWdFc01ESXNnQktIaDZXUThFZTJmeXR3Yk1iY01MTHFwNTdLekxySkhBZWFFNWhzZTRQeFJTczVtOXVrVW9PaHpRVlZ0cVhTVThhamJmbEd1UUtWYzRvWHUzeE5CaEo1YktMT2s5U2hOcmZjemFnemZFT3NLYkgxMFVST2FiVWRvelR0aWlJck5BbFJJT2pqWDRLQ3g0bHo5ZGM3Ukd6blQxd1dEdU5oNnpYeGEzR1hUVUFkSlUxQjZJNTRRaklLVEJPSDlJUmR2Szl2TFM5a2tZTTVFWmNWaWRWWVB4azF2MkxUTXp2Q3M3TG9qMEEycEp0cEdzaGFLdENpdG5BbGlZdXMzNGtvSzBVdDVTOU1vUnhjbWFJdFRQWUNxR2Zsb3NFTzBiMjZJeTBIazEyUFViV1N3c2hmZUJ6UnRZclZDQWZFR3RiN3BMV2o4OGlMM0N6S1pmZnN6TWNJMG9hamkycFlPZkVHMFZFNk0wa2xPVEJCSU9GOWJVMVl4RHZDWnp4d1NFOGdHYWE0cEZGQXVLaWV2WEZoYXNhcE1nblNTQk50TnRjWjAyVHZMYTdlMDhnVlQxUlM5RzluSTQ2RmRKcDl5VjhKSDY2ZEZrRTRKUGNpWlpFSjZ4SU81SnVIZGVPb0paUzVJNGhJREc1TkhvYUhqS0Q1Z2M5bjJDS0hrd3BWUUpoeWFrWTFEVlFZejBkMTliNFRxWkZ5Y3dQT0VEWTJGbnd2YXMwQ3dGRzc5VENhSENzcjlpT2R6MkRmS1NURm9iMUpBWTU5U1JVWG9VdVdCMlEzQm9TUGxGTlNUWGJ3eDJ4dUpYdzd1Z2VqMTRRQ2JveWo2ZUxzZXA4dW1LYUs0MHU5ZGZGcTJQSnZIUmpJeGZHSTlBbW1KbEt1bXhHelJ3R3hsMmVOTTNseUk="
m_p: "rq4Vg649D1Lo1zZBC0ZsI65x8sUO7802WW7IXovgaz065bt4JX2o6V2kD6Jfr996"
e_t: "1615474500484"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0.01"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 3001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134462
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134460
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 3
}
userinfo {
  username: "156******06"
}

2021-03-10 16:54:56,795-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 16:54:56,795-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "5.0"
  t_p: "04bdfab647074bffa06696caab12ff99"
  imei: ""
  model: "PBDM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "RuNkN43Y"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
payrequestid: "KB202103101654582076075925732472"
version: "260"
queryType: "PAY"

2021-03-10 16:54:56,868-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "2002"
  msg: ""
}
successStatus: "1086"
origAmount: "0.01"

2021-03-10 16:54:56,869-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT app_key FROM `db_platform_gateway`.`server_app_info` WHERE app_id = '100002'
2021-03-10 16:54:56,872-INFO-lib.common_biz.find_key-96-查询到秘钥信息：BB36C34EB6644AB9694315AF7D68E629
2021-03-10 16:54:56,872-INFO-lib.common.session.http.http_json-38-http://secure-gateway.pay-test3.wanyol.com/gateway/nearme.account.query
2021-03-10 16:54:56,872-INFO-lib.common.session.http.http_json-39-传入的参数：{'app_id': '100002', 'service': 'nearme.account.query', 'format': 'JSON', 'charset': 'UTF8', 'sign_type': 'MD5', 'sign': 'ED8215A4AE38CD71F1D9FBEE6C58FE78', 'timestamp': '2021-03-10 16:54:56', 'version': '1.0', 'bizContent': "{'ssoid': '2076075925'}"}
2021-03-10 16:54:56,893-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'data': {'ssoid': '2076075925', 'timeStamp': 1615366500614, 'useableBalance': 1, 'totalGiveBalance': 0, 'chargeBalance': 1, 'freezeBalance': 0, 'giveBalance': 0}, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功', 'success': True}
2021-03-10 16:54:56,894-INFO-recharge-52-可币充值成功
2021-03-10 16:54:56,895-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `db_order_4`.`order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "KB202103101654582076075925732472"
2021-03-10 16:54:56,899-INFO-lib.common_biz.fiz_assert-34-订单详情：{'id': 21704, 'pay_req_id': 'KB202103101654582076075925732472', 'notify_id': '2427019645233027518769409489', 'partner_order': 'NV203113782656752021031016545872561284435477375021', 'amount': 1, 'refund': 0, 'contents': 'KB—RECHARGE_PAY', 'products_name': 'KB—RECHARGE_PAY', 'counts': 1, 'ssoid': '2076075925', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': '1603465160', 'ip': '58.255.79.104', 'mac': '', 'model': 'PCRM00', 'app_package': 'com.example.pay_demo', 'app_ver': '1.1.0', 'sdk_ver': '260', 'partner_code': '2031', 'notify_url': 'http://secure.pay-test3.wanyol.com/notify/receiver', 'status': 'OK', 'channel_id': '', 'channel_type': 'NATIVE', 'pay_type': 'wxpay', 'direct_pay': 'KEBI', 'game_type': 'WANGYOU', 'present_amount': 0, 'original_amount': 1, 'discount_info': '', 'extra': None, 'remark': 'new way', 'request_time': datetime.datetime(2021, 3, 10, 16, 55), 'success_time': datetime.datetime(2021, 3, 10, 16, 54, 56), 'modify_time': datetime.datetime(2021, 3, 10, 16, 55), 'trade_type': 'CZ', 'kebi_spent': 0, 'voucher_amount': 0, 'voucher_info': None, 'country_code': 'CN', 'currency': 'CNY', 'openid': None, 'brand_type': 'OPPO', 'mobile_os_ver': '17', 'platform': '', 'screen_info': 'FULL', 'combine_order': 'N', 'voucher_id': None, 'factor': None, 'voucher_status': None, 'kebi_status': 'OK', 'channel_status': 'OK'}
2021-03-10 16:54:56,899-INFO-lib.common_biz.fiz_assert-45-订单表信息记录正确
2021-03-10 16:54:56,900-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `pay_tradeorder_4`.`trade_order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "KB202103101654582076075925732472"
2021-03-10 16:54:56,904-INFO-lib.common_biz.fiz_assert-55-trade订单详情：{'id': 11414, 'pay_req_id': 'KB202103101654582076075925732472', 'partner_order': 'NV203113782656752021031016545872561284435477375021', 'partner_code': '2031', 'products_name': 'KB—RECHARGE_PAY', 'ssoid': '2076075925', 'origin_amount': 1, 'amount': 1, 'kb_amount': 0, 'voucher_amount': 0, 'present_amount': 0, 'refund': 0, 'country_code': 'CN', 'currency': 'CNY', 'pay_type': 'wxpay', 'channel_id': '', 'channel_type': 'NATIVE', 'direct_pay': 'KEBI', 'trade_type': 'CZ', 'combine_type': 'PRIMARY', 'status': 'OK', 'notify_url': 'http://secure.pay-test3.wanyol.com/notify/receiver', 'attach': '', 'extra_info': '', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': '1603465160', 'ip': '58.255.79.104', 'mac': '', 'openid': None, 'model': 'PCRM00', 'brand_type': 'OPPO', 'app_package': 'com.example.pay_demo', 'app_ver': '1.1.0', 'sdk_ver': '260', 'mobile_os_ver': '17', 'platform': '', 'screen_info': 'FULL', 'remark': None, 'request_time': datetime.datetime(2021, 3, 10, 16, 54, 59), 'success_time': datetime.datetime(2021, 3, 10, 16, 55), 'modify_time': datetime.datetime(2021, 3, 10, 16, 55)}
2021-03-10 16:54:56,904-INFO-lib.common_biz.fiz_assert-63-trade订单表信息记录正确
2021-03-10 16:54:56,905-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `virtual`.`tb_recharge202103` WHERE ssoid = '2076075925' and rechargeOrder = "KB202103101654582076075925732472"
2021-03-10 16:54:56,908-INFO-lib.common_biz.fiz_assert-83-tb_recharge订单详情：{'id': 11636, 'ssoid': '2076075925', 'imei': '', 'rechargeTime': datetime.datetime(2021, 3, 10, 16, 55), 'amount': 1, 'status': 'OK', 'rechargeOrder': 'KB202103101654582076075925732472', 'partnerId': '2031', 'rechargeChannel': '46', 'appPackage': 'com.example.pay_demo', 'model': '', 'clientIp': '', 'source': None, 'updateTime': datetime.datetime(2021, 3, 10, 16, 55)}
2021-03-10 16:54:56,908-INFO-lib.common_biz.fiz_assert-91-tb_recharge订单表信息记录正确
2021-03-10 16:54:56,909-INFO-lib.common.session.http.http_json-38-http://secure.pay-test3.wanyol.com/voucher/grantSingle
2021-03-10 16:54:56,909-INFO-lib.common.session.http.http_json-39-传入的参数：{'amount': '1', 'appId': '2031', 'appSubName': 'AUTO_TEST', 'blackScopeId': '', 'checkName': 'TEST_ACCOUNT', 'configId': '', 'count': 1, 'country': 'CN', 'currency': 'CNY', 'expireTime': '2022-03-10 16:54:54', 'ext1': '', 'ext2': '', 'maxAmount': 1, 'name': 'AUTO_TEST', 'partnerOrder': 'AUTO202103101654569057095286629346289911744340', 'ratio': '', 'remark': '', 'salePrice': 0, 'scopeId': '7104f7bc23e445daba913a5a96a264ac', 'settleType': 1, 'sign': 'FFC8A3143F4709F6CD8C249B6FD2A12E', 'ssoid': '2076075925', 'subScopeId': '', 'timezone': '', 'type': 2, 'useableTime': '2021-01-01 00:00:00'}
2021-03-10 16:54:56,975-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'batchVouCreateResList': [], 'msg': 'success', 'code': '0000', 'vouIdList': ['64134463'], 'batchId': ''}
2021-03-10 16:54:56,986-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 16:54:56,986-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "50254966883557"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "USveJu5wTlzxRgGNYAH6hsFfCXV8Oo43"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 16:54:57,075-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "a123448683b64584ba5fa25b0cd933ad"
s_p: "YzdtRE52dE1qQWx2ZFBFQmd6Y1h0aEZ2d1NNSThVRWtsdzUyWm9KTjFOZ253MHhtSExiUm83RW05YTFPUEZ5SE55VThJeTBvMjliaTJUcm9yYTZoTGl3VmxIeEo4Y3pQYVVpNDR0OGxNdzQ4TUFhMWlpT1NqSFhWeDVDUVdnTGdCREJ6amgzTnlWU2szSnpkOVlMSDdTZnFlSkViUGFHY3IxM0VYNUxBR1QyeVowNVVxUjZENXYzVjFHZ3UySVYxMDhmVFlvekMwb003cE13MmlmcUJRdkRFZnE0NGNjYVowOGdYM2FQYmo0M0ZCRm9aME9GQUxCWnJtYUFBRE94R3Rka0dnMGRibTJlTnhNMTNtdncxT0xta1hIMUF4NU1wYVY2RGxTMkFiUG1Mb3lQMWRoVGZmTkMxajdjR0JRb2UwZkJTQ1NpTTdab3cwU3ROVjRWcDYyM1lUMTZWN1hscVhDdXlCSlhOUDNXaTRKNHVZQnBZeGU5bnF2TUd0T0gzakdqeTFyRUhnS0NHUm11Y3hzYnJsaEJOa0xTb3BzUmVUTkpQTzVKNXRRckozVEdrYlloV09vZXFBbGdiYnhKdjNyYjZjdlE4cGdBUVlzUndFbTVvUzl6emRaem1kWnhOQjhoWVpGTWlHQzY2RndTbnh5NXoxd1VpeGxTeFRlQUZqdWdBVjRKb2RlY2lRa3hLN0VCc01uOWhqNllUa3dvUGlLWnoxSFhhRHdlbHJXMnRwQmwxRk1hM1RaMk1lbGZna3NwdXRpMXYxS3BBTXk5WUlPTnhncFlvU2JPRG5uTUZPcnlTWVhWWjZnc2NOS1JyM1doM1BqdTlRSTdlSXFYMkJXcXFMVGw1TTFwQUt6d3dRdGM0aWlIWDljNHBJdW9YeXZZV3A4RUJlUU83T0l5SjZISThxMFJDWXR2SHJ0SDRadGZyNHp3NWR4MnhmekN5RWZ4aENBOHN6S1ZOU0J0WjNwd1BqRWZqY1lETnJ1bVhiZ21JSVFRN3hzWk9YdjJEc2hBYkVWVHBpZHB4TUFDU3NTa0lIMHBwR1F2cFo5Y0w="
m_p: "Be5e0Z0m40CZeN71P6fBZbvzS6aOWRPX7sbT2XzsO95V1SIn6z0Y5H3nq6jPkhzB"
e_t: "1615474500767"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0.01"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 3001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134463
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134462
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134460
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 4
}
userinfo {
  username: "156******06"
}

2021-03-10 16:54:57,093-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 16:54:57,094-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "6.0"
  t_p: "a123448683b64584ba5fa25b0cd933ad"
  imei: ""
  model: "PCRM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "8czPaUi4"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: "42E1F48352C04B80910A7BBB7FDDE8022d5334806a8d9b083e64c9324c08c040"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
price: 8
count: 1
productname: "KB_AND_VOU_SPEND"
productdesc: "KB_AND_VOU_SPEND"
partnerid: "2031"
callBackUrl: "http://secure.pay-test3.wanyol.com/notify/receiver"
partnerOrder: "bRzM4IPFlODp9NyAnao5d7ivsXLEujrU"
channelId: ""
ver: "1.1.0"
source: "PaySDK"
attach: ""
sign: "VdZa0f8Fyl0owh7kc6D93x+vvjeGwXWSxlO1QDkXOlXPcF5CRVRWh+D5QMsyy2kU8RkUiRmRBCKdX0zceOyYxGWAWRwtebZ3mql5wHie3iZD/XAYqt0tS/jsoZXGGQ0CvaLs2sAX8ErNacPQL0l9m3YV1rn3J2REv/BBIuVl7UM="
appKey: "1234"
voucherId: 64134463
voucherType: 2
voucherCount: 7
order: "0291059003293"
ip: "120.197.152.211"
factor: ""
screenInfo: "FULL"

2021-03-10 16:54:57,296-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "1010"
  msg: "\347\224\250\346\210\267\344\275\231\351\242\235\344\270\215\350\266\263"
}

2021-03-10 16:57:16,123-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境3-MYSQL：{'host': '10.52.46.169', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-03-10 16:57:16,377-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境3-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-03-10 16:57:16,437-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]成功
2021-03-10 16:57:16,437-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]
2021-03-10 16:57:16,673-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]成功
2021-03-10 16:57:16,673-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]
2021-03-10 16:57:16,700-INFO-lib.common.db_operation.mysql_operation-118-成功连接到测试专用环境-MYSQL：{'host': '10.52.54.122', 'user': 'opay', 'pwd': '_UI7xHubrhTPIP1J_T4so7SU7ATCrUzm7cAh6TdBLLHWUSQUQqD8p45xVQzV3Czi', 'port': '33066'}
2021-03-10 16:57:16,700-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `test_account`.`account_test_env`
2021-03-10 16:57:16,731-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=0
2021-03-10 16:57:16,735-INFO-lib.common_biz.find_merchant_info-28-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1603465160'}
2021-03-10 16:57:16,736-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1603465160' AND pay_channel = 'wxpay'
2021-03-10 16:57:16,739-INFO-lib.common_biz.find_key-109-查询到秘钥信息：g4rTCeoBJFG4KyWCjTQCqltfEDma3yxR
2021-03-10 16:57:16,740-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no, plan_id FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=1
2021-03-10 16:57:16,743-INFO-lib.common_biz.find_merchant_info-41-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601', 'plan_id': '120877'}
2021-03-10 16:57:16,744-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1603465160' AND pay_channel = 'wxpay'
2021-03-10 16:57:16,747-INFO-lib.common_biz.find_key-109-查询到秘钥信息：g4rTCeoBJFG4KyWCjTQCqltfEDma3yxR
2021-03-10 16:57:17,159-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT app_key FROM `db_platform_gateway`.`server_app_info` WHERE app_id = '100002'
2021-03-10 16:57:17,162-INFO-lib.common_biz.find_key-96-查询到秘钥信息：BB36C34EB6644AB9694315AF7D68E629
2021-03-10 16:57:17,162-INFO-lib.common.session.http.http_json-38-http://secure-gateway.pay-test3.wanyol.com/gateway/nearme.account.query
2021-03-10 16:57:17,163-INFO-lib.common.session.http.http_json-39-传入的参数：{'app_id': '100002', 'service': 'nearme.account.query', 'format': 'JSON', 'charset': 'UTF8', 'sign_type': 'MD5', 'sign': '155313F77EDC52180C204F7B731A7628', 'timestamp': '2021-03-10 16:57:17', 'version': '1.0', 'bizContent': "{'ssoid': '2076075925'}"}
2021-03-10 16:57:17,232-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'data': {'ssoid': '2076075925', 'timeStamp': 1615366640953, 'useableBalance': 1, 'totalGiveBalance': 0, 'chargeBalance': 1, 'freezeBalance': 0, 'giveBalance': 0}, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功', 'success': True}
2021-03-10 16:57:17,244-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 16:57:17,244-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "16812261522562"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "tFTPwrLQA3RqK5d7oGvmjkaVCs2HfphU"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 16:57:18,596-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "0a0be4401e3148ab93430ddcef123f56"
s_p: "dzlDZVdHTjgzQVFFVUpwTnNmS2lpVXdBODg0SDBseHdYWXllWXZHcllDdGozSlQ2dmVFcFMzWmtvRXVSb0xhc2Y2Y25NZkNsSkVRQVRPT0Jrb2c1TEVzd29qWkJpRW5IWjdzcmhYdVBUeGs0UkNBS2VnRHpFRE1OVHZQWXVEM2ZpMU5FazZCTlUyNW5pbDlaQXdSWHNyOTg3WFk1ZFNyR3VZbDJEZUNGb0JLYVlsQW9Ldk9pUjVtZ3RGN2hzR0lQSllnbGdrRThVRzFreWNlVjAzRk5sdGpES0xHWFhRZ3NhNklTMnRhYzdqOU9QMXVsQmNZZEs0VEU0U2pmRzN5WjNLVGhFQlgxOTRzSlhLMzh2YmVkY2JNajMwajJlZGRpaWxDVkVkMTlvQVo4Q05ETXM0aE03M0tmM3JPMUFLeTdhN3g1NGU4UURiWktkWERpRExwQjBRRzFGUHo3R1FnMDNBMmFYM1ZjeWVBTHRwUk9ISUNLbm92WjZnQUhQSXlHSnZsak1xOVh0emd1S1ZpRXNaYzRWU3VnQ1BCRGxHcjNHNmprZEJKSHlLcklvbzJ1QzFnV2pnbzlyUjhNam1BbEdEYVVsRVJWdjI3dlF0MkVFRnNPcEtxYWpMcmRFRGFncFdhNFp5U3k1enFrVG5xNnBZUjVreUhWcks4ZDJTbzJRSVQzbkR0OUQ5ZXhsNWJXUHFWR3VkcDBtSHpUc0sxdTd6UGs3NWJBdWNEd3Z4QlRHQkE2VjZLeGNmNHFvbXFpZUxyN3VkQUVUbUg4bTlmejV0eDJua0ZKcjdKMEFVS016UmwxVnNPUm00NXVTc3FZZWRBdnVYVG9DZmJ5R01MY1oxaTBNRGtkNzdrY2thZnhQcTZHaW05MGlCMDFlaHNDTGJiTXkzem9iM1lmVzdqZlJYRzNjcU5USHNMaU1xQjM3VXNyOTRDRUVxRzJvSlhFVm1TakRuMGM5dWFVM0EzckMwOGhFa3NlZ1FiWWdqU1ZOeGJKY0M0UlFEd3JtbU9HZTE2MWNxUHVzbkhrMjhEZVRrUzRmbzNZbDJsczk0NXk="
m_p: "6Shda2S9r010akZ3T0roG7c17J32k41rqR2840j9q72z78kt0RN2B93wIA2K2y74"
e_t: "1615474642271"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0.01"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 3001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134463
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134462
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134460
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 4
}
userinfo {
  username: "156******06"
}

2021-03-10 16:57:18,617-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 16:57:18,617-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "6.0"
  t_p: "0a0be4401e3148ab93430ddcef123f56"
  imei: ""
  model: "PCRM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "veEpS3Zk"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: "42E1F48352C04B80910A7BBB7FDDE8022d5334806a8d9b083e64c9324c08c040"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
price: 1
count: 1
productname: "ONLY_KB_SPEND"
productdesc: "ONLY_KB_SPEND"
partnerid: "2031"
callBackUrl: "http://secure.pay-test3.wanyol.com/notify/receiver"
partnerOrder: "PgFVehZIC4NTpKDkSi9E6MunUAtrzOQ7"
channelId: ""
ver: "1.1.0"
source: "PaySDK"
attach: ""
sign: "DTzXqhgPMV4zctoEbJKknGf17t8+qwfQ1OOUFFy03fz2ye4iD2bAaLAOVJ1yE1CbwTpNM+MdtGxmLRuunoMio/LIFNbbtWz7OVriFXCAFbAqZeYJbAvWrypX7el9U2M/1aPrfrjmshvmomd/5JuSricDYo+uDjJhNYp/xsNTJWE="
order: "1266167211854"
ip: "120.197.152.211"
factor: ""

2021-03-10 16:57:18,789-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: ""
}
rpay: "0"
gpay: "0"

2021-03-10 16:57:18,790-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT app_key FROM `db_platform_gateway`.`server_app_info` WHERE app_id = '100002'
2021-03-10 16:57:18,794-INFO-lib.common_biz.find_key-96-查询到秘钥信息：BB36C34EB6644AB9694315AF7D68E629
2021-03-10 16:57:18,794-INFO-lib.common.session.http.http_json-38-http://secure-gateway.pay-test3.wanyol.com/gateway/nearme.account.query
2021-03-10 16:57:18,794-INFO-lib.common.session.http.http_json-39-传入的参数：{'app_id': '100002', 'service': 'nearme.account.query', 'format': 'JSON', 'charset': 'UTF8', 'sign_type': 'MD5', 'sign': '7A8F1DCDA0C64C749515FAEFF0A1EEA8', 'timestamp': '2021-03-10 16:57:18', 'version': '1.0', 'bizContent': "{'ssoid': '2076075925'}"}
2021-03-10 16:57:18,814-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'data': {'ssoid': '2076075925', 'timeStamp': 1615366642537, 'useableBalance': 0, 'totalGiveBalance': 0, 'chargeBalance': 0, 'freezeBalance': 0, 'giveBalance': 0}, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功', 'success': True}
2021-03-10 16:57:18,826-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 16:57:18,826-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "57273088090679"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: ""
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 16:57:18,916-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "8ddc2c3bb2ce4956986ef13e49c32cf9"
s_p: "NzFjemVhdjM4cmkySGtiTTM0azdWcUFlNTdjTHpidHRoc21vbHJlbWhGQnRkUWxHU2FSUE1sbmVLaFRPb3o1UmxxM2dJTlowVm1VTHBOcEloN2ZlaUY1bnpnZlc4bHY5RUd6clBVWTJqakhLN3JudnJoSXJRVDFrQjM3MWlJYVh2MnUySnJXVU95U1lrWXV5M2puQU52Q29DZm1KWGNlUURDME9TYkFzY3l2eFF1Zlk1U0V0ZHVRMk50VFFNZFc4WXBRWmRlVDN5ZnVCN25qdWNlMXM3dUd2TlRrbVZqMU13bHViSDBWejAzY29sdjhEbHZ3dDF1QUl3OHpuSm05YWlrTzRkYU5CYU4yNDBDQlM0aVhDRHJ6Q1lpVTdsb2pUajczcWN0RVBiTmlUZEFqb0Q5QkZhZE1HZWJlbU1teXBVVmRGZ0I4OFRJT25xVFlDY3V5WU54d1RhTUJubHJESFBnNTVBSE1jOURHTklROWh4MjVMRWp5V2c0MWNndE5MVFcxanY4WElzRDB0TW5wa1ZjVWtHTGdPeVB6MkFLeWNlTDV1Sk16NTBYUHliN092UUE1Vk1kSXhnWkZBd2FLRDhndFFMQ25Vekl4RHdoRHJnc3R2ZHRMb01ITjRYbnFiSFVyTVpVbUNZR2VPTlh6S2hCTTBTVjV4ZWprZm1IWkJETEN5V3VlZ0Q1M3F4UDR6MDFHRmVnYUJ0UUNxVU5zTW9kemhjVWFkc25td3JNZFEzUlBTVlplMkpvQlZWWnlMMWoySkZvVjBMV25LekJQbzhoZ1cwZTRmZTNnOEdPZDVFcThmNlNXbU1NbjIyd1F5OUpWblVKNUZkRVJCc3pXTnQ2RXZsUEpYMWJkWWdhOXZBVWVmMDZVRnBsVU1aRWpwdGhOREo0dkc3c0F3UThGd2xmUVlaUGpZUUZQWlZNdDBJOWRQOHIxelNuT0lZV1F5VTR6aE4yUGp6eEpVWHYzY2RUU3BlZ3o5dVNTSWVHbEtPanRoZFd2eGdQcGY1cUZNdWN5RnE3Y3daQWt6ZmJmSkJOWTJqQXhUMVB5NDgyU1E="
m_p: "7X71a4nUhHD2Mg6Lp6eml6BTH5wJSIQa16TxGGA7y9Z69cdZmqnXcH226e4o8309"
e_t: "1615474642609"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 3001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134463
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134462
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134460
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 4
}
userinfo {
  username: "156******06"
}

2021-03-10 16:57:18,919-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 16:57:18,919-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "12.0"
  t_p: "8ddc2c3bb2ce4956986ef13e49c32cf9"
  imei: ""
  model: "PCRM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "feiF5nzg"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: ""
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
type: "wxpay"
amount: "0.01"
cardno: ""
cardpwd: ""
ext: ""
basepay {
  channelId: ""
  notifyurl: "http://secure.pay-test3.wanyol.com/notify/receiver"
  productName: "KB\342\200\224RECHARGE_PAY"
  productDesc: "KB\342\200\224RECHARGE_PAY"
  partnercode: "2031"
  appversion: "1.1.0"
  currencyName: "\345\217\257\345\270\201"
  rate: 1.0
  partnerorder: "null"
}
sign: "XmY58aS7fOd0eOLQubYU9dBYFSg/pxyk73Nk42SucnDoVwKew2vDkng2uRi1iC0ODvYeLKcwrmDk1eZxuS4p56M7HehkY4ciShMbVDBZT7stvougD7oJ63P+uOC93Z6xZEF/fv7LurPMd3jTRFrCfYdjyqAk7yZMyEot3vtEAS2NdLHuVKgVYeFUqPf6DBaUQz3zDnW7lVRlWZrIn4iPR6e1q8Gflle+82tae1GH0v3uX3GGH4rae/CjmjOnYX2xTDtD1P/xgbDzdlYp9VJrMmNOEQN+/8WUs3evKIEVMgpj3PQHD0Nz0hqwtG5DKMbOzr67+z/HRRglo0okMFqnig=="
ip: "58.252.5.75"
isNeedExpend: "0"
appId: ""
payTypeRMBType: "0"
tradeType: "common"
screenInfo: "FULL"

2021-03-10 16:57:19,307-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "{\"appid\":\"wx93eea96ecc33f168\",\"noncestr\":\"c54a2bdb0bb6422ba74d1e0cfe791d18\",\"packageNm\":\"Sign=WXPay\",\"partnerid\":\"1603465160\",\"prepayid\":\"wx10165722950912e7f567c481341cd30000\",\"sign\":\"574793A90BE175FACF362724B06CC578\",\"timestamp\":\"1615366643\"}"
}
payrequestid: "KB202103101657222076075925501542"
model: ""

2021-03-10 16:57:20,307-INFO-wxpay-scarlet-52-回调参数：<xml><transaction_id><![CDATA[9752475489385319064759860126]]></transaction_id>
<nonce_str><![CDATA[C0GkHwqVTYxPRJbUzKoAuIh34d9lQLrv]]></nonce_str>
<bank_type><![CDATA[OTHERS]]></bank_type>
<openid><![CDATA[oCg6Xt8NvRi7jGuap_5B6XdY4oYk]]></openid>
<sign><![CDATA[BC532FE88E3C255EC291287F7548C9FB]]></sign>
<fee_type><![CDATA[CNY]]></fee_type>
<mch_id><![CDATA[1603465160]]></mch_id>
<cash_fee><![CDATA[1]]></cash_fee>
<out_trade_no><![CDATA[KB202103101657222076075925501542]]></out_trade_no>
<appid><![CDATA[wx93eea96ecc33f168]]></appid>
<total_fee>1</total_fee>
<trade_type><![CDATA[APP]]></trade_type>
<result_code><![CDATA[SUCCESS]]></result_code>
<attach><![CDATA[TEST]]></attach>
<time_end><![CDATA[20210310165720]]></time_end>
<is_subscribe><![CDATA[N]]></is_subscribe>
<return_code><![CDATA[SUCCESS]]></return_code>
</xml>
2021-03-10 16:57:20,508-INFO-wxpay-scarlet-56-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-03-10 16:57:20,508-INFO-wxpay-scarlet-58-回调解析成功
2021-03-10 16:57:20,519-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 16:57:20,519-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "07450555786583"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "AjDUCR3roJbkMVxHh7pinPW6O1LXcvys"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 16:57:20,599-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "d8c9e533f5f546c096dd2bab273237d6"
s_p: "T2E4cHFlSDlEdWlMSHFSMVZRWVhxSEJjM1ZjbHg3N1lYN1J5ZXJsSDF4TGhDT2ppTjJKMFA1dEVDaFNyOGZiWm5oSHlPcWdsRDh1cXlZc002akZTaEpNaEw3bkhKZUFyN1lzN0RaeTZ3WVlXc1BEMmtZcEVpR2lHaHZnVGZMeWRCSkxTYjRiUkNQSmh3SnZyMHhKaTdIZzRzWHpaQkRHVzRpcXBkUjY4czdKZGc3YXI3R2ZQZUh6OHhaYlN6M1lxdjdQR0NKQ053RXRCbWNlME16MmNqTjlFTWFLWUIzWldIMHp4S3RWSnEyU3J1dWFKc1c2ZU9KMERjYUV0VjAySmh6M21ZTElDUnNTcVVmYnpvT3FsVkNuZ0lnMkVGM2RPZ3BkTUpMNm1BYURzNDgyaDRGb2g2YkJ6NUpSNzhISTN6bXZDOU90TFEwd0RYSHhXN3BxRzdxNE43MkhtZG5jTUpzQTRTdU5WYTIzbW1CWVNMTzF0c1ZYbkpHSTBVOUlyM0xFS2VETldjVjRUOWoyZVVFZWZ4WlpQa0x4ajJvcVh1N25neE1zNmdMNjBka1kxNXZwdjRVMDhYaTZwWXpGV2hSOHNBcEVqUmhjMWxxV1h5WGVUYmNzUFlsczFDMXdLaTd5bENQWkZHdUMwZmlTempGODRXdFVhN0lCRnhQNW1OOEZEdk1DbzQ5NHUwd2xpTFRoSmx5bHFuSGRsVk00YnRCRlhNSndvbmpTV0lLVUlQRHBzMWZub2hidE40YWN5bURuQkFIQ25ZR0ZnVnNGR291RnIwbnJlTUtEc0wyTTZsejA5clNrV0I3NEkxdmRWcjY2VXpkVGpMclFtWTVjWHhaOXNlN1lVUjhGU2h4eGpmWTgxYXVZQzRiTGxrSklWWTJsckxzTTcyZmlpOWVMdm5tUkxZT0JOWmJlYTd3UDl6aXZGZWJ3T2xxb0pZZkZ1VmthTVRlcTFET0hwYjE2MzRNSDViVVFscHdHQlczR2U4S0Y3aks5RnJhNk9Zb1VQcXd6NktCaGhiRjZFUUFmQ09Gd0MyeURpR1c4Z1NxWEY="
m_p: "M1y0UCi6O6J671IPrzicCOJd25S5cm92hplhXhe15ToTT5aQxDjbiE8Qv5g08J1w"
e_t: "1615474644293"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0.01"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 3001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134463
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134462
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134460
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 4
}
userinfo {
  username: "156******06"
}

2021-03-10 16:57:20,599-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 16:57:20,599-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "5.0"
  t_p: "d8c9e533f5f546c096dd2bab273237d6"
  imei: ""
  model: "PBDM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "YWsPD2kY"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
payrequestid: "KB202103101657222076075925501542"
version: "260"
queryType: "PAY"

2021-03-10 16:57:20,689-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "2002"
  msg: ""
}
successStatus: "1086"
origAmount: "0.01"

2021-03-10 16:57:20,689-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT app_key FROM `db_platform_gateway`.`server_app_info` WHERE app_id = '100002'
2021-03-10 16:57:20,693-INFO-lib.common_biz.find_key-96-查询到秘钥信息：BB36C34EB6644AB9694315AF7D68E629
2021-03-10 16:57:20,693-INFO-lib.common.session.http.http_json-38-http://secure-gateway.pay-test3.wanyol.com/gateway/nearme.account.query
2021-03-10 16:57:20,693-INFO-lib.common.session.http.http_json-39-传入的参数：{'app_id': '100002', 'service': 'nearme.account.query', 'format': 'JSON', 'charset': 'UTF8', 'sign_type': 'MD5', 'sign': '0D25BF180B2E4A3F30255FE92180E22D', 'timestamp': '2021-03-10 16:57:20', 'version': '1.0', 'bizContent': "{'ssoid': '2076075925'}"}
2021-03-10 16:57:20,709-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'data': {'ssoid': '2076075925', 'timeStamp': 1615366644432, 'useableBalance': 1, 'totalGiveBalance': 0, 'chargeBalance': 1, 'freezeBalance': 0, 'giveBalance': 0}, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功', 'success': True}
2021-03-10 16:57:20,709-INFO-recharge-52-可币充值成功
2021-03-10 16:57:20,710-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `db_order_4`.`order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "KB202103101657222076075925501542"
2021-03-10 16:57:20,716-INFO-lib.common_biz.fiz_assert-34-订单详情：{'id': 21707, 'pay_req_id': 'KB202103101657222076075925501542', 'notify_id': '9752475489385319064759860126', 'partner_order': 'NV203113782656752021031016572289112403941057583702', 'amount': 1, 'refund': 0, 'contents': 'KB—RECHARGE_PAY', 'products_name': 'KB—RECHARGE_PAY', 'counts': 1, 'ssoid': '2076075925', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': '1603465160', 'ip': '58.255.79.104', 'mac': '', 'model': 'PCRM00', 'app_package': 'com.example.pay_demo', 'app_ver': '1.1.0', 'sdk_ver': '260', 'partner_code': '2031', 'notify_url': 'http://secure.pay-test3.wanyol.com/notify/receiver', 'status': 'OK', 'channel_id': '', 'channel_type': 'NATIVE', 'pay_type': 'wxpay', 'direct_pay': 'KEBI', 'game_type': 'WANGYOU', 'present_amount': 0, 'original_amount': 1, 'discount_info': '', 'extra': None, 'remark': 'new way', 'request_time': datetime.datetime(2021, 3, 10, 16, 57, 24), 'success_time': datetime.datetime(2021, 3, 10, 16, 57, 20), 'modify_time': datetime.datetime(2021, 3, 10, 16, 57, 24), 'trade_type': 'CZ', 'kebi_spent': 0, 'voucher_amount': 0, 'voucher_info': None, 'country_code': 'CN', 'currency': 'CNY', 'openid': None, 'brand_type': 'OPPO', 'mobile_os_ver': '17', 'platform': '', 'screen_info': 'FULL', 'combine_order': 'N', 'voucher_id': None, 'factor': None, 'voucher_status': None, 'kebi_status': 'OK', 'channel_status': 'OK'}
2021-03-10 16:57:20,716-INFO-lib.common_biz.fiz_assert-45-订单表信息记录正确
2021-03-10 16:57:20,717-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `pay_tradeorder_4`.`trade_order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "KB202103101657222076075925501542"
2021-03-10 16:57:20,721-INFO-lib.common_biz.fiz_assert-55-trade订单详情：{'id': 11417, 'pay_req_id': 'KB202103101657222076075925501542', 'partner_order': 'NV203113782656752021031016572289112403941057583702', 'partner_code': '2031', 'products_name': 'KB—RECHARGE_PAY', 'ssoid': '2076075925', 'origin_amount': 1, 'amount': 1, 'kb_amount': 0, 'voucher_amount': 0, 'present_amount': 0, 'refund': 0, 'country_code': 'CN', 'currency': 'CNY', 'pay_type': 'wxpay', 'channel_id': '', 'channel_type': 'NATIVE', 'direct_pay': 'KEBI', 'trade_type': 'CZ', 'combine_type': 'PRIMARY', 'status': 'OK', 'notify_url': 'http://secure.pay-test3.wanyol.com/notify/receiver', 'attach': '', 'extra_info': '', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': '1603465160', 'ip': '58.255.79.104', 'mac': '', 'openid': None, 'model': 'PCRM00', 'brand_type': 'OPPO', 'app_package': 'com.example.pay_demo', 'app_ver': '1.1.0', 'sdk_ver': '260', 'mobile_os_ver': '17', 'platform': '', 'screen_info': 'FULL', 'remark': None, 'request_time': datetime.datetime(2021, 3, 10, 16, 57, 23), 'success_time': datetime.datetime(2021, 3, 10, 16, 57, 24), 'modify_time': datetime.datetime(2021, 3, 10, 16, 57, 24)}
2021-03-10 16:57:20,722-INFO-lib.common_biz.fiz_assert-63-trade订单表信息记录正确
2021-03-10 16:57:20,722-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `virtual`.`tb_recharge202103` WHERE ssoid = '2076075925' and rechargeOrder = "KB202103101657222076075925501542"
2021-03-10 16:57:20,726-INFO-lib.common_biz.fiz_assert-83-tb_recharge订单详情：{'id': 11640, 'ssoid': '2076075925', 'imei': '', 'rechargeTime': datetime.datetime(2021, 3, 10, 16, 57, 24), 'amount': 1, 'status': 'OK', 'rechargeOrder': 'KB202103101657222076075925501542', 'partnerId': '2031', 'rechargeChannel': '46', 'appPackage': 'com.example.pay_demo', 'model': '', 'clientIp': '', 'source': None, 'updateTime': datetime.datetime(2021, 3, 10, 16, 57, 24)}
2021-03-10 16:57:20,726-INFO-lib.common_biz.fiz_assert-91-tb_recharge订单表信息记录正确
2021-03-10 16:57:20,726-INFO-lib.common.session.http.http_json-38-http://secure.pay-test3.wanyol.com/voucher/grantSingle
2021-03-10 16:57:20,726-INFO-lib.common.session.http.http_json-39-传入的参数：{'amount': '1', 'appId': '2031', 'appSubName': 'AUTO_TEST', 'blackScopeId': '', 'checkName': 'TEST_ACCOUNT', 'configId': '', 'count': 1, 'country': 'CN', 'currency': 'CNY', 'expireTime': '2022-03-10 16:57:17', 'ext1': '', 'ext2': '', 'maxAmount': 1, 'name': 'AUTO_TEST', 'partnerOrder': 'AUTO202103101657200038205081587464220900582485', 'ratio': '', 'remark': '', 'salePrice': 0, 'scopeId': '7104f7bc23e445daba913a5a96a264ac', 'settleType': 1, 'sign': '6E0E4C8F23B85F9D09365750E6E99476', 'ssoid': '2076075925', 'subScopeId': '', 'timezone': '', 'type': 2, 'useableTime': '2021-01-01 00:00:00'}
2021-03-10 16:57:20,794-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'batchVouCreateResList': [], 'msg': 'success', 'code': '0000', 'vouIdList': ['64134464'], 'batchId': ''}
2021-03-10 17:00:19,535-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境3-MYSQL：{'host': '10.52.46.169', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-03-10 17:00:19,813-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境3-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-03-10 17:00:19,857-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]成功
2021-03-10 17:00:19,857-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]
2021-03-10 17:00:20,076-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]成功
2021-03-10 17:00:20,076-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]
2021-03-10 17:00:20,089-INFO-lib.common.db_operation.mysql_operation-118-成功连接到测试专用环境-MYSQL：{'host': '10.52.54.122', 'user': 'opay', 'pwd': '_UI7xHubrhTPIP1J_T4so7SU7ATCrUzm7cAh6TdBLLHWUSQUQqD8p45xVQzV3Czi', 'port': '33066'}
2021-03-10 17:00:20,090-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `test_account`.`account_test_env`
2021-03-10 17:00:20,102-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=0
2021-03-10 17:00:20,106-INFO-lib.common_biz.find_merchant_info-28-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1603465160'}
2021-03-10 17:00:20,107-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1603465160' AND pay_channel = 'wxpay'
2021-03-10 17:00:20,110-INFO-lib.common_biz.find_key-109-查询到秘钥信息：g4rTCeoBJFG4KyWCjTQCqltfEDma3yxR
2021-03-10 17:00:20,110-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no, plan_id FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=1
2021-03-10 17:00:20,113-INFO-lib.common_biz.find_merchant_info-41-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601', 'plan_id': '120877'}
2021-03-10 17:00:20,114-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1603465160' AND pay_channel = 'wxpay'
2021-03-10 17:00:20,117-INFO-lib.common_biz.find_key-109-查询到秘钥信息：g4rTCeoBJFG4KyWCjTQCqltfEDma3yxR
2021-03-10 17:00:20,486-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT app_key FROM `db_platform_gateway`.`server_app_info` WHERE app_id = '100002'
2021-03-10 17:00:20,489-INFO-lib.common_biz.find_key-96-查询到秘钥信息：BB36C34EB6644AB9694315AF7D68E629
2021-03-10 17:00:20,490-INFO-lib.common.session.http.http_json-38-http://secure-gateway.pay-test3.wanyol.com/gateway/nearme.account.query
2021-03-10 17:00:20,490-INFO-lib.common.session.http.http_json-39-传入的参数：{'app_id': '100002', 'service': 'nearme.account.query', 'format': 'JSON', 'charset': 'UTF8', 'sign_type': 'MD5', 'sign': '11F0C4C3ACB1DE069E4D7B2DD64F39F8', 'timestamp': '2021-03-10 17:00:20', 'version': '1.0', 'bizContent': "{'ssoid': '2076075925'}"}
2021-03-10 17:00:20,533-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'data': {'ssoid': '2076075925', 'timeStamp': 1615366824250, 'useableBalance': 1, 'totalGiveBalance': 0, 'chargeBalance': 1, 'freezeBalance': 0, 'giveBalance': 0}, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功', 'success': True}
2021-03-10 17:00:20,545-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:00:20,545-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "26065049592356"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "bgOdTv9CLcSGB4Z10JzXKN7QUYFiywh6"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 17:00:20,677-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "5bc7b910db7046e0b1b06bf0dfded624"
s_p: "c3JXMTlzZzJJWnJ6Mkp5R3dtdnluVEFoQm9qNkhJSmJiTW9ZVEZJa1N4TnpiOVJTTzB1bW5Vb3pEcU9RS1dvYkJiS3ZkcXZUM0Y0VGdNcGZrWU5qaXFJQVlXWWZKRTRCTWczR2p4WW1nNE1hTlphMG1SOFBMSUhkYnlqVFZzYVNNOWpNaTNxU0JvaDIwQmVpY2VibDNrSjA2Z1NKOUpxSWFUQzVMTFpRZzlrWWVvSXVjcGM3NHhHeXhjUDRvZE5nSm05cmhKcVpLSXJtQmRybmxtQW1CNE5SSGlxeUpwZ2lIT1dDdG9pMDJVWWFjbmJ1SnVGY2hKRDBJdldlRXF4NVZnYklkTFJ5YUZ5YnV5UENBcmxwZ2xMUk16VGFpS05qUERMcG82a1B2cEpEclUzYWNUUHBVNWM5cG03Z1VrcG5rdllMcno2ZERkaHVVNk1OdjhiaUdOS0hqWHc1QkpwMGNHRUVaeDM1UjdHV2tWcFRvNHA4YW5jTWtkbWpjQmlsS25vNFBUUzRiTDdVY2JEbFZ2TzlOVW5CM1VlN2gwbjE1a2FqNUxLSmV3UXR6bTZsV2I4bjByVGZFQURYZmZwVlhnZ2Y2b0VXalJUOWU3dVdOMjk4N1lVdlVPaEZYQ1ZVUUJpV1hGZ2dHNGhLZU5QY3c4d1BIbHQ0U20yejRzTmZObkhZVG10Y0Zwc29UUldZWlhIRXFwMlJYeW1nWGdyVkNkYkpGOW92bHJsaDZaWlZ4YktPb1RCRlBCejZsWWdCQk80b3JKMW5PU0EwY0RzRUNYZHBxQXdGdWtNc0t6VFFDdVoxTTdyQzBKbmNjTzZLV3oxVWhtenpVeDVXcnZwdVhUUW43dEhCcE9vTGxsdjBBTnFoWnBzdUhVNFU3THpxZTA1TGhXOXRMcHRFdEFiUnZzMERsbWx3QklraWp3WlNydGR0SDFtUG1Gdlo5ekFzZkJvUGl5Z1lPUFBKbXlhRERZQXV5NlBXUVpFWllvTmVYYXlkcmI5aWVBa0JhZEdaMFVrSms5V29DVjU0SGRSa3AzQnlCT09GdzdCWkNlV3o="
m_p: "MS2Kp5Gqu972m4cQURbiKVsXFC106dL9JQ398iI3OGmq5GzmT8e6h6iVg4rT8Fiz"
e_t: "1615474824337"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0.01"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 3001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134464
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134463
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134462
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134460
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 5
}
userinfo {
  username: "156******06"
}

2021-03-10 17:00:20,697-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:00:20,697-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "6.0"
  t_p: "5bc7b910db7046e0b1b06bf0dfded624"
  imei: ""
  model: "PCRM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "Ymg4MaNZ"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: "42E1F48352C04B80910A7BBB7FDDE8022d5334806a8d9b083e64c9324c08c040"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
price: 1
count: 1
productname: "ONLY_KB_SPEND"
productdesc: "ONLY_KB_SPEND"
partnerid: "2031"
callBackUrl: "http://secure.pay-test3.wanyol.com/notify/receiver"
partnerOrder: "wqDIxY9GdfH3Cj7oB6vQRknFZ2Wp0riE"
channelId: ""
ver: "1.1.0"
source: "PaySDK"
attach: ""
sign: "U2AGMgkGFhRpuKBVkCCUu82AlF7VxEXX0cAUryejCv5JpoKlrNEhTb3uSZF0a77cMEx2/uDD26j8IZcT8CGr6zLjynq/B6XpPUHATv6C2vcxxCYq3daRgKQ7e2pnbf17s6Sda+DJn56gNf46+fA8KyEqC4pDZk68s8i66u88yeQ="
order: "7950254325949"
ip: "120.197.152.211"
factor: ""

2021-03-10 17:00:20,865-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: ""
}
rpay: "0"
gpay: "0"

2021-03-10 17:00:20,865-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT app_key FROM `db_platform_gateway`.`server_app_info` WHERE app_id = '100002'
2021-03-10 17:00:20,869-INFO-lib.common_biz.find_key-96-查询到秘钥信息：BB36C34EB6644AB9694315AF7D68E629
2021-03-10 17:00:20,869-INFO-lib.common.session.http.http_json-38-http://secure-gateway.pay-test3.wanyol.com/gateway/nearme.account.query
2021-03-10 17:00:20,869-INFO-lib.common.session.http.http_json-39-传入的参数：{'app_id': '100002', 'service': 'nearme.account.query', 'format': 'JSON', 'charset': 'UTF8', 'sign_type': 'MD5', 'sign': '11F0C4C3ACB1DE069E4D7B2DD64F39F8', 'timestamp': '2021-03-10 17:00:20', 'version': '1.0', 'bizContent': "{'ssoid': '2076075925'}"}
2021-03-10 17:00:20,894-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'data': {'ssoid': '2076075925', 'timeStamp': 1615366824614, 'useableBalance': 0, 'totalGiveBalance': 0, 'chargeBalance': 0, 'freezeBalance': 0, 'giveBalance': 0}, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功', 'success': True}
2021-03-10 17:00:20,905-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:00:20,905-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "10248802539420"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: ""
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 17:00:20,997-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "029954a08e8f4880a26f223bcea6f34f"
s_p: "VEd1QzU5ZFBOTVI5TlM5QTg5bklCY2YzaHZBWWFFUHJwbUpIbk1ZeFgyNjg1ek1YYjFvcEdjdFl4czlVZWNmYW1IRkFOU2JTU28xOWpEYTU2RE9hU2hPSTByemk4Tk5LMkxVT2ZuUmF5UEQ0SnFXRU5wclpRN1VUQ1U4TjRrQzFsUWl1dkpsejN2NnlkTnl3NkRiaFl4ZXBEUXRYZWxMdkV0RkZNcjJOSGs5NjV5dVBpS0tIVVNKS29uVjFNWE5wZnFOY3Q4eWsxUTBadDdERUVES2N6UWlZRlFBMnl2MDk2NUNyUFAxSzUzQkM4RmRia3Y5aHljYlJhVFhCR3k3NDhqa2ZHeG1GSUlVUWVYV2x3QzdPekZsbXF3NVJZNFdzNE9McmdlZ1cxb3h4Q25wWk1NZVFsT0k3Y1NRWEFXVXJHYVBiWTl3ZkxWSXVGdVRrcno2V1BoeElVM3M0YnhWVm84ZUdkckZVMVpwODM1cWdFa2lKdHd1Tk1QR3lucjhGRE0zam82RmlVR0dQU0pnS1o2TUU3aFFvWjJkV0xIUUNuTUN2eGJ5dHFxbjJQRkFhNFd6bFFMc2V0ajFQWVFvS2tGRWRHRDdlYlcyVHZicXdFc1ZSajBUdFAyR1FPdWVIejFkSXVZeG55YWFJVUFnT3lRTkVnZ2daSTVNazVXWTl4VzI1b1BuQUdRbllmdXBta0dEa3lDaXlBcmU1a1p6T0diVGtFbFh2TEJtMHhxalp5R09wMm5TY0ZHQTZNYnNydXcxUXlrbWJiSEZDTW52dFUxN0ZlMjlFbHlCWURMUmdRaFRDbGxwVTR6VjAzYnh5M3VNZk1NMDIxM2p3V3k4bGdxTlR3dDNwQkphc09YTm82eVRQSHhRbzkwRjNVamdJMWIxaVRhQXlMUEozbnFJRFJaYWtvRzZHQkNKVmJPNjFubHZKNXpDMVNEWndBZG1RTWw3QnBoVnVDOGRCZlVmN0dMZkx0OXFQdWhHZnJlcnZDY3dNaFZ1akxnSDJIT25veEhyZkp5dVU4UWt3aUdtbTVqaEN3YnpydmM5eFlJMUU="
m_p: "kgYpNy2cF5sk0Bd6xcC3Fwcru9ioQqH0mmoz8Dcpk57cRVL9707jrwcZgX9FXin2"
e_t: "1615474824689"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 3001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134464
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134463
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134462
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134460
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 5
}
userinfo {
  username: "156******06"
}

2021-03-10 17:00:20,998-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:00:20,999-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "12.0"
  t_p: "029954a08e8f4880a26f223bcea6f34f"
  imei: ""
  model: "PCRM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "AYaEPrpm"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: ""
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
type: "wxpay"
amount: "0.01"
cardno: ""
cardpwd: ""
ext: ""
basepay {
  channelId: ""
  notifyurl: "http://secure.pay-test3.wanyol.com/notify/receiver"
  productName: "KB\342\200\224RECHARGE_PAY"
  productDesc: "KB\342\200\224RECHARGE_PAY"
  partnercode: "2031"
  appversion: "1.1.0"
  currencyName: "\345\217\257\345\270\201"
  rate: 1.0
  partnerorder: "null"
}
sign: "blRIRDvUCZxNFhOKLE/woHFzfexpsBxjmKKCSE2iULDCzZ8hryWqWoZIp7HytZQCZYJv3VPxjztM3476674iKh0g5g2/kOytxucpecbwXzyNbY1A4U3sBZWP7ZziU+A/jb3+9Auhuw986x3CEmCi6cwjkk+WYl1OJZwgxrjEDzJD1O7vuBq4VbGk3a0qurtZfh1dUaZ8e5IMmF+GQcndFWzdwYEglMXZoe8l48Gt702l9wEvPgPtiSYcbbvMZoA3Hn8v/6z2KpL6odPc9WhxwJcbPj4/mLy4e8hyQp+CBpsxM9Tcxn3lWhDAvgD60liGpnyFqR9wpkaX4lJg4EVJoA=="
ip: "58.252.5.75"
isNeedExpend: "0"
appId: ""
payTypeRMBType: "0"
tradeType: "common"
screenInfo: "FULL"

2021-03-10 17:00:21,429-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "{\"appid\":\"wx93eea96ecc33f168\",\"noncestr\":\"28b426fa078b49a7a41c26418ff5b2a4\",\"packageNm\":\"Sign=WXPay\",\"partnerid\":\"1603465160\",\"prepayid\":\"wx101700250787779bd6f0b24b9237620000\",\"sign\":\"F7758DB8BEFCBC0FFEC919D31E7C656A\",\"timestamp\":\"1615366825\"}"
}
payrequestid: "KB202103101700242076075925672432"
model: ""

2021-03-10 17:00:22,430-INFO-wxpay-scarlet-52-回调参数：<xml><transaction_id><![CDATA[6688763539847774432860243796]]></transaction_id>
<nonce_str><![CDATA[u9QFVGinL4j0IykzmA6NvaldC3KHZ12t]]></nonce_str>
<bank_type><![CDATA[OTHERS]]></bank_type>
<openid><![CDATA[oCg6Xt8NvRi7jGuap_5B6XdY4oYk]]></openid>
<sign><![CDATA[827D6F18F0182A0B7B95AB123C330EF3]]></sign>
<fee_type><![CDATA[CNY]]></fee_type>
<mch_id><![CDATA[1603465160]]></mch_id>
<cash_fee><![CDATA[1]]></cash_fee>
<out_trade_no><![CDATA[KB202103101700242076075925672432]]></out_trade_no>
<appid><![CDATA[wx93eea96ecc33f168]]></appid>
<total_fee>1</total_fee>
<trade_type><![CDATA[APP]]></trade_type>
<result_code><![CDATA[SUCCESS]]></result_code>
<attach><![CDATA[TEST]]></attach>
<time_end><![CDATA[20210310170022]]></time_end>
<is_subscribe><![CDATA[N]]></is_subscribe>
<return_code><![CDATA[SUCCESS]]></return_code>
</xml>
2021-03-10 17:00:22,623-INFO-wxpay-scarlet-56-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-03-10 17:00:22,623-INFO-wxpay-scarlet-58-回调解析成功
2021-03-10 17:00:22,634-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:00:22,634-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "21445296741271"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "tGhCwEKMJeb81ksVYU57piHr69xLjmgT"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 17:00:22,730-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "bfd41b0415cc4dd9b7325f3017385dff"
s_p: "SzIwWHRYQ09IVUlPdm54SW5KSzI4bHE2Zkw0ejNQTFlQZkxmdHJhN2NBT0hGQnplbXJtOTFMZzMzSnhBWGVYSG1PUGdmaXpHVWY3Q25sOGExdzQzOGtUT0l3MFFqc3JWdkUzZVlzQldDeE1FU1FSUHJ6OGRPZjU0UXc2WUpocG03RVRBTzJaOUkxUE53c0JDYmY4NVdRRzhZbm5HZ3B5Ykt0YmlTVjIyVVZnTmVyY2t4c1dncEQ3Q0JidGRQa05rS2xXS21wWWs0ZGNlcHFsTEtDckFPTTcwR3BMOU1DY281U3d4d1l5MFk0cGdXU0I1dXdsd3QxS0QyM0I0eXVvczkzSDlDOWdBZWZkdEk3emQ4c3pkZmN2b2xlN09oc2NuZ3Q0VFdISFNUU3Zka2pSMkV5UERuRE1TZUVxYmxURFljaXRkWlBZVmp0Wm82NHVMWEJWWVlHbVh0VG95cUdqRUVNQ2RqRktzUTZWc3Q2MVk0ZzRFTlhnbUNTM1JXVlYyNm1TbkZQRmtJS1QxdGRlU1J6VUxGREZmUTdnbmNGd1hndWJMODZpT3BhNUFVRWNlOEVKVDZ3Y1lQOWQ2WXdDc0JRWloxdHN3U3N3TGlHanRTWWRTdjdqSWVNNkdSSzA2eGxCMTMzN2dObVIxRm53dnJadXR6elNyV2NKNFNMenlMQXJTeXF5VHdybXc5WGlTVk14WHlBMEo5d2JJSWJSMlAzdkNmU2dxRFAxSHIybTlPQWRpbDhjejFIdXJMR3RwR0s0RUJlWU9JQ2FHT3FEYms0aWRFZ2xJN1ZpM29SbTNIQW9tNzh3QlVnOUllOTNuenZrQlV2b3JMd0FuWnBRZlNkSFFRakU4RHBuQWJPUUdWU0ZHbHZWVlBwb1JlTHd4UUE3MTZtVGU1REZvMFhwWWxDSGRIeFhnQlVCbnR4MWl3NTJKdTFuS2FRRllIaFBEZHE1V2R3NVlaWUJKNWRCRjI4ckhMdnVXRWcxcUhuUDhGUHd4OUNKZVY4Z05LQ3Z0NkdmV2VZeU04dDFhN3Z5aU56TDR3YkJjMEZ3bDNJZXg="
m_p: "5Iu5Bdv2b4ewM6D4SG63gqZ6O24w611XH7IgP0He38w9c6Yu0WqQXfEoI2i582I9"
e_t: "1615474826419"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0.01"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 3001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134464
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134463
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134462
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134460
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 5
}
userinfo {
  username: "156******06"
}

2021-03-10 17:00:22,730-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:00:22,730-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "5.0"
  t_p: "bfd41b0415cc4dd9b7325f3017385dff"
  imei: ""
  model: "PBDM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "TOIw0Qjs"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
payrequestid: "KB202103101700242076075925672432"
version: "260"
queryType: "PAY"

2021-03-10 17:00:22,811-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "2002"
  msg: ""
}
successStatus: "1086"
origAmount: "0.01"

2021-03-10 17:00:22,812-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT app_key FROM `db_platform_gateway`.`server_app_info` WHERE app_id = '100002'
2021-03-10 17:00:22,815-INFO-lib.common_biz.find_key-96-查询到秘钥信息：BB36C34EB6644AB9694315AF7D68E629
2021-03-10 17:00:22,815-INFO-lib.common.session.http.http_json-38-http://secure-gateway.pay-test3.wanyol.com/gateway/nearme.account.query
2021-03-10 17:00:22,815-INFO-lib.common.session.http.http_json-39-传入的参数：{'app_id': '100002', 'service': 'nearme.account.query', 'format': 'JSON', 'charset': 'UTF8', 'sign_type': 'MD5', 'sign': 'CE45D278F779DBE5F9106384DD8EB450', 'timestamp': '2021-03-10 17:00:22', 'version': '1.0', 'bizContent': "{'ssoid': '2076075925'}"}
2021-03-10 17:00:22,837-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'data': {'ssoid': '2076075925', 'timeStamp': 1615366826558, 'useableBalance': 1, 'totalGiveBalance': 0, 'chargeBalance': 1, 'freezeBalance': 0, 'giveBalance': 0}, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功', 'success': True}
2021-03-10 17:00:22,837-INFO-recharge-52-可币充值成功
2021-03-10 17:00:22,838-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `db_order_4`.`order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "KB202103101700242076075925672432"
2021-03-10 17:00:22,843-INFO-lib.common_biz.fiz_assert-34-订单详情：{'id': 21709, 'pay_req_id': 'KB202103101700242076075925672432', 'notify_id': '6688763539847774432860243796', 'partner_order': 'NV203113782656752021031017002412317243355235386323', 'amount': 1, 'refund': 0, 'contents': 'KB—RECHARGE_PAY', 'products_name': 'KB—RECHARGE_PAY', 'counts': 1, 'ssoid': '2076075925', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': '1603465160', 'ip': '58.255.79.104', 'mac': '', 'model': 'PCRM00', 'app_package': 'com.example.pay_demo', 'app_ver': '1.1.0', 'sdk_ver': '260', 'partner_code': '2031', 'notify_url': 'http://secure.pay-test3.wanyol.com/notify/receiver', 'status': 'OK', 'channel_id': '', 'channel_type': 'NATIVE', 'pay_type': 'wxpay', 'direct_pay': 'KEBI', 'game_type': 'WANGYOU', 'present_amount': 0, 'original_amount': 1, 'discount_info': '', 'extra': None, 'remark': 'new way', 'request_time': datetime.datetime(2021, 3, 10, 17, 0, 26), 'success_time': datetime.datetime(2021, 3, 10, 17, 0, 22), 'modify_time': datetime.datetime(2021, 3, 10, 17, 0, 26), 'trade_type': 'CZ', 'kebi_spent': 0, 'voucher_amount': 0, 'voucher_info': None, 'country_code': 'CN', 'currency': 'CNY', 'openid': None, 'brand_type': 'OPPO', 'mobile_os_ver': '17', 'platform': '', 'screen_info': 'FULL', 'combine_order': 'N', 'voucher_id': None, 'factor': None, 'voucher_status': None, 'kebi_status': 'OK', 'channel_status': 'OK'}
2021-03-10 17:00:22,843-INFO-lib.common_biz.fiz_assert-45-订单表信息记录正确
2021-03-10 17:00:22,844-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `pay_tradeorder_4`.`trade_order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "KB202103101700242076075925672432"
2021-03-10 17:00:22,848-INFO-lib.common_biz.fiz_assert-55-trade订单详情：{'id': 11419, 'pay_req_id': 'KB202103101700242076075925672432', 'partner_order': 'NV203113782656752021031017002412317243355235386323', 'partner_code': '2031', 'products_name': 'KB—RECHARGE_PAY', 'ssoid': '2076075925', 'origin_amount': 1, 'amount': 1, 'kb_amount': 0, 'voucher_amount': 0, 'present_amount': 0, 'refund': 0, 'country_code': 'CN', 'currency': 'CNY', 'pay_type': 'wxpay', 'channel_id': '', 'channel_type': 'NATIVE', 'direct_pay': 'KEBI', 'trade_type': 'CZ', 'combine_type': 'PRIMARY', 'status': 'OK', 'notify_url': 'http://secure.pay-test3.wanyol.com/notify/receiver', 'attach': '', 'extra_info': '', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': '1603465160', 'ip': '58.255.79.104', 'mac': '', 'openid': None, 'model': 'PCRM00', 'brand_type': 'OPPO', 'app_package': 'com.example.pay_demo', 'app_ver': '1.1.0', 'sdk_ver': '260', 'mobile_os_ver': '17', 'platform': '', 'screen_info': 'FULL', 'remark': None, 'request_time': datetime.datetime(2021, 3, 10, 17, 0, 25), 'success_time': datetime.datetime(2021, 3, 10, 17, 0, 26), 'modify_time': datetime.datetime(2021, 3, 10, 17, 0, 26)}
2021-03-10 17:00:22,848-INFO-lib.common_biz.fiz_assert-63-trade订单表信息记录正确
2021-03-10 17:00:22,849-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `virtual`.`tb_recharge202103` WHERE ssoid = '2076075925' and rechargeOrder = "KB202103101700242076075925672432"
2021-03-10 17:00:22,852-INFO-lib.common_biz.fiz_assert-83-tb_recharge订单详情：{'id': 11641, 'ssoid': '2076075925', 'imei': '', 'rechargeTime': datetime.datetime(2021, 3, 10, 17, 0, 26), 'amount': 1, 'status': 'OK', 'rechargeOrder': 'KB202103101700242076075925672432', 'partnerId': '2031', 'rechargeChannel': '46', 'appPackage': 'com.example.pay_demo', 'model': '', 'clientIp': '', 'source': None, 'updateTime': datetime.datetime(2021, 3, 10, 17, 0, 26)}
2021-03-10 17:00:22,852-INFO-lib.common_biz.fiz_assert-91-tb_recharge订单表信息记录正确
2021-03-10 17:00:22,852-INFO-lib.common.session.http.http_json-38-http://secure.pay-test3.wanyol.com/voucher/grantSingle
2021-03-10 17:00:22,853-INFO-lib.common.session.http.http_json-39-传入的参数：{'amount': '1', 'appId': '2031', 'appSubName': 'AUTO_TEST', 'blackScopeId': '', 'checkName': 'TEST_ACCOUNT', 'configId': '', 'count': 1, 'country': 'CN', 'currency': 'CNY', 'expireTime': '2022-03-10 17:00:20', 'ext1': '', 'ext2': '', 'maxAmount': 1, 'name': 'AUTO_TEST', 'partnerOrder': 'AUTO202103101700224619807917835985488940792372', 'ratio': '', 'remark': '', 'salePrice': 0, 'scopeId': '7104f7bc23e445daba913a5a96a264ac', 'settleType': 1, 'sign': 'C3F4443E9483948C1A63DC12920960EF', 'ssoid': '2076075925', 'subScopeId': '', 'timezone': '', 'type': 2, 'useableTime': '2021-01-01 00:00:00'}
2021-03-10 17:00:22,929-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'batchVouCreateResList': [], 'msg': 'success', 'code': '0000', 'vouIdList': ['64134465'], 'batchId': ''}
2021-03-10 17:00:22,940-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:00:22,940-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "18122595069253"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "oqtTXWebOYVSn1siFZgaxLRClB49IvmJ"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 17:00:23,032-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "f811bda483844cd496771ebb6cdee58c"
s_p: "ZXJkWTRSM0U3aDBmMlRhdGdYVEpHMmo4SVdLRjh0ckxZRVpxRlBGU0d0WHl0ZGJNZ0M5Mml3UXY1eGp2N1QwRkJYOTl5a3kyYjFqaXViV0trS1Q1SFM3aFhwNXVKTk5aa0dFelBWdFN1cDh3Zm5CWlZ1VGd4RWw2NTA3dFFqZUpvYkc1MkdKUkZxM1hBdTg0WmkzbzdwaE5maEUyOXJHQXVDU2RPZDJ3OVpkQVBveVBscDJJalJIS3d2b3c4OUJ5YlNQd3pRb0RxdXRtcGhrRGVqUjJEMHB0bHM0RmdQdTRObWllMTBEdERsbUlab0VDenBCWTE2SDRXb3oycWozb2h0SDA0U0xMMjFzZEJSblJsV0huWlpzaEkzZjc4Qkk1MkZWNzBtWHYyWHhVRmE2TUNDNW81Vnk2dkxyWEFnVEp4ZTZRdTR2Vm83MlBqRjBkOXpBNkhGWFhlS0VIcmhRaXBLNWlTSW9TT014alZNRlFOdVJYeXBzTTU3Rk1Qdms4aTRkazJyTURGbWttczdIbjdxNGltVnZwd2JtRE5MeU5wOU1oRTAxNmpUUExvcGtNU1IyVEZhMlF1RHdkVkdpRkZtd2VTZk9iaXhGbzFxUEZhdUNWVUN1VGpSc3B6SzJpenpqc1lMQllzazFnUG9TcVlMY2tWSnRQY2pjR3JxcXNRV2JxRllzTXh5MEIxTlJEM0JmVmkzMzhmTFJUOG9FM3lkYU5SMFZUU1c0VlhvVmltWnk1cjBobjFLTnFEWWpEMEdrNFNvZ0lSRHdUOE8yNVNkOVRrQXR5eDFkZUtuWE11Yjk2ZW9lNzNVbjl6OTJGSG9CV2JoMVNkWGV4NXFiaGUzVEJWM3loOUZCcmZjZzRVQU5CR0N2akVXNThtNUZPRXFGYVdYZ09TV3JaSjNxTm4zeDFYNkMzUmdQejFhdE1HUkZuTFFTb3ZRT3JCRzZtd2VvdnBNaVdiYm1EamFmemR6bHlNSDhMa3VDQXdvbm81UWR3ZlJEZ3BYeDZDaFhBM3lvbUxUSVRRRW9LUTk3N0NHN3J5dWF6MWM0R2lkcWo="
m_p: "0EQ8Z8DAI9R8Llm46BQ61w166lj8P4S9yuImIAo6BH3u7P1hhLPt6y84cBYVU9QJ"
e_t: "1615474826722"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0.01"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 3001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134465
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134464
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134463
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134462
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134460
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 6
}
userinfo {
  username: "156******06"
}

2021-03-10 17:00:23,051-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:00:23,051-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "6.0"
  t_p: "f811bda483844cd496771ebb6cdee58c"
  imei: ""
  model: "PCRM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "tSup8wfn"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: "42E1F48352C04B80910A7BBB7FDDE8022d5334806a8d9b083e64c9324c08c040"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
price: 2
count: 1
productname: "KB_AND_VOU_SPEND"
productdesc: "KB_AND_VOU_SPEND"
partnerid: "2031"
callBackUrl: "http://secure.pay-test3.wanyol.com/notify/receiver"
partnerOrder: "WbiU6LtSNT7VG2j3gK0F8MEDdhorY4vu"
channelId: ""
ver: "1.1.0"
source: "PaySDK"
attach: ""
sign: "hNxLYtzX0gsWZUjnK9PX/BVLHLQP8pItwZ+DgGtMychfvpfakWZhlDT0UTVyGQL7g9sMgdAfSZ5R0hZK7rfiBn9qBO8PSswNZgIrYiODNO10djf5URFsi5EVFJmCj1sy7CbMDpVJk3EElEc3zCGdm4SA073Brm1c1Cp1LlxwM4E="
appKey: "1234"
voucherId: 64134465
voucherType: 2
voucherCount: 1
order: "3863686296000"
ip: "120.197.152.211"
factor: ""
screenInfo: "FULL"

2021-03-10 17:00:23,238-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: ""
}
rpay: "0"
gpay: "0"

2021-03-10 17:00:23,239-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT pay_req_id FROM `db_order_4`.`order_info_75` WHERE ssoid = "2076075925" and partner_order = "WbiU6LtSNT7VG2j3gK0F8MEDdhorY4vu"
2021-03-10 17:00:23,243-INFO-fiz_db_operate-55-查询到partnerOrder：WbiU6LtSNT7VG2j3gK0F8MEDdhorY4vu， 对应支付订单号：{'pay_req_id': 'KB202103101700262076075925506352'}
2021-03-10 17:00:45,877-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境3-MYSQL：{'host': '10.52.46.169', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-03-10 17:00:46,156-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境3-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-03-10 17:00:46,200-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]成功
2021-03-10 17:00:46,200-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]
2021-03-10 17:00:46,417-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]成功
2021-03-10 17:00:46,418-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]
2021-03-10 17:00:46,440-INFO-lib.common.db_operation.mysql_operation-118-成功连接到测试专用环境-MYSQL：{'host': '10.52.54.122', 'user': 'opay', 'pwd': '_UI7xHubrhTPIP1J_T4so7SU7ATCrUzm7cAh6TdBLLHWUSQUQqD8p45xVQzV3Czi', 'port': '33066'}
2021-03-10 17:00:46,440-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `test_account`.`account_test_env`
2021-03-10 17:00:46,452-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=0
2021-03-10 17:00:46,455-INFO-lib.common_biz.find_merchant_info-28-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1603465160'}
2021-03-10 17:00:46,456-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1603465160' AND pay_channel = 'wxpay'
2021-03-10 17:00:46,459-INFO-lib.common_biz.find_key-109-查询到秘钥信息：g4rTCeoBJFG4KyWCjTQCqltfEDma3yxR
2021-03-10 17:00:46,460-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no, plan_id FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=1
2021-03-10 17:00:46,463-INFO-lib.common_biz.find_merchant_info-41-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601', 'plan_id': '120877'}
2021-03-10 17:00:46,463-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1603465160' AND pay_channel = 'wxpay'
2021-03-10 17:00:46,466-INFO-lib.common_biz.find_key-109-查询到秘钥信息：g4rTCeoBJFG4KyWCjTQCqltfEDma3yxR
2021-03-10 17:00:46,822-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT app_key FROM `db_platform_gateway`.`server_app_info` WHERE app_id = '100002'
2021-03-10 17:00:46,825-INFO-lib.common_biz.find_key-96-查询到秘钥信息：BB36C34EB6644AB9694315AF7D68E629
2021-03-10 17:00:46,826-INFO-lib.common.session.http.http_json-38-http://secure-gateway.pay-test3.wanyol.com/gateway/nearme.account.query
2021-03-10 17:00:46,826-INFO-lib.common.session.http.http_json-39-传入的参数：{'app_id': '100002', 'service': 'nearme.account.query', 'format': 'JSON', 'charset': 'UTF8', 'sign_type': 'MD5', 'sign': '311B5B56A0AA0DDA26D36F4F0729AA95', 'timestamp': '2021-03-10 17:00:46', 'version': '1.0', 'bizContent': "{'ssoid': '2076075925'}"}
2021-03-10 17:00:46,869-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'data': {'ssoid': '2076075925', 'timeStamp': 1615366850585, 'useableBalance': 0, 'totalGiveBalance': 0, 'chargeBalance': 0, 'freezeBalance': 0, 'giveBalance': 0}, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功', 'success': True}
2021-03-10 17:00:46,870-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT app_key FROM `db_platform_gateway`.`server_app_info` WHERE app_id = '100002'
2021-03-10 17:00:46,873-INFO-lib.common_biz.find_key-96-查询到秘钥信息：BB36C34EB6644AB9694315AF7D68E629
2021-03-10 17:00:46,873-INFO-lib.common.session.http.http_json-38-http://secure-gateway.pay-test3.wanyol.com/gateway/nearme.account.query
2021-03-10 17:00:46,873-INFO-lib.common.session.http.http_json-39-传入的参数：{'app_id': '100002', 'service': 'nearme.account.query', 'format': 'JSON', 'charset': 'UTF8', 'sign_type': 'MD5', 'sign': '311B5B56A0AA0DDA26D36F4F0729AA95', 'timestamp': '2021-03-10 17:00:46', 'version': '1.0', 'bizContent': "{'ssoid': '2076075925'}"}
2021-03-10 17:00:46,895-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'data': {'ssoid': '2076075925', 'timeStamp': 1615366850616, 'useableBalance': 0, 'totalGiveBalance': 0, 'chargeBalance': 0, 'freezeBalance': 0, 'giveBalance': 0}, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功', 'success': True}
2021-03-10 17:00:46,905-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:00:46,905-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "81790799263043"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: ""
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 17:00:47,001-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "ab6e2cfa850343e3a26d7f6b5dc01cec"
s_p: "UjhYNVRGd094UWJ6TFFqM2syZVJWZFB2Y0hOak9wY2JVZHNTeElZZmN0a2RpdDZTSkpRMjJnbXhOMjBoeGhGeXlaSTg0ZzZSb1MxbHpRSXRKa2JFc2laVHFFVXVmWG1TQVNxallxWGNtWGJzeVF5S0xGdFNBazJmNGk3bVdkaFlVTTBWeU81M0thY05YQlphQ0VsYXFESjY3YURJbHg5cE9kQjRtc0tDNkoyR2M0bkc3WGZUemhsTXN5bGt6RHB6UnlzbWZtY2tqVW9ud0w4RWQ1MzdsMXhTZnRyYXFSbHhEYm1JREpiN2dtZFkzV2gzTktwQW0weldubFRudml4WDdTbzZnZlhwMU5ONUtybldNNjhkRUdNdUtnakZja2tTc0hYVjZZckZqcldMR0c1NmVMRmV4TlZ1YWt6dzlhckJOc1VaNzNDeU9ZeHdUZUhQcURtTDc4eVRHekZZSUpQbW9FU0dKbm5zbjhJdHdKSFpnN1FVZVB0WWVoUGIyekEyREo0cGtRcTAxWlpZMGcyY25GbHZtYmxtZXNub2JiZVdqZTBpSXlQRnBNNXBUaXB6eXBUN05WWjdyUDNHbTVTaHBPemQ3SmdyemhOVDlJelFoM0RSSGZkbWNnOXJEdEhLZHVxVXR3bURZVXZHZ3plUlo3MXVJaWI0emJaajAwQmRyRHFNbHdxSXp2Tkc0aGc5V2tZYTkyY3RPWGNXaXI0NGM5bGZKYmJoQnV3RmNWd3p5ZTlIU1pmaDgzd2NIUVRJdnRWaFFUclhtSWtCTGtKdWc1V2xNZUtUdlY1aXFJdFlkRDBuTVhhSTZkY0RYbzdOaDNIVVQ4b2ZCNHljRG1XeFVyWWxTckdNeTVQNkZVY3drcUtNY0JLUmRDSTB1REw2dG1pM2VBcDZLc09zVUdqY0VwdTVUSTYzeDh0UlBvM1BPQ0FJUGxCRnFBRTVNZDFWU0psd3RrckZRVVJweEV3dE9pbjRNa0xRSzRJUElUd2M3U1RMbEE1bWVwazZHdGlHVDlKbGYyS1l3Z1hNcWVaZ1lxR3EzRFN5UW1IUkJ3NFQ="
m_p: "g95MIt254XW2JyMKA8V7qgOK23b6lGiYj6vIdnXv4KmC4VbklDjFDIoNo94mE0G1"
e_t: "1615474850683"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 3001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134464
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134463
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134462
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134460
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 5
}
userinfo {
  username: "156******06"
}

2021-03-10 17:00:47,005-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:00:47,005-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "12.0"
  t_p: "ab6e2cfa850343e3a26d7f6b5dc01cec"
  imei: ""
  model: "PCRM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "UM0VyO53"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: ""
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
type: "wxpay"
amount: "0.01"
cardno: ""
cardpwd: ""
ext: ""
basepay {
  channelId: ""
  notifyurl: "http://secure.pay-test3.wanyol.com/notify/receiver"
  productName: "KB\342\200\224RECHARGE_PAY"
  productDesc: "KB\342\200\224RECHARGE_PAY"
  partnercode: "2031"
  appversion: "1.1.0"
  currencyName: "\345\217\257\345\270\201"
  rate: 1.0
  partnerorder: "null"
}
sign: "177HZ6PZJ0SXB3e+++fm0xPn3TT/UPZFqi6FE1TpQ+TZPoIGlLau+oKTRCRntdQGkFZdQwpa1+6d64zsGeHyp4qbEvoIb6An0irse6j2eAg0aXyn/Eu0o29kqmpima4/C4rULo49bsxF1IMT1u36ERmGiG0D0OULxWfZYvt9yaOR7EcjqywZDYjavJm0CJq4AsFMXk+ZsIDP+BaEvLqdPg2cp8HqbTeyBALt448uNv4JUenFDNozDnzVrT80fHaVJd3nVtb1pONTM/t2Atg4VZ5JoiPKVH4XBERQhSII1CKpB3DCkuFulCqX4mZQ3Aa3jGLqA5Eq/jYT3mYASVhUgg=="
ip: "58.252.5.75"
isNeedExpend: "0"
appId: ""
payTypeRMBType: "0"
tradeType: "common"
screenInfo: "FULL"

2021-03-10 17:00:47,402-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "{\"appid\":\"wx93eea96ecc33f168\",\"noncestr\":\"b01515f046e84ddcb6d780f708df1990\",\"packageNm\":\"Sign=WXPay\",\"partnerid\":\"1603465160\",\"prepayid\":\"wx10170051052679d9199064437d6e0f0000\",\"sign\":\"A7BE1BC53CA7188551AE7D3A3CD358DA\",\"timestamp\":\"1615366851\"}"
}
payrequestid: "KB202103101700502076075925407622"
model: ""

2021-03-10 17:00:48,403-INFO-wxpay-scarlet-52-回调参数：<xml><transaction_id><![CDATA[9116565046941593175492721924]]></transaction_id>
<nonce_str><![CDATA[Xlz7EkxRW4CGhJZI5aAyOHoifSMPpTvr]]></nonce_str>
<bank_type><![CDATA[OTHERS]]></bank_type>
<openid><![CDATA[oCg6Xt8NvRi7jGuap_5B6XdY4oYk]]></openid>
<sign><![CDATA[323A7527843C56FEBA1E6731B29B3192]]></sign>
<fee_type><![CDATA[CNY]]></fee_type>
<mch_id><![CDATA[1603465160]]></mch_id>
<cash_fee><![CDATA[1]]></cash_fee>
<out_trade_no><![CDATA[KB202103101700502076075925407622]]></out_trade_no>
<appid><![CDATA[wx93eea96ecc33f168]]></appid>
<total_fee>1</total_fee>
<trade_type><![CDATA[APP]]></trade_type>
<result_code><![CDATA[SUCCESS]]></result_code>
<attach><![CDATA[TEST]]></attach>
<time_end><![CDATA[20210310170048]]></time_end>
<is_subscribe><![CDATA[N]]></is_subscribe>
<return_code><![CDATA[SUCCESS]]></return_code>
</xml>
2021-03-10 17:00:48,564-INFO-wxpay-scarlet-56-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-03-10 17:00:48,565-INFO-wxpay-scarlet-58-回调解析成功
2021-03-10 17:00:48,576-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:00:48,576-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "97673617771262"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "Tm1LwGjR9YsDzNp2eEi5byXUAaVxWM38"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 17:00:48,656-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "2fe3c6d7e7f6444a82e481b838a6cafe"
s_p: "Z3VFdkhYQTRoSXF1aUZWRnU2WldUUlJnNndkUXFWSGdjVjZzVEdjblBhR1B2U2xMU0tIU0xGZUlVSXl2aDBRVlVkOUI1ZG5nSVA0QzhuTFJTcFZoMkRzQTFKbldsbXZEeUFtNkUzVFRZZWhkU1VUSzkzZUZMcGtKN0FIMlB6VXc0aEp6TnJlcFc1WHJUOFF0c0pYOVVDbGZSMTBuZFVrSzhYcVJ3MUpEN0RBb0lkOElFNWVUOTdMUDFyelFteE9iYmU4M3c4RmIzeFJIbEQ2dHE1REFPTmJBU2poTmtuNlNqS29IWVhlYVN0eTRpelFMQlBpNEhaaDZSVGQwU0tLQ1VQZUQwdjhyeGxwbG9yaEswS21Md2pXR2I3cjNYQW9nUEZZREFmV0VSOUROMWFZVVE4MmRQOFZuVGNWd3ZtNmk5RmxIc0twbUo3RldVRzF0SEFhS0lGVUlZbEpNQ0M0WEpUR2dTMXVBNTZpR3I1SjY0MzA3OWhsdEZNRG9HamJLdzdFNG53NVJVVzlUZ09nS3pPUlZNVERZM3dVOGJIOHpadEVWMmt5NWtSZnVISDdDdDJTbXp0UkJIVThWcjNmNVZvNTRuRWlCOWZ6dHk3R0M2N3RXVmdmUHdhU1NHVVdMbGVoeDdBQ2UyOWMyZ0l2eHhFMjVveFdhN0xZQW9XTTNpYWFVS2pVSTFybnNIQkM0M0J6TGpaaDRGdm94WE9xdTZOQ3FqZGFFaW96SnlQR3RabzVqSXJVeVJKdkh1alZSTzZ2YkMwRmpRNWF2OWkySHFCaGJXbjl6ZGNqNlN1UjBtU0RGR200eDBqN3J1blJKN0pWeTlRMXE0VFZMaGVlU2hQOEZUbkhQMWJ3THB2VTZkY2xlNzNGV0VDU0RDSUp1Rk9SalphZnl1OVB6enpuQW5GV25RaHhmbktVSnRnUFN6NWl0YUh2V0lPNWVzeUozTW5xaklEWk44Zm5wY25HRnhxbGlNN0Z1YXcyb3pEYUg3OXBzcDhrUDNsbEtxRXBhRmhCZTE1SW5HWE41dEhwblY4QjFsdHZZZ2cxYnJrYVU="
m_p: "NHXG1ON7k2Q53v39qR57xwKELaA0t5731ADPnSxRz7H2DxKeGsz1Iqie5DIUw8aR"
e_t: "1615474852351"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0.01"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 3001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134464
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134463
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134462
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134460
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 5
}
userinfo {
  username: "156******06"
}

2021-03-10 17:00:48,657-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:00:48,657-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "5.0"
  t_p: "2fe3c6d7e7f6444a82e481b838a6cafe"
  imei: ""
  model: "PBDM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "UIyvh0QV"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
payrequestid: "KB202103101700502076075925407622"
version: "260"
queryType: "PAY"

2021-03-10 17:00:48,729-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "2002"
  msg: ""
}
successStatus: "1086"
origAmount: "0.01"

2021-03-10 17:00:48,731-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT app_key FROM `db_platform_gateway`.`server_app_info` WHERE app_id = '100002'
2021-03-10 17:00:48,734-INFO-lib.common_biz.find_key-96-查询到秘钥信息：BB36C34EB6644AB9694315AF7D68E629
2021-03-10 17:00:48,734-INFO-lib.common.session.http.http_json-38-http://secure-gateway.pay-test3.wanyol.com/gateway/nearme.account.query
2021-03-10 17:00:48,734-INFO-lib.common.session.http.http_json-39-传入的参数：{'app_id': '100002', 'service': 'nearme.account.query', 'format': 'JSON', 'charset': 'UTF8', 'sign_type': 'MD5', 'sign': 'BF1BEB489F7F780FC01E617BA532D46B', 'timestamp': '2021-03-10 17:00:48', 'version': '1.0', 'bizContent': "{'ssoid': '2076075925'}"}
2021-03-10 17:00:48,749-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'data': {'ssoid': '2076075925', 'timeStamp': 1615366852471, 'useableBalance': 1, 'totalGiveBalance': 0, 'chargeBalance': 1, 'freezeBalance': 0, 'giveBalance': 0}, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功', 'success': True}
2021-03-10 17:00:48,749-INFO-recharge-52-可币充值成功
2021-03-10 17:00:48,751-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `db_order_4`.`order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "KB202103101700502076075925407622"
2021-03-10 17:00:48,755-INFO-lib.common_biz.fiz_assert-34-订单详情：{'id': 21711, 'pay_req_id': 'KB202103101700502076075925407622', 'notify_id': '9116565046941593175492721924', 'partner_order': 'NV203113782656752021031017005051236617872932677287', 'amount': 1, 'refund': 0, 'contents': 'KB—RECHARGE_PAY', 'products_name': 'KB—RECHARGE_PAY', 'counts': 1, 'ssoid': '2076075925', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': '1603465160', 'ip': '58.255.79.104', 'mac': '', 'model': 'PCRM00', 'app_package': 'com.example.pay_demo', 'app_ver': '1.1.0', 'sdk_ver': '260', 'partner_code': '2031', 'notify_url': 'http://secure.pay-test3.wanyol.com/notify/receiver', 'status': 'OK', 'channel_id': '', 'channel_type': 'NATIVE', 'pay_type': 'wxpay', 'direct_pay': 'KEBI', 'game_type': 'WANGYOU', 'present_amount': 0, 'original_amount': 1, 'discount_info': '', 'extra': None, 'remark': 'new way', 'request_time': datetime.datetime(2021, 3, 10, 17, 0, 52), 'success_time': datetime.datetime(2021, 3, 10, 17, 0, 48), 'modify_time': datetime.datetime(2021, 3, 10, 17, 0, 52), 'trade_type': 'CZ', 'kebi_spent': 0, 'voucher_amount': 0, 'voucher_info': None, 'country_code': 'CN', 'currency': 'CNY', 'openid': None, 'brand_type': 'OPPO', 'mobile_os_ver': '17', 'platform': '', 'screen_info': 'FULL', 'combine_order': 'N', 'voucher_id': None, 'factor': None, 'voucher_status': None, 'kebi_status': 'OK', 'channel_status': 'OK'}
2021-03-10 17:00:48,755-INFO-lib.common_biz.fiz_assert-45-订单表信息记录正确
2021-03-10 17:00:48,755-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `pay_tradeorder_4`.`trade_order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "KB202103101700502076075925407622"
2021-03-10 17:00:48,759-INFO-lib.common_biz.fiz_assert-55-trade订单详情：{'id': 11421, 'pay_req_id': 'KB202103101700502076075925407622', 'partner_order': 'NV203113782656752021031017005051236617872932677287', 'partner_code': '2031', 'products_name': 'KB—RECHARGE_PAY', 'ssoid': '2076075925', 'origin_amount': 1, 'amount': 1, 'kb_amount': 0, 'voucher_amount': 0, 'present_amount': 0, 'refund': 0, 'country_code': 'CN', 'currency': 'CNY', 'pay_type': 'wxpay', 'channel_id': '', 'channel_type': 'NATIVE', 'direct_pay': 'KEBI', 'trade_type': 'CZ', 'combine_type': 'PRIMARY', 'status': 'OK', 'notify_url': 'http://secure.pay-test3.wanyol.com/notify/receiver', 'attach': '', 'extra_info': '', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': '1603465160', 'ip': '58.255.79.104', 'mac': '', 'openid': None, 'model': 'PCRM00', 'brand_type': 'OPPO', 'app_package': 'com.example.pay_demo', 'app_ver': '1.1.0', 'sdk_ver': '260', 'mobile_os_ver': '17', 'platform': '', 'screen_info': 'FULL', 'remark': None, 'request_time': datetime.datetime(2021, 3, 10, 17, 0, 51), 'success_time': datetime.datetime(2021, 3, 10, 17, 0, 52), 'modify_time': datetime.datetime(2021, 3, 10, 17, 0, 52)}
2021-03-10 17:00:48,759-INFO-lib.common_biz.fiz_assert-63-trade订单表信息记录正确
2021-03-10 17:00:48,760-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `virtual`.`tb_recharge202103` WHERE ssoid = '2076075925' and rechargeOrder = "KB202103101700502076075925407622"
2021-03-10 17:00:48,763-INFO-lib.common_biz.fiz_assert-83-tb_recharge订单详情：{'id': 11642, 'ssoid': '2076075925', 'imei': '', 'rechargeTime': datetime.datetime(2021, 3, 10, 17, 0, 52), 'amount': 1, 'status': 'OK', 'rechargeOrder': 'KB202103101700502076075925407622', 'partnerId': '2031', 'rechargeChannel': '46', 'appPackage': 'com.example.pay_demo', 'model': '', 'clientIp': '', 'source': None, 'updateTime': datetime.datetime(2021, 3, 10, 17, 0, 52)}
2021-03-10 17:00:48,763-INFO-lib.common_biz.fiz_assert-91-tb_recharge订单表信息记录正确
2021-03-10 17:00:48,763-INFO-lib.common.session.http.http_json-38-http://secure.pay-test3.wanyol.com/voucher/grantSingle
2021-03-10 17:00:48,763-INFO-lib.common.session.http.http_json-39-传入的参数：{'amount': '1', 'appId': '2031', 'appSubName': 'AUTO_TEST', 'blackScopeId': '', 'checkName': 'TEST_ACCOUNT', 'configId': '', 'count': 1, 'country': 'CN', 'currency': 'CNY', 'expireTime': '2022-03-10 17:00:46', 'ext1': '', 'ext2': '', 'maxAmount': 1, 'name': 'AUTO_TEST', 'partnerOrder': 'AUTO202103101700486283052144840344002191582623', 'ratio': '', 'remark': '', 'salePrice': 0, 'scopeId': '7104f7bc23e445daba913a5a96a264ac', 'settleType': 1, 'sign': '57331CC57B929EA428FD134862594E51', 'ssoid': '2076075925', 'subScopeId': '', 'timezone': '', 'type': 2, 'useableTime': '2021-01-01 00:00:00'}
2021-03-10 17:00:48,820-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'batchVouCreateResList': [], 'msg': 'success', 'code': '0000', 'vouIdList': ['64134466'], 'batchId': ''}
2021-03-10 17:00:48,831-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:00:48,831-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "05099766955807"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "sSdIED4OGPl3aVNM5JgtwXLBZH0e8brk"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 17:00:48,930-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "fa52f5b7c4f845018a556f6a8b62e5e6"
s_p: "ODNBU1poS1NPWEZHd0ZmN3pSWDBJTHNiaWFyR2J1UFM3b2UwTkd3Y0ZEOWZ0SmJ4Z3gySVJ6Z1ltdURrSFVjTTU4QUNBNTFzWE5HRklVTzRDNDF2cUIzTHZZVjJNSnhaRktZSVZ3dFhQRmdWdUtIV3N2ZzNXZmkwV2ZkUFd3bDNkQUtRYWlPemZqcGp5TmJrZ2pycDU3YldPNGZVRUZPb3VLNUFiUnNvVHhpbUJyZExaRFA2WTF2cUJaQURJb3RycFhGWjRtVDNuT0Y0TTdFZWlUTXNBN0ZGVFFFYlRNVkhjbGVOSjZMSkg1aWFjZFFWNXBkUXcyRkpUWWxvQ2FNemJHWjlsSlhyVFFISXhrRE5vbGlCemlHRDg5RWdnUW5vYjMwTllVOGNLTEZwQWxvSU9oeFZVVzlQUTlybkNiWjVEUnJETDY0emt6MHY2SzBsWm9yYjMzbU9PYjZmRUNHZjMySDBwVEtKWldpdXJ5b01IaVNqdlY0MkFXRXl6ekR3QUdtb2MzNmxiNHFhajAzd2VuaUxOTndvcm9GOGVVbHF5ZWN2bmhuTWV6bUJIb3ZRNlNkYUdjR0p4cHQxTW9RNGFDMTUxYXdTcjc2cEhPaDNmb0g0dGszUUZTYmZDU2R0QTZrM2hZS3l1MDk4eTk0NGszZlVBdjhNQ0x2eU02MWN4ZE5lNDd2eVQ2bkV4VXlnSHBvZ2lRWW1TTHYyckJUSEVnNnMzWWxsUzMwSFc3WG16Sll3dTV5MVJPTHpLNGJQQlhXdHI2Z1JwZmRRcWtFRnhWYmtWSGdnQzZJNzZMQVZrQ0RYRVE5cHNjMFpURXRld2hQN2NQY1M5Mm02d3liaXd3Nmtad3FTQThoSE5LVUUwdVFQd0x6NFdKZHBFTTRjOUgxM2JDWHpCb282dFpaeU52VFRQc1VwbHp1bXpTdWYxNE85UFgxekZja2RjbmVHVlFZSjZZbXY2T3ZFa1dTOEUzeEVVS0lGbk1wY1FXaFQ0RnY1SXFTenpKdzhBUDAwNDZ1N1lubVd1WnQ4WUhpemc5NVRhVG1Ob1dNZUljMTQ="
m_p: "GTuXLM4Cb7uLoso8Wan8BRab3m4B2uR0kSk7d18H8SjAm2qV315y6b16Z2r8p8xW"
e_t: "1615474852615"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0.01"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 3001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134466
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134464
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134463
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134462
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134460
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 6
}
userinfo {
  username: "156******06"
}

2021-03-10 17:00:48,950-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:00:48,950-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "6.0"
  t_p: "fa52f5b7c4f845018a556f6a8b62e5e6"
  imei: ""
  model: "PCRM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "dPWwl3dA"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: "42E1F48352C04B80910A7BBB7FDDE8022d5334806a8d9b083e64c9324c08c040"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
price: 2
count: 1
productname: "KB_AND_VOU_SPEND"
productdesc: "KB_AND_VOU_SPEND"
partnerid: "2031"
callBackUrl: "http://secure.pay-test3.wanyol.com/notify/receiver"
partnerOrder: "sq1ha74gEwb3St5KNJiTceZXPQF8Y0BL"
channelId: ""
ver: "1.1.0"
source: "PaySDK"
attach: ""
sign: "Ftuo/Jf9QhX2b3JPRWHzZxSSS7YI7SmqX6pr7AKufZiwenVAggDRbSJTshuQdMRolkLxk60JAdPiNnzcrCzBCWdKTAhqt3/cUPb6oxtqH+CoV6TmD5CfLD55hwGjPenyiNvtxY4is28/AFDwifuOPyb+XLXugaxIDsgy8vc/NoM="
appKey: "1234"
voucherId: 64134466
voucherType: 2
voucherCount: 1
order: "8098342958350"
ip: "120.197.152.211"
factor: ""
screenInfo: "FULL"

2021-03-10 17:00:49,182-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: ""
}
rpay: "0"
gpay: "0"

2021-03-10 17:00:49,182-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT pay_req_id FROM `db_order_4`.`order_info_75` WHERE ssoid = "2076075925" and partner_order = "sq1ha74gEwb3St5KNJiTceZXPQF8Y0BL"
2021-03-10 17:00:49,186-INFO-fiz_db_operate-55-查询到partnerOrder：sq1ha74gEwb3St5KNJiTceZXPQF8Y0BL， 对应支付订单号：{'pay_req_id': 'KB202103101700522076075925841812'}
2021-03-10 17:00:49,187-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `db_order_4`.`order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "KB202103101700522076075925841812"
2021-03-10 17:00:49,191-INFO-lib.common_biz.fiz_assert-34-订单详情：{'id': 21712, 'pay_req_id': 'KB202103101700522076075925841812', 'notify_id': None, 'partner_order': 'sq1ha74gEwb3St5KNJiTceZXPQF8Y0BL', 'amount': 0, 'refund': 0, 'contents': 'KB_AND_VOU_SPEND', 'products_name': 'KB_AND_VOU_SPEND', 'counts': 1, 'ssoid': '2076075925', 'mobile_num': '', 'imei': '', 'imsi': '', 'imsi2': None, 'ip': '58.255.79.104', 'mac': '', 'model': 'PCRM00', 'app_package': 'com.example.pay_demo', 'app_ver': '', 'sdk_ver': '', 'partner_code': '2031', 'notify_url': 'http://secure.pay-test3.wanyol.com/notify/receiver', 'status': 'OK', 'channel_id': '', 'channel_type': 'NATIVE', 'pay_type': 'KEBI', 'direct_pay': 'KEBI', 'game_type': None, 'present_amount': 0, 'original_amount': 2, 'discount_info': '', 'extra': None, 'remark': None, 'request_time': datetime.datetime(2021, 3, 10, 17, 0, 52), 'success_time': None, 'modify_time': datetime.datetime(2021, 3, 10, 17, 0, 53), 'trade_type': 'PAY', 'kebi_spent': 1, 'voucher_amount': 1, 'voucher_info': '{"cutAmount":"1","id":"64134466","price":"2","type":"2"}', 'country_code': 'CN', 'currency': 'CNY', 'openid': None, 'brand_type': None, 'mobile_os_ver': None, 'platform': '', 'screen_info': 'FULL', 'combine_order': None, 'voucher_id': '64134466', 'factor': '', 'voucher_status': None, 'kebi_status': None, 'channel_status': None}
2021-03-10 17:00:49,191-INFO-lib.common_biz.fiz_assert-45-订单表信息记录正确
2021-03-10 17:00:49,192-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `pay_tradeorder_4`.`trade_order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "KB202103101700522076075925841812"
2021-03-10 17:00:49,196-INFO-lib.common_biz.fiz_assert-55-trade订单详情：{'id': 11422, 'pay_req_id': 'KB202103101700522076075925841812', 'partner_order': 'sq1ha74gEwb3St5KNJiTceZXPQF8Y0BL', 'partner_code': '2031', 'products_name': 'KB_AND_VOU_SPEND', 'ssoid': '2076075925', 'origin_amount': 2, 'amount': 0, 'kb_amount': 1, 'voucher_amount': 1, 'present_amount': 0, 'refund': 0, 'country_code': 'CN', 'currency': 'CNY', 'pay_type': 'KEBI', 'channel_id': '', 'channel_type': 'NATIVE', 'direct_pay': 'KEBI', 'trade_type': 'PAY', 'combine_type': 'PRIMARY', 'status': 'OK', 'notify_url': 'http://secure.pay-test3.wanyol.com/notify/receiver', 'attach': '', 'extra_info': '', 'mobile_num': '', 'imei': '', 'imsi': '', 'imsi2': None, 'ip': '58.255.79.104', 'mac': '', 'openid': None, 'model': 'PCRM00', 'brand_type': None, 'app_package': 'com.example.pay_demo', 'app_ver': '', 'sdk_ver': '', 'mobile_os_ver': '', 'platform': '', 'screen_info': 'FULL', 'remark': None, 'request_time': datetime.datetime(2021, 3, 10, 17, 0, 53), 'success_time': datetime.datetime(2021, 3, 10, 17, 0, 53), 'modify_time': datetime.datetime(2021, 3, 10, 17, 0, 52)}
2021-03-10 17:00:49,196-INFO-lib.common_biz.fiz_assert-63-trade订单表信息记录正确
2021-03-10 17:00:49,197-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select * from `db_pay_notify_1`.`notify_info` where request_id = "sq1ha74gEwb3St5KNJiTceZXPQF8Y0BL"
2021-03-10 17:00:49,201-INFO-lib.common_biz.fiz_assert-135-通知表信息详情：{'id': 141744, 'app_id': 10001, 'app_name': '可币系统(测试环境)', 'app_sub_id': '2031', 'notify_id': '97297f85c8ac41fd8445bb12048a76f0', 'request_id': 'sq1ha74gEwb3St5KNJiTceZXPQF8Y0BL', 'notify_protocol': 'HTTP', 'notity_detail': '{"appId":10001,"appSubId":"2031","httpReqType":"POST","reqContent":"{\\"attach\\":\\"\\",\\"count\\":1,\\"date\\":\\"20210310\\",\\"kbVou\\":{\\"kbVouAmount\\":1,\\"notClearCount\\":1,\\"orderAmt\\":2,\\"payVouDesc\\":\\"\\",\\"spendType\\":2,\\"vouCountDetail\\":\\"64134466:1;\\"},\\"kbVouAmount\\":1,\\"partnerId\\":\\"2031\\",\\"partnerOrder\\":\\"sq1ha74gEwb3St5KNJiTceZXPQF8Y0BL\\",\\"paySuccessTime\\":\\"2021-03-10 17:00:52\\",\\"price\\":2,\\"productDesc\\":\\"KB_AND_VOU_SPEND\\",\\"productName\\":\\"KB_AND_VOU_SPEND\\",\\"sign\\":\\"gkngL5/01NCE83lnIM6QMrognEQL0hpeCh+qi+s0nnEgeE/8oDNOW4jONRr8sxPPfbBS1vUOZYNXOvlWNTYEutdvgUP3sn+a9ufSswSFm1xW4CrT8qXLNDvDbcxqNTqSvGg0+ZbUy9yiHQXCZqxn7nfnbwtJ3bQh6G0vNJQrY1Y=\\",\\"spendType\\":2,\\"ssoid\\":\\"2076075925\\"}","reqUrl":"http://secure.pay-test3.wanyol.com/notify/receiver","requestId":"sq1ha74gEwb3St5KNJiTceZXPQF8Y0BL","sign":"4B58E3A0CBA208C7295B7EE857F3853A","signType":"MD5","successResult":"OK","timeStamp":1615366852833,"version":"1.0"}', 'notify_count': 1, 'notify_response': 'OK', 'notify_handler': 'httpNotifyJsonHandler', 'fail_strategy': 'failStrategyHashImpl', 'status': 'SUCCESS', 'success_time': datetime.datetime(2021, 3, 10, 17, 0, 53), 'insert_time': datetime.datetime(2021, 3, 10, 17, 0, 53), 'update_time': datetime.datetime(2021, 3, 10, 17, 0, 53), 'extra_json': None, 'remark': None}
2021-03-10 17:00:49,201-INFO-lib.common_biz.fiz_assert-141-通知成功
2021-03-10 17:00:49,202-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select status, usable_amt from `oppopay_voucher`.`vou_info_16` where vouId='64134466'
2021-03-10 17:00:49,205-INFO-lib.common_biz.fiz_assert-194-优惠券详情：{'status': '6', 'usable_amt': None}
2021-03-10 17:00:49,205-INFO-lib.common_biz.fiz_assert-198-优惠券表记录正确
2021-03-10 17:04:59,398-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境3-MYSQL：{'host': '10.52.46.169', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-03-10 17:04:59,723-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境3-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-03-10 17:04:59,770-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]成功
2021-03-10 17:04:59,771-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]
2021-03-10 17:05:00,012-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]成功
2021-03-10 17:05:00,012-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]
2021-03-10 17:05:00,035-INFO-lib.common.db_operation.mysql_operation-118-成功连接到测试专用环境-MYSQL：{'host': '10.52.54.122', 'user': 'opay', 'pwd': '_UI7xHubrhTPIP1J_T4so7SU7ATCrUzm7cAh6TdBLLHWUSQUQqD8p45xVQzV3Czi', 'port': '33066'}
2021-03-10 17:05:00,036-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `test_account`.`account_test_env`
2021-03-10 17:05:00,048-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=0
2021-03-10 17:05:00,052-INFO-lib.common_biz.find_merchant_info-28-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1603465160'}
2021-03-10 17:05:00,052-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1603465160' AND pay_channel = 'wxpay'
2021-03-10 17:05:00,055-INFO-lib.common_biz.find_key-109-查询到秘钥信息：g4rTCeoBJFG4KyWCjTQCqltfEDma3yxR
2021-03-10 17:05:00,056-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no, plan_id FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=1
2021-03-10 17:05:00,059-INFO-lib.common_biz.find_merchant_info-41-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601', 'plan_id': '120877'}
2021-03-10 17:05:00,060-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1603465160' AND pay_channel = 'wxpay'
2021-03-10 17:05:00,063-INFO-lib.common_biz.find_key-109-查询到秘钥信息：g4rTCeoBJFG4KyWCjTQCqltfEDma3yxR
2021-03-10 17:05:00,452-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT app_key FROM `db_platform_gateway`.`server_app_info` WHERE app_id = '100002'
2021-03-10 17:05:00,455-INFO-lib.common_biz.find_key-96-查询到秘钥信息：BB36C34EB6644AB9694315AF7D68E629
2021-03-10 17:05:00,456-INFO-lib.common.session.http.http_json-38-http://secure-gateway.pay-test3.wanyol.com/gateway/nearme.account.query
2021-03-10 17:05:00,456-INFO-lib.common.session.http.http_json-39-传入的参数：{'app_id': '100002', 'service': 'nearme.account.query', 'format': 'JSON', 'charset': 'UTF8', 'sign_type': 'MD5', 'sign': 'EBFDF395A5D60465764DF9476788B380', 'timestamp': '2021-03-10 17:05:00', 'version': '1.0', 'bizContent': "{'ssoid': '2076075925'}"}
2021-03-10 17:05:00,525-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'data': {'ssoid': '2076075925', 'timeStamp': 1615367104245, 'useableBalance': 0, 'totalGiveBalance': 0, 'chargeBalance': 0, 'freezeBalance': 0, 'giveBalance': 0}, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功', 'success': True}
2021-03-10 17:05:00,537-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:05:00,537-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "74289722983954"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "4yNLxJfYdawh5VuvM7Hj2ZXRT9eW3gkn"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 17:05:00,663-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "386a43e99fa7412c85b772b9785bf54a"
s_p: "WXVwN1ZQbFFVbU05NzcxaFNmcHpZTG9ETXg1REVyYkt5TmE3T1Y5ZGdVR1pOaURNRnhONmF5Q1lnVnVBcU9QSjFQbXMxVEZUUDZPd012ZVR3aWJLQWFrclJMdXhjWldvcmxhYnhIUktybmNCRk9weW5aQ3ZQdk5tUDcwWWp5TER5TWxiR1pwRXU2cnJ0dFFZSWpRUXVabWp1OXd1Tm5yek00OFRsbEhXMlBsNno2emZGMFk2YlYzTGpzQ1dzMlV6dXE5WDFXY1V5REpIVFZKUXgxc1o0bktoZWd2a3BHb0RYOW9qYnNsbklwMEg4SjViZ0dtV0tqNkxFbWsxY3Q1cHhZS2dhYlk1YnJQRXVTUk14VmlBYUphNU1XZkw3TG1oRldTNTNxMnVFS2I5Y1NsMk9mNFo5eVlaVzFkN2RVNjlhdnlwdjZaWFhDUW5HYmduVlRnVWhLbTdaV0ZKenNGZ2FnbWhCckJJaGRtd3Rxa0p2bFQyQnFZd2l0WFAxa05SZzJTVmFlWmJGZ1o5QjdLSzhYaW1tQkpqTEp4eHZhcFNJYTRleDNKTWxBeWQ3b2d6cHZnMHB4ZXhTM1VHRU5hYnRMdzBaV0VwQlZsOEx4QWtwc2ZEdWl4emZvdnBTS1E4cEp2S0pTS25mTDdyT3dEam9ISGloOTZrcVY4UlBXTEpsSlVucWZkRlJZZHBkNmtGTGlFRmJnMWhsWHI0Q3ZOUmJnbnRpSmEzdlZ0QVBlM1NmeHBJaExwaUs1VlkzRXI4aHAwaVE0QXY5ZGxaUE1tSW1PbFl3eTE2dFBWY3RGeThiSjlBMnkxZklLY2R1TFEwMms3ZHJyOUdFa2ttYzFhVzdVMFQ1bHQ3RlM3clRENTJNZXhwVk1HOENCMDZkSlI3M3RsSjFsMU1zOXU2WnR3b3pFZG14RW9VME83bWl6azZKZFJDalZON2VRU3lUUkxGTDhWTVhCdDRxNmVJT0NsVllYQmVHcGduRVFCeGJHQ05tM2ZEUnRtVGR6MFd3SjJyT0doOVZicU9PNU1nRVp5UW12cGJpb3hSVHowNnBzTFI="
m_p: "T1Kwe3LSk1p59673K3ky4mTy86519UakqK16U395f7ZbPzbdH11f5unvjF03On8g"
e_t: "1615475104328"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 3001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134464
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134463
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134462
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134460
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 5
}
userinfo {
  username: "156******06"
}

2021-03-10 17:05:00,685-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:05:00,686-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "12.0"
  t_p: "386a43e99fa7412c85b772b9785bf54a"
  imei: ""
  model: "PDCM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "u9wuNnrz"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: ""
  brandType: "OPPO"
  mobileos: "16"
  androidVersion: "29"
}
type: "wxpay"
amount: "0.01"
cardno: ""
cardpwd: ""
ext: ""
basepay {
  channelId: ""
  notifyurl: "http://secure.pay-test3.wanyol.com/notify/receiver"
  productName: "RECHARGE_SPEND"
  productDesc: "RECHARGE_SPEND "
  partnercode: "2031"
  appversion: "208006"
  currencyName: "CNY"
  rate: 1.0
  partnerorder: "DkATm2NaJQ5thKFixs93nrjZb6WUPOI0"
}
sign: "UKQiA+AoRbRDem+Nyj1I+lWl4/MjISRkMyHL/moIpBHczfdnknQMJcNbEnEr66BxaF06zwEZU7PrNRcvp/mx0VVWTWdXFCTGeL0M8Ib8cSDmk5luJ/KQ023BgsRFR/wg1NHntXe6IAWosudB909Vlr6mzGaiASbFu9pA5yogBEmzIKXlzOuzJPWr9rRx8GbRELZX9msR4X9D9ORJDsj5Lkfmz3U09B/uZE9ywg7cVz2nLV2zgqUV3siATBBcn/gED5hfDSE916/SQuOYtUo/xsou5RDERH4qtoYF91J/fFSITHYy/gADPeaaTI1CMCG9HjQGz19l3rN5Ud/kQUPGCQ=="
ip: "183.238.170.71"
expendRequest {
  header {
    version: "12.0"
    t_p: "386a43e99fa7412c85b772b9785bf54a"
    imei: ""
    model: "PDCM00"
    apntype: "1"
    package: "com.example.pay_demo"
    r_v: "u9wuNnrz"
    ext: ""
    sdkVer: 260
    country: "CN"
    currency: "CNY"
    openId: ""
    brandType: "OPPO"
    mobileos: "16"
    androidVersion: "29"
  }
  price: 1
  count: 1
  productname: "RECHARGE_SPEND_PRICE=AMOUNT"
  productdesc: "RECHARGE_SPEND_PRICE=AMOUNT"
  partnerid: "2031"
  callBackUrl: "http://secure.pay-test3.wanyol.com/notify/receiver"
  partnerOrder: "DkATm2NaJQ5thKFixs93nrjZb6WUPOI0"
  channelId: ""
  ver: "208006"
  source: "auto_test"
  attach: ""
  sign: "agHGTohBTxoleqkVojDlJ3fWfUgn32j3bofXeotTVXQwuaW8jzxxemaUwgm730x8RXfdt9P98iGStxcbImzjpwdfSztMnpIriqzb07aeuHyQBgrJDdybewmRs2Zyvke+DuSRPMqZsATzBv3sGffSwRbB7WeKFcFv1T5/CCHUlwY="
  factor: ""
}
isNeedExpend: "1"
appId: ""
payTypeRMBType: "0"
tradeType: "common"
screenInfo: "FULL"

2021-03-10 17:05:01,159-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "{\"appid\":\"wx93eea96ecc33f168\",\"noncestr\":\"6e0f1f736aea460bb7b79c3347add554\",\"packageNm\":\"Sign=WXPay\",\"partnerid\":\"1603465160\",\"prepayid\":\"wx101705048078906622bea266b054680000\",\"sign\":\"741FD955F489BC1EC68323E8B2FDE6C7\",\"timestamp\":\"1615367104\"}"
}
payrequestid: "KB202103101705042076075925327482"
model: ""

2021-03-10 17:05:01,159-INFO-wxpay-scarlet-52-回调参数：<xml><transaction_id><![CDATA[5885208042111249638749985726]]></transaction_id>
<nonce_str><![CDATA[tw4fjL3FJH7B0sDxIeS1z2bGvaZWc9RO]]></nonce_str>
<bank_type><![CDATA[OTHERS]]></bank_type>
<openid><![CDATA[oCg6Xt8NvRi7jGuap_5B6XdY4oYk]]></openid>
<sign><![CDATA[0874774E9EA7F59C7682926747EE9543]]></sign>
<fee_type><![CDATA[CNY]]></fee_type>
<mch_id><![CDATA[1603465160]]></mch_id>
<cash_fee><![CDATA[1]]></cash_fee>
<out_trade_no><![CDATA[KB202103101705042076075925327482]]></out_trade_no>
<appid><![CDATA[wx93eea96ecc33f168]]></appid>
<total_fee>1</total_fee>
<trade_type><![CDATA[APP]]></trade_type>
<result_code><![CDATA[SUCCESS]]></result_code>
<attach><![CDATA[TEST]]></attach>
<time_end><![CDATA[20210310170501]]></time_end>
<is_subscribe><![CDATA[N]]></is_subscribe>
<return_code><![CDATA[SUCCESS]]></return_code>
</xml>
2021-03-10 17:05:01,385-INFO-wxpay-scarlet-56-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-03-10 17:05:01,385-INFO-wxpay-scarlet-58-回调解析成功
2021-03-10 17:05:01,396-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:05:01,396-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "02881525633208"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "KmR6GtWpnsEuLd53JCogAD7j4O8SxyPZ"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 17:05:01,488-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "d5fa0a2edcf54a9386f56c546b24df9f"
s_p: "NWhDaklGaWlPeDVJTFNtUW1VbDBZRFVqRzA1bTF0NDFqMmZhaUFKT3hrbTNLSjBXbjk0b1AyOG9qandWdllMV0hka05xUUpYTHJaeDk3eHoxVWxHQVZ6UkhGWVg3ak9TbzFWTkdYY0FHWUdaeWRKc0U0a3N5bjVid1JXN0hPdHk2YnBDOEdvM0Fwb1ZrNnVNeUo5Z21zb2hFN1RSdGRvcnlVWEVJejNwbnVyNTBOaXJJV3pFZWl1R1BsNjVob3BRaEhnTUw4N24xdU9UMFV2Z0o3RVV3czk1RFJHUnB5R3NqOE5GTVNIZU4zbGJrcUw3dlZ6ajRZT1lpOEdYNGhkT3Z6MDVwNmpoMnJMMDVnYUs5anpyUk1mNERwRmtxV29qbFRiZkV0T280UlR2YndRWWFTTlo0R0hZMjFna2YxWlJIOXI5aWpnY0pRQ1U1ODhpbzN1Z0paMlNvd1RMNjBkcDNjOVJFTElXeXpOSXJTWFNaMFBQVHRQZjZSTjdtR2VPZGZzTWlBT0QwdDdRREFoNjhtZmlZWU9EYzVnOHBCUFBqb3Eya0toYWtLM2FRaG5xUW5Cc1lycHRxaVRNVHpnZkE0Z0F5NGdkODhDTnhVZkZ5NG94V0FrWGpQaUdjZ3lhenpadjc3SDdZQVRLNmZTSUVROVFTMm1WbVZDRUxqTEhBb2l1Z2dvYXg5WkRYS1NUMDdWdzlOazJmTUpZUlFVdFhDVkdudFgwR1VwczVUdWVmZ3p6SEhPcTdCaEE2N0VGTzc2YjJDVUw5WUh4SVlrTDZBc2dZS01jRHRWYW1sRlNONXljSFc5NW56UXl6Z3NUdFEyb2JFbGNCMVVYdW81czhZQjkzVDB0RWFRR2FyNDlHQXNubm1DdTNYTHh1ODRVd1FOMGpabWxyTVVWUkhBQm1Wa1R3aFZsSXFqQWttVW5Fc0NoUnVpT2RsU2xSVmtEcUFGbnE1R0puaEJla21id3FwSXFZd3NobTJwSVRBSVVUUnZxUTUzcm9VY3BpYWRpSzhxSWFuVlVzUmZYWkRNNHYxNXF1VVZCYWlPZTB2Tzg="
m_p: "ol693s0U99ywcB3226iX2o44QC655IKxVxA1gq61X5yBvre3X6r69FNrfax2Tex3"
e_t: "1615475105182"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 3001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134464
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134463
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134462
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134460
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 5
}
userinfo {
  username: "156******06"
}

2021-03-10 17:05:01,489-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:05:01,489-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "5.0"
  t_p: "d5fa0a2edcf54a9386f56c546b24df9f"
  imei: ""
  model: "PBDM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "ty6bpC8G"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
payrequestid: "KB202103101705042076075925327482"
version: "260"
queryType: "PAY"

2021-03-10 17:05:01,577-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "2002"
  msg: ""
}
successStatus: "1086"
origAmount: "0.01"

2021-03-10 17:05:01,578-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT app_key FROM `db_platform_gateway`.`server_app_info` WHERE app_id = '100002'
2021-03-10 17:05:01,581-INFO-lib.common_biz.find_key-96-查询到秘钥信息：BB36C34EB6644AB9694315AF7D68E629
2021-03-10 17:05:01,581-INFO-lib.common.session.http.http_json-38-http://secure-gateway.pay-test3.wanyol.com/gateway/nearme.account.query
2021-03-10 17:05:01,581-INFO-lib.common.session.http.http_json-39-传入的参数：{'app_id': '100002', 'service': 'nearme.account.query', 'format': 'JSON', 'charset': 'UTF8', 'sign_type': 'MD5', 'sign': '428D72D1AFA5EA7A7A51345280A8094D', 'timestamp': '2021-03-10 17:05:01', 'version': '1.0', 'bizContent': "{'ssoid': '2076075925'}"}
2021-03-10 17:05:01,601-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'data': {'ssoid': '2076075925', 'timeStamp': 1615367105322, 'useableBalance': 0, 'totalGiveBalance': 0, 'chargeBalance': 0, 'freezeBalance': 0, 'giveBalance': 0}, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功', 'success': True}
2021-03-10 17:05:01,601-INFO-recharge_spend-56-可币余额正常
2021-03-10 17:05:01,602-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `db_order_4`.`order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "KB202103101705042076075925327482"
2021-03-10 17:05:01,607-INFO-lib.common_biz.fiz_assert-34-订单详情：{'id': 21713, 'pay_req_id': 'KB202103101705042076075925327482', 'notify_id': '5885208042111249638749985726', 'partner_order': 'DkATm2NaJQ5thKFixs93nrjZb6WUPOI0', 'amount': 1, 'refund': 0, 'contents': 'RECHARGE_SPEND ', 'products_name': 'RECHARGE_SPEND', 'counts': 1, 'ssoid': '2076075925', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': '1603465160', 'ip': '58.255.79.104', 'mac': '', 'model': 'PDCM00', 'app_package': 'com.example.pay_demo', 'app_ver': '208006', 'sdk_ver': '260', 'partner_code': '2031', 'notify_url': 'http://secure.pay-test3.wanyol.com/notify/receiver', 'status': 'OK', 'channel_id': '', 'channel_type': 'NATIVE', 'pay_type': 'wxpay', 'direct_pay': 'KEBI', 'game_type': 'WANGYOU', 'present_amount': 0, 'original_amount': 1, 'discount_info': '', 'extra': None, 'remark': 'new way', 'request_time': datetime.datetime(2021, 3, 10, 17, 5, 5), 'success_time': datetime.datetime(2021, 3, 10, 17, 5, 1), 'modify_time': datetime.datetime(2021, 3, 10, 17, 5, 5), 'trade_type': 'PAY', 'kebi_spent': 0, 'voucher_amount': 0, 'voucher_info': '{"cutAmount":"0","id":"0","price":"1","type":"0"}', 'country_code': 'CN', 'currency': 'CNY', 'openid': None, 'brand_type': 'OPPO', 'mobile_os_ver': '16', 'platform': '', 'screen_info': 'FULL', 'combine_order': 'N', 'voucher_id': '0', 'factor': '', 'voucher_status': None, 'kebi_status': 'OK', 'channel_status': 'OK'}
2021-03-10 17:05:01,607-INFO-lib.common_biz.fiz_assert-45-订单表信息记录正确
2021-03-10 17:05:01,608-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `pay_tradeorder_4`.`trade_order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "KB202103101705042076075925327482"
2021-03-10 17:05:01,612-INFO-lib.common_biz.fiz_assert-55-trade订单详情：{'id': 11423, 'pay_req_id': 'KB202103101705042076075925327482', 'partner_order': 'DkATm2NaJQ5thKFixs93nrjZb6WUPOI0', 'partner_code': '2031', 'products_name': 'RECHARGE_SPEND', 'ssoid': '2076075925', 'origin_amount': 1, 'amount': 1, 'kb_amount': 0, 'voucher_amount': 0, 'present_amount': 0, 'refund': 0, 'country_code': 'CN', 'currency': 'CNY', 'pay_type': 'wxpay', 'channel_id': '', 'channel_type': 'NATIVE', 'direct_pay': 'KEBI', 'trade_type': 'PAY', 'combine_type': 'PRIMARY', 'status': 'OK', 'notify_url': 'http://secure.pay-test3.wanyol.com/notify/receiver', 'attach': '', 'extra_info': '', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': '1603465160', 'ip': '58.255.79.104', 'mac': '', 'openid': None, 'model': 'PDCM00', 'brand_type': 'OPPO', 'app_package': 'com.example.pay_demo', 'app_ver': '208006', 'sdk_ver': '260', 'mobile_os_ver': '16', 'platform': '', 'screen_info': 'FULL', 'remark': None, 'request_time': datetime.datetime(2021, 3, 10, 17, 5, 5), 'success_time': datetime.datetime(2021, 3, 10, 17, 5, 5), 'modify_time': datetime.datetime(2021, 3, 10, 17, 5, 5)}
2021-03-10 17:05:01,612-INFO-lib.common_biz.fiz_assert-63-trade订单表信息记录正确
2021-03-10 17:05:01,612-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `virtual`.`tb_recharge202103` WHERE ssoid = '2076075925' and rechargeOrder = "KB202103101705042076075925327482"
2021-03-10 17:05:01,615-INFO-lib.common.db_operation.mysql_operation-51-查询数据为空
2021-03-10 17:05:01,615-INFO-lib.common_biz.fiz_assert-83-tb_recharge订单详情：None
2021-03-10 17:05:01,616-INFO-lib.common_biz.fiz_assert-91-tb_recharge订单表信息记录正确
2021-03-10 17:05:01,616-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `virtual`.`tb_payment202103` WHERE ssoid = '2076075925' and partnerOrder = "DkATm2NaJQ5thKFixs93nrjZb6WUPOI0"
2021-03-10 17:05:01,620-INFO-lib.common.db_operation.mysql_operation-51-查询数据为空
2021-03-10 17:05:01,620-INFO-lib.common_biz.fiz_assert-111-tb_payment订单详情：None
2021-03-10 17:05:01,620-INFO-lib.common_biz.fiz_assert-119-tb_payment订单表信息记录正确
2021-03-10 17:05:01,620-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select * from `db_pay_notify_1`.`notify_info` where request_id = "DkATm2NaJQ5thKFixs93nrjZb6WUPOI0"
2021-03-10 17:05:01,624-INFO-lib.common_biz.fiz_assert-135-通知表信息详情：{'id': 141745, 'app_id': 10001, 'app_name': '可币系统(测试环境)', 'app_sub_id': '2031', 'notify_id': '518f0c9e6c0b4eb7af29423f1cdebfb5', 'request_id': 'DkATm2NaJQ5thKFixs93nrjZb6WUPOI0', 'notify_protocol': 'HTTP', 'notity_detail': '{"appId":10001,"appSubId":"2031","httpReqType":"POST","reqContent":"{\\"attach\\":\\"\\",\\"count\\":1,\\"date\\":\\"20210310\\",\\"kbVouAmount\\":0,\\"partnerId\\":\\"2031\\",\\"partnerOrder\\":\\"DkATm2NaJQ5thKFixs93nrjZb6WUPOI0\\",\\"paySuccessTime\\":\\"2021-03-10 17:05:05\\",\\"price\\":1,\\"productDesc\\":\\"RECHARGE_SPEND\\",\\"productName\\":\\"RECHARGE_SPEND\\",\\"sign\\":\\"iBCayIdFu/5zNFwLpfPS3jciA3gWRLNi1DNL5JTi2K7+RUFZ/it9VzGsDjfCfowe7DXdBGuw2WWljckoRVkZJhZb3mFFeSRs9VHjURbFK/kAh0UyQSNGulR/NrCfqZg9tHC/Z28OCJInJM+KQcFXOxI/t4b8Q8iyVqMd8/oAnTA=\\",\\"spendType\\":0,\\"ssoid\\":\\"2076075925\\"}","reqUrl":"http://secure.pay-test3.wanyol.com/notify/receiver","requestId":"DkATm2NaJQ5thKFixs93nrjZb6WUPOI0","sign":"072ABC9E0AEC7A80CC91C876883659A1","signType":"MD5","successResult":"OK","timeStamp":1615367105161,"version":"1.0"}', 'notify_count': 1, 'notify_response': 'OK', 'notify_handler': 'httpNotifyJsonHandler', 'fail_strategy': 'failStrategyHashImpl', 'status': 'SUCCESS', 'success_time': datetime.datetime(2021, 3, 10, 17, 5, 5), 'insert_time': datetime.datetime(2021, 3, 10, 17, 5, 5), 'update_time': datetime.datetime(2021, 3, 10, 17, 5, 5), 'extra_json': None, 'remark': None}
2021-03-10 17:05:01,624-INFO-lib.common_biz.fiz_assert-141-通知成功
2021-03-10 17:07:50,268-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境3-MYSQL：{'host': '10.52.46.169', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-03-10 17:07:50,578-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境3-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-03-10 17:07:50,626-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]成功
2021-03-10 17:07:50,626-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]
2021-03-10 17:07:50,858-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]成功
2021-03-10 17:07:50,858-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]
2021-03-10 17:07:50,888-INFO-lib.common.db_operation.mysql_operation-118-成功连接到测试专用环境-MYSQL：{'host': '10.52.54.122', 'user': 'opay', 'pwd': '_UI7xHubrhTPIP1J_T4so7SU7ATCrUzm7cAh6TdBLLHWUSQUQqD8p45xVQzV3Czi', 'port': '33066'}
2021-03-10 17:07:50,888-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `test_account`.`account_test_env`
2021-03-10 17:07:50,904-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=0
2021-03-10 17:07:50,911-INFO-lib.common_biz.find_merchant_info-28-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1603465160'}
2021-03-10 17:07:50,912-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1603465160' AND pay_channel = 'wxpay'
2021-03-10 17:07:50,918-INFO-lib.common_biz.find_key-109-查询到秘钥信息：g4rTCeoBJFG4KyWCjTQCqltfEDma3yxR
2021-03-10 17:07:50,919-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no, plan_id FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=1
2021-03-10 17:07:50,925-INFO-lib.common_biz.find_merchant_info-41-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601', 'plan_id': '120877'}
2021-03-10 17:07:50,926-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1603465160' AND pay_channel = 'wxpay'
2021-03-10 17:07:50,933-INFO-lib.common_biz.find_key-109-查询到秘钥信息：g4rTCeoBJFG4KyWCjTQCqltfEDma3yxR
2021-03-10 17:07:51,350-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT app_key FROM `db_platform_gateway`.`server_app_info` WHERE app_id = '100002'
2021-03-10 17:07:51,357-INFO-lib.common_biz.find_key-96-查询到秘钥信息：BB36C34EB6644AB9694315AF7D68E629
2021-03-10 17:07:51,357-INFO-lib.common.session.http.http_json-38-http://secure-gateway.pay-test3.wanyol.com/gateway/nearme.account.query
2021-03-10 17:07:51,357-INFO-lib.common.session.http.http_json-39-传入的参数：{'app_id': '100002', 'service': 'nearme.account.query', 'format': 'JSON', 'charset': 'UTF8', 'sign_type': 'MD5', 'sign': '74C813FCFD9F05452A06615142AAC3CE', 'timestamp': '2021-03-10 17:07:51', 'version': '1.0', 'bizContent': "{'ssoid': '2076075925'}"}
2021-03-10 17:07:51,537-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'data': {'ssoid': '2076075925', 'timeStamp': 1615367275253, 'useableBalance': 0, 'totalGiveBalance': 0, 'chargeBalance': 0, 'freezeBalance': 0, 'giveBalance': 0}, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功', 'success': True}
2021-03-10 17:07:51,537-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT app_key FROM `db_platform_gateway`.`server_app_info` WHERE app_id = '100002'
2021-03-10 17:07:51,542-INFO-lib.common_biz.find_key-96-查询到秘钥信息：BB36C34EB6644AB9694315AF7D68E629
2021-03-10 17:07:51,543-INFO-lib.common.session.http.http_json-38-http://secure-gateway.pay-test3.wanyol.com/gateway/nearme.account.query
2021-03-10 17:07:51,543-INFO-lib.common.session.http.http_json-39-传入的参数：{'app_id': '100002', 'service': 'nearme.account.query', 'format': 'JSON', 'charset': 'UTF8', 'sign_type': 'MD5', 'sign': '74C813FCFD9F05452A06615142AAC3CE', 'timestamp': '2021-03-10 17:07:51', 'version': '1.0', 'bizContent': "{'ssoid': '2076075925'}"}
2021-03-10 17:07:51,569-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'data': {'ssoid': '2076075925', 'timeStamp': 1615367275287, 'useableBalance': 0, 'totalGiveBalance': 0, 'chargeBalance': 0, 'freezeBalance': 0, 'giveBalance': 0}, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功', 'success': True}
2021-03-10 17:07:51,583-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:07:51,583-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "03036961060593"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: ""
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 17:07:51,735-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "1fdf3453ac304d9c9e59e52cb0583a69"
s_p: "OHVUTWIxQ1puY2hjMkxpWG9aVlJ5bmYyZE1wUm9kMmZObVJwQkE4Mk5mQXY4OGpjRlhnWW5wWWltdzhvekdGdkRlcWpnQlBOMWZ3bHZ6c1JnTWlwWVA3UnAyTmJYZlNQM3ZEdTZoYXdJelcxUnBGWkxnb0dzRHlwMk9uQ1lpcVNzZVJlalk1b0VPVDV1UDNPd3dYakFiMGVOM1dMT0Y3M3NjOHZMU1BHM1l1amdFbUgycXdZb2ZucEo4SE9rUm9yWHJkeXFrOHIxQ0F6ZTU3VjBDTXcwNGx1VjNhRktwOGpTNVJyZFNNZ3d0Q2psYzZucDlTUGhtR1VSeFFYbU1YcG9LajhVMnhwc0o5cVBGc2t4VUZoeG5lUWtsUHd6dWsyWHNibG5jeG44eHg0c1g5M01SYVc2MnZ3SVBKNFFodEE1S0VJN0pXeFpHcUpHTmNiREZJd1VUSmwyU0RsUmIwTHBIMmdMbzJkdG9mY0c5Nm85eExlaHQyZWhwdHVHb2ROWVJ3VloySDR1T0QzMUFaREs4YTg3YXNRdEZyOTZyb1BCN25FSkI5TVk5UER0MTd2RU9Wa1F5cjhieUluMWZ4dW1IbTRsaG9TeHhQTnhMNHFxNlBVdXhmdHZENW4wTzhKdE11SWc0eTZOVFVsSDZpVjlkaUdyeEVvUlRlcE9tcEJWQmduSHozMUprdExGYTN3V1ZYcFJIc1hTRUozOXBHekhQUnRLUlFDdVp0U0FsalRORE1mVzlFcGJYSFV4ZjNBVEIzanA3ZFJhRGdZSVF2UjJ5VGdyYzRIQ1o4QVliaUkzWDN6OUxWTmpPUUNvVG1aWWd6bzBHTmgwa1U1YnBaS0h6NW5HTEFycGdzUndhWUg4YXJCcmhkR2FQQUR5djNYWmFVTXdyRFdDQVZ1ME9nTEV6cTI1R0JzYURRQXJ3ZTR6aVVXblZBSjhGMm83cmxac0I5Uzc1ZlFkV3ZhaVFid3dEY3FwVUJxcXVLMUdkVFFBejdSSHdCSU5kcjZoRUNIQnJ5dENyeUFaT3hVWHNwVk9xNUloM3Z5NFo0MHFVR0M="
m_p: "Ygx76056ax4z88x1zryh0XZFi98vNozrZoc58A8EMC89gu0V21IhtyZSRhYjQ744"
e_t: "1615475275402"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 3001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134464
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134463
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134462
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134460
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 5
}
userinfo {
  username: "156******06"
}

2021-03-10 17:07:51,738-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:07:51,738-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "12.0"
  t_p: "1fdf3453ac304d9c9e59e52cb0583a69"
  imei: ""
  model: "PCRM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "3vDu6haw"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: ""
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
type: "wxpay"
amount: "0.01"
cardno: ""
cardpwd: ""
ext: ""
basepay {
  channelId: ""
  notifyurl: "http://secure.pay-test3.wanyol.com/notify/receiver"
  productName: "KB\342\200\224RECHARGE_PAY"
  productDesc: "KB\342\200\224RECHARGE_PAY"
  partnercode: "2031"
  appversion: "1.1.0"
  currencyName: "\345\217\257\345\270\201"
  rate: 1.0
  partnerorder: "null"
}
sign: "EKiR4Uu3eZShkl9wuytFfYdP0ePgo7PGNnlDZ+ltQtPRvLECEUgxBowhahzs2Tf5cXNS7lZKWiklUVaWPmGhjYieaAczUjY74HOQwpQ/B36J/1vJNn6UbysmLNEfTmdVF9WL0sExMutVFttBwLNq0RzKLm73WtwPfjqElqsRjKBkLabp8DlZ4PR9fWKvyIhKlxL7QAzCGR0V8gUJu193gs2R9ZtyyNonLCFLNajAxxfBlIaOzmdX//cdVarbTaPhFQuCmgKOjz9V6cHu0qW9hacF5VEbzwlVVJ6B5TSh7KPJZuNCczYXwhbEvKDDRNbbH4UBhaw47n2BLdw7XYgtOw=="
ip: "58.252.5.75"
isNeedExpend: "0"
appId: ""
payTypeRMBType: "0"
tradeType: "common"
screenInfo: "FULL"

2021-03-10 17:07:52,153-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "{\"appid\":\"wx93eea96ecc33f168\",\"noncestr\":\"40f17316e2734833b291d05ae252e7ce\",\"packageNm\":\"Sign=WXPay\",\"partnerid\":\"1603465160\",\"prepayid\":\"wx10170755807712f3ec429eb4aa05830000\",\"sign\":\"CC8012554F694B0B3EB0AA90A2412940\",\"timestamp\":\"1615367275\"}"
}
payrequestid: "KB202103101707552076075925326882"
model: ""

2021-03-10 17:07:53,153-INFO-wxpay-scarlet-52-回调参数：<xml><transaction_id><![CDATA[9171745125942241177080793232]]></transaction_id>
<nonce_str><![CDATA[83GUWRQyukTf9JmFvMI1oeH7tnBrjYhL]]></nonce_str>
<bank_type><![CDATA[OTHERS]]></bank_type>
<openid><![CDATA[oCg6Xt8NvRi7jGuap_5B6XdY4oYk]]></openid>
<sign><![CDATA[BF82331FEC331750AC4FD2E7AEF25263]]></sign>
<fee_type><![CDATA[CNY]]></fee_type>
<mch_id><![CDATA[1603465160]]></mch_id>
<cash_fee><![CDATA[1]]></cash_fee>
<out_trade_no><![CDATA[KB202103101707552076075925326882]]></out_trade_no>
<appid><![CDATA[wx93eea96ecc33f168]]></appid>
<total_fee>1</total_fee>
<trade_type><![CDATA[APP]]></trade_type>
<result_code><![CDATA[SUCCESS]]></result_code>
<attach><![CDATA[TEST]]></attach>
<time_end><![CDATA[20210310170753]]></time_end>
<is_subscribe><![CDATA[N]]></is_subscribe>
<return_code><![CDATA[SUCCESS]]></return_code>
</xml>
2021-03-10 17:07:53,426-INFO-wxpay-scarlet-56-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-03-10 17:07:53,426-INFO-wxpay-scarlet-58-回调解析成功
2021-03-10 17:07:53,439-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:07:53,439-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "17307749954858"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "pPXgO2Yyzxna9edSH8Iwv4UBuR0Zoc3T"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 17:07:53,539-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "3e6b1ac8af134317b47aace6e7fcd355"
s_p: "TzF1WEZLR1JyRnFpa2xaTXdaTVA4ZTBiQnUyUmx1cERiVEs4ZHA1Q3Byd2Y4Zk85Z28xck96MHgxRDZ2VkU3U3FHcU9WbXNKREhiUFM1MmdCSDhmQkF0MjV5R3M3cUZqdXl6b0xweHNFclV0M1hQSnl1OVVPVWplZGlVN1BWMHV2UjZBOHFQcHpaZkFweG9xV3J0N0JnNHBFZkxscFdRaHNNcjUwS05pbUJGa3dpbWtlaGFGbEppTmVON3ZaZnRIYXJocmhGSkZydDlVOTRmQzl2VzVhdG1lT2ZFNGR2SXpzYm5BWGxGSXpiblZyak1RbmI0NlZmalA1Q0t0ejZWOUZuZWxNMjYzd0dLc3l0cWRoTTlEeTlPakJRQmlhZVNtSWRxNFBEQXVKcjNGdnNHVk83Q0pPdHZlWGNMQk9vNmtUMWVaME5wU0wyV2VlS0dWY2VmMWtHV3lXcjUxNVlqbUZFNXhiNFBMV3hNQU9KeW43cmJMMmpwQmZIQ3NlUnBhZnJ2VlN2QWtCSktVNVgyR2tiOU8waWI0MTIwVjNQZEZ6NUQ2blVaN3Y3OHJxb1hhMTdsY3pWRHJNRnFZYXlmUk82bWZUSjVUWGtEc0V3SXB4ZjBqUHRDQm5GY1d2OVZBMHkySlNoRGtnQ2VMcnhTZlJVN09Da1lHZ3NiZkdWUTBRUUNqa2k3WHZsV01IQVZlallKakdLamhQYXc2QmtzMzhWTjduQnBWTWNWb2hEdTBvNGNPcGd6RzJlM3d5VTNUOFJhR0pGck1jb09RN05rVmx6Y3N4QnBEWjVOR1k0UTBIR3BLR1EyanRQYVY5Z0xOMzlDb1JsRjZaWmx0dmV4aTdtU294RTN4NzViWDFncEUxS2g5SlFoRENiZ3dIMzI5UFpKcTZGM2FRdEUxRGVPSTQ5c080bTZ1VjZsc1k5bGRWVE56OXFrU3RJMWY5R2VKdjNneVhXU3JQQTRBb0EwN3Q1T0o1YmlJa1RQNVoxY000TVhtbFJ2Q1BFQnpDaHUxSUdzMVpxamxUUVpDb05zMVdqTTRjTGpKTVVmV0NIMms="
m_p: "N5q1FvN2RdrO3Qj0Ehb5iB4y3TtI18UQ48UGiV4o6T1JQo8yp2aXkfJ44QOHX93k"
e_t: "1615475277226"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0.01"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 3001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134464
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134463
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134462
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134460
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 5
}
userinfo {
  username: "156******06"
}

2021-03-10 17:07:53,539-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:07:53,540-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "5.0"
  t_p: "3e6b1ac8af134317b47aace6e7fcd355"
  imei: ""
  model: "PBDM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "oqWrt7Bg"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
payrequestid: "KB202103101707552076075925326882"
version: "260"
queryType: "PAY"

2021-03-10 17:07:53,665-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "2002"
  msg: ""
}
successStatus: "1086"
origAmount: "0.01"

2021-03-10 17:07:53,666-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT app_key FROM `db_platform_gateway`.`server_app_info` WHERE app_id = '100002'
2021-03-10 17:07:53,669-INFO-lib.common_biz.find_key-96-查询到秘钥信息：BB36C34EB6644AB9694315AF7D68E629
2021-03-10 17:07:53,670-INFO-lib.common.session.http.http_json-38-http://secure-gateway.pay-test3.wanyol.com/gateway/nearme.account.query
2021-03-10 17:07:53,670-INFO-lib.common.session.http.http_json-39-传入的参数：{'app_id': '100002', 'service': 'nearme.account.query', 'format': 'JSON', 'charset': 'UTF8', 'sign_type': 'MD5', 'sign': '4ABDCFA02586DDB9D79809D84A5DF39D', 'timestamp': '2021-03-10 17:07:53', 'version': '1.0', 'bizContent': "{'ssoid': '2076075925'}"}
2021-03-10 17:07:53,692-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'data': {'ssoid': '2076075925', 'timeStamp': 1615367277414, 'useableBalance': 1, 'totalGiveBalance': 0, 'chargeBalance': 1, 'freezeBalance': 0, 'giveBalance': 0}, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功', 'success': True}
2021-03-10 17:07:53,692-INFO-recharge-52-可币充值成功
2021-03-10 17:07:53,693-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `db_order_4`.`order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "KB202103101707552076075925326882"
2021-03-10 17:07:53,698-INFO-lib.common_biz.fiz_assert-34-订单详情：{'id': 21714, 'pay_req_id': 'KB202103101707552076075925326882', 'notify_id': '9171745125942241177080793232', 'partner_order': 'NV203113782656752021031017075597633118274105190402', 'amount': 1, 'refund': 0, 'contents': 'KB—RECHARGE_PAY', 'products_name': 'KB—RECHARGE_PAY', 'counts': 1, 'ssoid': '2076075925', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': '1603465160', 'ip': '58.255.79.104', 'mac': '', 'model': 'PCRM00', 'app_package': 'com.example.pay_demo', 'app_ver': '1.1.0', 'sdk_ver': '260', 'partner_code': '2031', 'notify_url': 'http://secure.pay-test3.wanyol.com/notify/receiver', 'status': 'OK', 'channel_id': '', 'channel_type': 'NATIVE', 'pay_type': 'wxpay', 'direct_pay': 'KEBI', 'game_type': 'WANGYOU', 'present_amount': 0, 'original_amount': 1, 'discount_info': '', 'extra': None, 'remark': 'new way', 'request_time': datetime.datetime(2021, 3, 10, 17, 7, 57), 'success_time': datetime.datetime(2021, 3, 10, 17, 7, 53), 'modify_time': datetime.datetime(2021, 3, 10, 17, 7, 57), 'trade_type': 'CZ', 'kebi_spent': 0, 'voucher_amount': 0, 'voucher_info': None, 'country_code': 'CN', 'currency': 'CNY', 'openid': None, 'brand_type': 'OPPO', 'mobile_os_ver': '17', 'platform': '', 'screen_info': 'FULL', 'combine_order': 'N', 'voucher_id': None, 'factor': None, 'voucher_status': None, 'kebi_status': 'OK', 'channel_status': 'OK'}
2021-03-10 17:07:53,698-INFO-lib.common_biz.fiz_assert-45-订单表信息记录正确
2021-03-10 17:07:53,699-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `pay_tradeorder_4`.`trade_order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "KB202103101707552076075925326882"
2021-03-10 17:07:53,703-INFO-lib.common_biz.fiz_assert-55-trade订单详情：{'id': 11424, 'pay_req_id': 'KB202103101707552076075925326882', 'partner_order': 'NV203113782656752021031017075597633118274105190402', 'partner_code': '2031', 'products_name': 'KB—RECHARGE_PAY', 'ssoid': '2076075925', 'origin_amount': 1, 'amount': 1, 'kb_amount': 0, 'voucher_amount': 0, 'present_amount': 0, 'refund': 0, 'country_code': 'CN', 'currency': 'CNY', 'pay_type': 'wxpay', 'channel_id': '', 'channel_type': 'NATIVE', 'direct_pay': 'KEBI', 'trade_type': 'CZ', 'combine_type': 'PRIMARY', 'status': 'OK', 'notify_url': 'http://secure.pay-test3.wanyol.com/notify/receiver', 'attach': '', 'extra_info': '', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': '1603465160', 'ip': '58.255.79.104', 'mac': '', 'openid': None, 'model': 'PCRM00', 'brand_type': 'OPPO', 'app_package': 'com.example.pay_demo', 'app_ver': '1.1.0', 'sdk_ver': '260', 'mobile_os_ver': '17', 'platform': '', 'screen_info': 'FULL', 'remark': None, 'request_time': datetime.datetime(2021, 3, 10, 17, 7, 56), 'success_time': datetime.datetime(2021, 3, 10, 17, 7, 57), 'modify_time': datetime.datetime(2021, 3, 10, 17, 7, 57)}
2021-03-10 17:07:53,703-INFO-lib.common_biz.fiz_assert-63-trade订单表信息记录正确
2021-03-10 17:07:53,704-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `virtual`.`tb_recharge202103` WHERE ssoid = '2076075925' and rechargeOrder = "KB202103101707552076075925326882"
2021-03-10 17:07:53,708-INFO-lib.common_biz.fiz_assert-83-tb_recharge订单详情：{'id': 11649, 'ssoid': '2076075925', 'imei': '', 'rechargeTime': datetime.datetime(2021, 3, 10, 17, 7, 57), 'amount': 1, 'status': 'OK', 'rechargeOrder': 'KB202103101707552076075925326882', 'partnerId': '2031', 'rechargeChannel': '46', 'appPackage': 'com.example.pay_demo', 'model': '', 'clientIp': '', 'source': None, 'updateTime': datetime.datetime(2021, 3, 10, 17, 7, 57)}
2021-03-10 17:07:53,708-INFO-lib.common_biz.fiz_assert-91-tb_recharge订单表信息记录正确
2021-03-10 17:07:53,708-INFO-lib.common.session.http.http_json-38-http://secure.pay-test3.wanyol.com/voucher/grantSingle
2021-03-10 17:07:53,708-INFO-lib.common.session.http.http_json-39-传入的参数：{'amount': '1', 'appId': '2031', 'appSubName': 'AUTO_TEST', 'blackScopeId': '', 'checkName': 'TEST_ACCOUNT', 'configId': '', 'count': 1, 'country': 'CN', 'currency': 'CNY', 'expireTime': '2022-03-10 17:07:51', 'ext1': '', 'ext2': '', 'maxAmount': 1, 'name': 'AUTO_TEST', 'partnerOrder': 'AUTO202103101707532757783448955988787920600136', 'ratio': '', 'remark': '', 'salePrice': 0, 'scopeId': '7104f7bc23e445daba913a5a96a264ac', 'settleType': 1, 'sign': 'EA5251B38497982E3CB2B6C402B1426C', 'ssoid': '2076075925', 'subScopeId': '', 'timezone': '', 'type': 2, 'useableTime': '2021-01-01 00:00:00'}
2021-03-10 17:07:53,778-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'batchVouCreateResList': [], 'msg': 'success', 'code': '0000', 'vouIdList': ['64134467'], 'batchId': ''}
2021-03-10 17:07:53,789-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:07:53,789-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "28525880910097"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "Fsq9Pawv8AcSpn0E2YWDmKGoTgbMelhR"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 17:07:53,874-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "7c015c592c1749d987d6d36136e7d574"
s_p: "S1gxa0hVam1HQjk4WnJxak5FbTB3RnpUM3NPbTVoOTg4OXdsbkFsZ09UNFZuWTVWNzV3RXlOeFpXd0Fib3hkaDdJYkhnbWtZdFdKb2d2V1lDOXlNbTZmWmNVQmQ5Y0pTbGtCZGZGYWdBWXFPWXpuMG1PelpRRnpjVVFZUkVFT3RiaFlDbGFzU3Y3VXVvbWVuZkFLSWZaVTJyVTlwZG1DV0hCdGNaREFHS2RNWDRkZGlqT1pkU3o5QW9DaUhkbGxNbG9TVHhwbTFLb21mU3FReHlhNTJYNjMwdkNzQXZkTVk2WUN3eGZqRTM0VDR6Q21uZjliWTRkWFdDUTRmaXM5QVVPS254cUlXZmQwUFVQM2pPMzRLVDV6eVA2Q1FsNUdhdGtNOXd5WG9QRDZ2cTBNVWtDVlJZRktXNk92N1dvckZZSGozT0hOdU5hcUVjZUdmNTlEcml0U2ZqZDB1Wm5VbnZ4ZWJKVTZVcExuNldrYzl2c0RjTXNkb21sd0ZOYkhxdWhhb3dmY2RFWnpDOGZmaXpvOWRsV25xd1hVd2JZOE9xemVkcWlLRnk0TkR2S0pvSFl1N2UyNXREWDNJNDU0SFRCU2FBWkF3QmIwdE5ZZGZuMjlSRldwNDFRcldCRWpGWGREaGgySEgwR2RmdWVWWjFLYlZJQnNzUkFsVEdmbnZEUWliN0NjR3ZyN0FTSE00RHdCalJ3OWVmQ3lMUTczNU50ZVJoRkJWR1k0cW9yMmNDT0ZKc09CeFpqVEtRRTBsZHRpeDN2NGtBS3ZKNTFHQUJhb3lKalI4NGhwQXMya0gzM0Y0MjFTQkx2RlVrVnRLaWs3ZmE5TFN3eWVDUm9ncWtadTQxNVBhQm9ad3o4N0FoR1hsYzN1QWhlM3RvanNMM1g5ZGlHNWhjbnliQkV3OVFtdFZabWcxaWhpdVRlUnFmTnhUeGdHSkRvdUFQa3VOWmJmQlpVcDVMSjdKcFE3ZXVHNUtBQUNEb0phU0x1cE9oUUs5bDVYenNNTU9uYlhoQmR0a2hhQk9CZm90Q09DeEZoVEg4b3BUZUczZmJrV0g="
m_p: "7f38AXQZ0roxozEC4VphKP2169819vPOT7Z92IeTs7fvkPce5koEsrcf9n1jG4Vt"
e_t: "1615475277569"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0.01"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 3001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134467
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134464
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134463
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134462
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134460
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 6
}
userinfo {
  username: "156******06"
}

2021-03-10 17:07:53,897-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:07:53,897-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "12.0"
  t_p: "7c015c592c1749d987d6d36136e7d574"
  imei: ""
  model: "PDCM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "sSv7Uuom"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: ""
  brandType: "OPPO"
  mobileos: "16"
  androidVersion: "29"
}
type: "wxpay"
amount: "0.01"
cardno: ""
cardpwd: ""
ext: ""
basepay {
  channelId: ""
  notifyurl: "http://secure.pay-test3.wanyol.com/notify/receiver"
  productName: "RECHARGE_SPEND"
  productDesc: "RECHARGE_SPEND "
  partnercode: "2031"
  appversion: "208006"
  currencyName: "CNY"
  rate: 1.0
  partnerorder: "A3Hx7vzXp25VwyLgaoPIFGjfRbCUWZqN"
}
sign: "2OaO8eG0HwzxFPAtT488Pi6jLRTZsuaDDIF0q21gu4vl39VKqNWvjUNJEkyGUUzqBz+PdBYNPoDE4nUmMm+6LBRndSCSCZ42/EQzn8+VH8NjlF8ecJHxqx0iMGV7eHFZsK8uILFQUx6pJS7X6uxgJMMvu70Ftepy9VShtottJ0l6KLf4RZzjqUEDyYfBZKF8ng9hkFLoX9qQ1UAyBHNW07ovSew5WZa6kMJ9RrSoPwsD/4Y6P+Pmh3+/aWJFaUCwsnyKiyQf4YNB8qUtDl8rd+fp9HDQSkdJ+v3sOqgzd2o5N39wiQqc9XT/eCqUhP0FVvMSnnvJHXwS/wughE5Lkg=="
ip: "183.238.170.71"
expendRequest {
  header {
    version: "12.0"
    t_p: "7c015c592c1749d987d6d36136e7d574"
    imei: ""
    model: "PDCM00"
    apntype: "1"
    package: "com.example.pay_demo"
    r_v: "sSv7Uuom"
    ext: ""
    sdkVer: 260
    country: "CN"
    currency: "CNY"
    openId: ""
    brandType: "OPPO"
    mobileos: "16"
    androidVersion: "29"
  }
  price: 3
  count: 1
  productname: "RECHARGE_SPEND!=AMOUNT"
  productdesc: "RECHARGE_SPEND!=AMOUNT"
  partnerid: "2031"
  callBackUrl: "http://secure.pay-test3.wanyol.com/notify/receiver"
  partnerOrder: "A3Hx7vzXp25VwyLgaoPIFGjfRbCUWZqN"
  channelId: "demo"
  ver: "208006"
  source: "auto_test"
  attach: ""
  sign: "EEIkOBeZeRzPt+oA/MW0DsilPyltfe2KbQNJn3AXWRQwkTeBndZrkIYCBpzwN1cGFmld/XoCNvblouxJgESqWrElKzrX+W9d0Fw9Ijzb78YpYKl7HP8y7UeRZlJ3/QnunCfLMRRNMoKId3QJa2AaseoPr1Yem8VqJ9k9ABfLbDs="
  appKey: "1234"
  voucherId: 64134467
  voucherType: 2
  voucherCount: 1
  factor: ""
}
isNeedExpend: "1"
appId: ""
payTypeRMBType: "0"
tradeType: "common"
screenInfo: "FULL"

2021-03-10 17:07:54,256-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "{\"appid\":\"wx93eea96ecc33f168\",\"noncestr\":\"a704f3ee29c84e1fb502745f3b494f5e\",\"packageNm\":\"Sign=WXPay\",\"partnerid\":\"1603465160\",\"prepayid\":\"wx10170757900560a27d6065b39d39600000\",\"sign\":\"26D321D662F288AF836AF72C89EF2B28\",\"timestamp\":\"1615367277\"}"
}
payrequestid: "KB202103101707572076075925882462"
model: ""

2021-03-10 17:07:54,256-INFO-wxpay-scarlet-52-回调参数：<xml><transaction_id><![CDATA[7934552627786479171837032284]]></transaction_id>
<nonce_str><![CDATA[NUSZE23OXvksPIltenGjD6fpxHRoqVBz]]></nonce_str>
<bank_type><![CDATA[OTHERS]]></bank_type>
<openid><![CDATA[oCg6Xt8NvRi7jGuap_5B6XdY4oYk]]></openid>
<sign><![CDATA[8DB3CB8C5BB56F1A4678AE63CCE022EC]]></sign>
<fee_type><![CDATA[CNY]]></fee_type>
<mch_id><![CDATA[1603465160]]></mch_id>
<cash_fee><![CDATA[1]]></cash_fee>
<out_trade_no><![CDATA[KB202103101707572076075925882462]]></out_trade_no>
<appid><![CDATA[wx93eea96ecc33f168]]></appid>
<total_fee>1</total_fee>
<trade_type><![CDATA[APP]]></trade_type>
<result_code><![CDATA[SUCCESS]]></result_code>
<attach><![CDATA[TEST]]></attach>
<time_end><![CDATA[20210310170754]]></time_end>
<is_subscribe><![CDATA[N]]></is_subscribe>
<return_code><![CDATA[SUCCESS]]></return_code>
</xml>
2021-03-10 17:07:54,377-INFO-wxpay-scarlet-56-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-03-10 17:07:54,377-INFO-wxpay-scarlet-58-回调解析成功
2021-03-10 17:07:54,388-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:07:54,388-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "42463298107854"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "CQjz7fma9d4OKRE1prLgMlX32sYSo5yB"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 17:07:54,479-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "d3b2b2eff21e435ead52eb1fcdf880e0"
s_p: "ZHlNeTZHbWRqUWw0TTNIRFNmUHZ1Vm1qbElqZmFpdlhpVWtEaDZyQUhUWU9tdHNDbERLbXlNdjl3UVNJOFZrczBjeTRKTnpUYklzUDRGajJiZktESGtGUmM0d2RJUUdjUGZsOXBJaVVQUFpFSEVDR2lqM2xtZGtSYjNxSkluSG5EWU1yYW5zVGR6WW40MDlFZlVOZ3pvcDRqQUM1WktTSFV2bm5iOFh2ck40N3JSWG1FREdKdmpXaXFpdTZ2ZEpvT3BYUUJOcVF0MDNyNFFkZEUxZmh1YTl0b3g4WVpkalhGQUF5dXEyWXh0NUd5N2ZZOU5QdnpzUFZWS0VZOTRMOGtHSzBDR3Q0M1RUbE9nVlVOVHlYdXJpb1Bpb3RIQlRFWmdoTDJ4Vm12RWlrN2plUDdtVzRVSGwzQUVaSG85ejlEWkIxNzU3eVNWU2JKdTNHZlByaHNZUWxKYndubVRiaGRmT3B5Y01WOGZRaHJsY2lRYnJhTjR2R3Q1a1FwZGFsbGRMdUwwQzcwM0gwMUF6Znh0QXl3TDNpNDNUNTVzaXZNeUI0ZjkzQzJ5SlVvVUNpQ2xiWTRQTnZwNkRxb1U5RGpSeGd0YnVNM3UyRnlYOFVkQWVXQXZ0dm1YeUo1VW5uczV6QndyMXJqQzE2cTVXMklRb3ZLeHRsdFZMRGlyNjhKbHpOaThjc1RGMW13cGdjVjVxSWtKbXVrWTdjMXo2NHdqSW5QN0V3YzgyQ212T1FVVFNoOXdVRjR4bnVWeGVmQmdNZ3lzYlJHR0Q2RGd5NTNtNWpsQjhhWG5NRFRJd0NtdFFYMTZDemZmN1RBR3BuUzNxN2NFZXVVbjRTNmlzZnJoak9VZjR3M1F3T3VNZzB0QUoycGtjcVA4SDBBdjljaFBSVkhyVFVJVW8xSWxiOGlhbXFJZG5zdXlQVXFReFg1WEJVY1dkc3V5V1gwSFZWcEc2R2FRWElDc3JldlNrbHplVk1RdWFqM2QzUjR6QTVSVkRyczk1OUxWU3RPTHFSNFZXNWJsbnk5bFp4eEN3dU9kaUQ1eGE5SU9YNnBLSEg="
m_p: "HmIrR6bhc9Otv7PjzO14RyLk4muNq7SFn62I7dTQjGYpc9u6Y2L9D00eZ2q5nczF"
e_t: "1615475278168"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 3001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134464
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134463
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134462
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134460
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 5
}
userinfo {
  username: "156******06"
}

2021-03-10 17:07:54,479-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:07:54,479-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "5.0"
  t_p: "d3b2b2eff21e435ead52eb1fcdf880e0"
  imei: ""
  model: "PBDM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "YOmtsClD"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
payrequestid: "KB202103101707572076075925882462"
version: "260"
queryType: "PAY"

2021-03-10 17:07:54,562-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "2001"
  msg: "\344\270\215\350\277\233\350\241\214\346\266\210\350\264\271\350\260\203\347\224\250\357\274\214\345\271\266\345\205\205\345\200\274\347\273\223\346\236\234\346\234\252\347\237\245"
}
successStatus: "1086"
discountAmount: "0.02"
origAmount: "0.03"

2021-03-10 17:07:56,563-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT app_key FROM `db_platform_gateway`.`server_app_info` WHERE app_id = '100002'
2021-03-10 17:07:56,569-INFO-lib.common_biz.find_key-96-查询到秘钥信息：BB36C34EB6644AB9694315AF7D68E629
2021-03-10 17:07:56,569-INFO-lib.common.session.http.http_json-38-http://secure-gateway.pay-test3.wanyol.com/gateway/nearme.account.query
2021-03-10 17:07:56,569-INFO-lib.common.session.http.http_json-39-传入的参数：{'app_id': '100002', 'service': 'nearme.account.query', 'format': 'JSON', 'charset': 'UTF8', 'sign_type': 'MD5', 'sign': '7C6E80B1B2F7FE3CD429A593FA940241', 'timestamp': '2021-03-10 17:07:56', 'version': '1.0', 'bizContent': "{'ssoid': '2076075925'}"}
2021-03-10 17:07:56,600-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'data': {'ssoid': '2076075925', 'timeStamp': 1615367280321, 'useableBalance': 0, 'totalGiveBalance': 0, 'chargeBalance': 0, 'freezeBalance': 0, 'giveBalance': 0}, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功', 'success': True}
2021-03-10 17:07:56,601-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `db_order_4`.`order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "KB202103101707572076075925882462"
2021-03-10 17:07:56,607-INFO-lib.common_biz.fiz_assert-34-订单详情：{'id': 21715, 'pay_req_id': 'KB202103101707572076075925882462', 'notify_id': '7934552627786479171837032284', 'partner_order': 'A3Hx7vzXp25VwyLgaoPIFGjfRbCUWZqN', 'amount': 1, 'refund': 0, 'contents': 'RECHARGE_SPEND ', 'products_name': 'RECHARGE_SPEND', 'counts': 1, 'ssoid': '2076075925', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': '1603465160', 'ip': '58.255.79.104', 'mac': '', 'model': 'PDCM00', 'app_package': 'com.example.pay_demo', 'app_ver': '208006', 'sdk_ver': '260', 'partner_code': '2031', 'notify_url': 'http://secure.pay-test3.wanyol.com/notify/receiver', 'status': 'OK', 'channel_id': '', 'channel_type': 'NATIVE', 'pay_type': 'wxpay', 'direct_pay': 'KEBI', 'game_type': 'WANGYOU', 'present_amount': 0, 'original_amount': 3, 'discount_info': '', 'extra': None, 'remark': 'new way', 'request_time': datetime.datetime(2021, 3, 10, 17, 7, 58), 'success_time': datetime.datetime(2021, 3, 10, 17, 7, 54), 'modify_time': datetime.datetime(2021, 3, 10, 17, 7, 58), 'trade_type': 'PAY', 'kebi_spent': 1, 'voucher_amount': 1, 'voucher_info': '{"cutAmount":"1","id":"64134467","type":"2"}', 'country_code': 'CN', 'currency': 'CNY', 'openid': None, 'brand_type': 'OPPO', 'mobile_os_ver': '16', 'platform': '', 'screen_info': 'FULL', 'combine_order': 'N', 'voucher_id': '64134467', 'factor': '', 'voucher_status': 'OK', 'kebi_status': 'OK', 'channel_status': 'OK'}
2021-03-10 17:07:56,608-INFO-lib.common_biz.fiz_assert-47-订单表信息记录异常
2021-03-10 17:09:49,472-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境3-MYSQL：{'host': '10.52.46.169', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-03-10 17:09:49,794-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境3-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-03-10 17:09:49,840-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]成功
2021-03-10 17:09:49,841-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.177.85.103', 'port': '6379', 'name': '10.177.85.103:6379'}, {'host': '10.177.85.98', 'port': '6379', 'name': '10.177.85.98:6379'}, {'host': '10.177.85.100', 'port': '6379', 'name': '10.177.85.100:6379'}]
2021-03-10 17:09:50,055-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]成功
2021-03-10 17:09:50,055-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]
2021-03-10 17:09:50,069-INFO-lib.common.db_operation.mysql_operation-118-成功连接到测试专用环境-MYSQL：{'host': '10.52.54.122', 'user': 'opay', 'pwd': '_UI7xHubrhTPIP1J_T4so7SU7ATCrUzm7cAh6TdBLLHWUSQUQqD8p45xVQzV3Czi', 'port': '33066'}
2021-03-10 17:09:50,069-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `test_account`.`account_test_env`
2021-03-10 17:09:50,081-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=0
2021-03-10 17:09:50,085-INFO-lib.common_biz.find_merchant_info-28-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1603465160'}
2021-03-10 17:09:50,085-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1603465160' AND pay_channel = 'wxpay'
2021-03-10 17:09:50,089-INFO-lib.common_biz.find_key-109-查询到秘钥信息：g4rTCeoBJFG4KyWCjTQCqltfEDma3yxR
2021-03-10 17:09:50,089-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no, plan_id FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=1
2021-03-10 17:09:50,092-INFO-lib.common_biz.find_merchant_info-41-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601', 'plan_id': '120877'}
2021-03-10 17:09:50,093-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1603465160' AND pay_channel = 'wxpay'
2021-03-10 17:09:50,096-INFO-lib.common_biz.find_key-109-查询到秘钥信息：g4rTCeoBJFG4KyWCjTQCqltfEDma3yxR
2021-03-10 17:09:50,456-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT app_key FROM `db_platform_gateway`.`server_app_info` WHERE app_id = '100002'
2021-03-10 17:09:50,459-INFO-lib.common_biz.find_key-96-查询到秘钥信息：BB36C34EB6644AB9694315AF7D68E629
2021-03-10 17:09:50,459-INFO-lib.common.session.http.http_json-38-http://secure-gateway.pay-test3.wanyol.com/gateway/nearme.account.query
2021-03-10 17:09:50,460-INFO-lib.common.session.http.http_json-39-传入的参数：{'app_id': '100002', 'service': 'nearme.account.query', 'format': 'JSON', 'charset': 'UTF8', 'sign_type': 'MD5', 'sign': '5A150737CCF3470F09A9DD8DFFE26E9A', 'timestamp': '2021-03-10 17:09:50', 'version': '1.0', 'bizContent': "{'ssoid': '2076075925'}"}
2021-03-10 17:09:50,499-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'data': {'ssoid': '2076075925', 'timeStamp': 1615367394218, 'useableBalance': 0, 'totalGiveBalance': 0, 'chargeBalance': 0, 'freezeBalance': 0, 'giveBalance': 0}, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功', 'success': True}
2021-03-10 17:09:50,500-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT app_key FROM `db_platform_gateway`.`server_app_info` WHERE app_id = '100002'
2021-03-10 17:09:50,503-INFO-lib.common_biz.find_key-96-查询到秘钥信息：BB36C34EB6644AB9694315AF7D68E629
2021-03-10 17:09:50,503-INFO-lib.common.session.http.http_json-38-http://secure-gateway.pay-test3.wanyol.com/gateway/nearme.account.query
2021-03-10 17:09:50,503-INFO-lib.common.session.http.http_json-39-传入的参数：{'app_id': '100002', 'service': 'nearme.account.query', 'format': 'JSON', 'charset': 'UTF8', 'sign_type': 'MD5', 'sign': '5A150737CCF3470F09A9DD8DFFE26E9A', 'timestamp': '2021-03-10 17:09:50', 'version': '1.0', 'bizContent': "{'ssoid': '2076075925'}"}
2021-03-10 17:09:50,524-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'data': {'ssoid': '2076075925', 'timeStamp': 1615367394243, 'useableBalance': 0, 'totalGiveBalance': 0, 'chargeBalance': 0, 'freezeBalance': 0, 'giveBalance': 0}, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功', 'success': True}
2021-03-10 17:09:50,536-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:09:50,536-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "14674993483795"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: ""
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 17:09:50,759-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "2bb47321cc0b4fe48ab86b035d7b6fa7"
s_p: "eFo0ZXZLcXhVN3pMazRFRE1TV0FnZ3hSNElWVFpSZ2YyMDhucmJMdmlKMTZnVHdvVjJWOEk1b2lxY1JCZjRaMEJWU2I3VVJWZldISGR4MHBXQ1RlVVVpTUpHSjNOSmhCTjByb1dYUHpieU1zQ2ZGRnVNejZLdEZ3b2tQSWNhcTFJcDdrT2d4Q3JyMWtPT09VY0dkRTRXSkFoalk4amtibHFWanVKNWFRRVlzckRTVXBRSG9RbEo2SlBkbGd3aEJXMURBcXdrOWMzRlcwUEJGYlZFT0hwaVZLdEcwMnNDVE1NT2lnNWJQN0tZem9RdlcwTXVhY1NSbTFTUjRrMjdVenNHUEZvRnBkeGxUbnVvVzQ1aVZ2a084aUVTdmZTZ1VGVW9TOUpwUHpRdTJsOFFDbU5vNXRiaktRbThtWGF5WWRPNWMyUkZDem9JR014TmJyemEzaUZudlJWTVRsMW54T0JROU81bWJjdHYxSG1oVGhMUGFrWWNoMnhGMUVWY0l0T1Q4VnY3ejB2bmdkbkFWckNHT3FKYnRHNTBGMllyeTZmT3ZaaktEeTNQcmdnRm4wOUlONDdRWFZ1MHRKOENsaEZHeFNQeXFiS3d5b1ZEQmd1bHExcHlOY2VrZGRibE1FRkVPcFhYMkxmRmNBRktGUm1HVDlLcFozR1RXOVN0WGxBMUJIamJleEpzd2NYbk5VeTFkb3lCQXIxMkZ1QVVtZ0s0TlBFMHRKcTJnY095bW1pSE8xaDAyUEZha0dnNVhzUmZPU1hRckhVYUg5QWxHcHIyaTFMcVBiOU02SFd2UTVGV0tKNEhxeWdCcEFaWGNqOFoxMHdSTUYwaEIzbWdhQU44MjBKckZkWGlPbDdTTjVBTlFNaXhRMkt5OGJvUFB5UDg4UWM4OGpLVUYyQlpod0o1RktsUWo5S0xqd2xoWUp0ampMdXFNZWdyeUFWc1pqV2ViNmVtZE12VHhva2VLRVkzWmhSaHEwcHBRVzVCSG1BN3B4QmhPSUtrSE1hOENwMXphUGJ6Y3lLeVNJMlVCZlI5cVJRZlo2SHQ3WXgxUmU="
m_p: "K6K9s24tykV5J1238IbpGMGXeaC4Pt9Gd91k2iNhWAp9mCrcJdF65yuYEVu8V2E3"
e_t: "1615475394430"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 3001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134464
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134463
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134462
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 64134460
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 5
}
userinfo {
  username: "156******06"
}

2021-03-10 17:09:50,762-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:09:50,762-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "12.0"
  t_p: "2bb47321cc0b4fe48ab86b035d7b6fa7"
  imei: ""
  model: "PCRM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "BVSb7URV"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: ""
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
type: "wxpay"
amount: "0.01"
cardno: ""
cardpwd: ""
ext: ""
basepay {
  channelId: ""
  notifyurl: "http://secure.pay-test3.wanyol.com/notify/receiver"
  productName: "KB\342\200\224RECHARGE_PAY"
  productDesc: "KB\342\200\224RECHARGE_PAY"
  partnercode: "2031"
  appversion: "1.1.0"
  currencyName: "\345\217\257\345\270\201"
  rate: 1.0
  partnerorder: "null"
}
sign: "BNxXujXKqXyWKJLrdkewp3Z+Bn2XJgpKXp7J9d0k96dXeT3X7ePk3QKulx0GYh8NiXu9R4y6YA5tqAX/vwivkxiJOi1YkBe+m2t71kXlVNgQ+l+Y8UvnKpOBYykVccNw3F3q1pvtrRB8nPzZYGAEnQokH7rpvUlouJLYjsrXYpfO1Pmq2VtT3BoiOFEgL2P5aA7ck7ewZR/cxRfN7yfoA06jdl5QgfLlXKWvi0ZSVC96sdQCNlCZniZvXdA+GjkIHQJEAy5AhXtGMZxdXSQM1uEgPdM18lvH+NkQXO3EQoaOj2IF/n11JU9lmYR1jzspzmEDAT2R29zduz++j0DQpw=="
ip: "58.252.5.75"
isNeedExpend: "0"
appId: ""
payTypeRMBType: "0"
tradeType: "common"
screenInfo: "FULL"

2021-03-10 17:09:52,705-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "{\"appid\":\"wx93eea96ecc33f168\",\"noncestr\":\"99d19ab0cfd1469e90a381d1d4b44a4f\",\"packageNm\":\"Sign=WXPay\",\"partnerid\":\"1603465160\",\"prepayid\":\"wx101709563582386686a3a9048ad0000000\",\"sign\":\"455B9EA0724EBC18A82AE3B5AE0A53F4\",\"timestamp\":\"1615367396\"}"
}
payrequestid: "KB202103101709562076075925602622"
model: ""

2021-03-10 17:09:53,705-INFO-wxpay-scarlet-52-回调参数：<xml><transaction_id><![CDATA[3564548457465611538731074894]]></transaction_id>
<nonce_str><![CDATA[waCfbzVp3T8gEn4d9QYDPIXjxRrcAMqS]]></nonce_str>
<bank_type><![CDATA[OTHERS]]></bank_type>
<openid><![CDATA[oCg6Xt8NvRi7jGuap_5B6XdY4oYk]]></openid>
<sign><![CDATA[D9516D8324BB670F1C3BA5B1538731DF]]></sign>
<fee_type><![CDATA[CNY]]></fee_type>
<mch_id><![CDATA[1603465160]]></mch_id>
<cash_fee><![CDATA[1]]></cash_fee>
<out_trade_no><![CDATA[KB202103101709562076075925602622]]></out_trade_no>
<appid><![CDATA[wx93eea96ecc33f168]]></appid>
<total_fee>1</total_fee>
<trade_type><![CDATA[APP]]></trade_type>
<result_code><![CDATA[SUCCESS]]></result_code>
<attach><![CDATA[TEST]]></attach>
<time_end><![CDATA[20210310170953]]></time_end>
<is_subscribe><![CDATA[N]]></is_subscribe>
<return_code><![CDATA[SUCCESS]]></return_code>
</xml>
2021-03-10 17:10:18,545-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.52.44.235', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-03-10 17:10:18,785-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-03-10 17:10:18,829-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]成功
2021-03-10 17:10:18,829-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]
2021-03-10 17:10:19,071-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]成功
2021-03-10 17:10:19,071-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]
2021-03-10 17:10:19,084-INFO-lib.common.db_operation.mysql_operation-118-成功连接到测试专用环境-MYSQL：{'host': '10.52.54.122', 'user': 'opay', 'pwd': '_UI7xHubrhTPIP1J_T4so7SU7ATCrUzm7cAh6TdBLLHWUSQUQqD8p45xVQzV3Czi', 'port': '33066'}
2021-03-10 17:10:19,085-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `test_account`.`account_test_env`
2021-03-10 17:10:19,097-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=0
2021-03-10 17:10:19,100-INFO-lib.common_biz.find_merchant_info-28-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601'}
2021-03-10 17:10:19,101-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-03-10 17:10:19,104-INFO-lib.common_biz.find_key-109-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-03-10 17:10:19,105-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no, plan_id FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=1
2021-03-10 17:10:19,108-INFO-lib.common_biz.find_merchant_info-41-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601', 'plan_id': '120877'}
2021-03-10 17:10:19,108-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-03-10 17:10:19,111-INFO-lib.common_biz.find_key-109-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-03-10 17:10:19,494-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT app_key FROM `db_platform_gateway`.`server_app_info` WHERE app_id = '100002'
2021-03-10 17:10:19,497-INFO-lib.common_biz.find_key-96-查询到秘钥信息：BB36C34EB6644AB9694315AF7D68E629
2021-03-10 17:10:19,497-INFO-lib.common.session.http.http_json-38-http://pay-gateway.pay-test.wanyol.com/gateway/nearme.account.query
2021-03-10 17:10:19,497-INFO-lib.common.session.http.http_json-39-传入的参数：{'app_id': '100002', 'service': 'nearme.account.query', 'format': 'JSON', 'charset': 'UTF8', 'sign_type': 'MD5', 'sign': '413CD7FDED6EA26F24D5B6724D5A8583', 'timestamp': '2021-03-10 17:10:19', 'version': '1.0', 'bizContent': "{'ssoid': '2076075925'}"}
2021-03-10 17:10:20,845-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'data': {'ssoid': '2076075925', 'timeStamp': 1615367424559, 'useableBalance': 7, 'totalGiveBalance': 0, 'createTime': 1612151249000, 'chargeBalance': 7, 'freezeBalance': 0, 'giveBalance': 0}, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功', 'success': True}
2021-03-10 17:10:20,856-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:10:20,856-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "67217342861090"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "3sYC86vzZEAldPn0DhpNSUjyVk2TuQrf"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 17:10:24,604-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "4d300d3d38d648809037ae31e9b47260"
s_p: "TEJOM0hTdGpsTWVtV2UweURwRktQTU9FVnFwZlJRVldqWVM4ODhjajR0Ykg5QnJ3Zndwb3pKUnQzMnZ5Q1NDdEFvc2RjY2NHbVNwaDBGUHFRdFRqSlQ2bGE5NFBIbkdSUHdnRmZkUEduNERVcjJhclZxeXpqOHpkSEU5UTFEUGJMVHEwa2FDQ1NWZnM2ZHljaUNOa0x5aWU4N2hzaDBCOG9pd3ZSc3NaczdyaUZyUEQ1cUxQWk1adlJsOUZkVGVKdlJCWUVJM2lKVWU4TDQ5Smhjak1GQ1NVU0pZajdlV3UyQVZzczAxS2dGQUdidVl2elJhNEpNTmtQeXgyUmpQMDhCUWlLeXlleE95Y3p4U1A5S2ZNVkxJUHFydmNJS0xzWFR1Y0FCbUhSWnl3RnpUc0NBOUY3UmYzREdaQ1JLMlhHSXFrdVZyWDVsRjc5RnRWQzlYV3NzQ1NlaHF4RXg5SXFxdUhMSTEzZzM5RndQM1BmTzRwSWNWaHpmVGR0cFlKNzYyeGJ6ZlFsY3ZrWnVySnBVbFp4d2dhalJ4OUJ2d05XQkxJMWs2Ym90dTZ1bXF3aVptR2FmTHR5R3NvdHZOS3hlUXdnUnFwbEFmdmVkeXIwS1VLTWliSlZCVk9UUmtXdzNHaHhEcWs0cGphTEk0QTIyTGZyTGdqWFdTc0wyRmpNSFNqVG1UQkdIWnBCZEswUnBvYURKNzl5cENGVm1PakVMUE96ZVJ6Rk91VTVFZWdBTzlGa3hRRkFaN0Q2TnZyMVJJWmV1dnZVTXBWVm40SEJLbFBQOUNIUVVlOGRlZDlSaU1pRG8zZURmVnlhOW80aUxaRDNESElUQUlxMlBySVkzbUJ2eUZlcGVBZkFPNFZMNDZ3c0tXZGRiWU56U2JGOEZZTFVIamlEbXJDeEFNanhVTDNzRENheEVPbWtKYnlkQ2o3TFJCYnYwOG1xRWtqekVaOE1YM1pnY1FOaWRjSzczMzFXUUxrczY4TG9vMEtJMDNBMkJoNDRnRlVtT1BRdEJYTXpncGlLblBOTGNlWDFHS1ZZaTA4Slc4cjAwQzk="
m_p: "H8GWwOzl79a12cH7258RGN349Fg51cjZt4syhg1ox90qrgkoBIg5We21998G9Asl"
e_t: "1615475428258"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0.07"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 1001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199706
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199705
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199704
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199703
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199702
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199692
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099683
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099682
    type: 2
    minCousume: 1300
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 11
}
userinfo {
  username: "156******06"
}

2021-03-10 17:10:24,624-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:10:24,624-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "12.0"
  t_p: "4d300d3d38d648809037ae31e9b47260"
  imei: ""
  model: "PCRM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "CCSVfs6d"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: "42E1F48352C04B80910A7BBB7FDDE8022d5334806a8d9b083e64c9324c08c040"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
price: 7
count: 1
productname: "ONLY_KB_SPEND"
productdesc: "ONLY_KB_SPEND"
partnerid: "2031"
callBackUrl: "http://pay.pay-test.wanyol.com/notify/receiver"
partnerOrder: "PRck0lZyHwqIE3ibC1NaTzJUWQXof4Oj"
channelId: ""
ver: "1.1.0"
source: "PaySDK"
attach: ""
sign: "QKLt0i5P5s0q1HImCocOGZ1UrbxVz9vTFBL6lSBoxfNq3He1WeI9ouO5rKCfuu5GOyv/xxf/S8V40TN72fJII/9JY6Z51ujNNXDsErJdRPW0ZKOQNbkzDZdAOMAylj7J/CPcAUBaspv4CtyzfgPc9MQ93G12KSKfrmJcXxCe9uU="
order: "3849875393638"
ip: "120.197.152.211"
factor: ""

2021-03-10 17:10:24,812-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "\346\210\220\345\212\237"
}
rpay: "0"
gpay: "0"

2021-03-10 17:10:24,813-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT app_key FROM `db_platform_gateway`.`server_app_info` WHERE app_id = '100002'
2021-03-10 17:10:24,816-INFO-lib.common_biz.find_key-96-查询到秘钥信息：BB36C34EB6644AB9694315AF7D68E629
2021-03-10 17:10:24,816-INFO-lib.common.session.http.http_json-38-http://pay-gateway.pay-test.wanyol.com/gateway/nearme.account.query
2021-03-10 17:10:24,816-INFO-lib.common.session.http.http_json-39-传入的参数：{'app_id': '100002', 'service': 'nearme.account.query', 'format': 'JSON', 'charset': 'UTF8', 'sign_type': 'MD5', 'sign': 'E338860965A1231D329D4F66CDAB3D62', 'timestamp': '2021-03-10 17:10:24', 'version': '1.0', 'bizContent': "{'ssoid': '2076075925'}"}
2021-03-10 17:10:24,838-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'data': {'ssoid': '2076075925', 'timeStamp': 1615367428557, 'useableBalance': 0, 'totalGiveBalance': 0, 'createTime': 1612151249000, 'chargeBalance': 0, 'freezeBalance': 0, 'giveBalance': 0}, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功', 'success': True}
2021-03-10 17:10:24,850-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:10:24,850-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "79497025318360"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: ""
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 17:10:24,919-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "4bab00ee16574f7ca3a67818f45ec7dd"
s_p: "OWtEWmE5QjdVc29HUXJWMExKQjZ3cFpXbXdCSktxTXRtZnNzZVc2YXFVWTJVUXlBMnZPU3dqVWU0b0FCS0NWb2lvc3NCdjZsUnJDWFNnUjdxZFZuTTRsRXZBak1mNTFjS0FvZDBLMHJwRXBEZnZWSFNIWmJoS3p5NExhTU5YZmlpME1TOUpZQmsyczQxRk9STmc3bmlVUm5lYlFaWWdwakxuSldtWlRMTkU0OWtHbHdoSTZMZFNKa1dObGtna1Nmd3VSOXlyU0NXdlN3RmlJTFhSZmpVOVZxb004bE96NDN0anhMc3JMQmNCSkhudWhOS1YwTHBwSDFvaG55dGdHMERoRXVTOXl0WXBRY28wbnNFbFZDcjJoWTVHenRSQzN2a3BwUWkxRlZFNURUb0c0OXJTemlaaWh2dDMzc3FSeDVoRkxZUFQ4TEoydmxwUk4xZUJ1c0hGdDhmUzZ5SERBbVFJVFVaV3k4bXJRc0FwZ1ZLc2RKbmd4UmttVDlJYXlwS242d2U4WWczU3hWd1JiaTFPcXRzNlJhT0hMcnBhamRxa1pJaFpXYllWT2Z6bjI2bWNhWWp4TWN5Yk5PY216ZDBlOWJQeUxtNGdJZjN4SnlPcVpIT0V0M2FWaTZ2bFU2bEFOTkN0aVNTN1ZxZjZGTDdKbzRwTUFTRlNQQ0dBS1VWTTRsa0NycmtEWklmT2F1Tmc2WEtJcW9CNzZlQ0pSNG9GdENhU2J5NnZSV3ZEenVaREU4TXN2MkxtazFUS0tJTkNGeHQxMldYd2xZRHJRZ3VWRmIwcW9zZWF4OERuR2lsN3lUbGRYNkttcmdEZXJhZXhJblllcDVzMGVjS0pKNDVCTHFTdmdOaGVxZDVsNjFhektnOFh4czZjYlU1NzZlUjNrVGp4QVFOWHBickJHNEdnV0RsT0VXZXB2Mk5LVnpuQlFReVR0anpENlBGaE5zaUZyWE5Hc2FveUlOS1VMNXljSERUbFY1UlZjamo1UzRLdjhIaUw5Vk5PZVAxWmcxSmJVa1p3V2YzMGQ1WlhRT3lpSWNsMnhEa2JNUndYMUM="
m_p: "0ofSkfzSIy5010Dv98f13r8gXxW39t6yUx6M8DC8YgzCjnO10vVrjEZfOjHaF6pX"
e_t: "1615475428609"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 1001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199706
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199705
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199704
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199703
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199702
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199692
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099683
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099682
    type: 2
    minCousume: 1300
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 11
}
userinfo {
  username: "156******06"
}

2021-03-10 17:10:24,921-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:10:24,921-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "12.0"
  t_p: "4bab00ee16574f7ca3a67818f45ec7dd"
  imei: ""
  model: "PCRM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "ORNg7niU"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: ""
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
type: "wxpay"
amount: "0.01"
cardno: ""
cardpwd: ""
ext: ""
basepay {
  channelId: ""
  notifyurl: "http://pay.pay-test.wanyol.com/notify/receiver"
  productName: "KB\342\200\224RECHARGE_PAY"
  productDesc: "KB\342\200\224RECHARGE_PAY"
  partnercode: "2031"
  appversion: "1.1.0"
  currencyName: "\345\217\257\345\270\201"
  rate: 1.0
  partnerorder: "null"
}
sign: "UfOfAFTSTzVJF9/dDi1pVbxxqzsPT+diNacCRXanlggNb/seNNC6Z+LuER5yoyHwBEvLCCH+npZw4Fn1nWL7nABk11AbUWlL2jh1EudcNn47VqZjM60CNTgH2dc2jnUznh5Yi/Z4+Hb9hMBP7ZzGdP9kb4q8XxhzvTWyVfB+AxJxhQz9UzHwaIwUqegbfc6xfXTxyMqDVYAeN3IWmgENbte1EuzvPsKfBwjOaLTUaigB36DYzHxlFvmHgDKYAConFgcmpB2rfxQwU/soDJRyg2q7zQP+gbcnUbZYDJwKgUwzAJnsJF+AkM0nHRlaG0oCwid3Rj3qxLawAoQ72to+QQ=="
ip: "58.252.5.75"
isNeedExpend: "0"
appId: ""
payTypeRMBType: "0"
tradeType: "common"
screenInfo: "FULL"

2021-03-10 17:10:25,283-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "{\"appid\":\"wx93eea96ecc33f168\",\"noncestr\":\"1f840cb2b92040508b68ecf1f95d4d4a\",\"packageNm\":\"Sign=WXPay\",\"partnerid\":\"1259634601\",\"prepayid\":\"wx1017102893567753e3748729aa83ae0000\",\"sign\":\"26E5713D716F5EF16AF00B428A6EC887\",\"timestamp\":\"1615367428\"}"
}
payrequestid: "KB202103101710282076075925330002"
model: ""

2021-03-10 17:10:26,283-INFO-wxpay-scarlet-52-回调参数：<xml><transaction_id><![CDATA[6739576100709953078698865372]]></transaction_id>
<nonce_str><![CDATA[dJ19Ko3IncBhry28H5ZAjTbGLPuMaCg0]]></nonce_str>
<bank_type><![CDATA[OTHERS]]></bank_type>
<openid><![CDATA[oCg6Xt8NvRi7jGuap_5B6XdY4oYk]]></openid>
<sign><![CDATA[C8239A3717953EFA6634F11A93A8C406]]></sign>
<fee_type><![CDATA[CNY]]></fee_type>
<mch_id><![CDATA[1259634601]]></mch_id>
<cash_fee><![CDATA[1]]></cash_fee>
<out_trade_no><![CDATA[KB202103101710282076075925330002]]></out_trade_no>
<appid><![CDATA[wx93eea96ecc33f168]]></appid>
<total_fee>1</total_fee>
<trade_type><![CDATA[APP]]></trade_type>
<result_code><![CDATA[SUCCESS]]></result_code>
<attach><![CDATA[TEST]]></attach>
<time_end><![CDATA[20210310171026]]></time_end>
<is_subscribe><![CDATA[N]]></is_subscribe>
<return_code><![CDATA[SUCCESS]]></return_code>
</xml>
2021-03-10 17:10:26,527-INFO-wxpay-scarlet-56-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-03-10 17:10:26,527-INFO-wxpay-scarlet-58-回调解析成功
2021-03-10 17:10:26,538-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:10:26,538-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "53245318769712"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "D7nfAGkr01HOBmxSI8boY42ECLeaghFc"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 17:10:26,615-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "e0510a94a4ec442d83f829ef6e664234"
s_p: "U0tCZTZ1WTRwc1p1cE1SY2pGUU9QbHo5ZUhNOUp0TnZGQnFDRm4xRGVBb3Y1SmpGd1BvcVk2UnpKdkZVbGJtT1BqbzF1S1VmalRQdllWcjNzb0FrRXlDcElUQTBxODE2R0E5UUF5YmN2ZFVMVkNFcEsxMG5CVGY4elM5NzQ4ZERranNFelhCWTJYSXpCSVNiOFFTZDRIQjEwQ1lXV1RIc3BmU2QwMXhlZ1Vsb3VUc1NIZlZ0NkJIVFJaWHJ0M0NxeGJmTWRwU1I2TUo0YmtaZ2NaUmpXTlpRREhrbFQ0Y0U0ODltcjBEWWs5ZGdrV0xBOWlBZnZhUmxpc292NHg1bDRwYVZPcUNhbUFoUTkyaDBMajBnNVpDWkdrMEpaSWlqMnQwRWN1Y0hjUnFHeUVtN0ZlcFl0c2dabnIyZDh1eXdnRktiV2pxSndWUWdFb3dZUlRLZ0FLaEQ1VG1aTXNxeEdFSlNHUmtIZ1o5SVZSa08xZjZkOUg5dnRHSzkwbVoxeThtNVBVa1AzQW5JVWpOQTI3bFhQbzlpdmtzWmVUVlp1STdtaGRYcmxueUlCbHAxZ1IzYTBaUVViM041YkFwZGZvWUxUZlBFbXBOZzBHUHVGOWFBblBSVDFNWmRYOXFraGE1NlFxQVV1SlhnSU1VQVA4a1I3bDQ1SlpvMW82UWNxN2JqMkJpR1pBR0ZMTzVjUWVXREp6a0V2NDVRMndNT1dVN3dvVFpqSzFjMlVjT3pXc0JRQ0NPdFN5aTNYbFBBY3BNeFZrbEVwMmhyVlBQS2p3dW5rMnFLV1lMT2VFVDk4UXdZMGdFM0U0ZmZZdjY0ZWdpUm8xOVozd0gwcnU2dzlhMUprU09vUDlQa0ptUVdOM0VTMVdncjltd0ZSTDdLd1puMlh2WFFDbjc4N21kQ0dmbDdhS0xvc0x5UnJFZVVXRU1WOFBIZmRQUTJxRUx2dlZqZkM0cHZGTDZTQzdKVFdIanZiYjIzeGEwTTlnMW5DeVJ3eU0xRUtRU0hWTjdZdUV0ZWNybEVPdWI1aHl0UFVTMjdOb3dPWjN3NmdaSEE="
m_p: "L7bMI446Uu48Tbq71j0nv4K1Cr0EkaVPUKI2B824js0WWwS48G4SWppFkb5kXsL3"
e_t: "1615475430298"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0.01"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 1001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199706
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199705
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199704
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199703
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199702
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199692
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099683
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099682
    type: 2
    minCousume: 1300
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 11
}
userinfo {
  username: "156******06"
}

2021-03-10 17:10:26,615-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:10:26,615-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "5.0"
  t_p: "e0510a94a4ec442d83f829ef6e664234"
  imei: ""
  model: "PBDM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "FBqCFn1D"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
payrequestid: "KB202103101710282076075925330002"
version: "260"
queryType: "PAY"

2021-03-10 17:10:26,667-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "2002"
  msg: ""
}
successStatus: "1086"
origAmount: "0.01"

2021-03-10 17:10:26,668-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT app_key FROM `db_platform_gateway`.`server_app_info` WHERE app_id = '100002'
2021-03-10 17:10:26,672-INFO-lib.common_biz.find_key-96-查询到秘钥信息：BB36C34EB6644AB9694315AF7D68E629
2021-03-10 17:10:26,672-INFO-lib.common.session.http.http_json-38-http://pay-gateway.pay-test.wanyol.com/gateway/nearme.account.query
2021-03-10 17:10:26,672-INFO-lib.common.session.http.http_json-39-传入的参数：{'app_id': '100002', 'service': 'nearme.account.query', 'format': 'JSON', 'charset': 'UTF8', 'sign_type': 'MD5', 'sign': 'E2B5BE67AF381062E4E899C02F9B37A8', 'timestamp': '2021-03-10 17:10:26', 'version': '1.0', 'bizContent': "{'ssoid': '2076075925'}"}
2021-03-10 17:10:26,690-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'data': {'ssoid': '2076075925', 'timeStamp': 1615367430409, 'useableBalance': 1, 'totalGiveBalance': 0, 'createTime': 1612151249000, 'chargeBalance': 1, 'freezeBalance': 0, 'giveBalance': 0}, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功', 'success': True}
2021-03-10 17:10:26,690-INFO-recharge-52-可币充值成功
2021-03-10 17:10:26,691-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `db_order_4`.`order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "KB202103101710282076075925330002"
2021-03-10 17:10:26,696-INFO-lib.common_biz.fiz_assert-34-订单详情：{'id': 15347, 'pay_req_id': 'KB202103101710282076075925330002', 'notify_id': '6739576100709953078698865372', 'partner_order': 'NV203113782656752021031017102829057831387938823858', 'amount': 1, 'refund': 0, 'contents': 'KB—RECHARGE_PAY', 'products_name': 'KB—RECHARGE_PAY', 'counts': 1, 'ssoid': '2076075925', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': '1259634601', 'ip': '58.255.79.104', 'mac': '', 'model': 'PCRM00', 'app_package': 'com.example.pay_demo', 'app_ver': '1.1.0', 'sdk_ver': '260', 'partner_code': '2031', 'notify_url': 'http://pay.pay-test.wanyol.com/notify/receiver', 'status': 'OK', 'channel_id': '', 'channel_type': 'NATIVE', 'pay_type': 'wxpay', 'direct_pay': 'KEBI', 'game_type': 'WANGYOU', 'present_amount': 0, 'original_amount': 1, 'discount_info': '', 'extra': None, 'remark': 'new way', 'request_time': datetime.datetime(2021, 3, 10, 17, 10, 30), 'success_time': datetime.datetime(2021, 3, 10, 17, 10, 26), 'modify_time': datetime.datetime(2021, 3, 10, 17, 10, 30), 'trade_type': 'CZ', 'kebi_spent': 0, 'voucher_amount': 0, 'voucher_info': None, 'country_code': 'CN', 'currency': 'CNY', 'openid': None, 'brand_type': 'OPPO', 'mobile_os_ver': '17', 'platform': '', 'screen_info': 'FULL', 'voucher_id': None, 'factor': None, 'paid_amount': None, 'paid_usd': None, 'combine_order': 'N'}
2021-03-10 17:10:26,696-INFO-lib.common_biz.fiz_assert-45-订单表信息记录正确
2021-03-10 17:10:26,697-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `pay_tradeorder_4`.`trade_order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "KB202103101710282076075925330002"
2021-03-10 17:10:26,701-INFO-lib.common_biz.fiz_assert-55-trade订单详情：{'id': 8033, 'pay_req_id': 'KB202103101710282076075925330002', 'partner_order': 'NV203113782656752021031017102829057831387938823858', 'partner_code': '2031', 'products_name': 'KB—RECHARGE_PAY', 'ssoid': '2076075925', 'origin_amount': 1, 'amount': 1, 'kb_amount': 0, 'voucher_amount': 0, 'present_amount': 0, 'refund': 0, 'country_code': 'CN', 'currency': 'CNY', 'pay_type': 'wxpay', 'channel_id': '', 'channel_type': 'NATIVE', 'direct_pay': 'KEBI', 'trade_type': 'CZ', 'combine_type': 'PRIMARY', 'status': 'OK', 'notify_url': 'http://pay.pay-test.wanyol.com/notify/receiver', 'attach': '', 'extra_info': '', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': '1259634601', 'ip': '58.255.79.104', 'mac': '', 'openid': None, 'model': 'PCRM00', 'brand_type': 'OPPO', 'app_package': 'com.example.pay_demo', 'app_ver': '1.1.0', 'sdk_ver': '260', 'mobile_os_ver': '17', 'platform': '', 'screen_info': 'FULL', 'remark': None, 'request_time': datetime.datetime(2021, 3, 10, 17, 10, 29), 'success_time': datetime.datetime(2021, 3, 10, 17, 10, 30), 'modify_time': datetime.datetime(2021, 3, 10, 17, 10, 30)}
2021-03-10 17:10:26,701-INFO-lib.common_biz.fiz_assert-63-trade订单表信息记录正确
2021-03-10 17:10:26,701-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `virtual`.`tb_recharge202103` WHERE ssoid = '2076075925' and rechargeOrder = "KB202103101710282076075925330002"
2021-03-10 17:10:26,704-INFO-lib.common_biz.fiz_assert-83-tb_recharge订单详情：{'id': 22, 'ssoid': '2076075925', 'imei': '', 'rechargeTime': datetime.datetime(2021, 3, 10, 17, 10, 30), 'amount': 1, 'status': 'OK', 'rechargeOrder': 'KB202103101710282076075925330002', 'partnerId': '2031', 'rechargeChannel': '46', 'appPackage': 'com.example.pay_demo', 'model': '', 'clientIp': '', 'source': None, 'updateTime': datetime.datetime(2021, 3, 10, 17, 10, 30)}
2021-03-10 17:10:26,705-INFO-lib.common_biz.fiz_assert-91-tb_recharge订单表信息记录正确
2021-03-10 17:10:26,705-INFO-lib.common.session.http.http_json-38-http://pay.pay-test.wanyol.com/voucher/grantSingle
2021-03-10 17:10:26,705-INFO-lib.common.session.http.http_json-39-传入的参数：{'amount': '1', 'appId': '2031', 'appSubName': 'AUTO_TEST', 'blackScopeId': '', 'checkName': 'TEST_ACCOUNT', 'configId': '', 'count': 1, 'country': 'CN', 'currency': 'CNY', 'expireTime': '2022-03-10 17:10:19', 'ext1': '', 'ext2': '', 'maxAmount': 1, 'name': 'AUTO_TEST', 'partnerOrder': 'AUTO202103101710267020805455079956964634388442', 'ratio': '', 'remark': '', 'salePrice': 0, 'scopeId': '7104f7bc23e445daba913a5a96a264ac', 'settleType': 1, 'sign': 'AE95706DEAA61883982F8C43571D3B26', 'ssoid': '2076075925', 'subScopeId': '', 'timezone': '', 'type': 2, 'useableTime': '2021-01-01 00:00:00'}
2021-03-10 17:10:26,747-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'batchVouCreateResList': [], 'msg': 'success', 'code': '0000', 'vouIdList': ['62199707'], 'batchId': ''}
2021-03-10 17:10:26,757-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:10:26,758-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "22911972912405"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "O9aA1G7HZv3eoEulhBJPtVmjsdXKDgbx"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 17:10:26,835-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "ceed524d461848e98dadd55514a99cc7"
s_p: "TWcxMjlqREJBcmJCSEFPRzc3THJmS3FmdTVUMTRaUkNocVdDVzk1S2lRb1lEU0s0SXNIclZWdlN4YjFZdDlHWENHdGI4UzhoWVYxV2pyZFE5SFNoR3RHb3RuSTFMeDlESEdTaDVtVTRxcHZkN2lDQVBLWFJKZjF0bHhMU2ZxWGJVaVpYZ093WFJJaUowWDhMMDc5dE5tZXFmeHFPaldRd0s3dlJTTDJYbkdDb2JwYzRhUEVnR3NpWWhsRzEwNFhSMVpFV1ZnYVZxbzI2UXVmS1hQQVdydmtHS00xek4xWDRQN0FBbUZMUVJLa0xhNEx6alZMTWxhNnlhOEpvWk5td1RrTHZqdzhMTXEydDJER3ZvajJZQVV4MmFmVjhYYjF2TE8yRFFwRDk3aHQwNWZuVjJZNzBuU3NiSEhoVDVOdlVBOVM1Ymt2UVlhajhDa2lJQ2N1eTY0U2lObVBJTVVEamJOZ21tRDFIREJzaEdTVlRnYWVvTEl5U1FPZGRWRnBIbXpLSjQ3eUJ1OFRkZ1pZZm1MbElzVHNLaERVTmpFaHczN1pUbEtmamQ2cTBlcDM2em43SWhPWUNNNlUyN1ZsN1IxTW9pTG94RGZIUkoxeWlZTWdpWDZwWTNNVEF4TjZNd0piV3dYQlM2VFdtZWxIS1JjUjhlbDZkUTQybzR6bzJ5Snc5SUdCYUlMMEczcXhsQm1NWFREUzZUVFBpSFh0dTNUZEkxNExvd2k0UHY3bjJjT1Y1cnEwQ1FJRTlOZWc5dnNDYXBNcWpWOExvczJzbk5lTmhwcnk1NVZPMlJxazZLNnVkVjFCcXJsNVJBM2J4WUMyRnNUaW9GWlA1MlR1eThyT2lPNVlJSjhvTTZua3phZURpNngzOGd5MUh4N1ZJTTBZVE5oVU5CUmc5N1ZWT2tHZW0yb3BpME9kVEFRUnVJbWlvVGlPSXp4TVNwdGFhczVYZ2Y2WVNjODFoSnNYYXVOY2RDT0dueTJmRFJrZG1LQjBCT1A0c3QxWnI4TjFoQzFrekpQTGxJd3lvc2xnbVJvenRjNVNoZlpwbW9OR1o="
m_p: "9XSUW9Hg0e05z0b64u4S2rEm9Mhz7vWv84ypq2R9Kl2L835X13zUO0EipNMqM206"
e_t: "1615475430519"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0.01"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 1001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199707
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199706
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199705
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199704
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199703
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199702
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199692
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099683
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099682
    type: 2
    minCousume: 1300
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 12
}
userinfo {
  username: "156******06"
}

2021-03-10 17:10:26,854-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:10:26,854-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "12.0"
  t_p: "ceed524d461848e98dadd55514a99cc7"
  imei: ""
  model: "PDCM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "1tlxLSfq"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: ""
  brandType: "OPPO"
  mobileos: "16"
  androidVersion: "29"
}
type: "wxpay"
amount: "0.01"
cardno: ""
cardpwd: ""
ext: ""
basepay {
  channelId: ""
  notifyurl: "http://pay.pay-test.wanyol.com/notify/receiver"
  productName: "RECHARGE_SPEND"
  productDesc: "RECHARGE_SPEND "
  partnercode: "2031"
  appversion: "208006"
  currencyName: "CNY"
  rate: 1.0
  partnerorder: "nhSVQF1cozui3Uyr0JkYvHgf8DI9dM5w"
}
sign: "cPBg9pRiVj+GLRx/Pea2FkJro4iwAAypRcZS3mfF/EI92F9bTbRscTLdRTLNygCBk4m5RwAsa3TaMNuOSue3itHic+T3iXGBHo9yuV+1kdMnZw3CeDo5knMGmr2OwMp4CAf7X5y+CScQWwqej3vzOsrhqGD8aZSNwbKq8VtUcneyzBcJC2t/ejIFXHakCGRnqmmn2D+bRRJdU5L64C2QW8hZ7BdcDLcNRL809f+TQ63BQxERR4wRalD4z7olgAXsaChumXIzzPKDSeCMsWaqj94I2IpbYGOGz17Qe7qVZ6rZ5aHhSVXGmK1whw39Om5FUt2U1vstuXp+RBNsQQAQOQ=="
ip: "183.238.170.71"
expendRequest {
  header {
    version: "12.0"
    t_p: "ceed524d461848e98dadd55514a99cc7"
    imei: ""
    model: "PDCM00"
    apntype: "1"
    package: "com.example.pay_demo"
    r_v: "1tlxLSfq"
    ext: ""
    sdkVer: 260
    country: "CN"
    currency: "CNY"
    openId: ""
    brandType: "OPPO"
    mobileos: "16"
    androidVersion: "29"
  }
  price: 3
  count: 1
  productname: "RECHARGE_SPEND!=AMOUNT"
  productdesc: "RECHARGE_SPEND!=AMOUNT"
  partnerid: "2031"
  callBackUrl: "http://pay.pay-test.wanyol.com/notify/receiver"
  partnerOrder: "nhSVQF1cozui3Uyr0JkYvHgf8DI9dM5w"
  channelId: "demo"
  ver: "208006"
  source: "auto_test"
  attach: ""
  sign: "Cut6pqTqdOFWsg1XDcFjbRXxE2rRU+lq2rDeUbW8PZjDh2uxEU0PvsUJNkv/BUjDuDBgQJM62VNTeoZFfG0FZC9kV7HNFrZkWSX1s3lpi+IDjWiOg8uBiG62hxQRYPQ1NWuMnCDdI9uffG3FbPQf2iYFgjxnfkaoz6yWIYid9zY="
  appKey: "1234"
  voucherId: 62199707
  voucherType: 2
  voucherCount: 1
  factor: ""
}
isNeedExpend: "1"
appId: ""
payTypeRMBType: "0"
tradeType: "common"
screenInfo: "FULL"

2021-03-10 17:10:27,214-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "{\"appid\":\"wx93eea96ecc33f168\",\"noncestr\":\"496f557725964c87b90d38f9cfeaf383\",\"packageNm\":\"Sign=WXPay\",\"partnerid\":\"1259634601\",\"prepayid\":\"wx10171030868799f0719f0eeac6517a0000\",\"sign\":\"E2503B2B57DB49DB3BEDDD6FF7698B2C\",\"timestamp\":\"1615367430\"}"
}
payrequestid: "KB202103101710302076075925003572"
model: ""

2021-03-10 17:10:27,214-INFO-wxpay-scarlet-52-回调参数：<xml><transaction_id><![CDATA[8720562383615836983159206901]]></transaction_id>
<nonce_str><![CDATA[xCAiu4epVOY8SNHnG1kmolqBasRLzXdv]]></nonce_str>
<bank_type><![CDATA[OTHERS]]></bank_type>
<openid><![CDATA[oCg6Xt8NvRi7jGuap_5B6XdY4oYk]]></openid>
<sign><![CDATA[F28D706C719FD556CE2053ADDF72A49B]]></sign>
<fee_type><![CDATA[CNY]]></fee_type>
<mch_id><![CDATA[1259634601]]></mch_id>
<cash_fee><![CDATA[1]]></cash_fee>
<out_trade_no><![CDATA[KB202103101710302076075925003572]]></out_trade_no>
<appid><![CDATA[wx93eea96ecc33f168]]></appid>
<total_fee>1</total_fee>
<trade_type><![CDATA[APP]]></trade_type>
<result_code><![CDATA[SUCCESS]]></result_code>
<attach><![CDATA[TEST]]></attach>
<time_end><![CDATA[20210310171027]]></time_end>
<is_subscribe><![CDATA[N]]></is_subscribe>
<return_code><![CDATA[SUCCESS]]></return_code>
</xml>
2021-03-10 17:10:27,307-INFO-wxpay-scarlet-56-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-03-10 17:10:27,307-INFO-wxpay-scarlet-58-回调解析成功
2021-03-10 17:10:27,317-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:10:27,319-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "18891784065604"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "RhEsNGInBYciHLJPQgO0AVFKyMt8a9pC"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 17:10:27,394-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "7ce6e84b87f0435caf4a8d4649340d2c"
s_p: "ZjVva1VtWE9YTzNHY2p3YkhjQzNwYmxYR3djNlBFWjJKQkh0dDRHc2VtdTdSUk9qU3dyRWk2RGJIS0swSU11d1Rmd3JGVWNFR3dxNzJBcktqQ0QzT1A4MlM2YkJLZkMxdEJUdGE1djByRUdOeE9mMmFUUnI2cTFRMVhneXNWRTVQNXNjTEtHT1hNNnVYOFdwQ2ZaS3RNbjlOdURaZUdxU2M0VXU0NU43YVZGVG5GejFST1MzM0JaeVJGYTNxVjN1cWt6aWNGTkJvaFNnUmtqWVpDUVRZYUVUSndodFZFd2ttZHlPd0kyRUQybnNCQUVKUGhvdFJTVm9QNW5wa1EwbVN5R0wyMUp1YmhnRFNWWUdyaUlTV2hCaHJISjJIZEw4a1o1RGpqalBnY3RKVHRTeHp0eWE4Zk1Hd1VYbUQyUURYaVFDMWFuaTRCSzZpVHBaMWdzbTJvN3FMNjcyZktma24wMGJwMkNUWkdUbUFabUxIUVRwNmlpQmlhQWdqdjVyZE5CODJoeG9SVXF5NzN0NUI1bjQ5T29MRjhyS2JlZk5XSHBBeTcxWlJ2RVFibG42S0dERWh2bld2Z3dCOFlNMm96ZXpWbnptMVRVYkN5UU1JTEhMQ2dJb3JkVHRkQ1gwNUhtbW15dXZKQkd1aU5LZGhPNjJObE4wSnRzdFFRZXpSemg4T3BUR3lkbjBuWFNVSTYyQWpoWkc3Q0V4QXltMGZDQlJ0VXRnaDBjN3JVMHA1dHVBZm4yMGx4M29RdVpyeXFyb25POUxhaVhtZzF5SGdwdUJkNTdhNldBVk9sYU1lSENzZHNrcmp6ZkR3RG5WUUcyNlJPeGludmpvMlY0ZmRSSW1xaGtwenRtVzJBRW1XZUV3TkhWQ2tzUE9GNmVJcWZJOWJ4a2pneWVqY1ZjOU9BYkZIWDJsRE9za1N6bzJ2TENJUUdnZm1EUFRQRHNrZ3c5TWwyWnBmVElEbGk3amtOeG5qOHd2VTA1RVVxQjhYZTFza2tqRVNKWHNKaGtHU1VSZkttbnhCQzQyOUptN0VUY05PRmk5c3ZaOTRtVWs="
m_p: "AJsrfD968A80Y0l3B8rNfRW5ILYzE92dEXQydACv14muI8E0BkgQM8a7NLDnG9m4"
e_t: "1615475431081"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 1001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199706
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199705
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199704
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199703
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199702
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199692
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099683
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099682
    type: 2
    minCousume: 1300
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 11
}
userinfo {
  username: "156******06"
}

2021-03-10 17:10:27,394-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:10:27,395-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "5.0"
  t_p: "7ce6e84b87f0435caf4a8d4649340d2c"
  imei: ""
  model: "PBDM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "WpCfZKtM"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
payrequestid: "KB202103101710302076075925003572"
version: "260"
queryType: "PAY"

2021-03-10 17:10:27,447-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "2002"
  msg: ""
}
successStatus: "1086"
origAmount: "0.01"

2021-03-10 17:10:29,449-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT app_key FROM `db_platform_gateway`.`server_app_info` WHERE app_id = '100002'
2021-03-10 17:10:29,453-INFO-lib.common_biz.find_key-96-查询到秘钥信息：BB36C34EB6644AB9694315AF7D68E629
2021-03-10 17:10:29,453-INFO-lib.common.session.http.http_json-38-http://pay-gateway.pay-test.wanyol.com/gateway/nearme.account.query
2021-03-10 17:10:29,453-INFO-lib.common.session.http.http_json-39-传入的参数：{'app_id': '100002', 'service': 'nearme.account.query', 'format': 'JSON', 'charset': 'UTF8', 'sign_type': 'MD5', 'sign': 'FF7E091C0D3E0F043DE894AC055BC6DA', 'timestamp': '2021-03-10 17:10:29', 'version': '1.0', 'bizContent': "{'ssoid': '2076075925'}"}
2021-03-10 17:10:29,472-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'data': {'ssoid': '2076075925', 'timeStamp': 1615367433190, 'useableBalance': 0, 'totalGiveBalance': 0, 'createTime': 1612151249000, 'chargeBalance': 0, 'freezeBalance': 0, 'giveBalance': 0}, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功', 'success': True}
2021-03-10 17:10:29,473-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `db_order_4`.`order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "KB202103101710302076075925003572"
2021-03-10 17:10:29,477-INFO-lib.common_biz.fiz_assert-34-订单详情：{'id': 15348, 'pay_req_id': 'KB202103101710302076075925003572', 'notify_id': '8720562383615836983159206901', 'partner_order': 'nhSVQF1cozui3Uyr0JkYvHgf8DI9dM5w', 'amount': 1, 'refund': 0, 'contents': 'RECHARGE_SPEND ', 'products_name': 'RECHARGE_SPEND', 'counts': 1, 'ssoid': '2076075925', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': '1259634601', 'ip': '58.255.79.104', 'mac': '', 'model': 'PDCM00', 'app_package': 'com.example.pay_demo', 'app_ver': '208006', 'sdk_ver': '260', 'partner_code': '2031', 'notify_url': 'http://pay.pay-test.wanyol.com/notify/receiver', 'status': 'OK', 'channel_id': '', 'channel_type': 'NATIVE', 'pay_type': 'wxpay', 'direct_pay': 'KEBI', 'game_type': 'WANGYOU', 'present_amount': 0, 'original_amount': 3, 'discount_info': '', 'extra': None, 'remark': 'new way', 'request_time': datetime.datetime(2021, 3, 10, 17, 10, 31), 'success_time': datetime.datetime(2021, 3, 10, 17, 10, 27), 'modify_time': datetime.datetime(2021, 3, 10, 17, 10, 31), 'trade_type': 'PAY', 'kebi_spent': 1, 'voucher_amount': 1, 'voucher_info': '{"cutAmount":"1","id":"62199707","type":"2"}', 'country_code': 'CN', 'currency': 'CNY', 'openid': None, 'brand_type': 'OPPO', 'mobile_os_ver': '16', 'platform': '', 'screen_info': 'FULL', 'voucher_id': '62199707', 'factor': '', 'paid_amount': None, 'paid_usd': None, 'combine_order': 'N'}
2021-03-10 17:10:29,477-INFO-lib.common_biz.fiz_assert-45-订单表信息记录正确
2021-03-10 17:10:29,477-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `pay_tradeorder_4`.`trade_order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "KB202103101710302076075925003572"
2021-03-10 17:10:29,481-INFO-lib.common_biz.fiz_assert-55-trade订单详情：{'id': 8034, 'pay_req_id': 'KB202103101710302076075925003572', 'partner_order': 'nhSVQF1cozui3Uyr0JkYvHgf8DI9dM5w', 'partner_code': '2031', 'products_name': 'RECHARGE_SPEND', 'ssoid': '2076075925', 'origin_amount': 3, 'amount': 1, 'kb_amount': 1, 'voucher_amount': 1, 'present_amount': 0, 'refund': 0, 'country_code': 'CN', 'currency': 'CNY', 'pay_type': 'wxpay', 'channel_id': '', 'channel_type': 'NATIVE', 'direct_pay': 'KEBI', 'trade_type': 'PAY', 'combine_type': 'PRIMARY', 'status': 'OK', 'notify_url': 'http://pay.pay-test.wanyol.com/notify/receiver', 'attach': '', 'extra_info': '', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': '1259634601', 'ip': '58.255.79.104', 'mac': '', 'openid': None, 'model': 'PDCM00', 'brand_type': 'OPPO', 'app_package': 'com.example.pay_demo', 'app_ver': '208006', 'sdk_ver': '260', 'mobile_os_ver': '16', 'platform': '', 'screen_info': 'FULL', 'remark': None, 'request_time': datetime.datetime(2021, 3, 10, 17, 10, 31), 'success_time': datetime.datetime(2021, 3, 10, 17, 10, 31), 'modify_time': datetime.datetime(2021, 3, 10, 17, 10, 30)}
2021-03-10 17:10:29,481-INFO-lib.common_biz.fiz_assert-63-trade订单表信息记录正确
2021-03-10 17:10:29,482-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `virtual`.`tb_recharge202103` WHERE ssoid = '2076075925' and rechargeOrder = "KB202103101710302076075925003572"
2021-03-10 17:10:29,485-INFO-lib.common.db_operation.mysql_operation-51-查询数据为空
2021-03-10 17:10:29,485-INFO-lib.common_biz.fiz_assert-83-tb_recharge订单详情：None
2021-03-10 17:10:29,485-INFO-lib.common_biz.fiz_assert-91-tb_recharge订单表信息记录正确
2021-03-10 17:10:29,486-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `virtual`.`tb_payment202103` WHERE ssoid = '2076075925' and partnerOrder = "nhSVQF1cozui3Uyr0JkYvHgf8DI9dM5w"
2021-03-10 17:10:29,489-INFO-lib.common_biz.fiz_assert-111-tb_payment订单详情：{'id': 1546, 'ssoid': '2076075925', 'imei': '', 'model': 'PDCM00', 'sdkVersion': '260', 'clientIp': '58.255.79.104', 'source': None, 'systemOrder': '2031_nhSVQF1cozui3Uyr0JkYvHgf8DI9dM5w', 'partnerOrder': 'nhSVQF1cozui3Uyr0JkYvHgf8DI9dM5w', 'partnerId': '2031', 'productName': 'RECHARGE_SPEND', 'productDesc': 'RECHARGE_SPEND', 'callbackUrl': 'http://pay.pay-test.wanyol.com/notify/receiver', 'price': 1, 'count': 1, 'r_cost': 1, 'g_cost': 0, 'appPackage': 'com.example.pay_demo', 'status': 'OK', 'payTime': datetime.datetime(2021, 3, 10, 17, 10, 31), 'updateTime': datetime.datetime(2021, 3, 10, 17, 10, 31)}
2021-03-10 17:10:29,489-INFO-lib.common_biz.fiz_assert-119-tb_payment订单表信息记录正确
2021-03-10 17:10:29,490-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select * from `db_pay_notify_1`.`notify_info` where request_id = "nhSVQF1cozui3Uyr0JkYvHgf8DI9dM5w"
2021-03-10 17:10:29,494-INFO-lib.common_biz.fiz_assert-135-通知表信息详情：{'id': 151944, 'app_id': 10001, 'app_name': '可币系统(测试环境)', 'app_sub_id': '2031', 'notify_id': '88625762a7a2428ebec6eb82ccf6ce34', 'request_id': 'nhSVQF1cozui3Uyr0JkYvHgf8DI9dM5w', 'notify_protocol': 'HTTP', 'notity_detail': '{"appId":10001,"appSubId":"2031","httpReqType":"POST","reqContent":"{\\"attach\\":\\"\\",\\"count\\":1,\\"date\\":\\"20210310\\",\\"kbVou\\":{\\"kbVouAmount\\":1,\\"notClearCount\\":1,\\"orderAmt\\":3,\\"payVouDesc\\":\\"\\",\\"spendType\\":2,\\"vouCountDetail\\":\\"62199707:1;\\"},\\"kbVouAmount\\":1,\\"partnerId\\":\\"2031\\",\\"partnerOrder\\":\\"nhSVQF1cozui3Uyr0JkYvHgf8DI9dM5w\\",\\"paySuccessTime\\":\\"2021-03-10 17:10:31\\",\\"price\\":3,\\"productDesc\\":\\"RECHARGE_SPEND\\",\\"productName\\":\\"RECHARGE_SPEND\\",\\"sign\\":\\"jpGy7nAqSGq6ATdTeTkJo+STRxHJZM+1yx1k+GAAGnBUrj+6q4XLqZEqiVDtPpfr/+7uKhtXRkp74y+HrbcEQLVJzDWyWx3gPtxlMmv64szXOEHTk8gMOAihjw4SD8eRyMMi1JUfD6iLsdSn/7UJYdNlA/dL3CMTvpiz5a1VvUA=\\",\\"spendType\\":2,\\"ssoid\\":\\"2076075925\\"}","reqUrl":"http://pay.pay-test.wanyol.com/notify/receiver","requestId":"nhSVQF1cozui3Uyr0JkYvHgf8DI9dM5w","sign":"86979E386D460C89453B2E1265BEFD2F","signType":"MD5","successResult":"OK","timeStamp":1615367431089,"version":"1.0"}', 'notify_count': 1, 'notify_response': 'OK', 'notify_handler': 'httpNotifyJsonHandler', 'fail_strategy': 'failStrategyHashImpl', 'status': 'SUCCESS', 'success_time': datetime.datetime(2021, 3, 10, 17, 10, 31), 'insert_time': datetime.datetime(2021, 3, 10, 17, 10, 31), 'update_time': datetime.datetime(2021, 3, 10, 17, 10, 31), 'extra_json': None, 'remark': None}
2021-03-10 17:10:29,494-INFO-lib.common_biz.fiz_assert-141-通知成功
2021-03-10 17:10:29,495-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select status, usable_amt from `oppopay_voucher`.`vou_info_16` where vouId='62199707'
2021-03-10 17:10:29,498-INFO-lib.common_biz.fiz_assert-194-优惠券详情：{'status': '6', 'usable_amt': None}
2021-03-10 17:10:29,498-INFO-lib.common_biz.fiz_assert-198-优惠券表记录正确
2021-03-10 17:11:48,137-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.52.44.235', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-03-10 17:11:48,426-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-03-10 17:11:48,470-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]成功
2021-03-10 17:11:48,470-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]
2021-03-10 17:11:48,690-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]成功
2021-03-10 17:11:48,690-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]
2021-03-10 17:11:48,712-INFO-lib.common.db_operation.mysql_operation-118-成功连接到测试专用环境-MYSQL：{'host': '10.52.54.122', 'user': 'opay', 'pwd': '_UI7xHubrhTPIP1J_T4so7SU7ATCrUzm7cAh6TdBLLHWUSQUQqD8p45xVQzV3Czi', 'port': '33066'}
2021-03-10 17:11:48,712-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `test_account`.`account_test_env`
2021-03-10 17:11:49,470-INFO-lib.common_biz.find_database_table-49-`pay_cocoin_2`.`pay_user_info_75`
2021-03-10 17:11:49,470-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select balance from `pay_cocoin_2`.`pay_user_info_75` where ssoid = "2076075925" and country = "VN"
2021-03-10 17:11:49,559-INFO-fiz_db_operate-43-可币余额：0.0000
2021-03-10 17:11:49,716-INFO-lib.common.session.dubbo.dubbo-51-dubbo invoke语句：invoke CocoinAccountOperationFacade.payout('2076075925', 'VN', '0.0000', 'TEST')
2021-03-10 17:11:49,808-DEBUG-lib.common.session.dubbo.dubbo-55-{"success":true}

2021-03-10 17:11:49,808-INFO-lib.common.session.dubbo.dubbo-57-dubbo回参：{'success': True}
2021-03-10 17:11:49,809-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select rate from `platform_opay`.`exchange_rate_coin` WHERE rate_name = 'VND'
2021-03-10 17:11:49,867-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:11:49,867-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "83861014078242"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "IvdSmugsqApcK09VZHoat5FM4DbJwer3"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 17:11:49,947-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "fb447178df46473c98971c9619124f57"
s_p: "NkdGNFl3ZVNqMlBmSFBDb2cxa1RJS2RzRlVza3FSQ0dIeUZqWTlFa0RkYVJ5RHNoeG43T25uNmZmcHhxNWtmcGZsNGpZVUJTbmFVZmFVU0JReXl0MmNTUzJkcjNBWFNtb25UUmdJUEd6MHhEcDFyZjJoS05xNnM2aW5nY2tKazhpdENiYTdVSnluelJxd0QxVVNsempFY3pwd3hvT3hienBYY0RLZ2F0NlV2NmVVTjRwa3pGUWhMdDVHclBpWUdubFB3Y3FOWUZEMXZkOEhNcVZVSlpOdWFST2FKc1RkSlVFUFhkMmJBcHV4cUs4VU9KNk0zOFA4MW01b3VNSFRiMFZmRzB5OTJkb2FZUmRSMWlOQ0laMW1RMG9Ta1piMG9wdlJiT3dtR2M2Umx3UjZvbGVZNTRoS3h2cjJPcFE2N0N4ZDNlcGFVbGVwaXhYWWhiQ3VBdzBmT1hONG56V2tmblBQbGtXRnBRM3duc3dlbXBKN3kxSGRPSlFVTW1CdXNrVHZ3Y1RUQkRCMmxJbVhYOWZhdHpKMzlXdjBNUzN1aXVWOVZkaGV3VFRiRUtEYTRITjd6T2tmbjJBa3pHVXlmWlA1S3FDWDZLYkJuR0o5TnZGeFFnNTBtUEJjY2Qwcm5kYWFNWE45TDNCV1RFbUk3V0JIV3J2VzFPUGlJVDdmWkdpa2tOanZpZUN3Z05BZ3dSWDFTQkVKVzRPc0ttMXd6ZWw2N0xweXRiMG05V1J3dVk5S0VnckdpOGtBbnpNN1B2cW1pejc1bHJ2YkhVTHRudmFXclFaZ0N2QkNvRm1KdG1GWHA1OEVGYzlsSng2cExlQllPc1N1YXM5eWdPVnhzaGpQSmF0ZTRKbjFVaERIYkdTbUdhbnBDMUw3OWZiOGNDVTJXNTJmNXpnSHFyWUJKb3pOU3hsc1hFV1RJeTNidDN3U091UUlZNmQwc20xbXRDbVpRZ2tBZklYYlVHanQ3Qk1mNUtpdHlXeUM0TWRNOThSa1BuQkRHMjAwTmFUU2FoZThaZGJIVE44dWVpRjJMalp3OHFGcEszVlVhTUFlZFY="
m_p: "8E3bc5sZn3c38Dsc21bIb1eKSdlmTqG6og32raATUvHX2A9Kamfl9jZxCIr1Wwp9"
e_t: "1615475513635"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 1001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199706
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199705
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199704
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199703
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199702
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199692
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099683
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099682
    type: 2
    minCousume: 1300
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 11
}
userinfo {
  username: "156******06"
}

2021-03-10 17:11:49,948-DEBUG-lib.common.session.http.protobuf-35-无需加入随机字节，标志位：1
2021-03-10 17:11:49,948-INFO-lib.common.session.http.protobuf-36-传入的参数：header {
  version: "15.0"
  token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
  imei: ""
  model: "A001OP"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "Qyyt2cSS"
  sign: "A93CFAFA7E9C1BA1059ECD4D7EA2B398"
  sdkVer: "12.0"
  appVerison: "250"
  ip: "0.0.0.0"
  openId: "FBC4E853B36C40C8A2AC61D127D85C9E23fe8cbbef964f0009fa0ac296d07836"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
partnerOrder: "QWHtLuaYbqwdem0xNyT7k5sKIEDAXF8r"
partnerId: "2031"
country: "VN"
payType: "upay_gamecard"
channel: "upay_gamecard"
payAmount: "1000"
currency: "VND"
cocoinRechargeAmount: "0.04"
businessChannelId: ""
bankCode: ""
pointCardNo: ""
pointCardPassword: ""
hasAdditionalFees: false
originalAmount: "1000"

2021-03-10 17:11:50,447-INFO-lib.common.session.http.protobuf-58-返回的参数isSuccess: true
data {
  payRequestId: "VN202103100911542076075925372513"
  payUrl: "https://pay.upay365.com/toDiffCountry/cashCard?appKey=10000096&appGoodsKey=GSK182&cpOrderId=VN202103100911542076075925372513&chKey=&uid=2076075925&vendor=null&equipmentType=1&countryName=vietnam&cpInquiryUrl=https://nearme.atlas.com?operation=confirm"
}

2021-03-10 17:11:51,972-INFO-upay-scarlet-55-SUCCESS
2021-03-10 17:11:51,973-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select rate from `platform_opay`.`exchange_rate_coin` WHERE rate_name = 'VND'
2021-03-10 17:11:52,032-INFO-lib.common_biz.find_database_table-49-`pay_cocoin_2`.`pay_user_info_75`
2021-03-10 17:11:52,033-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select balance from `pay_cocoin_2`.`pay_user_info_75` where ssoid = "2076075925" and country = "VN"
2021-03-10 17:11:52,079-INFO-fiz_db_operate-43-可币余额：4.0000
2021-03-10 17:11:52,079-INFO-oversea_recharge-46-可币充值成功
2021-03-10 17:11:52,080-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `db_order_4`.`order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "VN202103100911542076075925372513"
2021-03-10 17:11:52,127-INFO-lib.common_biz.fiz_assert-34-订单详情：{'id': 4571, 'pay_req_id': 'VN202103100911542076075925372513', 'notify_id': '210224182311113568', 'partner_order': 'NV202103100911542076075925090386', 'amount': 100000, 'refund': 0, 'contents': 'Koko Coins recharge', 'products_name': 'Koko Coins Recharge', 'counts': 1, 'ssoid': '2076075925', 'mobile_num': '', 'imei': '', 'imsi': None, 'imsi2': None, 'ip': '58.255.79.104', 'mac': None, 'model': 'A001OP', 'app_package': 'com.example.pay_demo', 'app_ver': '250', 'sdk_ver': '250', 'partner_code': '2031', 'notify_url': '', 'status': 'OK', 'channel_id': None, 'channel_type': 'WAP', 'pay_type': 'upay_gamecard', 'direct_pay': 'KEBI', 'game_type': None, 'present_amount': 100000, 'original_amount': 100000, 'discount_info': None, 'extra': None, 'remark': None, 'request_time': datetime.datetime(2021, 3, 10, 9, 11, 54), 'success_time': datetime.datetime(2021, 3, 10, 9, 11, 56), 'modify_time': datetime.datetime(2021, 3, 10, 9, 11, 56), 'trade_type': 'RECHARGE', 'kebi_spent': None, 'voucher_amount': None, 'voucher_info': None, 'country_code': 'VN', 'currency': 'VND', 'openid': 'FBC4E853B36C40C8A2AC61D127D85C9E23fe8cbbef964f0009fa0ac296d07836', 'brand_type': 'OPPO', 'kebi_recharge': 400, 'additional_fee': None, 'additional_fee_detail': None, 'price_usd': None, 'mobile_os_ver': '17', 'paid_amount': 100000, 'paid_usd': None, 'pay_activity_id': '', 'pay_discount_amount': 0, 'cocoin_activity_id': '', 'cocoin_gift_amount': None, 'channel_result_code': None, 'combine_order': None}
2021-03-10 17:11:52,127-INFO-lib.common_biz.fiz_assert-45-订单表信息记录正确
2021-03-10 17:17:34,170-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.52.44.235', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-03-10 17:17:34,446-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-03-10 17:17:34,490-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]成功
2021-03-10 17:17:34,491-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]
2021-03-10 17:17:34,711-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]成功
2021-03-10 17:17:34,712-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]
2021-03-10 17:17:34,725-INFO-lib.common.db_operation.mysql_operation-118-成功连接到测试专用环境-MYSQL：{'host': '10.52.54.122', 'user': 'opay', 'pwd': '_UI7xHubrhTPIP1J_T4so7SU7ATCrUzm7cAh6TdBLLHWUSQUQqD8p45xVQzV3Czi', 'port': '33066'}
2021-03-10 17:17:34,726-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `test_account`.`account_test_env`
2021-03-10 17:17:35,076-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT app_key FROM `db_platform_gateway`.`server_app_info` WHERE app_id = '100002'
2021-03-10 17:17:35,079-INFO-lib.common_biz.find_key-96-查询到秘钥信息：BB36C34EB6644AB9694315AF7D68E629
2021-03-10 17:17:35,079-INFO-lib.common.session.http.http_json-38-http://pay-gateway.pay-test.wanyol.com/gateway/nearme.account.query
2021-03-10 17:17:35,079-INFO-lib.common.session.http.http_json-39-传入的参数：{'app_id': '100002', 'service': 'nearme.account.query', 'format': 'JSON', 'charset': 'UTF8', 'sign_type': 'MD5', 'sign': 'A4AC1CE2E7F629352814354D67EEFDA1', 'timestamp': '2021-03-10 17:17:35', 'version': '1.0', 'bizContent': "{'ssoid': '2076075925'}"}
2021-03-10 17:17:35,125-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'data': {'ssoid': '2076075925', 'timeStamp': 1615367858842, 'useableBalance': 0, 'totalGiveBalance': 0, 'createTime': 1612151249000, 'chargeBalance': 0, 'freezeBalance': 0, 'giveBalance': 0}, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功', 'success': True}
2021-03-10 17:51:54,879-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.52.44.235', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-03-10 17:51:55,196-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-03-10 17:51:55,242-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]成功
2021-03-10 17:51:55,243-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]
2021-03-10 17:51:55,484-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]成功
2021-03-10 17:51:55,484-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]
2021-03-10 17:51:55,498-INFO-lib.common.db_operation.mysql_operation-118-成功连接到测试专用环境-MYSQL：{'host': '10.52.54.122', 'user': 'opay', 'pwd': '_UI7xHubrhTPIP1J_T4so7SU7ATCrUzm7cAh6TdBLLHWUSQUQqD8p45xVQzV3Czi', 'port': '33066'}
2021-03-10 17:51:55,499-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `test_account`.`account_test_env`
2021-03-10 17:51:55,509-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=0
2021-03-10 17:51:55,516-INFO-lib.common_biz.find_merchant_info-28-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601'}
2021-03-10 17:51:55,517-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-03-10 17:51:55,524-INFO-lib.common_biz.find_key-109-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-03-10 17:51:55,525-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no, plan_id FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=1
2021-03-10 17:51:55,531-INFO-lib.common_biz.find_merchant_info-41-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601', 'plan_id': '120877'}
2021-03-10 17:51:55,532-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-03-10 17:51:55,539-INFO-lib.common_biz.find_key-109-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-03-10 17:51:55,918-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:51:55,918-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "6.0"
appKey: "1234"
count: 10000
order: "87612037941110"
ip: "121.13.218.236"
type: "1"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "YMCxcqeSmiQXBwkthR93nDslANvjodV6"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 17:51:58,475-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "c9b9619d3845445e8671fc9109460dfa"
s_p: "RkF1ZnJHSnZjVzJNazlBcjFPZnhvbDQyZXhhRjlwcUptUkwxanlCWjAyb09xc0ZOSzJxY2JjeXZ3dU9EOHlIc05xY3k0OWwzRkx6OFo0Ykhrc2dmdU1INmw1NVRPaEhYV0RrU0p0WmF0NnVlV2pTZjRLcXY5dFluS0hVTWRhckJpTzUwZFNhTmZGSmxackowWDNZb1hwVW5LckpBMFJERFEyVlFzR0VRQVpKZktTVmxMeXdzeUltZkJPcDlJU2F4WDJ1RnJIcUNuVWx5cUVrWHI4YUtTMjNoTW5WNDlyMVZkREl6UHdTU2dUdGxGRnZlTzk0dWNhMHlVWmlCUEtYcWEwbWFNRmttaDJ2Ymo1V3lzZTFua0UxVXZQVGFVN1h2NlhqTE1UMXFxaWlrS0NSZ3ljejIwUGhQazBZZ0VXOFNJUUpyYTI5Wk15OHNDU3E0ZlVHcVpGWHQwWldlR21BTU1vSnlDU2owTkJ2RFdRZkw2bkk2blZUczV1cHVVQktuUGVpbTBZckxSYXJJdFpCY05Lckgwcm1hNG9saVVnZkVCcFNPb2FDMUZJQzBSVElkTUNxOURzT3lvMUtkZDUwWUR4c1VNYUJPWWVTbkFuSmJFMEZZZDl4bFpveGRaT29sUVpaSmZXc2Y1ZnR6VzM1TzhQaXlCaVVhUVQyZHVzbmpNQ3RmblZBUk5lVVhUeTd4UDRMZnFTV0p3VnVyZHppeDh2b1EyYUlXY3dyS0s0bzVDcTJOVGV0UzNWZzV4OG1ZOXNPdmRqUm9yTVdrS3c2TVJzbGVaTzk2aW9mVTVtR0tLdERZcEdVUVh3UVp5NmlRaHh5aFh5cXJ5bUUzVlY5UTV6U2FVSlFQc0hhaFF5N3lwM0tpTlRSOHROMVlVckwxcDFMUVA2Z0QyMUU5aUdVbFhsVHBGdzVJZ281bGo4WlZGWTB6WEc4M3duNWUwQ2NQS2pSdmx4Z3ZvbWEzc1FteWpiVENic1BCTWR2Q3JpTUpybUh1VnNhV3lGMHdFYmJwdzd0QVZ5d2U4QVd6QU95RFFhWlc2THo5TjVIVTQxdmQ="
m_p: "eJUuw8wf1VVEZQQyiym1305bamtQxX4c5G4k9117nD13TFE2ZX9iS3e5uCvNE49W"
e_t: "1615477921186"
balanceResult {
  baseresult {
    code: "0000"
    msg: ""
  }
  balance: "0"
  vouBalance: "0"
  vouNum: 0
}
userinfo {
  username: "156******06"
}

2021-03-10 17:51:58,478-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:51:58,478-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "12.0"
  t_p: "c9b9619d3845445e8671fc9109460dfa"
  imei: ""
  model: "PCRM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "FAufrGJv"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: ""
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
type: "wxpay"
amount: "0.01"
cardno: ""
cardpwd: ""
ext: ""
basepay {
  channelId: ""
  notifyurl: "http://pay.pay-test.wanyol.com/notify/receiver"
  productName: "DIRECT_PAY"
  productDesc: "DIRECT_PAY"
  partnercode: "2031"
  appversion: "1.1.0"
  currencyName: "\344\272\272\346\260\221\345\270\201"
  rate: 1.0
  partnerorder: "9vICfy57lZguTX0zDiUOnjpFYVksdahm"
}
sign: "XK3hMJaIbwiAmNGPxA/pdvTxUTdGRAQQGPaMZRRDDCSchTjdi4VvC1P+GX5PJTNl3eLFFJFlGBDXGjnAWQtT4xlm90vo9K5lfVbzDTWOwvi4e90lkkAwr+3wIx9WyN1eOoO3v72L28XH3P9dV6pvoaEI8USooB8ycKsSi2I22SUORZGthT017RE/LEbmB3H14YfrsCRyJZVbDkTgIpEgXCLkZCpMrct4GQ9zW5aGjLAFiQfY0Lb0PPj0mU+JnBHcbApSE0deM6aTiLiOZW6oT1UXLdBCzv8hNcm03TTKpo73NmpHLlbQPD6XNCDILnbnEeX7RJxrgsEy6/l6HwZeug=="
ip: "58.252.5.75"
isNeedExpend: "0"
appId: ""
payTypeRMBType: "0"
tradeType: "common"
screenInfo: "FULL"

2021-03-10 17:51:58,923-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "{\"appid\":\"wx93eea96ecc33f168\",\"noncestr\":\"2da6255293234916ad36bfcd695e9679\",\"packageNm\":\"Sign=WXPay\",\"partnerid\":\"1259634601\",\"prepayid\":\"wx101752015772483a994f32fe19c6170000\",\"sign\":\"CD63C388A0C099ADBC4947A2C424CD69\",\"timestamp\":\"1615369921\"}"
}
payrequestid: "RM202103101752012076075925522222"
model: ""

2021-03-10 17:51:59,924-INFO-wxpay-scarlet-52-回调参数：<xml><transaction_id><![CDATA[2601431935943348115399812497]]></transaction_id>
<nonce_str><![CDATA[u6Kh90oxeiEgIYW4d5vHX2aQs8fZkPzw]]></nonce_str>
<bank_type><![CDATA[OTHERS]]></bank_type>
<openid><![CDATA[oCg6Xt8NvRi7jGuap_5B6XdY4oYk]]></openid>
<sign><![CDATA[A3EF780002289B87001C920D2607826C]]></sign>
<fee_type><![CDATA[CNY]]></fee_type>
<mch_id><![CDATA[1259634601]]></mch_id>
<cash_fee><![CDATA[1]]></cash_fee>
<out_trade_no><![CDATA[RM202103101752012076075925522222]]></out_trade_no>
<appid><![CDATA[wx93eea96ecc33f168]]></appid>
<total_fee>1</total_fee>
<trade_type><![CDATA[APP]]></trade_type>
<result_code><![CDATA[SUCCESS]]></result_code>
<attach><![CDATA[TEST]]></attach>
<time_end><![CDATA[20210310175159]]></time_end>
<is_subscribe><![CDATA[N]]></is_subscribe>
<return_code><![CDATA[SUCCESS]]></return_code>
</xml>
2021-03-10 17:52:00,146-INFO-wxpay-scarlet-56-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-03-10 17:52:00,147-INFO-wxpay-scarlet-58-回调解析成功
2021-03-10 17:52:00,161-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:52:00,161-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "05890568762450"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "TkO06unvdfhzPiyFJ2RotQ41xUGDWLeg"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 17:52:00,242-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "7d53e0682955493c88e99348518aaea9"
s_p: "TGgwNE9ZQ09qUHQwVDNESjVqSWREdXg5YXRZOEszT3pQWGhpRGdlOUsybFkwdmYybmZ4Zmc3ZHE5QzFzbFNZUkpIOUEyN3JlUXc4N0MwdlJpVUJIQWo5TVNoQzM1M2tNTE1IMWEybFJOUkQ1dkxUUVhpcDE5aktFTEpPREd6SHRRR2drUHZ4eHE5MGVRUEpwNEUwemhLWXhGVUVxellreGZJQWhrUEQ5NXUwU2lWeVNkVTFWaFBDS28yMUtIWnBlSnVZdWprVGZZNzFyNWhrQlQ5ZlF2UnRpc3Y0VGhnbGN5aXhuZlVCN3VXUGE0ZjNHRTNGbzdCZXdPTmdMZW9TM08zSVd0R1RJOWduRzIycjcwaklRQ1MyMnV3NUp5YTQ2MVo2aG5wWjNCMzBuNW15UzM4Z3BUY1A5c000cHVQOGNwZDBEb3cyeVh2VUhPUElNQXNRZGNtdVBmbHdDeVM4TFQzUjhkcWlaalhaVTZFa0JmUGhGRWl4NFRiSTVmeUp6SVAxbHY0VDhIbkRRbVBlZm1wTGp5SE1MeTJQRVkya2dLWHpiaEo5ZzFZRkR5SENIYU1EMXQ3QTh2ZzMwaHhHNWpidU9qcWNnTWdvS3RhdjI3OFZITUhYa1F3Tk9rdVVMTDFJVXJpZnFtSjQ4WTQwTWMxOWJkaGM2eE9PSzFrdW9LSk1RMnVpZWZ1VGZ2NjFSTnlRVk90dzMwRnB1NDRoc1Y4OGxkbGxwNkRNdnJpSEJRMFZFME1kcW9sVlZEZWZZeTZmVVpUVzlmUFpVUU9xZkRwa0pTSkplNDdQaGdYMER4VTdOQkJ3T3NpSjBKYm9Nd01iVkJqbDNaVGxoN25vaGhnT09GdjFtU2hiamoyUmFHSzZnYzd6NWpRSWdzMUo0MjRyQzhHU0huQ0RFZGUyS0NibVFwUXJNRjFSR0p4ZWlaM1NNQVlRbjczaTRZeXhneWs2d1JOdjBTbU5hQXlOQ1dYM28wMDVxakc1MXF3a1NSSmlxZmtoejhMblNKTWFiTkpoQ1pCRkRsUEhGZTlCWmltSXQzdlRmMTBMWnlkRzE="
m_p: "3MB52zGLdFVI7roDgxqZsUue9WqQWO66501ZKtcRRfg7880EcgJtB6E9qXcs7J45"
e_t: "1615477922930"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 1001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199706
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199705
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199704
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199703
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199702
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199692
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099683
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099682
    type: 2
    minCousume: 1300
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 11
}
userinfo {
  username: "156******06"
}

2021-03-10 17:52:00,243-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:52:00,243-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "5.0"
  t_p: "7d53e0682955493c88e99348518aaea9"
  imei: ""
  model: "PBDM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "FUEqzYkx"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
payrequestid: "RM202103101752012076075925522222"
version: "260"
queryType: "direct"

2021-03-10 17:52:00,299-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "2002"
  msg: ""
}
successStatus: "1086"
origAmount: "0.01"

2021-03-10 17:52:00,300-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `db_order_4`.`order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "RM202103101752012076075925522222"
2021-03-10 17:52:00,309-INFO-lib.common_biz.fiz_assert-34-订单详情：{'id': 15358, 'pay_req_id': 'RM202103101752012076075925522222', 'notify_id': '2601431935943348115399812497', 'partner_order': '9vICfy57lZguTX0zDiUOnjpFYVksdahm', 'amount': 1, 'refund': 0, 'contents': 'DIRECT_PAY', 'products_name': 'DIRECT_PAY', 'counts': 1, 'ssoid': '2076075925', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': '1259634601', 'ip': '58.252.5.72', 'mac': '', 'model': 'PCRM00', 'app_package': 'com.example.pay_demo', 'app_ver': '1.1.0', 'sdk_ver': '260', 'partner_code': '2031', 'notify_url': 'http://pay.pay-test.wanyol.com/notify/receiver', 'status': 'OK', 'channel_id': '', 'channel_type': 'NATIVE', 'pay_type': 'wxpay', 'direct_pay': 'ZHICHONG', 'game_type': 'WANGYOU', 'present_amount': 0, 'original_amount': 1, 'discount_info': '', 'extra': None, 'remark': None, 'request_time': datetime.datetime(2021, 3, 10, 17, 52, 2), 'success_time': datetime.datetime(2021, 3, 10, 17, 51, 59), 'modify_time': datetime.datetime(2021, 3, 10, 17, 51, 59), 'trade_type': 'PAY', 'kebi_spent': 0, 'voucher_amount': 0, 'voucher_info': None, 'country_code': 'CN', 'currency': 'CNY', 'openid': None, 'brand_type': 'OPPO', 'mobile_os_ver': '17', 'platform': '', 'screen_info': 'FULL', 'voucher_id': None, 'factor': None, 'paid_amount': None, 'paid_usd': None, 'combine_order': 'N'}
2021-03-10 17:52:00,309-INFO-lib.common_biz.fiz_assert-45-订单表信息记录正确
2021-03-10 17:52:00,310-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `pay_tradeorder_4`.`trade_order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "RM202103101752012076075925522222"
2021-03-10 17:52:00,319-INFO-lib.common_biz.fiz_assert-55-trade订单详情：{'id': 8044, 'pay_req_id': 'RM202103101752012076075925522222', 'partner_order': '9vICfy57lZguTX0zDiUOnjpFYVksdahm', 'partner_code': '2031', 'products_name': 'DIRECT_PAY', 'ssoid': '2076075925', 'origin_amount': 1, 'amount': 1, 'kb_amount': 0, 'voucher_amount': 0, 'present_amount': 0, 'refund': 0, 'country_code': 'CN', 'currency': 'CNY', 'pay_type': 'wxpay', 'channel_id': '', 'channel_type': 'NATIVE', 'direct_pay': 'ZHICHONG', 'trade_type': 'PAY', 'combine_type': 'PRIMARY', 'status': 'OK', 'notify_url': 'http://pay.pay-test.wanyol.com/notify/receiver', 'attach': '', 'extra_info': '', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': '1259634601', 'ip': '58.252.5.72', 'mac': '', 'openid': None, 'model': 'PCRM00', 'brand_type': 'OPPO', 'app_package': 'com.example.pay_demo', 'app_ver': '1.1.0', 'sdk_ver': '260', 'mobile_os_ver': '17', 'platform': '', 'screen_info': 'FULL', 'remark': None, 'request_time': datetime.datetime(2021, 3, 10, 17, 52, 1), 'success_time': None, 'modify_time': datetime.datetime(2021, 3, 10, 17, 52, 2)}
2021-03-10 17:52:00,319-INFO-lib.common_biz.fiz_assert-63-trade订单表信息记录正确
2021-03-10 17:52:00,320-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select * from `db_pay_notify_1`.`notify_info` where request_id = "9vICfy57lZguTX0zDiUOnjpFYVksdahm"
2021-03-10 17:52:00,329-INFO-lib.common_biz.fiz_assert-135-通知表信息详情：{'id': 151957, 'app_id': 10003, 'app_name': 'opaycenter(测试环境)', 'app_sub_id': '2031', 'notify_id': 'e04a3755de344c0eb4011be5cfd4f027', 'request_id': '9vICfy57lZguTX0zDiUOnjpFYVksdahm', 'notify_protocol': 'HTTP', 'notity_detail': '{"appId":10003,"appSubId":"2031","httpReqType":"POST","reqContent":"{\\"country\\":\\"CN\\",\\"partnerOrder\\":\\"9vICfy57lZguTX0zDiUOnjpFYVksdahm\\",\\"payResult\\":\\"OK\\",\\"systemOrder\\":\\"RM202103101752012076075925522222\\",\\"sign\\":\\"BhW15GxYBzvBTsnx6+g2z/pBoYh574eVH5enVSd7rY6yAqlcdL1kXoeFbYYxIZEI0gPd6WQ5jUl06Js9seCjPzl0mBOr/Z4iSQTLql7vr8CChfzPrebJ1ccT1rxUUs/RIDdcRcacTSdJjQm0LG/uAv0pJfK4V4OhQ6RLRWfkVH4=\\",\\"notify_url\\":\\"http://pay.pay-test.wanyol.com/notify/receiver\\",\\"productName\\":\\"DIRECT_PAY\\",\\"sendTime\\":\\"1615369922839\\",\\"productDesc\\":\\"DIRECT_PAY\\",\\"price\\":\\"1\\",\\"notifyId\\":\\"IM20210310175202565\\",\\"orders\\":\\"DIRECT_PAY0.0120319vICfy57lZguTX0zDiUOnjpFYVksdahm\\",\\"payChannel\\":\\"wxpay\\",\\"currency\\":\\"CNY\\",\\"partnerId\\":\\"2031\\",\\"paySuccessTime\\":\\"2021-03-10 17:51:59\\"}","reqUrl":"http://pay.pay-test.wanyol.com/notify/receiver","requestId":"9vICfy57lZguTX0zDiUOnjpFYVksdahm","signType":"MD5","successResult":"OK","timeStamp":1615369922840,"version":"1.0"}', 'notify_count': 1, 'notify_response': 'OK', 'notify_handler': 'httpNotifyJsonHandler', 'fail_strategy': 'failStrategyHashImpl', 'status': 'SUCCESS', 'success_time': datetime.datetime(2021, 3, 10, 17, 52, 3), 'insert_time': datetime.datetime(2021, 3, 10, 17, 52, 3), 'update_time': datetime.datetime(2021, 3, 10, 17, 52, 3), 'extra_json': None, 'remark': None}
2021-03-10 17:52:00,329-INFO-lib.common_biz.fiz_assert-141-通知成功
2021-03-10 17:52:04,272-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.52.44.235', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-03-10 17:52:04,514-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-03-10 17:52:04,557-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]成功
2021-03-10 17:52:04,557-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]
2021-03-10 17:52:04,788-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]成功
2021-03-10 17:52:04,788-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]
2021-03-10 17:52:04,811-INFO-lib.common.db_operation.mysql_operation-118-成功连接到测试专用环境-MYSQL：{'host': '10.52.54.122', 'user': 'opay', 'pwd': '_UI7xHubrhTPIP1J_T4so7SU7ATCrUzm7cAh6TdBLLHWUSQUQqD8p45xVQzV3Czi', 'port': '33066'}
2021-03-10 17:52:04,811-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `test_account`.`account_test_env`
2021-03-10 17:52:04,822-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=0
2021-03-10 17:52:04,825-INFO-lib.common_biz.find_merchant_info-28-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601'}
2021-03-10 17:52:04,826-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-03-10 17:52:04,829-INFO-lib.common_biz.find_key-109-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-03-10 17:52:04,830-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no, plan_id FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=1
2021-03-10 17:52:04,833-INFO-lib.common_biz.find_merchant_info-41-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601', 'plan_id': '120877'}
2021-03-10 17:52:04,834-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-03-10 17:52:04,836-INFO-lib.common_biz.find_key-109-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-03-10 17:52:05,249-DEBUG-lib.common.session.http.protobuf-35-无需加入随机字节，标志位：1
2021-03-10 17:52:05,249-INFO-lib.common.session.http.protobuf-36-传入的参数：header {
  version: "16.0"
  token: ""
  model: "PAAM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "RvDf0ABC"
  sign: "CC955D1FC09386124482A6FCFD00E6BA"
  sdkVer: "220"
  appVerison: "260"
  ip: "0.0.0.0"
  openId: "E28C3DF751C14EFAB2D9893DC83058B6c7ab335d8d6d240bca10fdf35c0be85e"
  brandType: "OPPO"
  mobileos: "12"
  androidVersion: "28"
}
partnerOrder: "HF202103101752059999210548450911905075320712"
partnerId: "72724313"
country: "CN"
payType: "wxpay"
channel: "wxpay"
payAmount: "0.01"
currency: "CNY"
product {
  name: "NO_LOGIN_PAY"
  desc: "\350\257\235\350\264\271\345\205\205\345\200\274"
  count: "1"
  priceLocal: "0.01"
}
returnUrl: "finzpay://nearme.atlas.com"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/receiver"
partnerParams: ""
extendParams: ""
businessChannelId: ""
walletVersion: "0"
oppoucVersion: "80407"
screenInfo: "FULL"

2021-03-10 17:52:05,740-INFO-lib.common.session.http.protobuf-58-返回的参数isSuccess: true
code: "0000"
msg: "{\"appid\":\"wx4eb8c6906f493312\",\"noncestr\":\"68b44d7ecced4886870f04fcf2a778e9\",\"packageNm\":\"Sign=WXPay\",\"partnerid\":\"1287273601\",\"prepayid\":\"wx10175208400353a03bb2339a9f5faa0000\",\"sign\":\"116DE4844F7F903BC4EA106AE04736D4\",\"timestamp\":\"1615369928\"}"
data {
  payRequestId: "RM20210310175208AZLYKC3A2D771432"
  payUrl: "{\"appid\":\"wx4eb8c6906f493312\",\"noncestr\":\"68b44d7ecced4886870f04fcf2a778e9\",\"packageNm\":\"Sign=WXPay\",\"partnerid\":\"1287273601\",\"prepayid\":\"wx10175208400353a03bb2339a9f5faa0000\",\"sign\":\"116DE4844F7F903BC4EA106AE04736D4\",\"timestamp\":\"1615369928\"}"
  parameters: "0000"
}

2021-03-10 17:52:05,741-INFO-wxpay-scarlet-52-回调参数：<xml><transaction_id><![CDATA[6761131274206601095208031562]]></transaction_id>
<nonce_str><![CDATA[TgDsfZ7EtSvYWN2RijaVFBpK4x5ucAhC]]></nonce_str>
<bank_type><![CDATA[OTHERS]]></bank_type>
<openid><![CDATA[oCg6Xt8NvRi7jGuap_5B6XdY4oYk]]></openid>
<sign><![CDATA[0E7251DA3523F649152D07C4DA94B1F1]]></sign>
<fee_type><![CDATA[CNY]]></fee_type>
<mch_id><![CDATA[1259634601]]></mch_id>
<cash_fee><![CDATA[1]]></cash_fee>
<out_trade_no><![CDATA[RM20210310175208AZLYKC3A2D771432]]></out_trade_no>
<appid><![CDATA[wx93eea96ecc33f168]]></appid>
<total_fee>1</total_fee>
<trade_type><![CDATA[APP]]></trade_type>
<result_code><![CDATA[SUCCESS]]></result_code>
<attach><![CDATA[TEST]]></attach>
<time_end><![CDATA[20210310175205]]></time_end>
<is_subscribe><![CDATA[N]]></is_subscribe>
<return_code><![CDATA[SUCCESS]]></return_code>
</xml>
2021-03-10 17:52:05,835-INFO-wxpay-scarlet-56-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-03-10 17:52:05,835-INFO-wxpay-scarlet-58-回调解析成功
2021-03-10 17:52:05,845-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:52:05,845-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "15759078167120"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "VnSrL6mxhdzRUopy3iOvYcPgCBjQIasT"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 17:52:05,932-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "16e7e2985b364a95b7a52fa647bc7d4a"
s_p: "OENyeUZtR3N4MGdPUGozenZQWHBmWGRKdnFoZUZCMFFQVVpQT1dtYTZNZ0I3a1BlRHYxR3NJbkhSSjhPS0FvNlZFaVhmbW5vRFVnT2lEVExpRDE4OHlWaFdGbm95QlloRmZ6N3JhSlpKQVFBd3BaWUJ0QUdtSWZ1dXB3dDl4TnNhRjZBTzVHYlRFc2M1SVg3SVg4Y25EbmdJaHMxMzNobWxNWno2ZTlVaHZDcnRjQWRoMUpscVNJUEtFZnlLN1cxZkhuNWczaWVrb2Q1aXVkZTFscmxKNFE5VUlwN2VCYktNUHo4Z0JqWkRxeVFXYjAxak1QQmxFTjRONWJoVG9JV0RhUHJwc1ZyRjNjMTlwRE9keWo4ODZ1c2gxMFRhUWZQOWdFUUlPMmVEZkwzd1NZSEFhSkZxNXY0NXVNUkZ4SWgyYzllQ3N1YXdLa3BQTDNPZkJrSmJjWHdyZXM2MmlCT1ZsSDdXSUt3VHNaeWEwWDlwRnByendVWDlrRlhrUThlYWRMd1dsdWE2UFJnNGZkZ3RDaG0xUFVINkR1WmNyZEY1NzFMTklDVGFpaE5scFBFc05MQ1J6QkVJM1h3aTl6YkNJZkFmaENYMEhGV1FQMFhtdFp3ank1TFlBZDhMa3BWRHdtUW1NTExDSlpnN1pCTzBSUHU5bTM4TWJiNlpwb0E5anA2TVZ6cGZ6TEMwVjF6eGpLM0J1d2tsZFJQYTlUS3l1NTdYZFFNSmZWVVAwU0lNeFp6WWNBZ2dYNDZrZzNnUmFmSU9LaHBDdmxISkdpNFlrcEpLMUw0cExYdWVhRnVEcXpxelVDSVhhSnpLcVh4QlZEMVJiaFBIMTNyb2tVVTVtSXVNN2U3ZlZBZUhFcTZvNEpTVndPcXpPTXZrVG5iU1VwQXpGOUFlMkxWYU9IMnlOYUNBaHJKZ3pDcjByY1Q4VFdZajZaM2syODhUQkk5NklGb3ZBU2szZVVjV3c1eDBDQXBvOVNhOXNTdERjaUluOVNKV0M0dTF3ZlgzNmJqekRGbDE4a1RpSUhya0ZQZ1RJYTB0dUh5VERhMjlDUzU="
m_p: "hWYr5ghl9N9h5WGF24vcX7Vsv21A9Ec6x8JyvX3Ah7Cg3DihR9xQfrGryfvC6367"
e_t: "1615477928626"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 1001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199706
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199705
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199704
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199703
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199702
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199692
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099683
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099682
    type: 2
    minCousume: 1300
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 11
}
userinfo {
  username: "156******06"
}

2021-03-10 17:52:05,932-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:52:05,932-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "5.0"
  t_p: "16e7e2985b364a95b7a52fa647bc7d4a"
  imei: ""
  model: "PBDM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "1GsInHRJ"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
payrequestid: "RM20210310175208AZLYKC3A2D771432"
version: "260"
queryType: "no_login"

2021-03-10 17:52:05,974-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "2002"
  msg: ""
}
successStatus: "1086"
origAmount: "0.01"

2021-03-10 17:52:05,975-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select * from `db_pay_notify_1`.`notify_info` where request_id = "HF202103101752059999210548450911905075320712"
2021-03-10 17:52:05,978-INFO-lib.common_biz.fiz_assert-135-通知表信息详情：{'id': 151958, 'app_id': 10003, 'app_name': 'opaycenter(测试环境)', 'app_sub_id': '72724313', 'notify_id': 'e19f907197244e048efe5c22be45020a', 'request_id': 'HF202103101752059999210548450911905075320712', 'notify_protocol': 'HTTP', 'notity_detail': '{"appId":10003,"appSubId":"72724313","httpReqType":"POST","reqContent":"{\\"country\\":\\"CN\\",\\"partnerOrder\\":\\"HF202103101752059999210548450911905075320712\\",\\"payResult\\":\\"OK\\",\\"systemOrder\\":\\"RM20210310175208AZLYKC3A2D771432\\",\\"sign\\":\\"L/K5EE1cI8/sSt3k9swy2/NM7g0/fTaOACWjZAAH3qRXIlBeBIbcC/dAuhK/tsi4f8Hf5QFmkKmbk6vTu5CZQEgc/oe9/NS/hx6M59BGOZE25zjXXQXmKSI119XhpTarjr9SyBgNKTwaH3DVGkig3J5PPApD6Z0iU6DqK/T+Bx0=\\",\\"notify_url\\":\\"http://pay.pay-test.wanyol.com/notify/receiver\\",\\"productName\\":\\"NO_LOGIN_PAY\\",\\"sendTime\\":\\"1615369928544\\",\\"productDesc\\":\\"话费充值\\",\\"price\\":\\"1\\",\\"notifyId\\":\\"IM2021031017520816\\",\\"orders\\":\\"NO_LOGIN_PAY0.0172724313HF202103101752059999210548450911905075320712\\",\\"payChannel\\":\\"wxpay\\",\\"currency\\":\\"CNY\\",\\"partnerId\\":\\"72724313\\",\\"paySuccessTime\\":\\"2021-03-10 17:52:05\\"}","reqUrl":"http://pay.pay-test.wanyol.com/notify/receiver","requestId":"HF202103101752059999210548450911905075320712","signType":"MD5","successResult":"OK","timeStamp":1615369928544,"version":"1.0"}', 'notify_count': 1, 'notify_response': 'OK', 'notify_handler': 'httpNotifyJsonHandler', 'fail_strategy': 'failStrategyHashImpl', 'status': 'SUCCESS', 'success_time': datetime.datetime(2021, 3, 10, 17, 52, 9), 'insert_time': datetime.datetime(2021, 3, 10, 17, 52, 9), 'update_time': datetime.datetime(2021, 3, 10, 17, 52, 9), 'extra_json': None, 'remark': None}
2021-03-10 17:52:05,978-INFO-lib.common_biz.fiz_assert-141-通知成功
2021-03-10 17:52:10,856-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.52.44.235', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-03-10 17:52:11,132-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-03-10 17:52:11,176-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]成功
2021-03-10 17:52:11,176-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]
2021-03-10 17:52:11,391-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]成功
2021-03-10 17:52:11,391-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]
2021-03-10 17:52:11,423-INFO-lib.common.db_operation.mysql_operation-118-成功连接到测试专用环境-MYSQL：{'host': '10.52.54.122', 'user': 'opay', 'pwd': '_UI7xHubrhTPIP1J_T4so7SU7ATCrUzm7cAh6TdBLLHWUSQUQqD8p45xVQzV3Czi', 'port': '33066'}
2021-03-10 17:52:11,423-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `test_account`.`account_test_env`
2021-03-10 17:52:11,438-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=0
2021-03-10 17:52:11,441-INFO-lib.common_biz.find_merchant_info-28-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601'}
2021-03-10 17:52:11,442-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-03-10 17:52:11,445-INFO-lib.common_biz.find_key-109-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-03-10 17:52:11,445-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no, plan_id FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=1
2021-03-10 17:52:11,448-INFO-lib.common_biz.find_merchant_info-41-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601', 'plan_id': '120877'}
2021-03-10 17:52:11,449-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-03-10 17:52:11,452-INFO-lib.common_biz.find_key-109-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-03-10 17:52:11,843-INFO-lib.common.db_operation.mysql_operation-59-执行sql语句：update `db_order_0`.`autorenew_sign_info` set status = "UNSIGN" where ssoid = "2076075925" and partner_code = "2031" and renew_product_code = "20310001" and pay_type = "wxpay"
2021-03-10 17:52:11,856-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:52:11,856-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "6.0"
appKey: "1234"
count: 10000
order: "28262115214511"
ip: "121.13.218.236"
type: "1"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "QFj6MfT7qodClt4Y0hBaZDsAEwviXuON"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 17:52:11,915-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "adfa82725a224727aab4466bdb872ef7"
s_p: "VjVSeU1CMVc1MWZ4SDA5NWRKMmJwUkp0SEU3bTg1eHFEVlRQV3pHMDYySUZ6Vk5FSE1EMzNtbWxLQ3g1M0tkT0pCNjBaN0Q2RzZkYzJQa1VoVVhPRTlOYlV3QVFaOXlkczFta2JtVElhR2w5SjkxeWVaMExXQW9Na2dtOVMxR0tRaFJ4V0I1VEpjV25VTElEcFpVZUFtRjVvNTVSc3ZVOTZEbFRmZnA4WUF6ZGpYeG4zR1owQXlMdU44UU9IZ05BRzlPbDZNZmdjaWowa2FKWE55V2ZwcHh1WjRzRVpDQ2laZk9OcVRvanNzOXJyZExtZXd6bGpTQXE5V1JoREFyTWJ5VHRUbHZPNUJZTk55c1NyMDRyMjdXZTkySmw0TGdYNzYyUlBqeWtjTHRGOExrWTlxcUtYSEhiUVRwem85WUV3SFhtcmttRHpNNzUzMjdKNG1kSEF4ZjNKdnIycDVlZlB4d2ZWSDBLeDA1UmtoQnd6MGxIbUtnUDVxNWVySmlzejJTZDBDdUlneE1TQlE3QkNmYlY2aFUzRGZ5ZjlZUUNuVFlBaktodFpETklqTU9rYTdRQ2tsYVhrNGR4ck1vRXVzQ002Y1hhTXN1alM5SFVOVzBnQXd4QmYwd01uTjRSSmhLclRuTU0wcmpNN0dYQ3FDYkJDVjVpWlFWSFNLU21uVUljdzZBNUNLR2w1Z29mU1JlZ2ZOSTd2NnR3U0xmZGVZaEszcmhNVGhlQ0dXYW1pcWVqdXZEYnh5eUJVRjhqdG4wd1VYUG84UjBFZFJyQllmN3YwcW55WUhWSmc4ZlRXVTVVZkxSVFcwWnhCR3VSR09iZzRHSnVBdm93QVJlUGVTRTBpS0VhMk9rSmNGQ3g5NzdxMk9qSTQ0cHg4QkZBMWlFTVRCU0ExdGU1R0RHQlMyWjJ5TmZLQ0F2a2UySTE4VjhTOXdKV0lYamxqamRTaGpIbTZxMmVYYkV6Q1RueWpOVzFoMnRGODZDbnB6aExjWGllMThYd0VsM0owdlRzZlpXdHhRV3hlNGY4Wmw4Q0U4Yk96R0NpZXpIMmdOeEM="
m_p: "4Sy5n9vzANe8Z6JrG6vQbmAUQXA0j9ZE0utq5DY3T38sgs44SZImB8hDNe30856w"
e_t: "1615477934633"
balanceResult {
  baseresult {
    code: "0000"
    msg: ""
  }
  balance: "0"
  vouBalance: "0"
  vouNum: 0
}
userinfo {
  username: "156******06"
}

2021-03-10 17:52:11,918-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:52:11,918-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "1.0"
  t_p: "adfa82725a224727aab4466bdb872ef7"
  imei: ""
  model: "PCRM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "D33mmlKC"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: ""
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
transType: "SIGN"
renewProductCode: "20310001"
signPartnerOrder: "3y1TqgdEYsUauRVlpXDAILiP2Gx8C07J"
type: "wxpay"
amount: "0.0"
oriAmount: "0.0"
ip: "58.252.5.75"
sign: "X/Wp8TXyXZB8gVFM36JcBpHUXzJ64Ft0s/t8cM4FjF6H+qW3C5lm07q4hc5j9ElwFT9y0HlOrwBf7/MqNxhfUMg3TtEtu9tEsbayauyBbAoxbQ5Aal6m0giH3tXpgPdlIcIHqiLDRVGSGuTZFaMtpD6gushd75aXmNJjouYvzVZmlOCeWH4H8WPV2yzVlpM9u+/ZjiVfHLXRmjfvQHyc1jKEUdgNWTkVhPfWZHneAs10yREaNIgFJuoa6R/mfVbNu4XyVkKYAi9vuriEjIh/3nVlL7EPeLcLLDE68Dtk4WH+QQFkFrmT3MPfEEeejrabeV48fs8mBIQUwSVS5E7LPhib2WN1vvYw8DOdUk5FxOf1cbF0oB3vzkeGx01NF+/6Qgx/zd/tQbsCyg7uMvV+LwC/9BAJQVM5HTq6W1PBqEAcNvddzjrEL1cwDHR9rm1Xs97r5nb3R+Gf2ua5Oql2+sTteTUB8bBWJgH3f7jZrfdQF3Aa3+ahggkS14L4RvMz"
signAgreementNotifyUrl: "http://pay.pay-test.wanyol.com/notify/receiver"
appId: ""
isNeedExpend: "0"
basepay {
  channelId: ""
  notifyurl: "http://pay.pay-test.wanyol.com/notify/receiver"
  productName: "ONLY_SIGN"
  productDesc: "ONLY_SIGN"
  partnercode: "2031"
  appversion: "260"
  currencyName: "\344\272\272\346\260\221\345\270\201"
  rate: 1.0
  partnerorder: "3y1TqgdEYsUauRVlpXDAILiP2Gx8C07J"
}
screenInfo: "FULL"

2021-03-10 17:52:12,235-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "e1430cf2531b391302fa4bcceb35453d67740977fe064decccd2052e2844fb891615369934qhI6CIL1E9tchzgrzuw6x06itRhdTHg0"
}
payrequestid: "SN202103101752148286362212026083"
transType: "SIGN"
signType: "APP"

2021-03-10 17:52:12,235-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT contract_code from `db_order_0`.`autorenew_sign_record` where pay_req_id = "SN202103101752148286362212026083"
2021-03-10 17:52:12,239-INFO-wxpay-scarlet-97-回调参数：<xml><change_type>ADD</change_type>
<contract_code>SN202103101752141518534854447511</contract_code>
<contract_expired_time>2022-03-10 17:52:12</contract_expired_time>
<contract_id>2000473971</contract_id>
<mch_id>1259634601</mch_id>
<openid>oCg6Xt8NvRi7jGuap_5B6XdY4oYk</openid>
<operate_time>2021-03-10 17:52:12</operate_time>
<plan_id>120877</plan_id>
<request_serial>607718017341918124</request_serial>
<result_code>SUCCESS</result_code>
<return_code>SUCCESS</return_code>
<return_msg>OK</return_msg>
<sign>2FA2C1BC48C0818C4D7399E4D099AA20</sign>
</xml>
2021-03-10 17:52:12,326-INFO-wxpay-scarlet-101-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-03-10 17:52:12,327-INFO-wxpay-scarlet-103-回调解析成功
2021-03-10 17:52:12,337-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:52:12,337-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "44510578208843"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "QOZLa0PmkDdzEgWptq8415CM3boKN6Ge"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 17:52:12,413-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "ffefc58579a0450a80a7d958085b705c"
s_p: "OE5DUkxVdlFwY3hEOUJhTVlrbjJoM2ZBaHhCbzU2UllxQjZ5ZEZlNnEyaDQ2NjZOQTJFNDhuVzdncmVtdkNVcjR3NXhYRUVaNEhQTGJkck1UNld1U3AxV0o4Y0FKdm1PZFgzbWNzZVRjT3gyZU85V0ppNDNkTDdkZFptRks4V1NmV243dnFwQUp6STFObzVEQURuajVRQUxRbzRFNWtlbzRvU0UyRkhGcXNQeE9YZEdxcGp1Z3NWc1NLdmdBU0hRbGhaYkh1aXdlSlhibm1kSmd6eEpmQURTNnljNU85QWt1Mm53M25Da0NoM3BvZGpFYWVNblp4RmFNYWV4aXlzVlJITWtDRW1oVHJsQVlQSjZZd2RDeG9kY0lTYW4xMTZoajZ2aXFHbXBrNE85dHpoalBEUDFQTlpKR2FUc0g3ZVBrajlhSHBySEhKSFNUMG5DMTcycDJZOGFWeTl4cUdQTm1LMUt3WXowcVMzVHRMb3FPQ3BPbmFyNWpMNVNsUlJoTHh5TWtkNjBkamZkeTNFYkpxSktza2hxaWVieGVnNDJRS0VDUXZENzJPUkRjUDlsc1RWaVNjTHp2OXJ0cGVNMHRCMDhVbXhnMkFhdnNPb3d6cEFOdXVESnFyZHJDTkwwbVdmN1JobVZwaVhFRlY3TEZvZmoyVHNMc1JBRFBFQVZXaDhYT0hQTHBTbjdBS3JSbU9heGhBaVZaSDFsdWxENUhnczF4VElDaHpOaTJvck9PeDZCbVdiMWhxblduSnFZWlRlVVhWbTQ5N0ZEWGJoZ1Jta203WEV6TWkxNTZoYnlKUm5Pelhaa2dhd1ZIMmRlVzVLdGg2MUVNUnVyZHNjQWxJSkdvMUtVRXlYWHhCdU10VG0ydkYybmU5andBTHl6ZHBHOUlEaWhEM041UVBlUTZVSFJOdGo0SVc2R0w0MVZrbFVIbktCQW1TWEs3eVY5azl6SGdvQWg1UTZNUXRIcXNTU3E1bFRobkpXNjF6N2Uzd1Z6dE5sck5iVUJCSmc5TnZBWGRIUkVrdk1SU3V3RHhwVW43MzhuZzFyOUFJU00="
m_p: "7we32RXSg93BRmQMmez8sE30uHAl7T50KK2NoioTo3GG31XfPynXaC2r4w666A83"
e_t: "1615477935103"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 1001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199706
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199705
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199704
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199703
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199702
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199692
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099683
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099682
    type: 2
    minCousume: 1300
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 11
}
userinfo {
  username: "156******06"
}

2021-03-10 17:52:12,413-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:52:12,413-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "5.0"
  t_p: "ffefc58579a0450a80a7d958085b705c"
  imei: ""
  model: "PBDM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "x2eO9WJi"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
payrequestid: "SN202103101752148286362212026083"
version: "260"
queryType: "SIGN"

2021-03-10 17:52:12,443-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "succ"
}

2021-03-10 17:52:12,444-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select status from  `db_order_0`.`autorenew_sign_info` where ssoid = "2076075925" and partner_code = "2031" and renew_product_code = "20310001" and pay_type = "wxpay"
2021-03-10 17:52:12,447-INFO-lib.common_biz.fiz_assert-161-签约信息表记录正确
2021-03-10 17:52:12,447-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select status from `db_order_0`.`autorenew_sign_record` where pay_req_id = "SN202103101752148286362212026083"
2021-03-10 17:52:12,451-INFO-lib.common_biz.fiz_assert-176-签约记录表记录正确
2021-03-10 17:52:12,451-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select * from `db_pay_notify_1`.`notify_info` where request_id = "3y1TqgdEYsUauRVlpXDAILiP2Gx8C07J"
2021-03-10 17:52:12,455-INFO-lib.common_biz.fiz_assert-135-通知表信息详情：{'id': 151959, 'app_id': 10003, 'app_name': 'opaycenter(测试环境)', 'app_sub_id': '2031', 'notify_id': '8c269a323b884938a1a3e3ca0047ed28', 'request_id': '3y1TqgdEYsUauRVlpXDAILiP2Gx8C07J', 'notify_protocol': 'HTTP', 'notity_detail': '{"appId":10003,"appSubId":"2031","httpReqType":"POST","reqContent":"{\\"ssoid\\":\\"2076075925\\",\\"country\\":\\"CN\\",\\"partnerOrder\\":\\"3y1TqgdEYsUauRVlpXDAILiP2Gx8C07J\\",\\"notifyType\\":\\"SIGN\\",\\"payType\\":\\"wxpay\\",\\"agreementNo\\":\\"2000473971\\",\\"sign\\":\\"GeDxeqSEfT9uv1yyDGUZ+/8UrH9/tcAqnN7RCrc6RDxYzsh3i9FpJvYbFRgYrWYZnfpbI6l7lMHiXap9mlTcqeGZAJIruTm8vgXwxCOU6DkgyoBV7kjysDYvil5nR3EcAyYDbpzB0uyWLRbAvW8+GERSRP8+ZKa+ovSixTzdnPY=\\",\\"notifyId\\":\\"IM20210310175215852\\",\\"currency\\":\\"CNY\\",\\"partnerId\\":\\"2031\\",\\"renewProductCode\\":\\"20310001\\",\\"status\\":\\"OK\\"}","reqUrl":"http://pay.pay-test.wanyol.com/notify/receiver","requestId":"3y1TqgdEYsUauRVlpXDAILiP2Gx8C07J","signType":"MD5","successResult":"OK","timeStamp":1615369935038,"version":"1.0"}', 'notify_count': 1, 'notify_response': 'OK', 'notify_handler': 'httpNotifyJsonHandler', 'fail_strategy': 'failStrategyHashImpl', 'status': 'SUCCESS', 'success_time': datetime.datetime(2021, 3, 10, 17, 52, 15), 'insert_time': datetime.datetime(2021, 3, 10, 17, 52, 15), 'update_time': datetime.datetime(2021, 3, 10, 17, 52, 15), 'extra_json': None, 'remark': None}
2021-03-10 17:52:12,455-INFO-lib.common_biz.fiz_assert-141-通知成功
2021-03-10 17:52:20,360-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.52.44.235', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-03-10 17:52:20,609-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-03-10 17:52:20,712-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]成功
2021-03-10 17:52:20,712-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]
2021-03-10 17:52:20,961-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]成功
2021-03-10 17:52:20,961-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]
2021-03-10 17:52:20,983-INFO-lib.common.db_operation.mysql_operation-118-成功连接到测试专用环境-MYSQL：{'host': '10.52.54.122', 'user': 'opay', 'pwd': '_UI7xHubrhTPIP1J_T4so7SU7ATCrUzm7cAh6TdBLLHWUSQUQqD8p45xVQzV3Czi', 'port': '33066'}
2021-03-10 17:52:20,983-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `test_account`.`account_test_env`
2021-03-10 17:52:20,999-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=0
2021-03-10 17:52:21,002-INFO-lib.common_biz.find_merchant_info-28-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601'}
2021-03-10 17:52:21,004-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-03-10 17:52:21,007-INFO-lib.common_biz.find_key-109-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-03-10 17:52:21,008-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no, plan_id FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=1
2021-03-10 17:52:21,011-INFO-lib.common_biz.find_merchant_info-41-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601', 'plan_id': '120877'}
2021-03-10 17:52:21,012-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-03-10 17:52:21,015-INFO-lib.common_biz.find_key-109-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-03-10 17:52:21,375-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT app_key FROM `db_platform_gateway`.`server_app_info` WHERE app_id = '100002'
2021-03-10 17:52:21,379-INFO-lib.common_biz.find_key-96-查询到秘钥信息：BB36C34EB6644AB9694315AF7D68E629
2021-03-10 17:52:21,379-INFO-lib.common.session.http.http_json-38-http://pay-gateway.pay-test.wanyol.com/gateway/nearme.account.query
2021-03-10 17:52:21,379-INFO-lib.common.session.http.http_json-39-传入的参数：{'app_id': '100002', 'service': 'nearme.account.query', 'format': 'JSON', 'charset': 'UTF8', 'sign_type': 'MD5', 'sign': '877BF418AD5B798C106434983DDB683A', 'timestamp': '2021-03-10 17:52:21', 'version': '1.0', 'bizContent': "{'ssoid': '2076075925'}"}
2021-03-10 17:52:23,922-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'data': {'ssoid': '2076075925', 'timeStamp': 1615369946645, 'useableBalance': 0, 'totalGiveBalance': 0, 'createTime': 1612151249000, 'chargeBalance': 0, 'freezeBalance': 0, 'giveBalance': 0}, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功', 'success': True}
2021-03-10 17:52:23,941-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:52:23,941-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "99563933194019"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: ""
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 17:52:24,011-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "bef597ee80ed40afb081d60def9791b0"
s_p: "cVRBVTZvdDJlVWFmME0xWlpwNkRHc1cxUDk1N2VubXQ2RTNQVG10ajBQbnowdXhHaVVxVWl4anhGdldFTkEzYkszUGJIUUhBeHJlZFJESTI5T1VwVzdHNFRCbjhCWUhWUDh1ZXdzUU5Fakh4RWFMMDdDMEdDSk1aQWtjQTd5bEd0SUtXOGliWkV4RlJoNTVGM0I2VUhyNjdXV3ZuUVJHMHdWcm9FWTNGMHZGdWMyRTdab3d0WGZLWm9HTXBsamYxUWVOaVVlcFJoY0t5RWYxMFI0enJnSnpZZG1KNHdMM0RtRWpYeE1lcTNDbVI1NHg5VTkxMW54UWg1ZmRIS2dNUmZvMzZWQW1vWlRldzVYZFYwdUU0U2lLbnRtR0xrZzc4WUp4cFF6SVIwU0lnSThLS2Z6OHlabDI1WW9VbThQM2poNlBFVnlGNXFYVlhkamFqTEJmVG82dzNodTdPZmpCMmJTQ0pKUE1HZXQ4djZDMExLTzJta1M3SDZLcmZVOEM3UldpbjFOMHlCdmI1SmR4T0VGQnRnaWE5UTVTZ21SRG9INU11Y2RIeDdhZk8xYUtTSGxLZTZRRTBramZVYkZjNVFoSmNWTEdQQmhoQ1NoRVFqOTd1T2pJZldsYXh2UzZpbkRtVnhVU21xeDN4U0lVWGU0eWdTcFVsM0N2VHVGUUFJbENMVmlHRnUzWnBrNGNEb2h4T0tJTllZSGIzTnRvSHlvWE1tbnJTTXFlTkFMeDRkUlQwbXprc1Y2blh0Nll5c1VxYmd4d2NwM0xvZWlzUDJ2NHZQYXdwRGlScEZ4NWl4Q3RPbnIxcXBsS0NYSm9mVGM2TUtDVzcxUWFJUEFQeFpROFIxWk5VVkpNSkJMc1ppZml3WnRCd3RURzlJZjdNQ3lGUFdzRk9hR0JiUThRYm0xUmlhM2p0OEFmd1BXbTRxN0REWTBVRktOc2hVWXZKMjBWYnI4VFNSV2VYR2E4djJMRzd0T2JXT0MzbWdiOG1HUkRsUnd3MGZKTkJCdDZuMmFFbENnR2p6dWJjVncwSk55UGtpMDNFZVBCR2lzNjE="
m_p: "2IA984jM55anST3Fa05459hW7sz7mhGBV8Ws7SM5632k0UfbYZwU4QlZlEYMK3i9"
e_t: "1615477946711"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 1001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199706
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199705
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199704
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199703
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199702
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199692
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099683
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099682
    type: 2
    minCousume: 1300
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 11
}
userinfo {
  username: "156******06"
}

2021-03-10 17:52:24,017-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:52:24,017-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "12.0"
  t_p: "bef597ee80ed40afb081d60def9791b0"
  imei: ""
  model: "PCRM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "BYHVP8ue"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: ""
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
type: "wxpay"
amount: "0.05"
cardno: ""
cardpwd: ""
ext: ""
basepay {
  channelId: ""
  notifyurl: "http://pay.pay-test.wanyol.com/notify/receiver"
  productName: "KB\342\200\224RECHARGE_PAY"
  productDesc: "KB\342\200\224RECHARGE_PAY"
  partnercode: "2031"
  appversion: "1.1.0"
  currencyName: "\345\217\257\345\270\201"
  rate: 1.0
  partnerorder: "null"
}
sign: "f0Yt3vFSmT54AWuzySq/9UswrD+1yGE3Fla099lZWUfvF8kBbuQShqaDamzYFDgua2jSkK6f6t38ehSEUc8MRwJRczony14uUvg/toJo/msJWGeco7npGAVNxPWri0wYoKO6Y1MvwetJz6H6jhjeszP3ufrU/V4c0LzS8iLoaC22MvlzbXMkt9h6ar8O4RoHjHPsz/n3hTnECowDDvIdTaJIm2RyFU/SgObkde6rE58conMTQVy5cVG9YlO6VClFO91aubaOwXuZOyd0/Gz7t8IPVaZ/0oAwzc1ZfVRCBukDEp+pvyg+U9mPYX9OKe5EjGNcbIJ1xieEgDDH+uQRnw=="
ip: "58.252.5.75"
isNeedExpend: "0"
appId: ""
payTypeRMBType: "0"
tradeType: "common"
screenInfo: "FULL"

2021-03-10 17:52:24,400-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "{\"appid\":\"wx93eea96ecc33f168\",\"noncestr\":\"935fd2bf998347498be81dcdc64aec26\",\"packageNm\":\"Sign=WXPay\",\"partnerid\":\"1259634601\",\"prepayid\":\"wx10175227057392e04f8e1b8b903e770000\",\"sign\":\"5D2617FC0BE47612EA36EC1CDDFFC221\",\"timestamp\":\"1615369947\"}"
}
payrequestid: "KB202103101752262076075925637262"
model: ""

2021-03-10 17:52:25,402-INFO-wxpay-scarlet-52-回调参数：<xml><transaction_id><![CDATA[9096033116556400252533439558]]></transaction_id>
<nonce_str><![CDATA[4iP1oTSHVWRFIpyA5bfXs2dKrCMazm9k]]></nonce_str>
<bank_type><![CDATA[OTHERS]]></bank_type>
<openid><![CDATA[oCg6Xt8NvRi7jGuap_5B6XdY4oYk]]></openid>
<sign><![CDATA[33ECE956CB59D9C5FCAAEB3E05E35CA4]]></sign>
<fee_type><![CDATA[CNY]]></fee_type>
<mch_id><![CDATA[1259634601]]></mch_id>
<cash_fee><![CDATA[1]]></cash_fee>
<out_trade_no><![CDATA[KB202103101752262076075925637262]]></out_trade_no>
<appid><![CDATA[wx93eea96ecc33f168]]></appid>
<total_fee>5</total_fee>
<trade_type><![CDATA[APP]]></trade_type>
<result_code><![CDATA[SUCCESS]]></result_code>
<attach><![CDATA[TEST]]></attach>
<time_end><![CDATA[20210310175225]]></time_end>
<is_subscribe><![CDATA[N]]></is_subscribe>
<return_code><![CDATA[SUCCESS]]></return_code>
</xml>
2021-03-10 17:52:25,518-INFO-wxpay-scarlet-56-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-03-10 17:52:25,518-INFO-wxpay-scarlet-58-回调解析成功
2021-03-10 17:52:25,536-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:52:25,536-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "20120858237530"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "fPuswctNC98YkAoGDIg2nyTZKpBlxF0H"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 17:52:25,616-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "47c975948a5248adbed502d6802f8c8a"
s_p: "OGxRMXVaRmk3T3Y5NmN0bHk0ZXJ6elpmcEpYSXJSWmdNUjljNVEzS25mekxVTTZ3MU1xTEN4SjIzUVZHcUVyUUttUUozQWlGNG5kMUNiM3ZOUWtKUmdOd3I3dzdLYUlmREpjOU5mVUNobU9CZGVLaEU2VnlOT0pCYkNBTHBMVnpodGluTTRnRFNGYlpNakpkeGdLa01oODVRUUZmc0txdEQ1a2VmeG9kT3JPdk9peXp6ODU2RFQ5QzFHTFJDUnRIZDZLekgyWnk0c0ZoN1JxcHNsWTVQTWlST05tOUNPckRWZXZlUXdqdzRJNjlFY25pbEdQQXhoaFVGNkdCajJ1aXJ1UUE3SjY1T24yNXIxM2xGWktid3lqZU9RbHk4a2ZDN1Z6U1Frbm5QR1ZMM1kyemVjbkJUUHV4TklmNzlRaXJwR3dpU3FuUmtJSk1UbU5MVW1IRnoybTd6b0g5Nzd2eEZFRXpSbWtJeEJpTVp0dHU5MzViRjNVb05uVG1NNTVtQmh1QVlEYTAzbGhsSE5FYjVSclFFa3hRUmFDcHd4U05iZ0xqcGJtV2pac1NTM3hjeTBEWGQ0clZLcm5uRWRUSjVXUlJlTkFoek5UNFdsMkJTZlJpYlAwQlJidUlZc3RNcjRtUldOdHdpbGxxcFNSOWNTcEc1REpUTWdZNVVCaW10VjlQcjNqbG9TaHd5RFZ3UFN0U3NJNFNHMjVyWjBvamRTTjRSNXlRNHFBM1kySkI5dTRZa3FFTFAwUDJNcFJTM0JzdEJ3RDVnZ3ZNT2hYV3J0ZWJXWU1uVnJhRGtocVZDbGZLYUdqbkRpcGxPRE5wZjNxZVl3VVVpWE1CV3Q2VWNSUnl2d3dGbHI1TkxFWVBHSkozV0VLWVVOZEF6RmZJSUxBa1RKQ1lrYWE1V2FrMnd0SFhObzJCbk8ycG9xUnQxYjRScWFhNmdYS2M0M05JS0gzcmwyNzdIdHczN0t5ZDdXMGo1bzhFYlhRcTBibVJlNUY4Y01qQ2NudVFya3BzZmF6aWlyRVhESlc3N084TFVURHpUek9rT1JxcGVxRkY="
m_p: "QWOf5eJuJn5v8HilxJH7nEkm40Je6zAL5AfN8AgIwkd1EHG3heK0Iyglk7Y99r6b"
e_t: "1615477948308"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0.05"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 1001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199706
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199705
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199704
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199703
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199702
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199692
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099683
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099682
    type: 2
    minCousume: 1300
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 11
}
userinfo {
  username: "156******06"
}

2021-03-10 17:52:25,616-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:52:25,616-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "5.0"
  t_p: "47c975948a5248adbed502d6802f8c8a"
  imei: ""
  model: "PBDM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "gDSFbZMj"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
payrequestid: "KB202103101752262076075925637262"
version: "260"
queryType: "PAY"

2021-03-10 17:52:25,662-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "2002"
  msg: ""
}
successStatus: "1086"
origAmount: "0.05"

2021-03-10 17:52:25,663-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT app_key FROM `db_platform_gateway`.`server_app_info` WHERE app_id = '100002'
2021-03-10 17:52:25,667-INFO-lib.common_biz.find_key-96-查询到秘钥信息：BB36C34EB6644AB9694315AF7D68E629
2021-03-10 17:52:25,667-INFO-lib.common.session.http.http_json-38-http://pay-gateway.pay-test.wanyol.com/gateway/nearme.account.query
2021-03-10 17:52:25,667-INFO-lib.common.session.http.http_json-39-传入的参数：{'app_id': '100002', 'service': 'nearme.account.query', 'format': 'JSON', 'charset': 'UTF8', 'sign_type': 'MD5', 'sign': '2609661EEA7231021759721C2A3865D0', 'timestamp': '2021-03-10 17:52:25', 'version': '1.0', 'bizContent': "{'ssoid': '2076075925'}"}
2021-03-10 17:52:25,687-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'data': {'ssoid': '2076075925', 'timeStamp': 1615369948412, 'useableBalance': 5, 'totalGiveBalance': 0, 'createTime': 1612151249000, 'chargeBalance': 5, 'freezeBalance': 0, 'giveBalance': 0}, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功', 'success': True}
2021-03-10 17:52:25,687-INFO-recharge-52-可币充值成功
2021-03-10 17:52:25,689-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `db_order_4`.`order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "KB202103101752262076075925637262"
2021-03-10 17:52:25,695-INFO-lib.common_biz.fiz_assert-34-订单详情：{'id': 15359, 'pay_req_id': 'KB202103101752262076075925637262', 'notify_id': '9096033116556400252533439558', 'partner_order': 'NV203113782656752021031017522660479628869578039350', 'amount': 5, 'refund': 0, 'contents': 'KB—RECHARGE_PAY', 'products_name': 'KB—RECHARGE_PAY', 'counts': 1, 'ssoid': '2076075925', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': '1259634601', 'ip': '58.252.5.72', 'mac': '', 'model': 'PCRM00', 'app_package': 'com.example.pay_demo', 'app_ver': '1.1.0', 'sdk_ver': '260', 'partner_code': '2031', 'notify_url': 'http://pay.pay-test.wanyol.com/notify/receiver', 'status': 'OK', 'channel_id': '', 'channel_type': 'NATIVE', 'pay_type': 'wxpay', 'direct_pay': 'KEBI', 'game_type': 'WANGYOU', 'present_amount': 0, 'original_amount': 5, 'discount_info': '', 'extra': None, 'remark': 'new way', 'request_time': datetime.datetime(2021, 3, 10, 17, 52, 28), 'success_time': datetime.datetime(2021, 3, 10, 17, 52, 25), 'modify_time': datetime.datetime(2021, 3, 10, 17, 52, 28), 'trade_type': 'CZ', 'kebi_spent': 0, 'voucher_amount': 0, 'voucher_info': None, 'country_code': 'CN', 'currency': 'CNY', 'openid': None, 'brand_type': 'OPPO', 'mobile_os_ver': '17', 'platform': '', 'screen_info': 'FULL', 'voucher_id': None, 'factor': None, 'paid_amount': None, 'paid_usd': None, 'combine_order': 'N'}
2021-03-10 17:52:25,695-INFO-lib.common_biz.fiz_assert-45-订单表信息记录正确
2021-03-10 17:52:25,697-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `pay_tradeorder_4`.`trade_order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "KB202103101752262076075925637262"
2021-03-10 17:52:25,703-INFO-lib.common_biz.fiz_assert-55-trade订单详情：{'id': 8045, 'pay_req_id': 'KB202103101752262076075925637262', 'partner_order': 'NV203113782656752021031017522660479628869578039350', 'partner_code': '2031', 'products_name': 'KB—RECHARGE_PAY', 'ssoid': '2076075925', 'origin_amount': 5, 'amount': 5, 'kb_amount': 0, 'voucher_amount': 0, 'present_amount': 0, 'refund': 0, 'country_code': 'CN', 'currency': 'CNY', 'pay_type': 'wxpay', 'channel_id': '', 'channel_type': 'NATIVE', 'direct_pay': 'KEBI', 'trade_type': 'CZ', 'combine_type': 'PRIMARY', 'status': 'OK', 'notify_url': 'http://pay.pay-test.wanyol.com/notify/receiver', 'attach': '', 'extra_info': '', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': '1259634601', 'ip': '58.252.5.72', 'mac': '', 'openid': None, 'model': 'PCRM00', 'brand_type': 'OPPO', 'app_package': 'com.example.pay_demo', 'app_ver': '1.1.0', 'sdk_ver': '260', 'mobile_os_ver': '17', 'platform': '', 'screen_info': 'FULL', 'remark': None, 'request_time': datetime.datetime(2021, 3, 10, 17, 52, 27), 'success_time': datetime.datetime(2021, 3, 10, 17, 52, 28), 'modify_time': datetime.datetime(2021, 3, 10, 17, 52, 28)}
2021-03-10 17:52:25,703-INFO-lib.common_biz.fiz_assert-63-trade订单表信息记录正确
2021-03-10 17:52:25,704-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `virtual`.`tb_recharge202103` WHERE ssoid = '2076075925' and rechargeOrder = "KB202103101752262076075925637262"
2021-03-10 17:52:25,708-INFO-lib.common_biz.fiz_assert-83-tb_recharge订单详情：{'id': 26, 'ssoid': '2076075925', 'imei': '', 'rechargeTime': datetime.datetime(2021, 3, 10, 17, 52, 28), 'amount': 5, 'status': 'OK', 'rechargeOrder': 'KB202103101752262076075925637262', 'partnerId': '2031', 'rechargeChannel': '46', 'appPackage': 'com.example.pay_demo', 'model': '', 'clientIp': '', 'source': None, 'updateTime': datetime.datetime(2021, 3, 10, 17, 52, 28)}
2021-03-10 17:52:25,708-INFO-lib.common_biz.fiz_assert-91-tb_recharge订单表信息记录正确
2021-03-10 17:52:51,325-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.52.44.235', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-03-10 17:52:51,571-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-03-10 17:52:51,615-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]成功
2021-03-10 17:52:51,615-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]
2021-03-10 17:52:51,828-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]成功
2021-03-10 17:52:51,828-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]
2021-03-10 17:52:51,843-INFO-lib.common.db_operation.mysql_operation-118-成功连接到测试专用环境-MYSQL：{'host': '10.52.54.122', 'user': 'opay', 'pwd': '_UI7xHubrhTPIP1J_T4so7SU7ATCrUzm7cAh6TdBLLHWUSQUQqD8p45xVQzV3Czi', 'port': '33066'}
2021-03-10 17:52:51,843-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `test_account`.`account_test_env`
2021-03-10 17:52:51,855-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=0
2021-03-10 17:52:51,859-INFO-lib.common_biz.find_merchant_info-28-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601'}
2021-03-10 17:52:51,859-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-03-10 17:52:51,862-INFO-lib.common_biz.find_key-109-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-03-10 17:52:51,863-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no, plan_id FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=1
2021-03-10 17:52:51,866-INFO-lib.common_biz.find_merchant_info-41-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601', 'plan_id': '120877'}
2021-03-10 17:52:51,867-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-03-10 17:52:51,870-INFO-lib.common_biz.find_key-109-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-03-10 17:53:32,418-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.52.44.235', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-03-10 17:53:32,737-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-03-10 17:53:32,780-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]成功
2021-03-10 17:53:32,781-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]
2021-03-10 17:53:32,999-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]成功
2021-03-10 17:53:33,000-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]
2021-03-10 17:53:33,022-INFO-lib.common.db_operation.mysql_operation-118-成功连接到测试专用环境-MYSQL：{'host': '10.52.54.122', 'user': 'opay', 'pwd': '_UI7xHubrhTPIP1J_T4so7SU7ATCrUzm7cAh6TdBLLHWUSQUQqD8p45xVQzV3Czi', 'port': '33066'}
2021-03-10 17:53:33,022-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `test_account`.`account_test_env`
2021-03-10 17:53:33,033-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=0
2021-03-10 17:53:33,037-INFO-lib.common_biz.find_merchant_info-28-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601'}
2021-03-10 17:53:33,037-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-03-10 17:53:33,040-INFO-lib.common_biz.find_key-109-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-03-10 17:53:33,041-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no, plan_id FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=1
2021-03-10 17:53:33,044-INFO-lib.common_biz.find_merchant_info-41-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601', 'plan_id': '120877'}
2021-03-10 17:53:33,045-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-03-10 17:53:33,048-INFO-lib.common_biz.find_key-109-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-03-10 17:53:33,407-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT app_key FROM `db_platform_gateway`.`server_app_info` WHERE app_id = '100002'
2021-03-10 17:53:33,410-INFO-lib.common_biz.find_key-96-查询到秘钥信息：BB36C34EB6644AB9694315AF7D68E629
2021-03-10 17:53:33,410-INFO-lib.common.session.http.http_json-38-http://pay-gateway.pay-test.wanyol.com/gateway/nearme.account.query
2021-03-10 17:53:33,410-INFO-lib.common.session.http.http_json-39-传入的参数：{'app_id': '100002', 'service': 'nearme.account.query', 'format': 'JSON', 'charset': 'UTF8', 'sign_type': 'MD5', 'sign': '8F3C8D1A4B86F9FB2BD1F4252CAFAEC3', 'timestamp': '2021-03-10 17:53:33', 'version': '1.0', 'bizContent': "{'ssoid': '2076075925'}"}
2021-03-10 17:53:33,452-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'data': {'ssoid': '2076075925', 'timeStamp': 1615370016357, 'useableBalance': 5, 'totalGiveBalance': 0, 'createTime': 1612151249000, 'chargeBalance': 5, 'freezeBalance': 0, 'giveBalance': 0}, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功', 'success': True}
2021-03-10 17:53:33,463-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:53:33,463-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "75175097080890"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "fbesz9DUSR27jA0lp1akGYxg8KuLMBC5"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 17:53:33,538-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "dc9eeb917d054bab95613c03d8be5ceb"
s_p: "Vlp0SzJ4Wnh6MFh5RXY5emkyYlJuc1FLSk5GNkJKMzMzN010STd0WVI3WGRBMnNmM0c4YXZqMms0QXdNc2s4d1BMM0c1NTRvdzlNTkZzeU1yT3lZdUh5aU91akw4T0h1RGNBRDF1UVNsTjFxd05tNmFYc0psQ0x2OHBRdHRWdjZtYXpLWEt3NWg1eWcxUDVzTWZvN1hnVjlRbmc4SkpTN1BOc1pMQTA0c2NyZFp1eG1BQVdFVEtWTjZGb0VlU2JXa0M5NGI5RENHdU8zSEFGYkZ2WHlZM0VWZFRPTERPcnN2TlRiNnZ3VUVSYTJlQWdYY0hKRlVOMlU1d2lkSXZteUk4c1NqYkloQzRQdHhadFp0VTFmUVJRR2ZsRWZJcWo3RHV0aGFGd0NhRzNla3pIbngwNUpINGRXS1h1VDZsdDhmNlFtR3Z3R2NSRGNPdXdBRXRuTUJ5TFQySDNNM0RjWHNjeE51YlNkeXJIb2U4a0pVb3QwZGNCQ0xHSlB1TlBKb3M1SmxoN1VZeFo2OXRJalRxRktOMFFRQWlrMnI5VGc1TENZdVB0WktYMjF1TmY3SEZtNnlrNENwZnR1bmpvRGsxV3RrUUUzejZZMENCUVVJZkJMdVE2M21iR0l4TU51YlZCMGxSUzZmNHBOUEhZaFhMdUp6TTNlTG9oQWhKUjZ1N280NlVLMXFMR084VTM3V0thcndRdzZBQTk0T3lzVzc1eDVlbDlscEU1dmd6R3RoTWNuTFZWcEx2SG9zT1pmY3FLTmU0V2hSNzBVN1NwTlhCaDk3MjNLaEFPNmlLSlc1YnU2dkZWZ2tMdkhsMjdHU050anVaNUhRek1vVWVhcXM2akx2YW5sam4xSWxWUjR4UkNiQVVwM282a3FZQUw2SzlCWGppVEJBbG50ejZwUVF1cVRtSldVeGNzWlZ2YnJkNzJrMXNSNzVmZUU0V2tVTzZJN3VJejdiWkYyVEt6VVZlSDJ6RWdVdE55bWg1RkZLZDY3UkhJQXpYTkJwcHRvRlVIeUZ1MUJVRXNjbmg3VWtvZXpMaGNLREZhQmxCS3c="
m_p: "1S2Hjf49d701U90zBt49uibYs91q6h3siS6kz9bkm4Sj7Gvmg843Tkdb5nvA9y8l"
e_t: "1615478016417"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0.05"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 1001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199706
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199705
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199704
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199703
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199702
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199692
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099683
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099682
    type: 2
    minCousume: 1300
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 11
}
userinfo {
  username: "156******06"
}

2021-03-10 17:53:33,557-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:53:33,557-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "12.0"
  t_p: "dc9eeb917d054bab95613c03d8be5ceb"
  imei: ""
  model: "PCRM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "sf3G8avj"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: "42E1F48352C04B80910A7BBB7FDDE8022d5334806a8d9b083e64c9324c08c040"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
price: 5
count: 1
productname: "ONLY_KB_SPEND"
productdesc: "ONLY_KB_SPEND"
partnerid: "2031"
callBackUrl: "http://pay.pay-test.wanyol.com/notify/receiver"
partnerOrder: "b50MRLDt7G9deXvFcO3sqYgU4QPW68Co"
channelId: ""
ver: "1.1.0"
source: "PaySDK"
attach: ""
sign: "N8MS6CVo+Ef/9xq9vAeYwdmqblwUIQU821VkkJl/L6UdHNQ0H6WN7/pXJL8j/bYZ3LmgR02yuDAKGiCGf+3hNOaLQZV0vTLgSiHvH/t0a5Cbsl3XJOUF8LoK6+IocZ2ShfwK24aWpTpywidxqrq1M3jRorUnzYbLXixxC/njaAk="
order: "9242334739986"
ip: "120.197.152.211"
factor: ""

2021-03-10 17:53:33,711-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "\346\210\220\345\212\237"
}
rpay: "0"
gpay: "0"

2021-03-10 17:53:33,711-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT app_key FROM `db_platform_gateway`.`server_app_info` WHERE app_id = '100002'
2021-03-10 17:53:33,714-INFO-lib.common_biz.find_key-96-查询到秘钥信息：BB36C34EB6644AB9694315AF7D68E629
2021-03-10 17:53:33,715-INFO-lib.common.session.http.http_json-38-http://pay-gateway.pay-test.wanyol.com/gateway/nearme.account.query
2021-03-10 17:53:33,715-INFO-lib.common.session.http.http_json-39-传入的参数：{'app_id': '100002', 'service': 'nearme.account.query', 'format': 'JSON', 'charset': 'UTF8', 'sign_type': 'MD5', 'sign': '8F3C8D1A4B86F9FB2BD1F4252CAFAEC3', 'timestamp': '2021-03-10 17:53:33', 'version': '1.0', 'bizContent': "{'ssoid': '2076075925'}"}
2021-03-10 17:53:33,735-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'data': {'ssoid': '2076075925', 'timeStamp': 1615370016643, 'useableBalance': 0, 'totalGiveBalance': 0, 'createTime': 1612151249000, 'chargeBalance': 0, 'freezeBalance': 0, 'giveBalance': 0}, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功', 'success': True}
2021-03-10 17:53:33,745-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:53:33,745-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "15252068190994"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: ""
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 17:53:33,819-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "9917db39d6fa453b8f06f01861933c79"
s_p: "OFFmR0xJaTc4WWc0eTAzeE9sV2d2NUc5UkRVWXVtUTFWcDNJYXZRbkVXZnc0V3hmYXRqSERiSWxYVU9KcVVlVVFvRE9iYktnalhsUGN2SFk0MkZaT3lOMjNlMFZGVTRHRXIxNkFCdE55dUNGRnZkY2NCa2RnT2pNZzFjSkhiTUtjSzFqS0pZbFV1QzVoSkdPek8zbGE3TDRLZzZEZkhVbm82MjVOZnppVFNCbW4wS3JrTnVMbFRuT3FKQjdoeHFKdHZvcU5ITDJRZ1cwUDA2SDE5UmE1RWtGcEk1SW1IZEVRTlJ5dDBJMWEzdHpocHRyTGdxWFM0dHNyQ3QyVHhQWmdOaE5SaXhqV3JnamN4ZUhWemw2aVZ5eDRhaFVIYnBSRUVRREkxdW1BaDN2eUdDREtZeXRIdGFscGNkdkFuQ2E4SU5reUhVMURGZ2RUSVZIcGVsT2VIOVFpczJOaXI1ZUtqTGRMT1VWazBLUkpyRVg2dHRHdU5uNlJIM1lpR3pJcGtjWjNmVTRWdDJScjhFbHRLc0dEVXFST05tS1lFR25DTlRoNFMxSTlSYzdwU1ZPM09ZZVdLQzUzZ2trUWlIcGdLbmt4VTRET1JsVkhuSTlneUhEZ3NxT0lOQk1STXBKZ01vZGphS3RsVU9vMFlmZmMzN1ppSVF0Mzg2YTNNZmFjcjVNNDY0RURuUGFheXhDVjhaNmNKWjF1WVI4NDd6czFhRnNVWDZuTDlUalRKMnNTQXpsMkltajVoUGc2emFOekxJekJBak1XUEdJVEFvWG9PcHNjVkM5NndoUVFMVU9YRW94Sjd5VW9lSFpGWEdtQzNmeVp5WTFsanJqbVF2QW0wM0ZwTThlc2puZWk4a1V5dmNCYjU2VWk3QnRJd3c3Nk5uWFpoeTZOQ1pKUjdYSTduYXh1Z3ZjMGx3VTFzd3lwblA2c2dWN3A4VHdtd2ZITTlxSGZUQ000ZWZyOVR4T3JmWE5xendSOHpLeEp4Tzc1WXpLVVNtQmN0NE1xZnNoTWlGa2pxRjFWZ1VmazR1cXZTQmlKbzhiRnRpYml3SVY="
m_p: "4gPU4u0Np68G3SiDP59WTi61A987oF5S32284S4318Q20v7ZGNd299868q1UvS7d"
e_t: "1615478016696"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 1001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199706
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199705
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199704
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199703
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199702
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199692
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099683
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099682
    type: 2
    minCousume: 1300
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 11
}
userinfo {
  username: "156******06"
}

2021-03-10 17:53:33,821-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:53:33,821-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "12.0"
  t_p: "9917db39d6fa453b8f06f01861933c79"
  imei: ""
  model: "PCRM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "OyN23e0V"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: ""
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
type: "wxpay"
amount: "0.01"
cardno: ""
cardpwd: ""
ext: ""
basepay {
  channelId: ""
  notifyurl: "http://pay.pay-test.wanyol.com/notify/receiver"
  productName: "KB\342\200\224RECHARGE_PAY"
  productDesc: "KB\342\200\224RECHARGE_PAY"
  partnercode: "2031"
  appversion: "1.1.0"
  currencyName: "\345\217\257\345\270\201"
  rate: 1.0
  partnerorder: "null"
}
sign: "KFfJm674tndUNe++dtBAFfv+j/90xM7fbITADiO2Gm/eVuc0iRggQVG35MKMaT9aBEJlUdL6SwGVjfGOCAIGgGHhDeJjFo407Pso5ceJrMQtHtVmXB6tsnFt7wUsvMwTKTFQKAMEh6Nh3z20qjoN7Fqs6UFD6Q+TUg1DUAwgX8HKIDfjUcKdW1JCJcBBc5FIBsDwo8HXSrqjpNsgsCBNPEfJ91TZPquw+5lG9l/p7I9V7AYS7wALrppUW7yiLYx2tHERexRLb8bOoPXnAVIhBWdDQ8QA8n9tkCito1h3Z8QRdm18pCA/vAeVHRV6JNmkWPZL2Wz6nKfm920L6xamqQ=="
ip: "58.252.5.75"
isNeedExpend: "0"
appId: ""
payTypeRMBType: "0"
tradeType: "common"
screenInfo: "FULL"

2021-03-10 17:53:34,170-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "{\"appid\":\"wx93eea96ecc33f168\",\"noncestr\":\"50b3630ec59145de826c15baa768d499\",\"packageNm\":\"Sign=WXPay\",\"partnerid\":\"1259634601\",\"prepayid\":\"wx10175337012851fa50da4ccb92443d0000\",\"sign\":\"4F361907B2FB4A1CB9FF9C598322E0A2\",\"timestamp\":\"1615370017\"}"
}
payrequestid: "KB202103101753362076075925425472"
model: ""

2021-03-10 17:53:35,167-INFO-wxpay-scarlet-52-回调参数：<xml><transaction_id><![CDATA[6955243684431172632817375975]]></transaction_id>
<nonce_str><![CDATA[o5tlqkBvr941HLUyTY6JgSfP3KjsbWz0]]></nonce_str>
<bank_type><![CDATA[OTHERS]]></bank_type>
<openid><![CDATA[oCg6Xt8NvRi7jGuap_5B6XdY4oYk]]></openid>
<sign><![CDATA[CAFE3E6192780ECCBF5A73F32A849643]]></sign>
<fee_type><![CDATA[CNY]]></fee_type>
<mch_id><![CDATA[1259634601]]></mch_id>
<cash_fee><![CDATA[1]]></cash_fee>
<out_trade_no><![CDATA[KB202103101753362076075925425472]]></out_trade_no>
<appid><![CDATA[wx93eea96ecc33f168]]></appid>
<total_fee>1</total_fee>
<trade_type><![CDATA[APP]]></trade_type>
<result_code><![CDATA[SUCCESS]]></result_code>
<attach><![CDATA[TEST]]></attach>
<time_end><![CDATA[20210310175335]]></time_end>
<is_subscribe><![CDATA[N]]></is_subscribe>
<return_code><![CDATA[SUCCESS]]></return_code>
</xml>
2021-03-10 17:53:35,274-INFO-wxpay-scarlet-56-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-03-10 17:53:35,275-INFO-wxpay-scarlet-58-回调解析成功
2021-03-10 17:53:35,285-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:53:35,285-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "91788133237752"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "xdSz7C2o1vV4cYuP38gJXHkFf6TKBwea"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 17:53:35,361-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "a94cf16efb1a41159603e131c1ff39ef"
s_p: "ZE5YcGJRSFhzR20ybHgxTk5GR01oWWt1MkVnU0JJdGxjVEtRaUM0T3pRT0J5MXZQSDhDSUVOZk9PM0licmxrYzVUMXkxYm5zMURHZ1lra3NLWDZBdXpxcXZSdEMyNDBpOHNtYWkzZksyaDlxR3Fjb3VJdXJpQWtIcmZYZTE0VW13OEdpQXRDWVFudTFEemRJT0RyR05vNmpUMzRQaUp1b2hNNWhhSWdFcUxoSEd2a3A3bENSTTFWSTN1d21XRjI2WURlTkxzSXMyQXp4dUVTNVZDQml5ZWhmQzB3QXBJYjdoMm1iRlV1V1FCR0VnQUxzVjVGb0toY3piVmJMV3BYSlFPZmVWZGRUYU8zSkJqTFNKRGNPWnVDM1V5bWczV2ppQ3JmbTJIcHBUeXZUZzRqcFE5eFRZRHJZZ1MxMGw4eG4zS044TDBZMndFQUNHTkd1b0U1d1lRWjlZTnFybmdQeDJzR3pDc3hqNTV5bkc4Z3NjTTRQaUJPOVVQZUlTTjB0SzhPQWZkaW5rQ2cxMmdyNm80c3JYMmRScXdSdzJNam5ON1UzaHVLNmJrRnlMV0pjRWRrSDFvNFJwbFFQWnJjYUZYemROTmNoQ0tidVBDZndFWVZkdFgxVlNYV2V5Zm5oeXpqTnVZTGQwUzFZZk5DZ3dxRkVYTnp0dnFSQWNrTjhhWU83UkZldEtaWmdGalU1NE8zdnU5ODk4Q2lVWjJZNjNYcmUxN08zbWtnMGdVeFlrc3R1cVZRa0ZmRkRWaDB3MTFIWHhHZEZQcFRPZ0ZLZVlMMEFraVF5M0NuZnhTY0pPdzhXUkRQcHNwY1JWNGRkeUFUT1pLVGxhSXdjZ3JucmNSYkFGeHN5WFlJc3lqZVhjbG9XeTdFdzlYZGZKc24wMlo4WWNoRVM5YWZTRlFZTUhrVXBFaGVYRURyUmszV2VVM0dLV2M3Vk05bmJRVHNHOWdEd3V6bGZncG1uT0U5UU42U1pRMnRRU3YyMkRZdU1uVEZUZkhSYzc1aDl4Q3h0MWQyMHNnVmR0dEFRb1ZpcGZlaFZzMFlDeGc2OGV2WkE="
m_p: "1v8651HXRtnG3Vq6a3fBAQkZ3w3nu512U73H3vF87G3V0B09Tnx0AC6g2x4c5203"
e_t: "1615478018242"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0.01"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 1001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199706
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199705
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199704
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199703
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199702
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199692
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099683
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099682
    type: 2
    minCousume: 1300
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 11
}
userinfo {
  username: "156******06"
}

2021-03-10 17:53:35,361-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:53:35,362-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "5.0"
  t_p: "a94cf16efb1a41159603e131c1ff39ef"
  imei: ""
  model: "PBDM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "mai3fK2h"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
payrequestid: "KB202103101753362076075925425472"
version: "260"
queryType: "PAY"

2021-03-10 17:53:35,410-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "2002"
  msg: ""
}
successStatus: "1086"
origAmount: "0.01"

2021-03-10 17:53:35,411-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT app_key FROM `db_platform_gateway`.`server_app_info` WHERE app_id = '100002'
2021-03-10 17:53:35,415-INFO-lib.common_biz.find_key-96-查询到秘钥信息：BB36C34EB6644AB9694315AF7D68E629
2021-03-10 17:53:35,415-INFO-lib.common.session.http.http_json-38-http://pay-gateway.pay-test.wanyol.com/gateway/nearme.account.query
2021-03-10 17:53:35,415-INFO-lib.common.session.http.http_json-39-传入的参数：{'app_id': '100002', 'service': 'nearme.account.query', 'format': 'JSON', 'charset': 'UTF8', 'sign_type': 'MD5', 'sign': '1C2F2B8F754015645198AC7A2DC42F93', 'timestamp': '2021-03-10 17:53:35', 'version': '1.0', 'bizContent': "{'ssoid': '2076075925'}"}
2021-03-10 17:53:35,435-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'data': {'ssoid': '2076075925', 'timeStamp': 1615370018348, 'useableBalance': 1, 'totalGiveBalance': 0, 'createTime': 1612151249000, 'chargeBalance': 1, 'freezeBalance': 0, 'giveBalance': 0}, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功', 'success': True}
2021-03-10 17:53:35,435-INFO-recharge-52-可币充值成功
2021-03-10 17:53:35,436-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `db_order_4`.`order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "KB202103101753362076075925425472"
2021-03-10 17:53:35,440-INFO-lib.common_biz.fiz_assert-34-订单详情：{'id': 15361, 'pay_req_id': 'KB202103101753362076075925425472', 'notify_id': '6955243684431172632817375975', 'partner_order': 'NV203113782656752021031017533685531602266819477785', 'amount': 1, 'refund': 0, 'contents': 'KB—RECHARGE_PAY', 'products_name': 'KB—RECHARGE_PAY', 'counts': 1, 'ssoid': '2076075925', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': '1259634601', 'ip': '58.252.5.72', 'mac': '', 'model': 'PCRM00', 'app_package': 'com.example.pay_demo', 'app_ver': '1.1.0', 'sdk_ver': '260', 'partner_code': '2031', 'notify_url': 'http://pay.pay-test.wanyol.com/notify/receiver', 'status': 'OK', 'channel_id': '', 'channel_type': 'NATIVE', 'pay_type': 'wxpay', 'direct_pay': 'KEBI', 'game_type': 'WANGYOU', 'present_amount': 0, 'original_amount': 1, 'discount_info': '', 'extra': None, 'remark': 'new way', 'request_time': datetime.datetime(2021, 3, 10, 17, 53, 38), 'success_time': datetime.datetime(2021, 3, 10, 17, 53, 35), 'modify_time': datetime.datetime(2021, 3, 10, 17, 53, 38), 'trade_type': 'CZ', 'kebi_spent': 0, 'voucher_amount': 0, 'voucher_info': None, 'country_code': 'CN', 'currency': 'CNY', 'openid': None, 'brand_type': 'OPPO', 'mobile_os_ver': '17', 'platform': '', 'screen_info': 'FULL', 'voucher_id': None, 'factor': None, 'paid_amount': None, 'paid_usd': None, 'combine_order': 'N'}
2021-03-10 17:53:35,441-INFO-lib.common_biz.fiz_assert-45-订单表信息记录正确
2021-03-10 17:53:35,441-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `pay_tradeorder_4`.`trade_order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "KB202103101753362076075925425472"
2021-03-10 17:53:35,445-INFO-lib.common_biz.fiz_assert-55-trade订单详情：{'id': 8047, 'pay_req_id': 'KB202103101753362076075925425472', 'partner_order': 'NV203113782656752021031017533685531602266819477785', 'partner_code': '2031', 'products_name': 'KB—RECHARGE_PAY', 'ssoid': '2076075925', 'origin_amount': 1, 'amount': 1, 'kb_amount': 0, 'voucher_amount': 0, 'present_amount': 0, 'refund': 0, 'country_code': 'CN', 'currency': 'CNY', 'pay_type': 'wxpay', 'channel_id': '', 'channel_type': 'NATIVE', 'direct_pay': 'KEBI', 'trade_type': 'CZ', 'combine_type': 'PRIMARY', 'status': 'OK', 'notify_url': 'http://pay.pay-test.wanyol.com/notify/receiver', 'attach': '', 'extra_info': '', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': '1259634601', 'ip': '58.252.5.72', 'mac': '', 'openid': None, 'model': 'PCRM00', 'brand_type': 'OPPO', 'app_package': 'com.example.pay_demo', 'app_ver': '1.1.0', 'sdk_ver': '260', 'mobile_os_ver': '17', 'platform': '', 'screen_info': 'FULL', 'remark': None, 'request_time': datetime.datetime(2021, 3, 10, 17, 53, 37), 'success_time': datetime.datetime(2021, 3, 10, 17, 53, 38), 'modify_time': datetime.datetime(2021, 3, 10, 17, 53, 38)}
2021-03-10 17:53:35,445-INFO-lib.common_biz.fiz_assert-63-trade订单表信息记录正确
2021-03-10 17:53:35,446-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `virtual`.`tb_recharge202103` WHERE ssoid = '2076075925' and rechargeOrder = "KB202103101753362076075925425472"
2021-03-10 17:53:35,450-INFO-lib.common_biz.fiz_assert-83-tb_recharge订单详情：{'id': 27, 'ssoid': '2076075925', 'imei': '', 'rechargeTime': datetime.datetime(2021, 3, 10, 17, 53, 38), 'amount': 1, 'status': 'OK', 'rechargeOrder': 'KB202103101753362076075925425472', 'partnerId': '2031', 'rechargeChannel': '46', 'appPackage': 'com.example.pay_demo', 'model': '', 'clientIp': '', 'source': None, 'updateTime': datetime.datetime(2021, 3, 10, 17, 53, 38)}
2021-03-10 17:53:35,450-INFO-lib.common_biz.fiz_assert-91-tb_recharge订单表信息记录正确
2021-03-10 17:53:35,450-INFO-lib.common.session.http.http_json-38-http://pay.pay-test.wanyol.com/voucher/grantSingle
2021-03-10 17:53:35,450-INFO-lib.common.session.http.http_json-39-传入的参数：{'amount': '1', 'appId': '2031', 'appSubName': 'AUTO_TEST', 'blackScopeId': '', 'checkName': 'TEST_ACCOUNT', 'configId': '', 'count': 1, 'country': 'CN', 'currency': 'CNY', 'expireTime': '2022-03-10 17:53:33', 'ext1': '', 'ext2': '', 'maxAmount': 1, 'name': 'AUTO_TEST', 'partnerOrder': 'AUTO202103101753359886414366263748027154172287', 'ratio': '', 'remark': '', 'salePrice': 0, 'scopeId': '7104f7bc23e445daba913a5a96a264ac', 'settleType': 1, 'sign': '91261CD9D8C654CE197F6942E49841AA', 'ssoid': '2076075925', 'subScopeId': '', 'timezone': '', 'type': 2, 'useableTime': '2021-01-01 00:00:00'}
2021-03-10 17:53:35,495-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'batchVouCreateResList': [], 'msg': 'success', 'code': '0000', 'vouIdList': ['62199708'], 'batchId': ''}
2021-03-10 17:53:35,505-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:53:35,505-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "39506766021817"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "4nrQGwPYHbDpCVX6auSdmLJhRe97Toq3"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 17:53:35,576-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "c8cd35112f2b40819d83c865621a92f2"
s_p: "cjRLcGltOThFMHZuUm1vdUZUeEVqUWtDdnhBTGtGTmxlZTBFSGxQQkpjalJEcm9CV0xTaEVmZmZNNTFxQlNPaUtudVBtRWVWeWp1YVRrdENUbDMwcXg0bVk2N3d2STN5YVB2SmVKSVU4TlYxRkJRR2oyMnpuMDhKYUd5NkVUaktRaDdKVnRLS1NKclBRNHo2TmtWWjNtdU9ZNmo2NWdlQ0ZKeEM2MTdsSkdSdUVRSXVwdndDdzZWUjVUOFZZQnVseU0wTFZMOXVuc2g5T1VsM1c0Yk9odVBPQXNkN04xWWwyQ0JvYmZjc0RtWUVMR210YVVxdWV3WXRpVDBYQUVNM1NuUDB0RzAzNDFGSTBRWTdCbFZaelBlcVZvc2l2MFdQRzVlNzNWRG1EZmhraW0ydnUwb0FjODlpbzNhbkdBNDJMNXlhRjQ4d0owZ2xOVDJvNjVGU1JYb3JFUVlKNmliZURsWXA2SnYzakI4dG1jNE9sYlFxQkk0bVduQjkxWHR0NkIzbDBOV09VMXpGSlptZEdYajVpNjV6dEpNRWxDZU5TVHMwVlkyN3N3Z0NHS0sxY3RpaGlZZkpBNDFLdFp0TUxLR0tMeWJhSTR6UjlZRHlvelpzNXFrQWE5bGtjS1Vla1R6T1VtN3g1c3FWeEVid0JHNGJoZVVnSkxyZTAzVDU5bHBJNEpKY3paV1ZJT0t0c0xranJEczNJYU9ia3Y5Zk5haDRlcEpDMU82dmNrdmIxSzdibkpHT2tsb3ZBTEtTVlVMZG9RUDdxNW9abGFDT0owOUQ2SUFLSGFTaE1EMm10YTlJV3BLQXJFbFRscGk2N21iVWZYRklLejNWU2RHVlFieGJxUXdpWG9jTnI2bmdzZVlORFp0NzF5dFNaaG1VZ3FKYXFyVlo5OGNBWUhkUVoyY2h6cVNoa1YxMnJpNnRabmZ1NVY3Q2tEZ0xvZUF4ZlhpdUZ1amNHbzh3NHgwakw2RmxUUGpCbUI2aHBpNEhRNFJ1c3ZPU0VhUXpXcXRDZzBrMUl2cVdPV1ZRM0tLVm50eU93bTNvNEVnNGZqM1Q="
m_p: "7as0e3964B16TZ3O7tEvY5u027yPlXdSy3u5R54CQfh0IbiQ3I98Kl40Th8crde2"
e_t: "1615478018461"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0.01"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 1001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199708
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199706
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199705
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199704
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199703
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199702
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199692
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099683
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099682
    type: 2
    minCousume: 1300
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 12
}
userinfo {
  username: "156******06"
}

2021-03-10 17:53:35,596-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:53:35,596-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "12.0"
  t_p: "c8cd35112f2b40819d83c865621a92f2"
  imei: ""
  model: "PDCM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "vJeJIU8N"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: ""
  brandType: "OPPO"
  mobileos: "16"
  androidVersion: "29"
}
type: "wxpay"
amount: "0.01"
cardno: ""
cardpwd: ""
ext: ""
basepay {
  channelId: ""
  notifyurl: "http://pay.pay-test.wanyol.com/notify/receiver"
  productName: "RECHARGE_SPEND"
  productDesc: "RECHARGE_SPEND "
  partnercode: "2031"
  appversion: "208006"
  currencyName: "CNY"
  rate: 1.0
  partnerorder: "m8hPSjCQOfxFAJrg0t63E5UcHpRdGokv"
}
sign: "MMPntHcu3sVFMpaSSDHqJzztyJXa14o1dEZZPbih9Ax5JKgha5qnXbh16uAvkEnE9av3Pp7yiIbwbeX7gALYvP63THSBxGFfEUoV6LFKTAGtdC80QjkplBlPiWPZaEkuxsbIjZxuTeYiXnmxvN0b+/ql3wjtfqMIF4DQX+zS8sIdAbXrwbYHhEp7hE1uKD9/VmGI+HCxxE63pkbIYt8Q7FoMqwJ2CYZxiKfU3g4zBWGQW1Jez3+QpGdYRud1aQrektFkL2/NCXNHGjapVMJ975an9tbrUBinwuq4Wf25p9fhQPEfh5XEErQU6lCUSTV/BF1Px95wzh6AELekE6rCng=="
ip: "183.238.170.71"
expendRequest {
  header {
    version: "12.0"
    t_p: "c8cd35112f2b40819d83c865621a92f2"
    imei: ""
    model: "PDCM00"
    apntype: "1"
    package: "com.example.pay_demo"
    r_v: "vJeJIU8N"
    ext: ""
    sdkVer: 260
    country: "CN"
    currency: "CNY"
    openId: ""
    brandType: "OPPO"
    mobileos: "16"
    androidVersion: "29"
  }
  price: 3
  count: 1
  productname: "RECHARGE_SPEND!=AMOUNT"
  productdesc: "RECHARGE_SPEND!=AMOUNT"
  partnerid: "2031"
  callBackUrl: "http://pay.pay-test.wanyol.com/notify/receiver"
  partnerOrder: "m8hPSjCQOfxFAJrg0t63E5UcHpRdGokv"
  channelId: "demo"
  ver: "208006"
  source: "auto_test"
  attach: ""
  sign: "fFyv0Pvzc30CUZtkj8YAAnSzMW3ax/Ol3vdhcXWt/s57Shk1obvVNmAhIL5pZetuhO0Fi3wikKjIaX1sKJhlBZXBd4u2pdD1h3yoRlLpIu9MBpgKkn+nzIRYu7lkpT3PuX5MJkXDaBcbXD0o3mnDzEviQAbNrq6WZBVL5ezPCbU="
  appKey: "1234"
  voucherId: 62199708
  voucherType: 2
  voucherCount: 1
  factor: ""
}
isNeedExpend: "1"
appId: ""
payTypeRMBType: "0"
tradeType: "common"
screenInfo: "FULL"

2021-03-10 17:53:36,041-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "{\"appid\":\"wx93eea96ecc33f168\",\"noncestr\":\"5f8e5bba2522489da9d22243be07c06c\",\"packageNm\":\"Sign=WXPay\",\"partnerid\":\"1259634601\",\"prepayid\":\"wx1017533889211626557037cabd0e7a0000\",\"sign\":\"A05EA0A9A9B297A99A4F8809CF617915\",\"timestamp\":\"1615370018\"}"
}
payrequestid: "KB202103101753382076075925153452"
model: ""

2021-03-10 17:53:36,042-INFO-wxpay-scarlet-52-回调参数：<xml><transaction_id><![CDATA[1730347898312767756682331916]]></transaction_id>
<nonce_str><![CDATA[Pyfjd6xIqLkHzUieSOT9YQGAVbRnWEh0]]></nonce_str>
<bank_type><![CDATA[OTHERS]]></bank_type>
<openid><![CDATA[oCg6Xt8NvRi7jGuap_5B6XdY4oYk]]></openid>
<sign><![CDATA[77577C5315B54F7B5CA376D918FB6DF3]]></sign>
<fee_type><![CDATA[CNY]]></fee_type>
<mch_id><![CDATA[1259634601]]></mch_id>
<cash_fee><![CDATA[1]]></cash_fee>
<out_trade_no><![CDATA[KB202103101753382076075925153452]]></out_trade_no>
<appid><![CDATA[wx93eea96ecc33f168]]></appid>
<total_fee>1</total_fee>
<trade_type><![CDATA[APP]]></trade_type>
<result_code><![CDATA[SUCCESS]]></result_code>
<attach><![CDATA[TEST]]></attach>
<time_end><![CDATA[20210310175336]]></time_end>
<is_subscribe><![CDATA[N]]></is_subscribe>
<return_code><![CDATA[SUCCESS]]></return_code>
</xml>
2021-03-10 17:53:36,128-INFO-wxpay-scarlet-56-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-03-10 17:53:36,129-INFO-wxpay-scarlet-58-回调解析成功
2021-03-10 17:53:36,138-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:53:36,138-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "97689953355758"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "AO1dHCIleYXoJxrkLBuzUSN8ghDt6jTv"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 17:53:36,204-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "f1fbd2eb9e0a4c2b9b0a132a52bc78cd"
s_p: "Q2xnNGVsTXFodkVLQmlsSDV3RHVUMXRvSHRHeHJLSnlMNjdKMTZ0T3N3cGtKa0Jid2JBVlBCUWg5ZFN5SXpQdmtHNGthdmI0YzhwMXFaR0k3VVhKTER1cDFYYWdkcmt6bVhoVWpDYTZyWEJJdEpzb043Sm10VWRzWHg5Y0l5aG5qN0xGS3dHd1ZkZVFJZjFCYk1uMXhZQzJqNXFUR1U4aDdqN3hzWlppUFppMERnbng1aWt5T1ZWM0RYc0NSQTg0MnhrdnY1V3FGZzhWY1dzZmtFVWVJN0dVSHdlbU4yaDBVd29nTGY3YWJxUkJydmhYWlVQSVB2dnlROWtDMzZGVVVIRzc0OE80QktWWDhTck1GUnFOcDhtN1dEYUZtcnBzNlM3MktHd1A1OWx4ckZRM3AzbTBjY2NDQTB2a1V5ZnpqdHJVbm41TDhYZ1dGcVV1dmFRcTdiNUhIU1h3b1RsUUF0VlYyanliaTQzOEk2QnI4c0Y2QXdBeFFaMjBDV1Jmb2hjZFpKdnNnNVFlUXliU0lLeEw1eXpnQXdZOVV0NFVZWExKcXNxR0R4cU5jeTdkM3RhYU9YeTd4Y2tTbmZFVEttQTlYazdzcUVRNnpNVmFwZ1Z4RGJlT09FM21GcjFvVDdYZjIxbTltSjY2QmZPamNxMlhIR3hGRWhBak5qSUpBWTJZb0FLTnNiSWdSSjZLTGhuQ1ViN1lVaHRHaWhCTVNRaXBWd3dhUW1qZlp5cmxzOFE3d24wZEJFemR6UW9jMGZ6ZlR3S2FKVTdreENFYmMzbUVWVzFvV01uNUR6UmFlcHQxS0J0bm1Rc0NnQnF6OERtMHg4ODlaa3RNRVF0UXRIUFZPazhURjlha1VpMGhJZFRPR2VKaXhIZUpwUnpyOFVVcldQV2tnbDF4cHE1YzVmcHBPV0xSckFWamdnWk1RSHFPV25MdHlwWFhOa2FxQjZaTkF5SXhCckNSMzRsSGdXeU1TRUJuYnV6dmdiNklXV2dJazBFU1JVSXN5dVA1Y2p2amtnUU9tZWVEWmpNZWI3TTdnUVVCMk5paFFBajQ="
m_p: "j1ng87xfzzi2e1YFJh1KsrB1g3v7XWS56N2Wy8E61PNUmB13I2aFWcEnVOkl2Dbc"
e_t: "1615478019092"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 1001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199706
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199705
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199704
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199703
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199702
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199692
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099683
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099682
    type: 2
    minCousume: 1300
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 11
}
userinfo {
  username: "156******06"
}

2021-03-10 17:53:36,205-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:53:36,205-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "5.0"
  t_p: "f1fbd2eb9e0a4c2b9b0a132a52bc78cd"
  imei: ""
  model: "PBDM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "1Xagdrkz"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
payrequestid: "KB202103101753382076075925153452"
version: "260"
queryType: "PAY"

2021-03-10 17:53:36,249-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "2002"
  msg: ""
}
successStatus: "1086"
origAmount: "0.01"

2021-03-10 17:53:38,245-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT app_key FROM `db_platform_gateway`.`server_app_info` WHERE app_id = '100002'
2021-03-10 17:53:38,248-INFO-lib.common_biz.find_key-96-查询到秘钥信息：BB36C34EB6644AB9694315AF7D68E629
2021-03-10 17:53:38,248-INFO-lib.common.session.http.http_json-38-http://pay-gateway.pay-test.wanyol.com/gateway/nearme.account.query
2021-03-10 17:53:38,248-INFO-lib.common.session.http.http_json-39-传入的参数：{'app_id': '100002', 'service': 'nearme.account.query', 'format': 'JSON', 'charset': 'UTF8', 'sign_type': 'MD5', 'sign': 'BEA548A53AF99E4C3F6437BE2430EBDE', 'timestamp': '2021-03-10 17:53:38', 'version': '1.0', 'bizContent': "{'ssoid': '2076075925'}"}
2021-03-10 17:53:38,268-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'data': {'ssoid': '2076075925', 'timeStamp': 1615370021191, 'useableBalance': 0, 'totalGiveBalance': 0, 'createTime': 1612151249000, 'chargeBalance': 0, 'freezeBalance': 0, 'giveBalance': 0}, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功', 'success': True}
2021-03-10 17:53:38,269-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `db_order_4`.`order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "KB202103101753382076075925153452"
2021-03-10 17:53:38,273-INFO-lib.common_biz.fiz_assert-34-订单详情：{'id': 15362, 'pay_req_id': 'KB202103101753382076075925153452', 'notify_id': '1730347898312767756682331916', 'partner_order': 'm8hPSjCQOfxFAJrg0t63E5UcHpRdGokv', 'amount': 1, 'refund': 0, 'contents': 'RECHARGE_SPEND ', 'products_name': 'RECHARGE_SPEND', 'counts': 1, 'ssoid': '2076075925', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': '1259634601', 'ip': '58.252.5.72', 'mac': '', 'model': 'PDCM00', 'app_package': 'com.example.pay_demo', 'app_ver': '208006', 'sdk_ver': '260', 'partner_code': '2031', 'notify_url': 'http://pay.pay-test.wanyol.com/notify/receiver', 'status': 'OK', 'channel_id': '', 'channel_type': 'NATIVE', 'pay_type': 'wxpay', 'direct_pay': 'KEBI', 'game_type': 'WANGYOU', 'present_amount': 0, 'original_amount': 3, 'discount_info': '', 'extra': None, 'remark': 'new way', 'request_time': datetime.datetime(2021, 3, 10, 17, 53, 39), 'success_time': datetime.datetime(2021, 3, 10, 17, 53, 36), 'modify_time': datetime.datetime(2021, 3, 10, 17, 53, 39), 'trade_type': 'PAY', 'kebi_spent': 1, 'voucher_amount': 1, 'voucher_info': '{"cutAmount":"1","id":"62199708","type":"2"}', 'country_code': 'CN', 'currency': 'CNY', 'openid': None, 'brand_type': 'OPPO', 'mobile_os_ver': '16', 'platform': '', 'screen_info': 'FULL', 'voucher_id': '62199708', 'factor': '', 'paid_amount': None, 'paid_usd': None, 'combine_order': 'N'}
2021-03-10 17:53:38,273-INFO-lib.common_biz.fiz_assert-45-订单表信息记录正确
2021-03-10 17:53:38,274-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `pay_tradeorder_4`.`trade_order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "KB202103101753382076075925153452"
2021-03-10 17:53:38,278-INFO-lib.common_biz.fiz_assert-55-trade订单详情：{'id': 8048, 'pay_req_id': 'KB202103101753382076075925153452', 'partner_order': 'm8hPSjCQOfxFAJrg0t63E5UcHpRdGokv', 'partner_code': '2031', 'products_name': 'RECHARGE_SPEND', 'ssoid': '2076075925', 'origin_amount': 3, 'amount': 1, 'kb_amount': 1, 'voucher_amount': 1, 'present_amount': 0, 'refund': 0, 'country_code': 'CN', 'currency': 'CNY', 'pay_type': 'wxpay', 'channel_id': '', 'channel_type': 'NATIVE', 'direct_pay': 'KEBI', 'trade_type': 'PAY', 'combine_type': 'PRIMARY', 'status': 'OK', 'notify_url': 'http://pay.pay-test.wanyol.com/notify/receiver', 'attach': '', 'extra_info': '', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': '1259634601', 'ip': '58.252.5.72', 'mac': '', 'openid': None, 'model': 'PDCM00', 'brand_type': 'OPPO', 'app_package': 'com.example.pay_demo', 'app_ver': '208006', 'sdk_ver': '260', 'mobile_os_ver': '16', 'platform': '', 'screen_info': 'FULL', 'remark': None, 'request_time': datetime.datetime(2021, 3, 10, 17, 53, 39), 'success_time': datetime.datetime(2021, 3, 10, 17, 53, 39), 'modify_time': datetime.datetime(2021, 3, 10, 17, 53, 38)}
2021-03-10 17:53:38,278-INFO-lib.common_biz.fiz_assert-63-trade订单表信息记录正确
2021-03-10 17:53:38,278-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `virtual`.`tb_recharge202103` WHERE ssoid = '2076075925' and rechargeOrder = "KB202103101753382076075925153452"
2021-03-10 17:53:38,281-INFO-lib.common.db_operation.mysql_operation-51-查询数据为空
2021-03-10 17:53:38,282-INFO-lib.common_biz.fiz_assert-83-tb_recharge订单详情：None
2021-03-10 17:53:38,282-INFO-lib.common_biz.fiz_assert-91-tb_recharge订单表信息记录正确
2021-03-10 17:53:38,282-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `virtual`.`tb_payment202103` WHERE ssoid = '2076075925' and partnerOrder = "m8hPSjCQOfxFAJrg0t63E5UcHpRdGokv"
2021-03-10 17:53:38,286-INFO-lib.common_biz.fiz_assert-111-tb_payment订单详情：{'id': 1551, 'ssoid': '2076075925', 'imei': '', 'model': 'PDCM00', 'sdkVersion': '260', 'clientIp': '58.252.5.72', 'source': None, 'systemOrder': '2031_m8hPSjCQOfxFAJrg0t63E5UcHpRdGokv', 'partnerOrder': 'm8hPSjCQOfxFAJrg0t63E5UcHpRdGokv', 'partnerId': '2031', 'productName': 'RECHARGE_SPEND', 'productDesc': 'RECHARGE_SPEND', 'callbackUrl': 'http://pay.pay-test.wanyol.com/notify/receiver', 'price': 1, 'count': 1, 'r_cost': 1, 'g_cost': 0, 'appPackage': 'com.example.pay_demo', 'status': 'OK', 'payTime': datetime.datetime(2021, 3, 10, 17, 53, 39), 'updateTime': datetime.datetime(2021, 3, 10, 17, 53, 39)}
2021-03-10 17:53:38,286-INFO-lib.common_biz.fiz_assert-119-tb_payment订单表信息记录正确
2021-03-10 17:53:38,286-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select * from `db_pay_notify_1`.`notify_info` where request_id = "m8hPSjCQOfxFAJrg0t63E5UcHpRdGokv"
2021-03-10 17:53:38,290-INFO-lib.common_biz.fiz_assert-135-通知表信息详情：{'id': 151961, 'app_id': 10001, 'app_name': '可币系统(测试环境)', 'app_sub_id': '2031', 'notify_id': '48f8865212e945ea8403bd8008f01283', 'request_id': 'm8hPSjCQOfxFAJrg0t63E5UcHpRdGokv', 'notify_protocol': 'HTTP', 'notity_detail': '{"appId":10001,"appSubId":"2031","httpReqType":"POST","reqContent":"{\\"attach\\":\\"\\",\\"count\\":1,\\"date\\":\\"20210310\\",\\"kbVou\\":{\\"kbVouAmount\\":1,\\"notClearCount\\":1,\\"orderAmt\\":3,\\"payVouDesc\\":\\"\\",\\"spendType\\":2,\\"vouCountDetail\\":\\"62199708:1;\\"},\\"kbVouAmount\\":1,\\"partnerId\\":\\"2031\\",\\"partnerOrder\\":\\"m8hPSjCQOfxFAJrg0t63E5UcHpRdGokv\\",\\"paySuccessTime\\":\\"2021-03-10 17:53:39\\",\\"price\\":3,\\"productDesc\\":\\"RECHARGE_SPEND\\",\\"productName\\":\\"RECHARGE_SPEND\\",\\"sign\\":\\"kZuqRsLSuUbnXgWRcZxROn2pmn3QvIob1Q9n3ofN8XRfnc1NjUmIU2HfHsj4H6WeDWKlPguaIyqqljtS85NnjaEWDa+PqabXUz5OfUL7iG2sc2BCLrh9o0SAH4hrqzaHxdiBLoMU8+6l7V7ITzRNDN08lJhcDgZvX68DbdbUwC0=\\",\\"spendType\\":2,\\"ssoid\\":\\"2076075925\\"}","reqUrl":"http://pay.pay-test.wanyol.com/notify/receiver","requestId":"m8hPSjCQOfxFAJrg0t63E5UcHpRdGokv","sign":"4FF415D47BEB5BD69B6FC1E00C48B32B","signType":"MD5","successResult":"OK","timeStamp":1615370019114,"version":"1.0"}', 'notify_count': 1, 'notify_response': 'OK', 'notify_handler': 'httpNotifyJsonHandler', 'fail_strategy': 'failStrategyHashImpl', 'status': 'SUCCESS', 'success_time': datetime.datetime(2021, 3, 10, 17, 53, 39), 'insert_time': datetime.datetime(2021, 3, 10, 17, 53, 39), 'update_time': datetime.datetime(2021, 3, 10, 17, 53, 39), 'extra_json': None, 'remark': None}
2021-03-10 17:53:38,290-INFO-lib.common_biz.fiz_assert-141-通知成功
2021-03-10 17:53:38,291-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select status, usable_amt from `oppopay_voucher`.`vou_info_16` where vouId='62199708'
2021-03-10 17:53:38,294-INFO-lib.common_biz.fiz_assert-194-优惠券详情：{'status': '6', 'usable_amt': None}
2021-03-10 17:53:38,294-INFO-lib.common_biz.fiz_assert-198-优惠券表记录正确
2021-03-10 17:53:44,368-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.52.44.235', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-03-10 17:53:44,634-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-03-10 17:53:44,678-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]成功
2021-03-10 17:53:44,678-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]
2021-03-10 17:53:44,905-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]成功
2021-03-10 17:53:44,905-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]
2021-03-10 17:53:44,920-INFO-lib.common.db_operation.mysql_operation-118-成功连接到测试专用环境-MYSQL：{'host': '10.52.54.122', 'user': 'opay', 'pwd': '_UI7xHubrhTPIP1J_T4so7SU7ATCrUzm7cAh6TdBLLHWUSQUQqD8p45xVQzV3Czi', 'port': '33066'}
2021-03-10 17:53:44,921-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `test_account`.`account_test_env`
2021-03-10 17:53:44,933-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=0
2021-03-10 17:53:44,936-INFO-lib.common_biz.find_merchant_info-28-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601'}
2021-03-10 17:53:44,937-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-03-10 17:53:44,940-INFO-lib.common_biz.find_key-109-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-03-10 17:53:44,941-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no, plan_id FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=1
2021-03-10 17:53:44,944-INFO-lib.common_biz.find_merchant_info-41-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601', 'plan_id': '120877'}
2021-03-10 17:53:44,945-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-03-10 17:53:44,948-INFO-lib.common_biz.find_key-109-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-03-10 17:53:45,340-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT app_key FROM `db_platform_gateway`.`server_app_info` WHERE app_id = '100002'
2021-03-10 17:53:45,347-INFO-lib.common_biz.find_key-96-查询到秘钥信息：BB36C34EB6644AB9694315AF7D68E629
2021-03-10 17:53:45,347-INFO-lib.common.session.http.http_json-38-http://pay-gateway.pay-test.wanyol.com/gateway/nearme.account.query
2021-03-10 17:53:45,347-INFO-lib.common.session.http.http_json-39-传入的参数：{'app_id': '100002', 'service': 'nearme.account.query', 'format': 'JSON', 'charset': 'UTF8', 'sign_type': 'MD5', 'sign': 'DC3C53FF7080F8DD9AA9B0F7B609F0AD', 'timestamp': '2021-03-10 17:53:45', 'version': '1.0', 'bizContent': "{'ssoid': '2076075925'}"}
2021-03-10 17:53:45,392-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'data': {'ssoid': '2076075925', 'timeStamp': 1615370028335, 'useableBalance': 0, 'totalGiveBalance': 0, 'createTime': 1612151249000, 'chargeBalance': 0, 'freezeBalance': 0, 'giveBalance': 0}, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功', 'success': True}
2021-03-10 17:53:45,403-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:53:45,403-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "12295367482354"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "0J6c3Tjtw59zanIvoxNqSCirOeZ1XLym"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 17:53:45,478-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "153c1a59f8734c4398cbdd78b22ff653"
s_p: "MkNVZFhlOEl0TjV6ekNjWmxGNlF2OUJ4YzZTaFFQU1UwN1lCR2w0elRrbmR3ZGU0a2p3ckI1SXRZQ0w2dW9pWHVPZU1ubmxkM3pLNEsxT2doM1hxczFmMmQ1ams0ODZKWUZIY1F6TmFTTVNMckVSSWUzcUxUOFhyMWhNNlJrbTg1RFF2QlozcFdmWVROZG5mUkowT1NCRVFFWWRUMEZtYlNycENFMnpGYTRKZUM0UXZPdEcyRWZxalNJRFNSYXVpOGROVndTQndBckhCSU1sMEZra2l5VlJrZXhscDVDOExoQzc3Y0tqZ1VpVjNIZHBuaFhCRUdVWDdXOUUwNVVtaGF0QlB0cVVDNVRxdzNzc3dKSVlOZHgwOG8ya1ZQZno3b0k4M1RmY2tBYXRLNDJwc0VRTUlYUGZ4YnNRbWk3QlhQeTRvZnlJR1N2UlF5YXdEd0RpcmZKQTA3WDVCOVowbnJoeDRLQ0dIazBtWGZUYUpEMldLODFMdHhDVXI4N2J0YWVTSElXa3N4bXpIdHNCUEZkeE1aVVo0bG5veEFLUXl5bnVQTzVWUGMzZkd3TVdmSFh0MG5pTlZSSHVqVXdWN1laVGkxSUFzUmM5RnRTb3dFVzBPZ1hmcDRtTERUd1lnUlM4dzF1bHUwVVlaMGZYbnZrTUR4MFFhTUh0UTUwZFp2MHdhOVk3V2UxanRCS1B1S1g1eVdqOEFiTXhaNGlVVkhyQTc4Z2lpanFsRkg0THJ2RGtwZ09yVWJqWTFFN2Roa0JuTGVWSHVhWUNORnJSQWVrSEdZU2lSazhjbWM1RFZoNjZ3MHRvOXpGQnNYQXhDTEl4c1E4TmJ2VDB3TUlXSElNWkVGOTJ2YXpkRENuSEUzTjV5dmxUaTVRMlE4cHU1dDlCZDhoSTZHOHdmM1ozS2Z2N3FLcWRWTVoyQlZoN1VTZWJSaTJJclIwUEdGSzFNckpHcXdRaWVpQ1VWS0dwdk1UeVhweXFseG5rQWQ5cjBYNU1OWlVicm5OY2kySUZHSmhkNkJDcHlnUjRXVGJPTFZlaFdnSWE5TG1yTDRnOXg="
m_p: "5sntO8DZonTcLa23Xq7PmhVxgT1s3Ec3ZE3c18v81NPcJgRp53JZi9c4I3r80LM8"
e_t: "1615478028393"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 1001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199706
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199705
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199704
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199703
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199702
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199692
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099683
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099682
    type: 2
    minCousume: 1300
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 11
}
userinfo {
  username: "156******06"
}

2021-03-10 17:53:45,500-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:53:45,500-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "12.0"
  t_p: "153c1a59f8734c4398cbdd78b22ff653"
  imei: ""
  model: "PDCM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "2CUdXe8I"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: ""
  brandType: "OPPO"
  mobileos: "16"
  androidVersion: "29"
}
type: "wxpay"
amount: "0.01"
cardno: ""
cardpwd: ""
ext: ""
basepay {
  channelId: ""
  notifyurl: "http://pay.pay-test.wanyol.com/notify/receiver"
  productName: "RECHARGE_SPEND"
  productDesc: "RECHARGE_SPEND "
  partnercode: "2031"
  appversion: "208006"
  currencyName: "CNY"
  rate: 1.0
  partnerorder: "e0XIgp1Nkn3Z7OyBHVz8Fb6QslYADjSW"
}
sign: "RmFwerDGDK1/tBwlDeJYwbneGApl8nwAxwvrZnlavjaIKy8LT7U+KvuS/cAJ37RiDd8n6ZhnK8Cv6/JpyO2zcF1DWgEgnckJU/0auKdBdmPXvaJZZQRQOiEgxthw7bYPHaNJwVVWpNAyTlHWr+YmyjlsJ2zPvDY6DxFMvzKvihnBiuSt+vDpUMxtnMcrem0nYluIyXk8i69TZaLXF3aZRwHEVsSkoAyPDOMGf6qw16m4TIHBWVcz6UqLC6Osx2cbL2rJEqZqMqgK06g2XP0skdu3cUgwANm7lKUNQideqXSny2CHl/CjCRkeVF/8yuMz/JEjsWyhaRlki8m0HA46CA=="
ip: "183.238.170.71"
expendRequest {
  header {
    version: "12.0"
    t_p: "153c1a59f8734c4398cbdd78b22ff653"
    imei: ""
    model: "PDCM00"
    apntype: "1"
    package: "com.example.pay_demo"
    r_v: "2CUdXe8I"
    ext: ""
    sdkVer: 260
    country: "CN"
    currency: "CNY"
    openId: ""
    brandType: "OPPO"
    mobileos: "16"
    androidVersion: "29"
  }
  price: 1
  count: 1
  productname: "RECHARGE_SPEND_PRICE=AMOUNT"
  productdesc: "RECHARGE_SPEND_PRICE=AMOUNT"
  partnerid: "2031"
  callBackUrl: "http://pay.pay-test.wanyol.com/notify/receiver"
  partnerOrder: "e0XIgp1Nkn3Z7OyBHVz8Fb6QslYADjSW"
  channelId: ""
  ver: "208006"
  source: "auto_test"
  attach: ""
  sign: "aZYJS0tCK6Y4qQx7/9c+TkoVsRk9REovtCAGLs3U7StfZXb92GrJ4MLk4c9PYu1E9XKq11lFNZ4jb/Kk8dvjIWYhgJUwgse2tmWEcEbrTzIL6pwHzirrqTbmXbaBbj04mzEvwI4qHVJ9DhNcADb7f9QJvgp39ULrU6eLShIdJtU="
  factor: ""
}
isNeedExpend: "1"
appId: ""
payTypeRMBType: "0"
tradeType: "common"
screenInfo: "FULL"

2021-03-10 17:53:45,892-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "{\"appid\":\"wx93eea96ecc33f168\",\"noncestr\":\"4a2c44abcbd54f03881aad27386112df\",\"packageNm\":\"Sign=WXPay\",\"partnerid\":\"1259634601\",\"prepayid\":\"wx101753487716220bfcf9bfc360a96f0000\",\"sign\":\"47E6BE4CF0626F5483AA4723EAB80BFB\",\"timestamp\":\"1615370028\"}"
}
payrequestid: "KB202103101753482076075925102322"
model: ""

2021-03-10 17:53:45,892-INFO-wxpay-scarlet-52-回调参数：<xml><transaction_id><![CDATA[0600151961102245198596765654]]></transaction_id>
<nonce_str><![CDATA[aiVweMgWAbvY4OdTNsfEcL1BhjQyp69P]]></nonce_str>
<bank_type><![CDATA[OTHERS]]></bank_type>
<openid><![CDATA[oCg6Xt8NvRi7jGuap_5B6XdY4oYk]]></openid>
<sign><![CDATA[02408C99A2AD9CB5CF4DD55B6273D629]]></sign>
<fee_type><![CDATA[CNY]]></fee_type>
<mch_id><![CDATA[1259634601]]></mch_id>
<cash_fee><![CDATA[1]]></cash_fee>
<out_trade_no><![CDATA[KB202103101753482076075925102322]]></out_trade_no>
<appid><![CDATA[wx93eea96ecc33f168]]></appid>
<total_fee>1</total_fee>
<trade_type><![CDATA[APP]]></trade_type>
<result_code><![CDATA[SUCCESS]]></result_code>
<attach><![CDATA[TEST]]></attach>
<time_end><![CDATA[20210310175345]]></time_end>
<is_subscribe><![CDATA[N]]></is_subscribe>
<return_code><![CDATA[SUCCESS]]></return_code>
</xml>
2021-03-10 17:53:45,998-INFO-wxpay-scarlet-56-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-03-10 17:53:45,998-INFO-wxpay-scarlet-58-回调解析成功
2021-03-10 17:53:46,008-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:53:46,008-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "47740102349999"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "dopURHXkJCME7FhZryIOfA1QlwWYjcq9"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 17:53:46,082-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "2b9dea8b8a0a40e584ce047c699f714f"
s_p: "eHF6NER4MHd1ajNLVUNkQmxSM1AzODVkMXBTeXo1cUU1ZXN6eDN2ZXdBcUFENkdJUkNVOTlicVVCWE04QnR1UTZPSlpuYkFpMEpncXhRZFBqT1EyYmFwNUk0cEtOS1FvUEc1MzQ4bGcybHcwSmQ4NzF6NzRiTkVpVHBWdWhJbmNOcDc1c3NLdDM3c2ZLUDFQUFQydjNzaFZUTzV4QmxmUUl5WVAxSjlEYU9WZFJqMDRiNlBGQ2J4WGluZTNHZjhaY2xiOW56M2dhYVQyMFhyamRpellQMkJVWWtFQ2UxcWs2cDlaR3loWXQwUDhGdm1XUjY4WFM0dk5IQ1BYMDJORmx2eDBhNXR4SGoxZlVzWklrTGhDanllNEZuY1lBUmVhRDlrb2RSYXlkdEkwdHZvOGlnTlg4OUtTZWZJaXdDTXlSMlZEbldPbDhydGZQVlRJa0FKT0tic1d2djgyckZwM0paWGFLNktoQm1ieVNERW14eEFYNlN5TTk4UzB4UzZLTDJHa3lwNlptSWo3eGlpOTVuSmlFdUI1MHBCZXo2ME9qOERKWFJodXA0Q2dzbmJWQlVIc2VFZkkyTkJYT3V2anB1UW8wSkxacEZ2QzNRcU51QUp4N04yZVNlUE5lZENVSjBMWlRJa3dHWkJYWjUxdWE4aTVSY2c4Wnlyd2xkcFFwemRVc0t5dWxKUHBTdERTOVZEb2V4Zmlpc2dPVDJjWWZtYUhTRVRPUHNZR3paNFdnNXhTVTZudmpJVlpUMnA5NTY4THBKVDFxSUZvbnJXc21kV1NGZnNYVUdwbmlyM0tlaXU4TkcyNEwwT0pmZTN5dDFMQUpJZUFxY05HcU1zZThrTFdrTkU3d1BvQ3c3Z2tqb1FrVWEzYUFUYWJEazFaYUVvOUl1elBDWVZaUkRPbWJuTUs0b2xySXNEVWRObXN6TkU1djFSTEdMVzRLMDExc05YTTkwSWtIU3psWjNRYXp3ODl5ejdnc2ZyQ1phUlQ4ekNqeElSZjluaHRBNjdhRkdqa05xVnZhWGxVNmp4MWdOWnpZV0FqQzRxZ2EyNHU="
m_p: "64o1u8y1qKjIUR1lqh9gdZD9L6ExTyNQtxm929iCWo39u0Fagj0Zws14RIMt8rN2"
e_t: "1615478028997"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 1001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199706
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199705
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199704
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199703
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199702
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199692
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099683
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099682
    type: 2
    minCousume: 1300
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 11
}
userinfo {
  username: "156******06"
}

2021-03-10 17:53:46,083-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:53:46,083-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "5.0"
  t_p: "2b9dea8b8a0a40e584ce047c699f714f"
  imei: ""
  model: "PBDM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "TO5xBlfQ"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
payrequestid: "KB202103101753482076075925102322"
version: "260"
queryType: "PAY"

2021-03-10 17:53:46,133-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "2002"
  msg: ""
}
successStatus: "1086"
origAmount: "0.01"

2021-03-10 17:53:46,134-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT app_key FROM `db_platform_gateway`.`server_app_info` WHERE app_id = '100002'
2021-03-10 17:53:46,137-INFO-lib.common_biz.find_key-96-查询到秘钥信息：BB36C34EB6644AB9694315AF7D68E629
2021-03-10 17:53:46,137-INFO-lib.common.session.http.http_json-38-http://pay-gateway.pay-test.wanyol.com/gateway/nearme.account.query
2021-03-10 17:53:46,137-INFO-lib.common.session.http.http_json-39-传入的参数：{'app_id': '100002', 'service': 'nearme.account.query', 'format': 'JSON', 'charset': 'UTF8', 'sign_type': 'MD5', 'sign': '7236F1A83478A0F83DDC97F746DDC992', 'timestamp': '2021-03-10 17:53:46', 'version': '1.0', 'bizContent': "{'ssoid': '2076075925'}"}
2021-03-10 17:53:46,161-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'data': {'ssoid': '2076075925', 'timeStamp': 1615370029108, 'useableBalance': 0, 'totalGiveBalance': 0, 'createTime': 1612151249000, 'chargeBalance': 0, 'freezeBalance': 0, 'giveBalance': 0}, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功', 'success': True}
2021-03-10 17:53:46,161-INFO-recharge_spend-54-可币余额正常
2021-03-10 17:53:46,162-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `db_order_4`.`order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "KB202103101753482076075925102322"
2021-03-10 17:53:46,167-INFO-lib.common_biz.fiz_assert-34-订单详情：{'id': 15363, 'pay_req_id': 'KB202103101753482076075925102322', 'notify_id': '0600151961102245198596765654', 'partner_order': 'e0XIgp1Nkn3Z7OyBHVz8Fb6QslYADjSW', 'amount': 1, 'refund': 0, 'contents': 'RECHARGE_SPEND ', 'products_name': 'RECHARGE_SPEND', 'counts': 1, 'ssoid': '2076075925', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': '1259634601', 'ip': '58.252.5.72', 'mac': '', 'model': 'PDCM00', 'app_package': 'com.example.pay_demo', 'app_ver': '208006', 'sdk_ver': '260', 'partner_code': '2031', 'notify_url': 'http://pay.pay-test.wanyol.com/notify/receiver', 'status': 'OK', 'channel_id': '', 'channel_type': 'NATIVE', 'pay_type': 'wxpay', 'direct_pay': 'KEBI', 'game_type': 'WANGYOU', 'present_amount': 0, 'original_amount': 1, 'discount_info': '', 'extra': None, 'remark': 'new way', 'request_time': datetime.datetime(2021, 3, 10, 17, 53, 48), 'success_time': datetime.datetime(2021, 3, 10, 17, 53, 45), 'modify_time': datetime.datetime(2021, 3, 10, 17, 53, 49), 'trade_type': 'PAY', 'kebi_spent': 0, 'voucher_amount': 0, 'voucher_info': '{"cutAmount":"0","id":"0","type":"0"}', 'country_code': 'CN', 'currency': 'CNY', 'openid': None, 'brand_type': 'OPPO', 'mobile_os_ver': '16', 'platform': '', 'screen_info': 'FULL', 'voucher_id': '0', 'factor': '', 'paid_amount': None, 'paid_usd': None, 'combine_order': 'N'}
2021-03-10 17:53:46,167-INFO-lib.common_biz.fiz_assert-45-订单表信息记录正确
2021-03-10 17:53:46,167-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `pay_tradeorder_4`.`trade_order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "KB202103101753482076075925102322"
2021-03-10 17:53:46,172-INFO-lib.common_biz.fiz_assert-55-trade订单详情：{'id': 8049, 'pay_req_id': 'KB202103101753482076075925102322', 'partner_order': 'e0XIgp1Nkn3Z7OyBHVz8Fb6QslYADjSW', 'partner_code': '2031', 'products_name': 'RECHARGE_SPEND', 'ssoid': '2076075925', 'origin_amount': 1, 'amount': 1, 'kb_amount': 0, 'voucher_amount': 0, 'present_amount': 0, 'refund': 0, 'country_code': 'CN', 'currency': 'CNY', 'pay_type': 'wxpay', 'channel_id': '', 'channel_type': 'NATIVE', 'direct_pay': 'KEBI', 'trade_type': 'PAY', 'combine_type': 'PRIMARY', 'status': 'OK', 'notify_url': 'http://pay.pay-test.wanyol.com/notify/receiver', 'attach': '', 'extra_info': '', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': '1259634601', 'ip': '58.252.5.72', 'mac': '', 'openid': None, 'model': 'PDCM00', 'brand_type': 'OPPO', 'app_package': 'com.example.pay_demo', 'app_ver': '208006', 'sdk_ver': '260', 'mobile_os_ver': '16', 'platform': '', 'screen_info': 'FULL', 'remark': None, 'request_time': datetime.datetime(2021, 3, 10, 17, 53, 49), 'success_time': datetime.datetime(2021, 3, 10, 17, 53, 49), 'modify_time': datetime.datetime(2021, 3, 10, 17, 53, 48)}
2021-03-10 17:53:46,172-INFO-lib.common_biz.fiz_assert-63-trade订单表信息记录正确
2021-03-10 17:53:46,173-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `virtual`.`tb_recharge202103` WHERE ssoid = '2076075925' and rechargeOrder = "KB202103101753482076075925102322"
2021-03-10 17:53:46,176-INFO-lib.common.db_operation.mysql_operation-51-查询数据为空
2021-03-10 17:53:46,176-INFO-lib.common_biz.fiz_assert-83-tb_recharge订单详情：None
2021-03-10 17:53:46,176-INFO-lib.common_biz.fiz_assert-91-tb_recharge订单表信息记录正确
2021-03-10 17:53:46,177-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `virtual`.`tb_payment202103` WHERE ssoid = '2076075925' and partnerOrder = "e0XIgp1Nkn3Z7OyBHVz8Fb6QslYADjSW"
2021-03-10 17:53:46,181-INFO-lib.common.db_operation.mysql_operation-51-查询数据为空
2021-03-10 17:53:46,181-INFO-lib.common_biz.fiz_assert-111-tb_payment订单详情：None
2021-03-10 17:53:46,181-INFO-lib.common_biz.fiz_assert-119-tb_payment订单表信息记录正确
2021-03-10 17:53:46,181-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select * from `db_pay_notify_1`.`notify_info` where request_id = "e0XIgp1Nkn3Z7OyBHVz8Fb6QslYADjSW"
2021-03-10 17:53:46,185-INFO-lib.common_biz.fiz_assert-135-通知表信息详情：{'id': 151962, 'app_id': 10001, 'app_name': '可币系统(测试环境)', 'app_sub_id': '2031', 'notify_id': '728d29d073e14c0db952d982c074e45e', 'request_id': 'e0XIgp1Nkn3Z7OyBHVz8Fb6QslYADjSW', 'notify_protocol': 'HTTP', 'notity_detail': '{"appId":10001,"appSubId":"2031","httpReqType":"POST","reqContent":"{\\"attach\\":\\"\\",\\"count\\":1,\\"date\\":\\"20210310\\",\\"kbVouAmount\\":0,\\"partnerId\\":\\"2031\\",\\"partnerOrder\\":\\"e0XIgp1Nkn3Z7OyBHVz8Fb6QslYADjSW\\",\\"paySuccessTime\\":\\"2021-03-10 17:53:48\\",\\"price\\":1,\\"productDesc\\":\\"RECHARGE_SPEND\\",\\"productName\\":\\"RECHARGE_SPEND\\",\\"sign\\":\\"FNhjnCM6OYdWTJ1J3MqnMDaGvrCD4RCYqUnb6CehSbch9TASo4N6QQyNkUXpCvD3JZzdRCwyNXjgOfBucS+I6I1rONlx8+r0rlv8fYWnzESblPD5gOKnAJ+w1xsUNNJqXqd28Sv+w33XJDeS3wqGMCvRUDVyPTSPG7ZhxLCuocc=\\",\\"spendType\\":0,\\"ssoid\\":\\"2076075925\\"}","reqUrl":"http://pay.pay-test.wanyol.com/notify/receiver","requestId":"e0XIgp1Nkn3Z7OyBHVz8Fb6QslYADjSW","sign":"CED7335EA2B51D0859E3BFEE071EF9F8","signType":"MD5","successResult":"OK","timeStamp":1615370028935,"version":"1.0"}', 'notify_count': 1, 'notify_response': 'OK', 'notify_handler': 'httpNotifyJsonHandler', 'fail_strategy': 'failStrategyHashImpl', 'status': 'SUCCESS', 'success_time': datetime.datetime(2021, 3, 10, 17, 53, 49), 'insert_time': datetime.datetime(2021, 3, 10, 17, 53, 49), 'update_time': datetime.datetime(2021, 3, 10, 17, 53, 49), 'extra_json': None, 'remark': None}
2021-03-10 17:53:46,185-INFO-lib.common_biz.fiz_assert-141-通知成功
2021-03-10 17:54:32,453-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.52.44.235', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-03-10 17:54:32,691-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-03-10 17:54:32,735-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]成功
2021-03-10 17:54:32,735-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]
2021-03-10 17:54:32,949-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]成功
2021-03-10 17:54:32,949-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]
2021-03-10 17:54:32,970-INFO-lib.common.db_operation.mysql_operation-118-成功连接到测试专用环境-MYSQL：{'host': '10.52.54.122', 'user': 'opay', 'pwd': '_UI7xHubrhTPIP1J_T4so7SU7ATCrUzm7cAh6TdBLLHWUSQUQqD8p45xVQzV3Czi', 'port': '33066'}
2021-03-10 17:54:32,971-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `test_account`.`account_test_env`
2021-03-10 17:54:32,982-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=0
2021-03-10 17:54:32,985-INFO-lib.common_biz.find_merchant_info-28-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601'}
2021-03-10 17:54:32,986-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-03-10 17:54:32,989-INFO-lib.common_biz.find_key-109-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-03-10 17:54:32,989-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no, plan_id FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=1
2021-03-10 17:54:32,993-INFO-lib.common_biz.find_merchant_info-41-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601', 'plan_id': '120877'}
2021-03-10 17:54:32,993-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-03-10 17:54:32,996-INFO-lib.common_biz.find_key-109-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-03-10 17:54:33,360-INFO-lib.common.db_operation.mysql_operation-59-执行sql语句：update `db_order_0`.`autorenew_sign_info` set status = "UNSIGN" where ssoid = "2076075925" and partner_code = "2031" and renew_product_code = "20310001" and pay_type = "wxpay"
2021-03-10 17:54:33,373-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:54:33,373-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "6.0"
appKey: "1234"
count: 10000
order: "32316061553546"
ip: "121.13.218.236"
type: "1"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "JsHejYDP4xh9ogp7NRzZVn62Gq0vkwSB"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 17:54:33,428-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "c64a47663972469e94142787a30c7ae4"
s_p: "bW1YNkJPZlo5VEQ0aHN3WFBJa09CWDRRQzhKZW5ONGdrcmEwTWowSGg5ZFJQTlZNb29mNk95Y2czY3c0ckNlcGdWUmFrMUpOTjFIOEhKa2FpNFhPRTE0cUlRaHd2ekI3Z0ZRWkRFdEJTZ0VlQUc4SFR3UmdjbXFCYmpybmZScEhxWnRNaWVFSTljOTJwS3ZvcG1qak5ndXA3Y2FHZ0ZhMUlvY2Y5V3dZUW1VdVpBZDRKT0ZDU0pUbE5DMDhadjVaV3lBbjlzSUZldzZUZGFyM0lRRGpzQjlrUkU2UDNlS0dBVXpEd2V6bWNEb2tZbFNYRWx2bHFxUXl5MnBFMnAxRU9Cc1Zyb01kWUk2ZkplRUFZUFg5Tk9FSmF4bG9VT01TZ0RXcU5zdVFSWjhUU0RyMGJIQUpIYWJ2YlNON3dYckc1WFhYRkNWUGJUYmxDOFVLZG9VZTVsNTRlUGJDMUxjSkppdTBrOXZubWRZQlA2UWNOOHE1cDVwampWNE8zamxJN2Q4TVpYb1VlcTl3ZkxPMGxlSG85RnJOZlFObGVMZVFmSFhDeHdDMDVEVGhCTHRSR2ZUMFF2aHdHU0drZG9seHE1SmVVMm9HcmNSNG5VdTdJSWZRbUEwdHUyYldaR1NQMEFCSkRCaUFtTUZnakVaVXN1SFBMNlpablZMb1R1bnh2U2dnbzZ2a20zNVVxbkM1ZThTZE1XbUQxeHZJekFmSmpNaW1TTDNEN0ZBaFZIbHNralZwRzlGZndJQktjVDR6V3A5NjhtT0Z4bXQ3RHh5aHV6VDRneDJsanVFZWVlRXdHTEFNMHJKbUtXQTFuWGJ6a2RWMGwyWUpha3AzaVIwNVBUY3c5MFlKcWNCOEU3V1VlcUxnb2pjbzhQVWg0c2xKcjlEbFJiT2Mzc0ZrdFF5ZTZvckh5OFNBaE5URVZTQnJ1ZmNpb2JQWHlqTHdzY25CMk85MzNQS3Q3bWJKTWQycXlBR09yTVJqRGd0d1JXSEV1bzREVU1YQWxKTkx3Wkd2ZE5UY1hBWmVUR29aakN0b25FQzJKUHpYWFUxUk5xb3g="
m_p: "bSWtuTVD7E940e30M88kO5y59D52fm6Am4Yj49iBHW7LPnY5E7hG2WzsQaYcD7Gn"
e_t: "1615478076528"
balanceResult {
  baseresult {
    code: "0000"
    msg: ""
  }
  balance: "0"
  vouBalance: "0"
  vouNum: 0
}
userinfo {
  username: "156******06"
}

2021-03-10 17:54:33,431-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:54:33,431-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "12.0"
  t_p: "c64a47663972469e94142787a30c7ae4"
  imei: ""
  model: "PCRM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "9c92pKvo"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: ""
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
transType: "SIGNANDPAY"
renewProductCode: "20310001"
signPartnerOrder: "xGr0uit7omXn1aPvzVhMd2C5eN8L4UYZ"
type: "wxpay"
amount: "0.01"
oriAmount: "0.01"
ip: "58.252.5.75"
sign: "NSo6ckdqW8kc1LFdI5f40wvFscx4dAIUo2l7tSsirlF/4+YcNfnCTDdsjk4+aA50OMzn2Gh90n8uxBkyhrbqLyb79T3rovzrgNgxn5VmHr2NhHgSQJeZ/CcYrQuBW3a/imEgtxA8eMsJ/eCeQcqkjbJ/5UGGBsJvEaJo1XpPxWAxqcI3HRPOPkRlTm/FWZy8S08HhC+thJRwyHz1NcAa5Q7+cHowsJJrIcQEWn6XDfQ+kpW7IYr79nx0eeJAw9uVfr+W3K377HCYX8oblEAL62EB/MQvo1NwHpQ+5nH9yKRq1KvcO2lCVsBN9VxzWC++lbrHrf4OguCm7hFxc1L38HSy3imkqdG4fn/Jci63pOkvJJpMl4duzYzM9dkRhM1QBl0syl+thwt3XustEoNOzMu9aevGt0tI2b4jGTwQszd/3wNpjuOI6Mxcgn6TT2RyqUppTnfE4ti/OMAg+X/Q/eqfDElJsJC+FhhdQvbW7TZO21f2MUXSxuq9NuIdskJz"
signAgreementNotifyUrl: "http://pay.pay-test.wanyol.com/notify/receiver"
appId: ""
isNeedExpend: "0"
basepay {
  channelId: ""
  notifyurl: "http://pay.pay-test.wanyol.com/notify/receiver"
  productName: "SIGN_PAY"
  productDesc: "SIGN_PAY"
  partnercode: "2031"
  appversion: "260"
  currencyName: "\344\272\272\346\260\221\345\270\201"
  rate: 1.0
  partnerorder: "xGr0uit7omXn1aPvzVhMd2C5eN8L4UYZ"
}
screenInfo: "FULL"

2021-03-10 17:54:33,824-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "{\"appid\":\"wx93eea96ecc33f168\",\"noncestr\":\"721deac9d1d242f4a7c78346eded1fd8\",\"packageNm\":\"Sign=WXPay\",\"partnerid\":\"1259634601\",\"prepayid\":\"wx10175436853548c5435d15463aada90000\",\"sign\":\"305486E962338D949D08F2304C969350\",\"timestamp\":\"1615370076\"}"
}
payrequestid: "RM202103101754362076075925273102"
transType: "SIGNANDPAY"
signType: "APP"

2021-03-10 17:54:33,825-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT contract_code from `db_order_0`.`autorenew_sign_record` where pay_req_id = "RM202103101754362076075925273102"
2021-03-10 17:54:33,829-INFO-wxpay-scarlet-97-回调参数：<xml><change_type>ADD</change_type>
<contract_code>SN202103101754366704837202478765</contract_code>
<contract_expired_time>2022-03-10 17:54:33</contract_expired_time>
<contract_id>4318469014</contract_id>
<mch_id>1259634601</mch_id>
<openid>oCg6Xt8NvRi7jGuap_5B6XdY4oYk</openid>
<operate_time>2021-03-10 17:54:33</operate_time>
<plan_id>120877</plan_id>
<request_serial>857751660039193136</request_serial>
<result_code>SUCCESS</result_code>
<return_code>SUCCESS</return_code>
<return_msg>OK</return_msg>
<sign>22842B5C7598467DA7EE3363847225CF</sign>
</xml>
2021-03-10 17:54:33,919-INFO-wxpay-scarlet-101-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-03-10 17:54:33,919-INFO-wxpay-scarlet-103-回调解析成功
2021-03-10 17:54:33,919-INFO-wxpay-scarlet-52-回调参数：<xml><transaction_id><![CDATA[2549757475619089634552855744]]></transaction_id>
<nonce_str><![CDATA[FXwcUNzEagCeJdYVyQfrqkp6i9MTvtR4]]></nonce_str>
<bank_type><![CDATA[OTHERS]]></bank_type>
<openid><![CDATA[oCg6Xt8NvRi7jGuap_5B6XdY4oYk]]></openid>
<sign><![CDATA[A1F7EE75197B64B50D8A87AB291170F1]]></sign>
<fee_type><![CDATA[CNY]]></fee_type>
<mch_id><![CDATA[1259634601]]></mch_id>
<cash_fee><![CDATA[1]]></cash_fee>
<out_trade_no><![CDATA[RM202103101754362076075925273102]]></out_trade_no>
<appid><![CDATA[wx93eea96ecc33f168]]></appid>
<total_fee>1</total_fee>
<trade_type><![CDATA[APP]]></trade_type>
<result_code><![CDATA[SUCCESS]]></result_code>
<attach><![CDATA[TEST]]></attach>
<time_end><![CDATA[20210310175433]]></time_end>
<is_subscribe><![CDATA[N]]></is_subscribe>
<return_code><![CDATA[SUCCESS]]></return_code>
</xml>
2021-03-10 17:54:34,005-INFO-wxpay-scarlet-56-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-03-10 17:54:34,005-INFO-wxpay-scarlet-58-回调解析成功
2021-03-10 17:54:34,015-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:54:34,015-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "23856509544277"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "6EkxJijCTXe5hf4ZRLPdcmw9FBSDYg7u"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 17:54:34,090-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "4e863e211f0644428b484c56772094e2"
s_p: "SWdkQW1ZWmp0azBaZ1pzMkFlaGZVN3BWNXgwdm1mS2hWZ3dhcHVJQkkxT2ttcGFFQVhodkpqTjVKNlpNTjhtTWVzWWh3M1FxUGdlWHZSSHFJZHk4aHJEajZBVjd5S1EwZER1T2JjcWZndVU0T1JNa3pjZzlESnNsZ1Q0N2lVVE9rWFdESmFoc1VXMHBVUWdQQ0k0QW9Bb1RKYm1ON081SnNLMUUxajJwcVEzTnRCc1hkYkVHa2hLTkFSa21mZHBuWHAzZnNVbVprRXgwT1dKOUVvRGtGU0N6dEZrSFR5UEhCQU81Y084MllXTG5qdzhTb0N2cnZBVGtVVjN3MkdjamZIWTREaGZlamNkak9TV2VWa0F5aUM5NnBZZmFLYnVSMkp6d2lRU3Z5UkFPTkR3SFJpczl3TjFmNHlQZmxYcWZBOHJhS3c0ZEpIY1RFYlptV3k1QlN0QkhWTlZ4V21oWUhrZUhicFFVMEZSTkRZYjlZa3BzZUE4Y0FJRDhTUmFtUTRJZlZxV0FTWnRuNE1ueUQ1UWsxOUgxUGp4UklXc1B2bXpPdTJwS2YzUmcxcXpoRHYyejBlcjJFUVh0VU5PZFZFajBDV3QyYllnVmtxaXFlS0hiSjF6ZExPMXRhWlpTWTI2czlhNWFWdWdIOGNXTG9kSWxIbVdvV3pqU25oRTFxMDZWbU9yWWNqbk9GVEE4eFNWTHlydm5NTHpmb1kwWDhuZWR3bXdLUUJLZEtlTnViakxlc2dlRDkzVEZjUE80THFrZUxEeGZaczByZU9tek5LaVBsUlc2ZjNGaVZnWmxCbHg5aDVobmhQVGRqODl2RG9YVGRmem0zN0FQejliZnNZamNPOHZpRlRXb1ZxaVloclFiT3Z5dk9FWTdkVFY4M1B2QTZ2ZUF3MGthUjhLNm1uVVJIcWpOQ2VjM1hqVmR1aTdJbEhKcjR5eldVMTJzbDVzMjFhVmtaYkdHQ3VLTlRjZXk0elpRNUpjdk1qQjgwOW14SnVndkpaUGdYdlltakd4UDEwenAydHpFYVlTZzE2OEZuaFZpRGFqU3d1Y08="
m_p: "4ZA694G7V94509dW9WWWy2Ko6uSXIC9k29QoBxY02a0C8pOYqwJ4m2y183s6763Y"
e_t: "1615478077167"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 1001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199706
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199705
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199704
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199703
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199702
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199692
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099683
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099682
    type: 2
    minCousume: 1300
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 11
}
userinfo {
  username: "156******06"
}

2021-03-10 17:54:34,091-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:54:34,091-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "5.0"
  t_p: "4e863e211f0644428b484c56772094e2"
  imei: ""
  model: "PBDM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "Yhw3QqPg"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
payrequestid: "RM202103101754362076075925273102"
version: "260"
queryType: "PAY"

2021-03-10 17:54:34,139-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "2002"
  msg: ""
}
successStatus: "1086"
origAmount: "0.01"

2021-03-10 17:54:34,140-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `db_order_4`.`order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "RM202103101754362076075925273102"
2021-03-10 17:54:34,144-INFO-lib.common_biz.fiz_assert-34-订单详情：{'id': 15364, 'pay_req_id': 'RM202103101754362076075925273102', 'notify_id': '2549757475619089634552855744', 'partner_order': 'xGr0uit7omXn1aPvzVhMd2C5eN8L4UYZ', 'amount': 1, 'refund': 0, 'contents': 'SIGN_PAY', 'products_name': 'SIGN_PAY', 'counts': 1, 'ssoid': '2076075925', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': '1259634601', 'ip': '58.252.5.72', 'mac': '', 'model': 'PCRM00', 'app_package': 'com.example.pay_demo', 'app_ver': '260', 'sdk_ver': '12.0', 'partner_code': '2031', 'notify_url': 'http://pay.pay-test.wanyol.com/notify/receiver', 'status': 'OK', 'channel_id': '', 'channel_type': 'NATIVE', 'pay_type': 'wxpay', 'direct_pay': 'ZHICHONG', 'game_type': 'WANGYOU', 'present_amount': 0, 'original_amount': 1, 'discount_info': '', 'extra': None, 'remark': None, 'request_time': datetime.datetime(2021, 3, 10, 17, 54, 37), 'success_time': datetime.datetime(2021, 3, 10, 17, 54, 33), 'modify_time': datetime.datetime(2021, 3, 10, 17, 54, 33), 'trade_type': 'CZ', 'kebi_spent': 0, 'voucher_amount': 0, 'voucher_info': None, 'country_code': 'CN', 'currency': 'CNY', 'openid': None, 'brand_type': 'OPPO', 'mobile_os_ver': None, 'platform': None, 'screen_info': None, 'voucher_id': None, 'factor': None, 'paid_amount': None, 'paid_usd': None, 'combine_order': 'N'}
2021-03-10 17:54:34,144-INFO-lib.common_biz.fiz_assert-45-订单表信息记录正确
2021-03-10 17:54:34,145-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `pay_tradeorder_4`.`trade_order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "RM202103101754362076075925273102"
2021-03-10 17:54:34,149-INFO-lib.common_biz.fiz_assert-55-trade订单详情：{'id': 8050, 'pay_req_id': 'RM202103101754362076075925273102', 'partner_order': 'xGr0uit7omXn1aPvzVhMd2C5eN8L4UYZ', 'partner_code': '2031', 'products_name': 'SIGN_PAY', 'ssoid': '2076075925', 'origin_amount': 1, 'amount': 1, 'kb_amount': 0, 'voucher_amount': 0, 'present_amount': 0, 'refund': 0, 'country_code': 'CN', 'currency': 'CNY', 'pay_type': 'wxpay', 'channel_id': '', 'channel_type': 'NATIVE', 'direct_pay': 'ZHICHONG', 'trade_type': 'CZ', 'combine_type': 'PRIMARY', 'status': 'OK', 'notify_url': 'http://pay.pay-test.wanyol.com/notify/receiver', 'attach': '', 'extra_info': '', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': '1259634601', 'ip': '58.252.5.72', 'mac': '', 'openid': None, 'model': 'PCRM00', 'brand_type': 'OPPO', 'app_package': 'com.example.pay_demo', 'app_ver': '260', 'sdk_ver': '12.0', 'mobile_os_ver': '', 'platform': '', 'screen_info': '', 'remark': None, 'request_time': datetime.datetime(2021, 3, 10, 17, 54, 37), 'success_time': None, 'modify_time': datetime.datetime(2021, 3, 10, 17, 54, 37)}
2021-03-10 17:54:34,149-INFO-lib.common_biz.fiz_assert-63-trade订单表信息记录正确
2021-03-10 17:54:34,150-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select status from  `db_order_0`.`autorenew_sign_info` where ssoid = "2076075925" and partner_code = "2031" and renew_product_code = "20310001" and pay_type = "wxpay"
2021-03-10 17:54:34,153-INFO-lib.common_biz.fiz_assert-161-签约信息表记录正确
2021-03-10 17:54:34,154-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select status from `db_order_0`.`autorenew_sign_record` where pay_req_id = "RM202103101754362076075925273102"
2021-03-10 17:54:34,157-INFO-lib.common_biz.fiz_assert-176-签约记录表记录正确
2021-03-10 17:54:34,157-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select * from `db_pay_notify_1`.`notify_info` where request_id = "xGr0uit7omXn1aPvzVhMd2C5eN8L4UYZ"
2021-03-10 17:54:34,161-INFO-lib.common_biz.fiz_assert-135-通知表信息详情：{'id': 151963, 'app_id': 10003, 'app_name': 'opaycenter(测试环境)', 'app_sub_id': '2031', 'notify_id': '959ebc2f026d4fb89e80ab5442612e68', 'request_id': 'xGr0uit7omXn1aPvzVhMd2C5eN8L4UYZ', 'notify_protocol': 'HTTP', 'notity_detail': '{"appId":10003,"appSubId":"2031","httpReqType":"POST","reqContent":"{\\"ssoid\\":\\"2076075925\\",\\"country\\":\\"CN\\",\\"partnerOrder\\":\\"xGr0uit7omXn1aPvzVhMd2C5eN8L4UYZ\\",\\"notifyType\\":\\"SIGN\\",\\"payType\\":\\"wxpay\\",\\"agreementNo\\":\\"4318469014\\",\\"sign\\":\\"k91URv0InuWfEQfalbl2nwmGMPA1t18r452t3EMPCoNEVeMYnSr9c4JCi3lJs3LVDs0QchrATYOkxa4SxD6348yZZ4klQ2TV5W0JlpQkMZKWGxYC72wtoJ4UrfxWa7dthyJWmcLlPKxftemtGEiAK071bZ3mFpa1TCZemOLN4h0=\\",\\"notifyId\\":\\"IM20210310175437577\\",\\"currency\\":\\"CNY\\",\\"partnerId\\":\\"2031\\",\\"renewProductCode\\":\\"20310001\\",\\"status\\":\\"OK\\"}","reqUrl":"http://pay.pay-test.wanyol.com/notify/receiver","requestId":"xGr0uit7omXn1aPvzVhMd2C5eN8L4UYZ","signType":"MD5","successResult":"OK","timeStamp":1615370077016,"version":"1.0"}', 'notify_count': 1, 'notify_response': 'OK', 'notify_handler': 'httpNotifyJsonHandler', 'fail_strategy': 'failStrategyHashImpl', 'status': 'SUCCESS', 'success_time': datetime.datetime(2021, 3, 10, 17, 54, 37), 'insert_time': datetime.datetime(2021, 3, 10, 17, 54, 37), 'update_time': datetime.datetime(2021, 3, 10, 17, 54, 37), 'extra_json': None, 'remark': None}
2021-03-10 17:54:34,161-INFO-lib.common_biz.fiz_assert-141-通知成功
2021-03-10 17:54:37,789-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.52.44.235', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-03-10 17:54:38,063-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-03-10 17:54:38,106-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]成功
2021-03-10 17:54:38,107-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]
2021-03-10 17:54:38,340-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]成功
2021-03-10 17:54:38,340-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]
2021-03-10 17:54:38,354-INFO-lib.common.db_operation.mysql_operation-118-成功连接到测试专用环境-MYSQL：{'host': '10.52.54.122', 'user': 'opay', 'pwd': '_UI7xHubrhTPIP1J_T4so7SU7ATCrUzm7cAh6TdBLLHWUSQUQqD8p45xVQzV3Czi', 'port': '33066'}
2021-03-10 17:54:38,354-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `test_account`.`account_test_env`
2021-03-10 17:54:38,366-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=0
2021-03-10 17:54:38,370-INFO-lib.common_biz.find_merchant_info-28-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601'}
2021-03-10 17:54:38,370-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-03-10 17:54:38,373-INFO-lib.common_biz.find_key-109-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-03-10 17:54:38,374-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no, plan_id FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=1
2021-03-10 17:54:38,377-INFO-lib.common_biz.find_merchant_info-41-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601', 'plan_id': '120877'}
2021-03-10 17:54:38,378-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-03-10 17:54:38,380-INFO-lib.common_biz.find_key-109-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-03-10 17:54:38,752-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT app_key FROM `db_platform_gateway`.`server_app_info` WHERE app_id = '100002'
2021-03-10 17:54:38,755-INFO-lib.common_biz.find_key-96-查询到秘钥信息：BB36C34EB6644AB9694315AF7D68E629
2021-03-10 17:54:38,755-INFO-lib.common.session.http.http_json-38-http://pay-gateway.pay-test.wanyol.com/gateway/nearme.account.query
2021-03-10 17:54:38,755-INFO-lib.common.session.http.http_json-39-传入的参数：{'app_id': '100002', 'service': 'nearme.account.query', 'format': 'JSON', 'charset': 'UTF8', 'sign_type': 'MD5', 'sign': '693D5A4DD2B7140E50BDAF0FEE2F973E', 'timestamp': '2021-03-10 17:54:38', 'version': '1.0', 'bizContent': "{'ssoid': '2076075925'}"}
2021-03-10 17:54:38,797-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'data': {'ssoid': '2076075925', 'timeStamp': 1615370081917, 'useableBalance': 0, 'totalGiveBalance': 0, 'createTime': 1612151249000, 'chargeBalance': 0, 'freezeBalance': 0, 'giveBalance': 0}, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功', 'success': True}
2021-03-10 17:54:38,798-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT app_key FROM `db_platform_gateway`.`server_app_info` WHERE app_id = '100002'
2021-03-10 17:54:38,801-INFO-lib.common_biz.find_key-96-查询到秘钥信息：BB36C34EB6644AB9694315AF7D68E629
2021-03-10 17:54:38,801-INFO-lib.common.session.http.http_json-38-http://pay-gateway.pay-test.wanyol.com/gateway/nearme.account.query
2021-03-10 17:54:38,801-INFO-lib.common.session.http.http_json-39-传入的参数：{'app_id': '100002', 'service': 'nearme.account.query', 'format': 'JSON', 'charset': 'UTF8', 'sign_type': 'MD5', 'sign': '693D5A4DD2B7140E50BDAF0FEE2F973E', 'timestamp': '2021-03-10 17:54:38', 'version': '1.0', 'bizContent': "{'ssoid': '2076075925'}"}
2021-03-10 17:54:38,820-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'data': {'ssoid': '2076075925', 'timeStamp': 1615370081943, 'useableBalance': 0, 'totalGiveBalance': 0, 'createTime': 1612151249000, 'chargeBalance': 0, 'freezeBalance': 0, 'giveBalance': 0}, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功', 'success': True}
2021-03-10 17:54:38,831-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:54:38,831-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "72902926589280"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: ""
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 17:54:38,903-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "1b7afad8c9084ceabf6dc14d6e24a05d"
s_p: "MFlXeUlVVlpxajVDME5LVVh5SEJqdFBmdkZHZzg0SzR2OXdxOUJ5Y0FPM3ZpTVdTTE04VWZtVTExUWpEcTlLVHF6SkZzODRsSGU3UzhpQXpFTmtzdkZUemxjQUNrRGV4Nk1KSUE0R3dOVmpXQ3hISU9kWEdFQWxvTHJNcjhscEFLc2Zjbmw3cnRRQzZacUhMbGVJcUJpU1FHeDAxTzVHTDd4TENlM0EwellGUENpOTFzTEpOVW5WYnhTYzNiS2ZNRUU5bHFNRVhLRHVPbkJEYm80bkJmM2JXS1RpT1k1RjVXWk10dlBoNHU1SlRMb1FtTmRVcjJFVjhQdzJKRFRzTHBDYUR6NUdtZkpHNzdVNWpEMzB3ZExjbllzT1NWTXpCQTBhd3hyTEJ3R3pUNW1CODdRVjJndk5lQWpjYWdJUjl2YnFQMmxUNjhrM2NOc3JjQUV4dThOVGZpOUVmMDBoZ0E4SWxFcUFJM0J6TG1LY0h2Y1NsUWhOZ1lsUnhmSXAySUJ3VUVyallCRmRtZEloOVJ3S0d1RWNzNUJRSERjeUdVbThuVnltSWhpbWF3NVhKZDhUOGlCeERmcHYyVW0xVzZPbm9CdVZHWkVIYklqN0Y1MVQzVlFYYjJ6alNlczdUcTBONVFnTHFLRGV0MndIMHkzMElLNGFvVDNzbTdDckNGOTlRbEtNSUl3c1dZUkNUSWdDS0VZNHF1b3h2ekdFbmo4UFJGUEdDN0ZIQVkxVTZkdW1ZdFlxeFlKbUV0WUZxTDZoRk93c3U2M3RtWGZRWGg4Z05mOU8zVFVrWWhjaHFWS29DcGh4RHBRYnUwdWtGalFwQ1QyYnpQNzdFNHNod2RzMDlTRGhIeGtMdzM2TFEyTWxJSXNtVkhvSldGbzRPUUVhakUzOEc5aGtHRkh0S2l2eEhBMWJqWVhXWnFhcFRxQk9JME1uVTdWcTNHczlwc2o5VUUxSmdnMWNzSlM1dDR3NVpja3FINXNWMWJDSHh3VFplTVEwUzlVTll4TXhaSzlIeTh4QnVmWWZ4WkNNQXN6Tk5LUFR3OGtsZXJEcEY="
m_p: "MNT3YDXdsmiUF47vuC7324GuzY01Oi4d9cX03T853yMH5W2eH7y6UXo5iU720BdR"
e_t: "1615478081994"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 1001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199706
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199705
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199704
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199703
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199702
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199692
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099683
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099682
    type: 2
    minCousume: 1300
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 11
}
userinfo {
  username: "156******06"
}

2021-03-10 17:54:38,905-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:54:38,905-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "12.0"
  t_p: "1b7afad8c9084ceabf6dc14d6e24a05d"
  imei: ""
  model: "PCRM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "8UfmU11Q"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: ""
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
type: "wxpay"
amount: "0.01"
cardno: ""
cardpwd: ""
ext: ""
basepay {
  channelId: ""
  notifyurl: "http://pay.pay-test.wanyol.com/notify/receiver"
  productName: "KB\342\200\224RECHARGE_PAY"
  productDesc: "KB\342\200\224RECHARGE_PAY"
  partnercode: "2031"
  appversion: "1.1.0"
  currencyName: "\345\217\257\345\270\201"
  rate: 1.0
  partnerorder: "null"
}
sign: "Y5BHfOaZ6RBAvQTC65Uj32K6hk+ORJfyx5Vgea9E6hOQa3n4bIGWo2uhRLNgy60N7nDCM7RvSnqEP6QbZrZGefcYWeMrJaWxh+ARdXCiJ5QVOKWpeYxeDCqraw4WT0uZaMceDQVV3DcWUxE+4FOz4u66JsZ8g9RBabPeVOHTrWpC6JdEvX/lJ5gAppFXp/2ePV2hi+z/rmwUVA8hVZU/LM1KbmQZxbbxuihVT3Ob0syEDyW1YyzoWEeHZ1eGSiyAN6YU3RMp1K8V0mddPtKm8Z4jykEM99HzM9iEnd+/01fA1EEJ34OjCK6IhN/WQsnAAl/6VFXtvtPgw3sfuX6aww=="
ip: "58.252.5.75"
isNeedExpend: "0"
appId: ""
payTypeRMBType: "0"
tradeType: "common"
screenInfo: "FULL"

2021-03-10 17:54:39,283-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "{\"appid\":\"wx93eea96ecc33f168\",\"noncestr\":\"b342f321cbf44634be8ea35959c8df95\",\"packageNm\":\"Sign=WXPay\",\"partnerid\":\"1259634601\",\"prepayid\":\"wx101754423430067ffac79713dc4a5c0000\",\"sign\":\"BD94DBED6949F09D8511974691EF99DB\",\"timestamp\":\"1615370082\"}"
}
payrequestid: "KB202103101754422076075925202482"
model: ""

2021-03-10 17:54:40,280-INFO-wxpay-scarlet-52-回调参数：<xml><transaction_id><![CDATA[1665218910997914303894177011]]></transaction_id>
<nonce_str><![CDATA[EDWX2wQFvUINl3ZO1iGBzSPudqfKtTbe]]></nonce_str>
<bank_type><![CDATA[OTHERS]]></bank_type>
<openid><![CDATA[oCg6Xt8NvRi7jGuap_5B6XdY4oYk]]></openid>
<sign><![CDATA[8DB4EF476A749F725DAFBF3A8DA8ADD9]]></sign>
<fee_type><![CDATA[CNY]]></fee_type>
<mch_id><![CDATA[1259634601]]></mch_id>
<cash_fee><![CDATA[1]]></cash_fee>
<out_trade_no><![CDATA[KB202103101754422076075925202482]]></out_trade_no>
<appid><![CDATA[wx93eea96ecc33f168]]></appid>
<total_fee>1</total_fee>
<trade_type><![CDATA[APP]]></trade_type>
<result_code><![CDATA[SUCCESS]]></result_code>
<attach><![CDATA[TEST]]></attach>
<time_end><![CDATA[20210310175440]]></time_end>
<is_subscribe><![CDATA[N]]></is_subscribe>
<return_code><![CDATA[SUCCESS]]></return_code>
</xml>
2021-03-10 17:54:40,389-INFO-wxpay-scarlet-56-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-03-10 17:54:40,389-INFO-wxpay-scarlet-58-回调解析成功
2021-03-10 17:54:40,399-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:54:40,399-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "66991330366911"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "40PZq6emVRNa1tYjQIEdgWbUuTLDSpvy"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 17:54:40,470-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "9e67ade00c0b471ca6aa67e66039ca76"
s_p: "TUdlVENRYllLT2VBb093cmd3NVRNdFBqMVhHNmNPVmVkeXM4bTV3aEJpY2RMcXNTM051VElndG9kN09qQ091dTh5M1NPUXdLR3JNTTdNbDRhY0ZmWTBxb0g4RFNha3pjRjdrNUNyWmtXeWlkMUNoSEw1WmJjdW1KdnZLdFFSYVM2bFNwVjJRSWpWWmtIajB5dVNjT0s3NG1EOTdrMkZCNmNoZURVbUxOSWJPN3Bkd2ZqcXplcXpFVElrT29SNmVhV2d6WDVQUEk2bjJPaUY3eDh5b1d4QVpCNVAyYWxQUFBWMmZwMkowSFpmSENHVjNZckpyeE13NXJ6TlhxVWtWanRVMVpzMXRSc0FwUG9aQjJIOGx1M3JUb0l1ajNKdmtudVQ5ZGNSVUhQS25WRnJHS1ZKY29oQkh5dUxEbHRwaElGSm05RTN5bXFTZU9zMVlzS0FxNWl5cXlJcDduVThzblEzQVZ3OGtKUTNWNk82d2tReTl1c0hsR0xzaXJJWXV0dWN3T21pQ3dhaXZPWWVNaDEwYmpDb21xWTNvUWxweFlpZVNLVjlaS1hVUkVwcW5ZZUxUMklCNVNGeGMzMERtUjRVUDVhWTJyVFRjWXdnOUh0bVhycDF1N3NXUXVRVHE1RGxKczE1ekp1Y1lrRWFKa1ByclNWSWJOaEJiNVJhajcxNjl3T1FvZzhzWklmaExYVmRVaXlrZ0wxdE9aelN3c0pIb3B0YmJRbm5xZnd2eEgzQmo1aE1WQmh1WVRaVmtrOXIxS3R4NmtSckhEdTRaOW1Ocmx2dXFwbWpNZm94MXllZjM1cENpMk5OZmFrdXpmQVdReXE4ZHFabkJ3R0tsSGZaN0xyWWlkdlZDb1FXYm5sZHg0QVBWU2d4TTNkcmVlQ21rd2lxc1NPRlI5TU8xWUVJWmN5MU5PRkM4NHAzT1llaloxNjBUNUhid1A0YXZPTzRMdWVFM1dXRWljTjN3T3JDYkRUWk5sdVkybXNOZGlXTzMyamJxQWVmd2hLVERnRGE2NlduM29nZHNCTHpNdktpYmVQR1VLWW9uRU1MMUI="
m_p: "C9PLnmvv2C3Ei09Uvq50Uw27bGAL2c8x50d13nQy5x6P77207Uw7Ue8hxr9kkWZj"
e_t: "1615478083568"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0.01"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 1001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199706
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199705
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199704
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199703
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199702
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199692
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099683
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099682
    type: 2
    minCousume: 1300
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 11
}
userinfo {
  username: "156******06"
}

2021-03-10 17:54:40,506-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:54:40,506-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "5.0"
  t_p: "9e67ade00c0b471ca6aa67e66039ca76"
  imei: ""
  model: "PBDM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "V2QIjVZk"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
payrequestid: "KB202103101754422076075925202482"
version: "260"
queryType: "PAY"

2021-03-10 17:54:40,552-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "2002"
  msg: ""
}
successStatus: "1086"
origAmount: "0.01"

2021-03-10 17:54:40,553-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT app_key FROM `db_platform_gateway`.`server_app_info` WHERE app_id = '100002'
2021-03-10 17:54:40,556-INFO-lib.common_biz.find_key-96-查询到秘钥信息：BB36C34EB6644AB9694315AF7D68E629
2021-03-10 17:54:40,556-INFO-lib.common.session.http.http_json-38-http://pay-gateway.pay-test.wanyol.com/gateway/nearme.account.query
2021-03-10 17:54:40,556-INFO-lib.common.session.http.http_json-39-传入的参数：{'app_id': '100002', 'service': 'nearme.account.query', 'format': 'JSON', 'charset': 'UTF8', 'sign_type': 'MD5', 'sign': 'EEB557B5731A80A3B82CDC8F9034D861', 'timestamp': '2021-03-10 17:54:40', 'version': '1.0', 'bizContent': "{'ssoid': '2076075925'}"}
2021-03-10 17:54:40,578-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'data': {'ssoid': '2076075925', 'timeStamp': 1615370083706, 'useableBalance': 1, 'totalGiveBalance': 0, 'createTime': 1612151249000, 'chargeBalance': 1, 'freezeBalance': 0, 'giveBalance': 0}, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功', 'success': True}
2021-03-10 17:54:40,578-INFO-recharge-52-可币充值成功
2021-03-10 17:54:40,579-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `db_order_4`.`order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "KB202103101754422076075925202482"
2021-03-10 17:54:40,583-INFO-lib.common_biz.fiz_assert-34-订单详情：{'id': 15365, 'pay_req_id': 'KB202103101754422076075925202482', 'notify_id': '1665218910997914303894177011', 'partner_order': 'NV203113782656752021031017544299705728410153898039', 'amount': 1, 'refund': 0, 'contents': 'KB—RECHARGE_PAY', 'products_name': 'KB—RECHARGE_PAY', 'counts': 1, 'ssoid': '2076075925', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': '1259634601', 'ip': '58.252.5.72', 'mac': '', 'model': 'PCRM00', 'app_package': 'com.example.pay_demo', 'app_ver': '1.1.0', 'sdk_ver': '260', 'partner_code': '2031', 'notify_url': 'http://pay.pay-test.wanyol.com/notify/receiver', 'status': 'OK', 'channel_id': '', 'channel_type': 'NATIVE', 'pay_type': 'wxpay', 'direct_pay': 'KEBI', 'game_type': 'WANGYOU', 'present_amount': 0, 'original_amount': 1, 'discount_info': '', 'extra': None, 'remark': 'new way', 'request_time': datetime.datetime(2021, 3, 10, 17, 54, 43), 'success_time': datetime.datetime(2021, 3, 10, 17, 54, 40), 'modify_time': datetime.datetime(2021, 3, 10, 17, 54, 43), 'trade_type': 'CZ', 'kebi_spent': 0, 'voucher_amount': 0, 'voucher_info': None, 'country_code': 'CN', 'currency': 'CNY', 'openid': None, 'brand_type': 'OPPO', 'mobile_os_ver': '17', 'platform': '', 'screen_info': 'FULL', 'voucher_id': None, 'factor': None, 'paid_amount': None, 'paid_usd': None, 'combine_order': 'N'}
2021-03-10 17:54:40,584-INFO-lib.common_biz.fiz_assert-45-订单表信息记录正确
2021-03-10 17:54:40,584-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `pay_tradeorder_4`.`trade_order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "KB202103101754422076075925202482"
2021-03-10 17:54:40,588-INFO-lib.common_biz.fiz_assert-55-trade订单详情：{'id': 8051, 'pay_req_id': 'KB202103101754422076075925202482', 'partner_order': 'NV203113782656752021031017544299705728410153898039', 'partner_code': '2031', 'products_name': 'KB—RECHARGE_PAY', 'ssoid': '2076075925', 'origin_amount': 1, 'amount': 1, 'kb_amount': 0, 'voucher_amount': 0, 'present_amount': 0, 'refund': 0, 'country_code': 'CN', 'currency': 'CNY', 'pay_type': 'wxpay', 'channel_id': '', 'channel_type': 'NATIVE', 'direct_pay': 'KEBI', 'trade_type': 'CZ', 'combine_type': 'PRIMARY', 'status': 'OK', 'notify_url': 'http://pay.pay-test.wanyol.com/notify/receiver', 'attach': '', 'extra_info': '', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': '1259634601', 'ip': '58.252.5.72', 'mac': '', 'openid': None, 'model': 'PCRM00', 'brand_type': 'OPPO', 'app_package': 'com.example.pay_demo', 'app_ver': '1.1.0', 'sdk_ver': '260', 'mobile_os_ver': '17', 'platform': '', 'screen_info': 'FULL', 'remark': None, 'request_time': datetime.datetime(2021, 3, 10, 17, 54, 42), 'success_time': datetime.datetime(2021, 3, 10, 17, 54, 43), 'modify_time': datetime.datetime(2021, 3, 10, 17, 54, 43)}
2021-03-10 17:54:40,588-INFO-lib.common_biz.fiz_assert-63-trade订单表信息记录正确
2021-03-10 17:54:40,589-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `virtual`.`tb_recharge202103` WHERE ssoid = '2076075925' and rechargeOrder = "KB202103101754422076075925202482"
2021-03-10 17:54:40,592-INFO-lib.common_biz.fiz_assert-83-tb_recharge订单详情：{'id': 28, 'ssoid': '2076075925', 'imei': '', 'rechargeTime': datetime.datetime(2021, 3, 10, 17, 54, 44), 'amount': 1, 'status': 'OK', 'rechargeOrder': 'KB202103101754422076075925202482', 'partnerId': '2031', 'rechargeChannel': '46', 'appPackage': 'com.example.pay_demo', 'model': '', 'clientIp': '', 'source': None, 'updateTime': datetime.datetime(2021, 3, 10, 17, 54, 44)}
2021-03-10 17:54:40,592-INFO-lib.common_biz.fiz_assert-91-tb_recharge订单表信息记录正确
2021-03-10 17:54:40,593-INFO-lib.common.session.http.http_json-38-http://pay.pay-test.wanyol.com/voucher/grantSingle
2021-03-10 17:54:40,593-INFO-lib.common.session.http.http_json-39-传入的参数：{'amount': '1', 'appId': '2031', 'appSubName': 'AUTO_TEST', 'blackScopeId': '', 'checkName': 'TEST_ACCOUNT', 'configId': '', 'count': 1, 'country': 'CN', 'currency': 'CNY', 'expireTime': '2022-03-10 17:54:38', 'ext1': '', 'ext2': '', 'maxAmount': 1, 'name': 'AUTO_TEST', 'partnerOrder': 'AUTO202103101754405253022303663266499187943960', 'ratio': '', 'remark': '', 'salePrice': 0, 'scopeId': '7104f7bc23e445daba913a5a96a264ac', 'settleType': 1, 'sign': '55D42B712406D9B8F045DF7EB0E0C671', 'ssoid': '2076075925', 'subScopeId': '', 'timezone': '', 'type': 2, 'useableTime': '2021-01-01 00:00:00'}
2021-03-10 17:54:40,634-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'batchVouCreateResList': [], 'msg': 'success', 'code': '0000', 'vouIdList': ['62199709'], 'batchId': ''}
2021-03-10 17:54:40,644-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:54:40,645-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "07411792308838"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "mRqx67VrkNBlYnfXd0w2PuUWEieQ9hbp"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 17:54:40,710-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "9ea83df657464fcdb0a6df63290e4cbb"
s_p: "dVRJMThqdXB1VWhaVW1kY0JSdjNTN054N2FmajlYWUdUNnpCckdnQXdPNFZ6ZFNxSFJtTkRNSVBvMTNTYW5YaXQxN1dTVGJnOU9rdmpsdEhNZXUwaW8wVmw1U1dUandiRk4zVElmRkRPWXd6dURjeUdLVU1PdnliN0ZWV3VUTWQzb1A2M29DWElLaFRaeDRUYUJGeXZmNjV3OFFQdmN0Ym00WTJmemplbVA3bWZ4ZnA5cHQxTmg0RWJDWnBRbnNwWjdWZVU2anIxZ1hlckpCUjVBdGdTY2xJOU10OXpna09wRGM3Q1phaFR1c2o3Y1h4dGxLMWNHZjRkSnNsVTFEZnY2RWMxdmdzelpQbEVxTlU4MUE5SjFPYzRqY3ljZzBhdkRTS0pqM24wZEdtb3pudlA5Q3ZqdzRUVTY5b0RTT1pXMG1NSEJQb1RnN2pNWkpDSjNUcUJmdnJXNVdtOVVRbThFOVFCN1B0dGYxbU53RXA3UkJpYUNBTmo3cXlwSXViTjZrd1pTQUlFMUlERndFMlYwUG45Y0NzWUt5OHhjOFM3S3p0YTIxS1B0d1JEeWYxeUVZd1lKdk8yN2luMndMM1dIM0hENHdoSk9QM2VpSXF2NDNEU1VaRlRYdjhzRkhrejQza1N5S0k3UWF3QVd0RmxaVUdsS3doWTBJZXFLNmJleFVYcVdBdEEzQW03ZDJUamw5Qmp6VThjY1ZJZloyY1NnMmF6VElJV0Y4S2tKaFp4Qldza25DeTRtalVSbHhGNktNT005aUswRlFIUVNsck1uSTR1Y2o3elRQNnYwYlZseE5zSjl2eE51bmlaYTdtcjhEbmhES3p0RDN2dXlNaURHM3RKTU5rNFZ3SFlkZnZMQ1JsbXBKWUZWeWsyTXZudlFkczNLa2J3SWxxNUhuME5NRFY5MFNWUEd6d1JrWFVYblk4TFAybzVqVHl0dW5nRWZ1YzJ5OWgxMHV0ODExdWY4eUExN0xkNGExYUVCRFpDaEhSMkFSV1RybWdWTmludlg2ZGdSZ2hmYmt4SjdsdkFwanlDNngxblFhN2ZFR1o="
m_p: "29dZk8qp64d0VbWfBg4q1JSj58WxHvn88V90943mBT2b08Gaoj64V80h80Wu48CQ"
e_t: "1615478083814"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0.01"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 1001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199709
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199706
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199705
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199704
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199703
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199702
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199692
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099683
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099682
    type: 2
    minCousume: 1300
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 12
}
userinfo {
  username: "156******06"
}

2021-03-10 17:54:40,729-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:54:40,729-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "6.0"
  t_p: "9ea83df657464fcdb0a6df63290e4cbb"
  imei: ""
  model: "PCRM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "FDOYwzuD"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: "42E1F48352C04B80910A7BBB7FDDE8022d5334806a8d9b083e64c9324c08c040"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
price: 2
count: 1
productname: "KB_AND_VOU_SPEND"
productdesc: "KB_AND_VOU_SPEND"
partnerid: "2031"
callBackUrl: "http://pay.pay-test.wanyol.com/notify/receiver"
partnerOrder: "gDGaw23cCbhSfXZVNos5eYuJOnMRIQE9"
channelId: ""
ver: "1.1.0"
source: "PaySDK"
attach: ""
sign: "TnRhS1RP1whcGpgFae/+TGWBudGnCVnLhHXanx9niIINjfpNgXNiIx1DOG3IIXUJy6bLROtPFPhL2xQpAIYEO232qqQDmq/KE0ukL7Eqg26EMKlepcXCEJPKq1ldUm0t/Hkf9cH5QnIVO/kI5iOlZfBrVR4nIbq31G7yPfNmHYc="
appKey: "1234"
voucherId: 62199709
voucherType: 2
voucherCount: 1
order: "6013582845112"
ip: "120.197.152.211"
factor: ""
screenInfo: "FULL"

2021-03-10 17:54:40,883-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: ""
}
rpay: "0"
gpay: "0"

2021-03-10 17:54:40,884-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT pay_req_id FROM `db_order_4`.`order_info_75` WHERE ssoid = "2076075925" and partner_order = "gDGaw23cCbhSfXZVNos5eYuJOnMRIQE9"
2021-03-10 17:54:40,887-INFO-fiz_db_operate-55-查询到partnerOrder：gDGaw23cCbhSfXZVNos5eYuJOnMRIQE9， 对应支付订单号：{'pay_req_id': 'KB202103101754432076075925076282'}
2021-03-10 17:54:40,888-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `db_order_4`.`order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "KB202103101754432076075925076282"
2021-03-10 17:54:40,892-INFO-lib.common_biz.fiz_assert-34-订单详情：{'id': 15366, 'pay_req_id': 'KB202103101754432076075925076282', 'notify_id': None, 'partner_order': 'gDGaw23cCbhSfXZVNos5eYuJOnMRIQE9', 'amount': 0, 'refund': 0, 'contents': 'KB_AND_VOU_SPEND', 'products_name': 'KB_AND_VOU_SPEND', 'counts': 1, 'ssoid': '2076075925', 'mobile_num': '', 'imei': '', 'imsi': '', 'imsi2': None, 'ip': '58.252.5.72', 'mac': '', 'model': 'PCRM00', 'app_package': 'com.example.pay_demo', 'app_ver': '', 'sdk_ver': '', 'partner_code': '2031', 'notify_url': 'http://pay.pay-test.wanyol.com/notify/receiver', 'status': 'OK', 'channel_id': '', 'channel_type': 'NATIVE', 'pay_type': 'KEBI', 'direct_pay': 'KEBI', 'game_type': None, 'present_amount': 0, 'original_amount': 2, 'discount_info': '', 'extra': None, 'remark': None, 'request_time': datetime.datetime(2021, 3, 10, 17, 54, 43), 'success_time': None, 'modify_time': datetime.datetime(2021, 3, 10, 17, 54, 44), 'trade_type': 'PAY', 'kebi_spent': 1, 'voucher_amount': 1, 'voucher_info': '{"cutAmount":"1","id":"62199709","type":"2"}', 'country_code': 'CN', 'currency': 'CNY', 'openid': None, 'brand_type': None, 'mobile_os_ver': None, 'platform': '', 'screen_info': 'FULL', 'voucher_id': '62199709', 'factor': '', 'paid_amount': None, 'paid_usd': None, 'combine_order': None}
2021-03-10 17:54:40,892-INFO-lib.common_biz.fiz_assert-45-订单表信息记录正确
2021-03-10 17:54:40,893-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `pay_tradeorder_4`.`trade_order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "KB202103101754432076075925076282"
2021-03-10 17:54:40,897-INFO-lib.common_biz.fiz_assert-55-trade订单详情：{'id': 8052, 'pay_req_id': 'KB202103101754432076075925076282', 'partner_order': 'gDGaw23cCbhSfXZVNos5eYuJOnMRIQE9', 'partner_code': '2031', 'products_name': 'KB_AND_VOU_SPEND', 'ssoid': '2076075925', 'origin_amount': 2, 'amount': 0, 'kb_amount': 1, 'voucher_amount': 1, 'present_amount': 0, 'refund': 0, 'country_code': 'CN', 'currency': 'CNY', 'pay_type': 'KEBI', 'channel_id': '', 'channel_type': 'NATIVE', 'direct_pay': 'KEBI', 'trade_type': 'PAY', 'combine_type': 'PRIMARY', 'status': 'OK', 'notify_url': 'http://pay.pay-test.wanyol.com/notify/receiver', 'attach': '', 'extra_info': '', 'mobile_num': '', 'imei': '', 'imsi': '', 'imsi2': None, 'ip': '58.252.5.72', 'mac': '', 'openid': None, 'model': 'PCRM00', 'brand_type': None, 'app_package': 'com.example.pay_demo', 'app_ver': '', 'sdk_ver': '', 'mobile_os_ver': '', 'platform': '', 'screen_info': 'FULL', 'remark': None, 'request_time': datetime.datetime(2021, 3, 10, 17, 54, 44), 'success_time': datetime.datetime(2021, 3, 10, 17, 54, 44), 'modify_time': datetime.datetime(2021, 3, 10, 17, 54, 43)}
2021-03-10 17:54:40,897-INFO-lib.common_biz.fiz_assert-63-trade订单表信息记录正确
2021-03-10 17:54:40,898-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select * from `db_pay_notify_1`.`notify_info` where request_id = "gDGaw23cCbhSfXZVNos5eYuJOnMRIQE9"
2021-03-10 17:54:40,901-INFO-lib.common_biz.fiz_assert-135-通知表信息详情：{'id': 151966, 'app_id': 10001, 'app_name': '可币系统(测试环境)', 'app_sub_id': '2031', 'notify_id': 'f3a9149d2e4e47a8bdd0779c23210406', 'request_id': 'gDGaw23cCbhSfXZVNos5eYuJOnMRIQE9', 'notify_protocol': 'HTTP', 'notity_detail': '{"appId":10001,"appSubId":"2031","httpReqType":"POST","reqContent":"{\\"attach\\":\\"\\",\\"count\\":1,\\"date\\":\\"20210310\\",\\"kbVou\\":{\\"kbVouAmount\\":1,\\"notClearCount\\":1,\\"orderAmt\\":2,\\"payVouDesc\\":\\"\\",\\"spendType\\":2,\\"vouCountDetail\\":\\"62199709:1;\\"},\\"kbVouAmount\\":1,\\"partnerId\\":\\"2031\\",\\"partnerOrder\\":\\"gDGaw23cCbhSfXZVNos5eYuJOnMRIQE9\\",\\"paySuccessTime\\":\\"2021-03-10 17:54:43\\",\\"price\\":2,\\"productDesc\\":\\"KB_AND_VOU_SPEND\\",\\"productName\\":\\"KB_AND_VOU_SPEND\\",\\"sign\\":\\"GGnFOI5YBb1ocXPbpx/KOobk5nqM7/6Ls/N9ABdNuE4bhyps8v8hNhUiAW3nfVIB3AiehKlO3OpwPt1si36XNVhWB8xcXXatHMfBxclNPt3s5TM9EqYEr1tqziEwkIME4DvKXrlCpwRgDEXT4bJHqrQVkl8yMAsFqE75lETOr8w=\\",\\"spendType\\":2,\\"ssoid\\":\\"2076075925\\"}","reqUrl":"http://pay.pay-test.wanyol.com/notify/receiver","requestId":"gDGaw23cCbhSfXZVNos5eYuJOnMRIQE9","sign":"EE68DBB3C80F91A72F03E3CE171E7C58","signType":"MD5","successResult":"OK","timeStamp":1615370083963,"version":"1.0"}', 'notify_count': 1, 'notify_response': 'OK', 'notify_handler': 'httpNotifyJsonHandler', 'fail_strategy': 'failStrategyHashImpl', 'status': 'SUCCESS', 'success_time': datetime.datetime(2021, 3, 10, 17, 54, 44), 'insert_time': datetime.datetime(2021, 3, 10, 17, 54, 44), 'update_time': datetime.datetime(2021, 3, 10, 17, 54, 44), 'extra_json': None, 'remark': None}
2021-03-10 17:54:40,901-INFO-lib.common_biz.fiz_assert-141-通知成功
2021-03-10 17:54:40,902-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：select status, usable_amt from `oppopay_voucher`.`vou_info_16` where vouId='62199709'
2021-03-10 17:54:40,905-INFO-lib.common_biz.fiz_assert-194-优惠券详情：{'status': '6', 'usable_amt': None}
2021-03-10 17:54:40,905-INFO-lib.common_biz.fiz_assert-198-优惠券表记录正确
2021-03-10 17:54:51,297-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.52.44.235', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-03-10 17:54:51,568-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-03-10 17:54:51,648-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]成功
2021-03-10 17:54:51,648-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]
2021-03-10 17:54:51,862-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]成功
2021-03-10 17:54:51,862-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]
2021-03-10 17:54:51,884-INFO-lib.common.db_operation.mysql_operation-118-成功连接到测试专用环境-MYSQL：{'host': '10.52.54.122', 'user': 'opay', 'pwd': '_UI7xHubrhTPIP1J_T4so7SU7ATCrUzm7cAh6TdBLLHWUSQUQqD8p45xVQzV3Czi', 'port': '33066'}
2021-03-10 17:54:51,884-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `test_account`.`account_test_env`
2021-03-10 17:54:51,896-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=0
2021-03-10 17:54:51,899-INFO-lib.common_biz.find_merchant_info-28-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601'}
2021-03-10 17:54:51,900-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-03-10 17:54:51,903-INFO-lib.common_biz.find_key-109-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-03-10 17:54:51,904-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no, plan_id FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=1
2021-03-10 17:54:51,907-INFO-lib.common_biz.find_merchant_info-41-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601', 'plan_id': '120877'}
2021-03-10 17:54:51,908-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-03-10 17:54:51,910-INFO-lib.common_biz.find_key-109-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-03-10 17:54:52,278-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT app_key FROM `db_platform_gateway`.`server_app_info` WHERE app_id = '100002'
2021-03-10 17:54:52,281-INFO-lib.common_biz.find_key-96-查询到秘钥信息：BB36C34EB6644AB9694315AF7D68E629
2021-03-10 17:54:52,281-INFO-lib.common.session.http.http_json-38-http://pay-gateway.pay-test.wanyol.com/gateway/nearme.account.query
2021-03-10 17:54:52,281-INFO-lib.common.session.http.http_json-39-传入的参数：{'app_id': '100002', 'service': 'nearme.account.query', 'format': 'JSON', 'charset': 'UTF8', 'sign_type': 'MD5', 'sign': '2A2CE6F3FCC851552E6CF62CFB601565', 'timestamp': '2021-03-10 17:54:52', 'version': '1.0', 'bizContent': "{'ssoid': '2076075925'}"}
2021-03-10 17:54:52,322-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'data': {'ssoid': '2076075925', 'timeStamp': 1615370095486, 'useableBalance': 0, 'totalGiveBalance': 0, 'createTime': 1612151249000, 'chargeBalance': 0, 'freezeBalance': 0, 'giveBalance': 0}, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功', 'success': True}
2021-03-10 17:54:52,333-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:54:52,333-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "42357781262339"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: ""
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 17:54:52,415-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "307ecc8f883b4f8fb668bac1498e114b"
s_p: "TDNxSWNSTWxGMHFwemwzS3FpeERhcW81V3h1c0ZQNTFlTmRMOWxTRkNoZ1BaQWZrbFVlRnRaaHdKUTN0ZVV6VVNsNWlMWWVrcDVxYWVpWld4dld6M3YxTUFxbmVkQ21qVnBLcURZczBXazJRYmZNOWduQnFRZXpSQmVNZUk3UTB4bEtMbngxQk5oWVZYU0xSakRUZVF6akYxV2kwRmZVQkk4VHJZcWdVcXl1eUZUZmttWnU3OUwyVnNFUzlHak9zY21mR0pIcUhwanU4ZDZERUdSR2haTnFMeUpSeVpGbnhubEtHQVlDZ1lyd21GOHFQOVBiZm1oUVpTbEJrWlIxVzFjamllUnozYld3Qjg0UDRsZE40UmxLSnQ4bVA2Q1ZmaVBPY3RNV1lYRW9pdjNuMExZTmdITGYzbkExeTdIb3BvY3N0bmRmUWFFZUlMVWRSSVhqTDI2eUlJbEJTTlYxR2loNTRRNkpwMGt1RFNCb0dTZ0dhT1dxODB1Z1E2emlXQXJFa3lPS3Bra3hHeVFDdW41aXZyOWtuNkFOVkVUTDM4aVB3VjJSczdEdDJxb210Y0MwOWZrUjlaSHJsTUxQTkpnUElXRnlLNUxkaTZBNDZyaHkzUWNXaXByTVR6UTd6T3FkYjhkV0Q4cUR6SEIza2FsSDk1ZVFOd3VkODV1a1QxMlZxS2pEY3VLbUJhVW5EaUpDcVFqc3k5R09aOWhOdE9CdElvV1lwYW5ramRsNWhLWHZSTWpiSDdhZEwycmlqNzkzYkVwanliVzhjVngyaU1EWVpFWld3OGc1RXdQWGNKQzd5RnN0WHhpMzdXWERDQVhqdnFYYlpVQWNEZkNkZVo4UGJESnRpaUJQanRiamNmSEN6dnFCVk52Ukp1TkFXM2ZEMFBDc1dWemtxTVVUMnZjU002cjJTcTUyUnVpWDFGcWJGUW9KNUVTTUh5MUNnZ1dNY2JXYmo4dExPUk1DaGdjOUNPRjFMSlE1QkFFbGlWOUVSdVZnTGx0Y2FXbXFDRFBnNk9mM0VnNmRoQWE1eGZNVEFRUUFyRk5kWVVDWm4="
m_p: "64210N8N577755KZ1j6Pj7150rXz9I9RvcYwtOkd1836eV7ddtVU6PVS38Sra6lI"
e_t: "1615478095544"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 1001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199706
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199705
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199704
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199703
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199702
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199692
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099683
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099682
    type: 2
    minCousume: 1300
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 11
}
userinfo {
  username: "156******06"
}

2021-03-10 17:54:52,418-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:54:52,418-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "12.0"
  t_p: "307ecc8f883b4f8fb668bac1498e114b"
  imei: ""
  model: "PCRM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "1MAqnedC"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: ""
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
type: "wxpay"
amount: "0.01"
cardno: ""
cardpwd: ""
ext: ""
basepay {
  channelId: ""
  notifyurl: "http://pay.pay-test.wanyol.com/notify/receiver"
  productName: "KB\342\200\224RECHARGE_PAY"
  productDesc: "KB\342\200\224RECHARGE_PAY"
  partnercode: "2031"
  appversion: "1.1.0"
  currencyName: "\345\217\257\345\270\201"
  rate: 1.0
  partnerorder: "null"
}
sign: "T7uRVLg8X5ou3kEAggcy7ZMLgPQrObxycTwAurYXNXOWV/V54V1S6R3UzwGCa3mipoHuyURwIcktpB5dcrP06eS8WmNpeWUUUcUVraexHG5+pV/K/Cl+DlTWmaNYHjjwCBTgzgtvSQcxF94eSIgXOXtoXhuEi16JbSPYXhk9argR7AY6DQmijAzkqNS4R6ldDVEDymvfvoVetnmM8UxhtCHVfnjp+xut8P4btNWY1Mosjg+ENYWz0haSmH1JBwrNYoSS4CV4RVVxSC9uSHM63fUEkX6JZDT1F/n21Gt8aunHz9TuXeOxV84nPRUoL1lPADuSmcIEdd6OGdht/w6TdQ=="
ip: "58.252.5.75"
isNeedExpend: "0"
appId: ""
payTypeRMBType: "0"
tradeType: "common"
screenInfo: "FULL"

2021-03-10 17:54:52,801-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "{\"appid\":\"wx93eea96ecc33f168\",\"noncestr\":\"6af92c3252194b03a3d7d7b7a1b056de\",\"packageNm\":\"Sign=WXPay\",\"partnerid\":\"1259634601\",\"prepayid\":\"wx10175455874141648d117ef18950000000\",\"sign\":\"706492E45A9388881346FC0FAF747A88\",\"timestamp\":\"1615370095\"}"
}
payrequestid: "KB202103101754552076075925485782"
model: ""

2021-03-10 17:54:53,798-INFO-wxpay-scarlet-52-回调参数：<xml><transaction_id><![CDATA[0219878254482762391820962709]]></transaction_id>
<nonce_str><![CDATA[CyTKW8SiOXpdDJvjLRPx10aE27ewI35Q]]></nonce_str>
<bank_type><![CDATA[OTHERS]]></bank_type>
<openid><![CDATA[oCg6Xt8NvRi7jGuap_5B6XdY4oYk]]></openid>
<sign><![CDATA[79B0D23928AB2988201159259FD19AD7]]></sign>
<fee_type><![CDATA[CNY]]></fee_type>
<mch_id><![CDATA[1259634601]]></mch_id>
<cash_fee><![CDATA[1]]></cash_fee>
<out_trade_no><![CDATA[KB202103101754552076075925485782]]></out_trade_no>
<appid><![CDATA[wx93eea96ecc33f168]]></appid>
<total_fee>1</total_fee>
<trade_type><![CDATA[APP]]></trade_type>
<result_code><![CDATA[SUCCESS]]></result_code>
<attach><![CDATA[TEST]]></attach>
<time_end><![CDATA[20210310175453]]></time_end>
<is_subscribe><![CDATA[N]]></is_subscribe>
<return_code><![CDATA[SUCCESS]]></return_code>
</xml>
2021-03-10 17:54:53,910-INFO-wxpay-scarlet-56-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-03-10 17:54:53,910-INFO-wxpay-scarlet-58-回调解析成功
2021-03-10 17:54:53,920-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:54:53,920-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "80552247912516"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "uSlfkYGhvq6943WA7ZNgJDPUwyiHMjm2"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 17:54:53,992-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "b9ae7912c6374569a3d0f54a0e6a8af6"
s_p: "YzdmUzY5WFRnaW1yZGdIZTVhWjBXRVhDRzI2eXVhYjF2cXpLdksySmJJWllsckoyNDVrV2M0OGx0a1YyM29HNUNsTkJjdzByNE9tbTh0cXlKS0JuNjFvckZ3ZGdmQ3gzOTdPQXlrTldYVmxtcnZ4OFJtUkVtVkVPamRLRTJXdGFxU1czMktPS3NUa3pDaDZtemtXdDZvbkJYS01SYXBOdGJiMzg3NjB3azlkMFRZT1FuZlNjZnBIdUtVbTF3eURHbWsxNFJpZ0hONUw5aGxVOVVxTWVUQXJMM2dMSTFwNGxIcUpoWXBacjNLeTNxOFlhakVLT0txNHFZZDNub2lyTGVQMUFNVEhFa0loVzYyeEEySUIwZHpCUGplYzZHakZUZFd4SHVKNzl0R0JDQTBzVG1YOG9zMmZZcDNrVWlkdnpFTnZ3b2MyWFJITEFHR2FwcU9pRHpuaUdPZUtKemRYRU9mMU9FdUpVVEEzV0dJd1JONW1aZDZGUW1rNnJLMlVWYjNSSkRWZmRURnBMUVdIU05wcWZDVHZpN3hOUEZabENUa3BJVDk0cG9XYUtYZVBoZ3lYbjBLRjQ4ZXpzSXM5ZmY5WWNZVVBhMW1sTG5GamFUQm5ScG5jMEdydVNCNXpmU2RNRkJ5bkVLQXIwNDJaeDZnUTJZdXlHb1BMZG13WFJPVlBETXpMQ0E0UmJkUGJkVEs2cWxUWThXNHhnNk1xUG11QUlodHk1S2t0TklydlhBNXRtU1lIaHpWMGYzcXhtVmxGMzNNckxvSDBaeVJzTk4wU2hVVjJIazNCRHRhbFhvdzlyU3lHMXo4T2hCTE5aQ1g5WHowbVROWE8yemJacU15NVNjRmFEV0s1SnowREtyTmt5WkpnR1BYRU94M0p6NWx6NjdjYzhEYnVoeWNKSHlaMXVWcmJtUGw1WXllV0ZQZU5hbVZNUkxJQmNlYlV0NVdXNnJrQjRBdFFRTXExVHBsWWF4OVl3cGxvUjZuMW95OUVwTlJvQm8xb0hwaEQxazU4MkM2bEZWQkJXZVUyTTl1bm5DN1FEVGVub0dRdlM="
m_p: "9MK6iaZOmVp77G2i5X4dd4942H4ujq8H6csVJa7N0x5HYHs8wmI53ORFA50545GI"
e_t: "1615478097135"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0.01"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 1001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199706
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199705
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199704
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199703
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199702
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199692
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099683
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099682
    type: 2
    minCousume: 1300
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 11
}
userinfo {
  username: "156******06"
}

2021-03-10 17:54:53,992-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:54:53,992-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "5.0"
  t_p: "b9ae7912c6374569a3d0f54a0e6a8af6"
  imei: ""
  model: "PBDM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "NBcw0r4O"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
payrequestid: "KB202103101754552076075925485782"
version: "260"
queryType: "PAY"

2021-03-10 17:54:54,038-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "2002"
  msg: ""
}
successStatus: "1086"
origAmount: "0.01"

2021-03-10 17:54:54,039-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT app_key FROM `db_platform_gateway`.`server_app_info` WHERE app_id = '100002'
2021-03-10 17:54:54,042-INFO-lib.common_biz.find_key-96-查询到秘钥信息：BB36C34EB6644AB9694315AF7D68E629
2021-03-10 17:54:54,042-INFO-lib.common.session.http.http_json-38-http://pay-gateway.pay-test.wanyol.com/gateway/nearme.account.query
2021-03-10 17:54:54,042-INFO-lib.common.session.http.http_json-39-传入的参数：{'app_id': '100002', 'service': 'nearme.account.query', 'format': 'JSON', 'charset': 'UTF8', 'sign_type': 'MD5', 'sign': '1733EFEFAB7324DAE967BFEF77C42444', 'timestamp': '2021-03-10 17:54:54', 'version': '1.0', 'bizContent': "{'ssoid': '2076075925'}"}
2021-03-10 17:54:54,061-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'data': {'ssoid': '2076075925', 'timeStamp': 1615370097234, 'useableBalance': 1, 'totalGiveBalance': 0, 'createTime': 1612151249000, 'chargeBalance': 1, 'freezeBalance': 0, 'giveBalance': 0}, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功', 'success': True}
2021-03-10 17:54:54,061-INFO-recharge-52-可币充值成功
2021-03-10 17:54:54,062-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `db_order_4`.`order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "KB202103101754552076075925485782"
2021-03-10 17:54:54,067-INFO-lib.common_biz.fiz_assert-34-订单详情：{'id': 15367, 'pay_req_id': 'KB202103101754552076075925485782', 'notify_id': '0219878254482762391820962709', 'partner_order': 'NV203113782656752021031017545575927609239734999200', 'amount': 1, 'refund': 0, 'contents': 'KB—RECHARGE_PAY', 'products_name': 'KB—RECHARGE_PAY', 'counts': 1, 'ssoid': '2076075925', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': '1259634601', 'ip': '58.252.5.72', 'mac': '', 'model': 'PCRM00', 'app_package': 'com.example.pay_demo', 'app_ver': '1.1.0', 'sdk_ver': '260', 'partner_code': '2031', 'notify_url': 'http://pay.pay-test.wanyol.com/notify/receiver', 'status': 'OK', 'channel_id': '', 'channel_type': 'NATIVE', 'pay_type': 'wxpay', 'direct_pay': 'KEBI', 'game_type': 'WANGYOU', 'present_amount': 0, 'original_amount': 1, 'discount_info': '', 'extra': None, 'remark': 'new way', 'request_time': datetime.datetime(2021, 3, 10, 17, 54, 57), 'success_time': datetime.datetime(2021, 3, 10, 17, 54, 53), 'modify_time': datetime.datetime(2021, 3, 10, 17, 54, 57), 'trade_type': 'CZ', 'kebi_spent': 0, 'voucher_amount': 0, 'voucher_info': None, 'country_code': 'CN', 'currency': 'CNY', 'openid': None, 'brand_type': 'OPPO', 'mobile_os_ver': '17', 'platform': '', 'screen_info': 'FULL', 'voucher_id': None, 'factor': None, 'paid_amount': None, 'paid_usd': None, 'combine_order': 'N'}
2021-03-10 17:54:54,067-INFO-lib.common_biz.fiz_assert-45-订单表信息记录正确
2021-03-10 17:54:54,068-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `pay_tradeorder_4`.`trade_order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "KB202103101754552076075925485782"
2021-03-10 17:54:54,071-INFO-lib.common_biz.fiz_assert-55-trade订单详情：{'id': 8053, 'pay_req_id': 'KB202103101754552076075925485782', 'partner_order': 'NV203113782656752021031017545575927609239734999200', 'partner_code': '2031', 'products_name': 'KB—RECHARGE_PAY', 'ssoid': '2076075925', 'origin_amount': 1, 'amount': 1, 'kb_amount': 0, 'voucher_amount': 0, 'present_amount': 0, 'refund': 0, 'country_code': 'CN', 'currency': 'CNY', 'pay_type': 'wxpay', 'channel_id': '', 'channel_type': 'NATIVE', 'direct_pay': 'KEBI', 'trade_type': 'CZ', 'combine_type': 'PRIMARY', 'status': 'OK', 'notify_url': 'http://pay.pay-test.wanyol.com/notify/receiver', 'attach': '', 'extra_info': '', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': '1259634601', 'ip': '58.252.5.72', 'mac': '', 'openid': None, 'model': 'PCRM00', 'brand_type': 'OPPO', 'app_package': 'com.example.pay_demo', 'app_ver': '1.1.0', 'sdk_ver': '260', 'mobile_os_ver': '17', 'platform': '', 'screen_info': 'FULL', 'remark': None, 'request_time': datetime.datetime(2021, 3, 10, 17, 54, 56), 'success_time': datetime.datetime(2021, 3, 10, 17, 54, 57), 'modify_time': datetime.datetime(2021, 3, 10, 17, 54, 57)}
2021-03-10 17:54:54,072-INFO-lib.common_biz.fiz_assert-63-trade订单表信息记录正确
2021-03-10 17:54:54,072-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `virtual`.`tb_recharge202103` WHERE ssoid = '2076075925' and rechargeOrder = "KB202103101754552076075925485782"
2021-03-10 17:54:54,075-INFO-lib.common_biz.fiz_assert-83-tb_recharge订单详情：{'id': 29, 'ssoid': '2076075925', 'imei': '', 'rechargeTime': datetime.datetime(2021, 3, 10, 17, 54, 57), 'amount': 1, 'status': 'OK', 'rechargeOrder': 'KB202103101754552076075925485782', 'partnerId': '2031', 'rechargeChannel': '46', 'appPackage': 'com.example.pay_demo', 'model': '', 'clientIp': '', 'source': None, 'updateTime': datetime.datetime(2021, 3, 10, 17, 54, 57)}
2021-03-10 17:54:54,076-INFO-lib.common_biz.fiz_assert-91-tb_recharge订单表信息记录正确
2021-03-10 17:54:54,076-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT app_key FROM `db_platform_gateway`.`server_app_info` WHERE app_id = '100002'
2021-03-10 17:54:54,079-INFO-lib.common_biz.find_key-96-查询到秘钥信息：BB36C34EB6644AB9694315AF7D68E629
2021-03-10 17:54:54,080-INFO-lib.common.session.http.http_json-38-http://pay-gateway.pay-test.wanyol.com/gateway/nearme.account.query
2021-03-10 17:54:54,080-INFO-lib.common.session.http.http_json-39-传入的参数：{'app_id': '100002', 'service': 'nearme.account.query', 'format': 'JSON', 'charset': 'UTF8', 'sign_type': 'MD5', 'sign': '1733EFEFAB7324DAE967BFEF77C42444', 'timestamp': '2021-03-10 17:54:54', 'version': '1.0', 'bizContent': "{'ssoid': '2076075925'}"}
2021-03-10 17:54:54,099-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'data': {'ssoid': '2076075925', 'timeStamp': 1615370097272, 'useableBalance': 1, 'totalGiveBalance': 0, 'createTime': 1612151249000, 'chargeBalance': 1, 'freezeBalance': 0, 'giveBalance': 0}, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功', 'success': True}
2021-03-10 17:54:54,114-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:54:54,114-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "52592474140787"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "4vStnm7jJWMl5uebciUhHoYDLpOEg3TN"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 17:54:54,187-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "a6933eb5427e452f819c3b259b270097"
s_p: "TWJHYW4xMjV0MkJEbHVTUERSMjdFM0tqMVJ2R0hPQXBIZlM1SWhzYVVGcFNobFVoWjgxMjVYbDdQQ3JxenUzbjFhejB4NlZXOWYybXJUMmM5SWI4TjRtYWlDam5DMmVTcmxOaUZGRWc0WHJWZ05OeVhxMmZqcEZnZG5tRllTdW9CWGVSbkJPU2t6UXRnWlRZejh2UnNNMHJtd0FBOVN4MHJ1NUJYZGFXYTBteWUwNDlNQ0ZjSU1mYW5Uek9NWHpGV0pxdGxnTVI1N3h6SENXdllDQ255N3dYOWlUMVNZcnRlOFhLYzdSUUZ5NXhQc3FNVDlCU1Jnb1dlbHVJdWE1c2xZZk0xWDNIWlBKaHY4cVFSWjBOa0JYT0c3eDVoWVFKVkxmOHZYUDZRaU83TzVac1J4WVl6elgyYUZJRGRtN1pGZXhsWndnRFVDcXJXYndsWFNQc3RvWGVnZHVEd3JhZzZQdkR2T1FMZjRaa2cyUWJINlZGa1puQzRMU2ZsTkQ2QlF1d29NR1hvWnI4UExpTVlUdndYZnczNFp5d1FWSjk0SlV4UmVORkl5YmFhVDhmcWRMUFp6UU5wbmY4am80UUplZHY2TFo1WnQ4cnhyeHRSRmFHRVVPMjMyOFk2bVdRcVhTNFlUbXVyVUlyaGNUc095V2RXSjNjSUY2bllrcG5zZTVSVWxQRGlGZk5MN2tXZHh5ZkZMcExOMEtubU1QaHlQRk5NNTc4YzFWZGg3SlJvQkpvYkpUM215WnNOSWU5ck9HOGJXd1RCcmZrUUk4b1UyOThxQ0tDMVMybjk3WDRMYmJ1WUdEaWREYXFRaW1zTklUOU1XdWdqMGx2dnltbmVRek9ER3lDdG1BRDZlNlhSWHNHSlFKWDJ0ZmF1a3o5cWhrYnRqMmNWWUxGdGdzdGEwemdKU3VCb3pyRDg2c0ZWcDV4aEE5U1lqQ1JFYnlLdHhEaVhKS1NFYXFXd1RKeHlpaHQxTVNTMnpwaGVEUno2SEZjUExKSE9zcXlWcVpWdzU5QlE4aWx4cmpIZDNEcEwwbGtUN0lFMlJxSWxlNms="
m_p: "AIV8V8704k368aK0d10H09gq358ZiKP6QV3ZW72B156fDETSM52h0Nzy32L3UVRi"
e_t: "1615478097330"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0.01"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 1001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199706
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199705
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199704
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199703
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199702
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199692
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099683
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099682
    type: 2
    minCousume: 1300
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 11
}
userinfo {
  username: "156******06"
}

2021-03-10 17:54:54,206-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:54:54,206-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "6.0"
  t_p: "a6933eb5427e452f819c3b259b270097"
  imei: ""
  model: "PCRM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "vRsM0rmw"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: "42E1F48352C04B80910A7BBB7FDDE8022d5334806a8d9b083e64c9324c08c040"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
price: 1
count: 1
productname: "ONLY_KB_SPEND"
productdesc: "ONLY_KB_SPEND"
partnerid: "2031"
callBackUrl: "http://pay.pay-test.wanyol.com/notify/receiver"
partnerOrder: "L8KQpi5GH3rg6mMkz09olnhTqcyVxeAI"
channelId: ""
ver: "1.1.0"
source: "PaySDK"
attach: ""
sign: "CA+f7YoEbDv/rvr+wH6QqOdhxn6ysJFPlT6FWni2N8gJmUVwQwiy5CeONK6Ec0Enn5yrzpL8+kehxbCBe68tgfls8p+e0z/GyrFczlI1JxbC5oU0yZtf93FEYu9Qvlqokbxjy86XwaP9A5q2pdX1cziQ0i+2Y3kSep+doeiPzO0="
order: "4907255447029"
ip: "120.197.152.211"
factor: ""

2021-03-10 17:54:54,337-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: ""
}
rpay: "0"
gpay: "0"

2021-03-10 17:55:17,039-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.52.44.235', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-03-10 17:55:17,308-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-03-10 17:55:17,352-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]成功
2021-03-10 17:55:17,352-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]
2021-03-10 17:55:17,565-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]成功
2021-03-10 17:55:17,565-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]
2021-03-10 17:55:17,587-INFO-lib.common.db_operation.mysql_operation-118-成功连接到测试专用环境-MYSQL：{'host': '10.52.54.122', 'user': 'opay', 'pwd': '_UI7xHubrhTPIP1J_T4so7SU7ATCrUzm7cAh6TdBLLHWUSQUQqD8p45xVQzV3Czi', 'port': '33066'}
2021-03-10 17:55:17,587-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `test_account`.`account_test_env`
2021-03-10 17:55:17,599-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=0
2021-03-10 17:55:17,602-INFO-lib.common_biz.find_merchant_info-28-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601'}
2021-03-10 17:55:17,603-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-03-10 17:55:17,606-INFO-lib.common_biz.find_key-109-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-03-10 17:55:17,607-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no, plan_id FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=1
2021-03-10 17:55:17,610-INFO-lib.common_biz.find_merchant_info-41-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601', 'plan_id': '120877'}
2021-03-10 17:55:17,611-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-03-10 17:55:17,614-INFO-lib.common_biz.find_key-109-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-03-10 17:55:17,976-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT app_key FROM `db_platform_gateway`.`server_app_info` WHERE app_id = '100002'
2021-03-10 17:55:17,979-INFO-lib.common_biz.find_key-96-查询到秘钥信息：BB36C34EB6644AB9694315AF7D68E629
2021-03-10 17:55:17,980-INFO-lib.common.session.http.http_json-38-http://pay-gateway.pay-test.wanyol.com/gateway/nearme.account.query
2021-03-10 17:55:17,980-INFO-lib.common.session.http.http_json-39-传入的参数：{'app_id': '100002', 'service': 'nearme.account.query', 'format': 'JSON', 'charset': 'UTF8', 'sign_type': 'MD5', 'sign': '912873105FD89547B28DEE2ACD85731E', 'timestamp': '2021-03-10 17:55:17', 'version': '1.0', 'bizContent': "{'ssoid': '2076075925'}"}
2021-03-10 17:55:18,022-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'data': {'ssoid': '2076075925', 'timeStamp': 1615370121271, 'useableBalance': 0, 'totalGiveBalance': 0, 'createTime': 1612151249000, 'chargeBalance': 0, 'freezeBalance': 0, 'giveBalance': 0}, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功', 'success': True}
2021-03-10 17:55:18,032-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:55:18,032-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "32728330475675"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: ""
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 17:55:18,108-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "d1488720340a483b940afe42a1b99245"
s_p: "RnROdmRYdUUzZW9PbWNpcGIzbmNVS0RTTGNYa2k4SnplaUFsNXJLQmRHdlFrTFZPWlNIb1V0bjZOeTVKWUZES1c4UjVpY1l2ZlJnNXBHYzc4a0ltamVpMlVuOUpMbmthWE81dG43bzFsakdoeUlNYUdNVUZZbnpSRUVidTdGd2hySWg1djIyeGZTWXdRQWJRbDZ4enlZb3F6YTdlRGF0ck5LMWhNa1hQQ2RscVNNdVQ1WUtRNlk3OFNwSE53Y29GWmhKWlRibUNNQWRCeVd3YWZwRlNubXJwRDVhVlg3WGl3N1g3eEFvUFRHcXpmNkpodnl5dmNoMUs2STE3Uk1pNXRCWDVISWhQS1RPTTBGd0ZkN3NYU1ppcThpU1hnVzdiZjVleGlyNGwyRG11cWtraXVJZlloTWxDNVZ0cTdVckFmUnpoTDBJZFpaN3N1cTB2UjA3eVlGNDRRNWNxVVVsRXBVRVBmTEgzQ0NLQVl5ZEN3WGpic2F6R1dCanBqTXFVR2hzRGdpUUluR2JwVENWQ2tpcHlTMEYzaHp4Mml0YUo4S2lkeGpnaG1mQ3J5SVFHYktaSTlzTmJ4bmk3Q1dZT2R0aExMYUt0MEdOdHdXYkxkYXVaTFVVbUJBbUJYcGw1SFhQV1JoRWFmenF4bVhwMHZsTTB0ZEZUaFI0Skh3RHZwSWdZZXptallrNGZiOFJhcFFSQTBQUTNiVTA5NE92dmZ4S0tjdlpqdVE0ZlZHU1d3RzhUTmQyWTVia3hhQ1FhcXNhT0tOTW5UbVZvREJ5aWhHVGlqeWpON090VldNQ1UxWmNEN0RHQmZDMzVhalZ3NlBvck9ha0VIbXZyd0ptYXBuRWI4Vkk1OWNnWGRUMEpkeGdnbjNBMDZDUVhoMjFtbDdKS1dCcXNYWGk5eEc1QjN0NVRCVVJFMmlKZmNITTVSbEgyUHRiQjk5VVBDUjJDZ0JQU3pLSGR4TU1IMlFMa21ydUJtdUFaejBOWnpBdjVvSmdYOHp3cDdKTkhPU25hZ014N2tkelpQaWVSZnBEMjdjVGtZU3N2WVdiU2NvTmk="
m_p: "kkJK773AkJ7jfK6vE3fR7fNpRBR1MblzaV4C20D2LfRX6QxNY60jILjVKPUv62fw"
e_t: "1615478121328"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 1001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199706
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199705
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199704
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199703
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199702
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199692
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099683
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099682
    type: 2
    minCousume: 1300
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 11
}
userinfo {
  username: "156******06"
}

2021-03-10 17:55:18,111-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:55:18,111-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "12.0"
  t_p: "d1488720340a483b940afe42a1b99245"
  imei: ""
  model: "PCRM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "fRg5pGc7"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: ""
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
type: "wxpay"
amount: "0.01"
cardno: ""
cardpwd: ""
ext: ""
basepay {
  channelId: ""
  notifyurl: "http://pay.pay-test.wanyol.com/notify/receiver"
  productName: "KB\342\200\224RECHARGE_PAY"
  productDesc: "KB\342\200\224RECHARGE_PAY"
  partnercode: "2031"
  appversion: "1.1.0"
  currencyName: "\345\217\257\345\270\201"
  rate: 1.0
  partnerorder: "null"
}
sign: "yW1BE4IIbRLkzHJ4t9i/RBBdCQEUtKKJ+bMYmbkanmtcD7QsAsizVbR/FPiVEcOoEzbGk0OUVyQ9S/Ipwcd5IXcdYFG5Ks1G6uRrhnv2FGvCC2I8SRtUuwo6iJo/eQP7CKrrmRvgNHGPF5WTpCRN2394mpUor2gVyOVgo5LQ59ugaiTIzJYDRsGki71ltomvT5Ka2mcnxJTibijQJpR1c1MiFmhfD9XLRemLTHrK3KKOOb8nkM5zRORUBDfrUMhlCi5+OoFOdTB6MRrdkpFEpSm2//vbLYA8H4IWQp8sy8/AIPrHpSUzuNWkIrcboEhGQmmAYBfuUIppxCj1y0hOaA=="
ip: "58.252.5.75"
isNeedExpend: "0"
appId: ""
payTypeRMBType: "0"
tradeType: "common"
screenInfo: "FULL"

2021-03-10 17:55:18,493-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "{\"appid\":\"wx93eea96ecc33f168\",\"noncestr\":\"c823573ad1744cc39e8024607695da22\",\"packageNm\":\"Sign=WXPay\",\"partnerid\":\"1259634601\",\"prepayid\":\"wx10175521670254ba38e44859877f910000\",\"sign\":\"9E29E0BE19C88AD0FEB1F6D292F5EDFD\",\"timestamp\":\"1615370121\"}"
}
payrequestid: "KB202103101755212076075925744142"
model: ""

2021-03-10 17:55:19,490-INFO-wxpay-scarlet-52-回调参数：<xml><transaction_id><![CDATA[0635263083264831068737160667]]></transaction_id>
<nonce_str><![CDATA[MLaGemzfr2Z6INclV1Fx9wBJgn5dX3WT]]></nonce_str>
<bank_type><![CDATA[OTHERS]]></bank_type>
<openid><![CDATA[oCg6Xt8NvRi7jGuap_5B6XdY4oYk]]></openid>
<sign><![CDATA[F41DED975DDFF0F3649D3FB8BDD2947A]]></sign>
<fee_type><![CDATA[CNY]]></fee_type>
<mch_id><![CDATA[1259634601]]></mch_id>
<cash_fee><![CDATA[1]]></cash_fee>
<out_trade_no><![CDATA[KB202103101755212076075925744142]]></out_trade_no>
<appid><![CDATA[wx93eea96ecc33f168]]></appid>
<total_fee>1</total_fee>
<trade_type><![CDATA[APP]]></trade_type>
<result_code><![CDATA[SUCCESS]]></result_code>
<attach><![CDATA[TEST]]></attach>
<time_end><![CDATA[20210310175519]]></time_end>
<is_subscribe><![CDATA[N]]></is_subscribe>
<return_code><![CDATA[SUCCESS]]></return_code>
</xml>
2021-03-10 17:55:19,599-INFO-wxpay-scarlet-56-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-03-10 17:55:19,599-INFO-wxpay-scarlet-58-回调解析成功
2021-03-10 17:55:19,609-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:55:19,609-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "63027035597598"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "nqb09kg2TUjIpRxlQLy1dsc6SF8M4GN5"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 17:55:19,680-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "de8ce90a0424462aa80ec3db387741c0"
s_p: "RUdsajVPZ0VDVGdKMmQ1T3JnN3h3YWgwdnZDODlwQ0k4c2VIZGQyaG0wUk9kSmJDRkFtT1A5T2NaSDdRM3cyNVhPUkNhS3ViSDc0RzZBRXBoRGxXaEJhR0FmMGxWV2M1VXM0VzhqeEhJeHZ6R1R4a0pEcGZIalJSTnZFc1JlbFY0dnRWckVIRjdMdlZ3TkU3OVJuWHBYdzBteEZSSlphZk9HeXpvY0xvOFRBS2hzUHpuWEdJQ0RDUkRkVllLQnhaUDRxdENjRUR0OVN1VmF0YXUybVh1QVR5TlVpZWhRS0FwRGZGSm5ybm8ybmVkZXhFc1RSd3ZIcjQ5MFdsMDNpbmpmTHFkbmpLRVVqTHlKa01QODltMG1mYjFsYzYyWFV0MVc5U3g2RU05cTFKdWxKMTlmT0JvOEpqTWVtZG1jaFF6aVpxTFFhME5WOHprNEtxNEswZUh1TjlzNklvakI2eFVXUGNtUmtneUdpVXl6U3c3YXR0Nklqem96SFpzSHZReUNHaGhyQjRDTzdtalRmZXRiTVZBRkRLT2w3cm1FZldZNTBNa1ZRcW91SlN2QWdYVXRoMW1CUXdYd0dtSjBVdGZ4TFQ0OFFTNmZvSWtuaUNvTWtuSmdTT3dEeEZRUzFnb1k0U3VlWnQyV1hHYlJ6UXBVa0RNRXZxQjdYM0VYZDk2ZERETEpSemlZaGJZNG1jT3haNVo5ME51SWp3Szllc1B1OHdvR1Z1YUxscFVpdXZUYXhKcGxVY09XWEVSWDBFS1lUTHhzenhoQ0JsRDJ3M3pWSDM1bGxVUE11cDdlQjhEMjlVVHNUcWYxTTkzTllmMndkdHFBbUljbzBWVFliRFNVMDd5a0QwS2c3WjMxVFRnVVBrVGUyeDZNQzJyclBRbnVtbXNBb0xDY092aHJvMWdmS3Y4MWxtUTBRazFrdTl1dXNnUzFMcWZJYkhRNEo2N25LMDJQMjRGV0liWjBGME1KNm1yNEJkSmFWZEtlYmN0U0RxWXU2U1B1ZHhqOW1xYkYxQWZOY3ZvQU95dW54amhBcVNMc21DbkxGa0lpd00="
m_p: "lbez77H6UmHUacTf9a2pYj9xbP271X95Sv7UDQw8X08562X9z07SDSU4cf0g9mbX"
e_t: "1615478122907"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0.01"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 1001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199706
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199705
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199704
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199703
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199702
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199692
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099683
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099682
    type: 2
    minCousume: 1300
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 11
}
userinfo {
  username: "156******06"
}

2021-03-10 17:55:19,680-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:55:19,680-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "5.0"
  t_p: "de8ce90a0424462aa80ec3db387741c0"
  imei: ""
  model: "PBDM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "RRNvEsRe"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
payrequestid: "KB202103101755212076075925744142"
version: "260"
queryType: "PAY"

2021-03-10 17:55:19,726-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "2002"
  msg: ""
}
successStatus: "1086"
origAmount: "0.01"

2021-03-10 17:55:19,727-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT app_key FROM `db_platform_gateway`.`server_app_info` WHERE app_id = '100002'
2021-03-10 17:55:19,730-INFO-lib.common_biz.find_key-96-查询到秘钥信息：BB36C34EB6644AB9694315AF7D68E629
2021-03-10 17:55:19,730-INFO-lib.common.session.http.http_json-38-http://pay-gateway.pay-test.wanyol.com/gateway/nearme.account.query
2021-03-10 17:55:19,730-INFO-lib.common.session.http.http_json-39-传入的参数：{'app_id': '100002', 'service': 'nearme.account.query', 'format': 'JSON', 'charset': 'UTF8', 'sign_type': 'MD5', 'sign': '08E83504BAD6822B6A96AA85A388645C', 'timestamp': '2021-03-10 17:55:19', 'version': '1.0', 'bizContent': "{'ssoid': '2076075925'}"}
2021-03-10 17:55:19,752-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'data': {'ssoid': '2076075925', 'timeStamp': 1615370123008, 'useableBalance': 1, 'totalGiveBalance': 0, 'createTime': 1612151249000, 'chargeBalance': 1, 'freezeBalance': 0, 'giveBalance': 0}, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功', 'success': True}
2021-03-10 17:55:19,752-INFO-recharge-52-可币充值成功
2021-03-10 17:55:19,753-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `db_order_4`.`order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "KB202103101755212076075925744142"
2021-03-10 17:55:19,758-INFO-lib.common_biz.fiz_assert-34-订单详情：{'id': 15369, 'pay_req_id': 'KB202103101755212076075925744142', 'notify_id': '0635263083264831068737160667', 'partner_order': 'NV203113782656752021031017552156781867248745665782', 'amount': 1, 'refund': 0, 'contents': 'KB—RECHARGE_PAY', 'products_name': 'KB—RECHARGE_PAY', 'counts': 1, 'ssoid': '2076075925', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': '1259634601', 'ip': '58.252.5.72', 'mac': '', 'model': 'PCRM00', 'app_package': 'com.example.pay_demo', 'app_ver': '1.1.0', 'sdk_ver': '260', 'partner_code': '2031', 'notify_url': 'http://pay.pay-test.wanyol.com/notify/receiver', 'status': 'OK', 'channel_id': '', 'channel_type': 'NATIVE', 'pay_type': 'wxpay', 'direct_pay': 'KEBI', 'game_type': 'WANGYOU', 'present_amount': 0, 'original_amount': 1, 'discount_info': '', 'extra': None, 'remark': 'new way', 'request_time': datetime.datetime(2021, 3, 10, 17, 55, 22), 'success_time': datetime.datetime(2021, 3, 10, 17, 55, 19), 'modify_time': datetime.datetime(2021, 3, 10, 17, 55, 23), 'trade_type': 'CZ', 'kebi_spent': 0, 'voucher_amount': 0, 'voucher_info': None, 'country_code': 'CN', 'currency': 'CNY', 'openid': None, 'brand_type': 'OPPO', 'mobile_os_ver': '17', 'platform': '', 'screen_info': 'FULL', 'voucher_id': None, 'factor': None, 'paid_amount': None, 'paid_usd': None, 'combine_order': 'N'}
2021-03-10 17:55:19,758-INFO-lib.common_biz.fiz_assert-45-订单表信息记录正确
2021-03-10 17:55:19,759-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `pay_tradeorder_4`.`trade_order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "KB202103101755212076075925744142"
2021-03-10 17:55:19,763-INFO-lib.common_biz.fiz_assert-55-trade订单详情：{'id': 8055, 'pay_req_id': 'KB202103101755212076075925744142', 'partner_order': 'NV203113782656752021031017552156781867248745665782', 'partner_code': '2031', 'products_name': 'KB—RECHARGE_PAY', 'ssoid': '2076075925', 'origin_amount': 1, 'amount': 1, 'kb_amount': 0, 'voucher_amount': 0, 'present_amount': 0, 'refund': 0, 'country_code': 'CN', 'currency': 'CNY', 'pay_type': 'wxpay', 'channel_id': '', 'channel_type': 'NATIVE', 'direct_pay': 'KEBI', 'trade_type': 'CZ', 'combine_type': 'PRIMARY', 'status': 'OK', 'notify_url': 'http://pay.pay-test.wanyol.com/notify/receiver', 'attach': '', 'extra_info': '', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': '1259634601', 'ip': '58.252.5.72', 'mac': '', 'openid': None, 'model': 'PCRM00', 'brand_type': 'OPPO', 'app_package': 'com.example.pay_demo', 'app_ver': '1.1.0', 'sdk_ver': '260', 'mobile_os_ver': '17', 'platform': '', 'screen_info': 'FULL', 'remark': None, 'request_time': datetime.datetime(2021, 3, 10, 17, 55, 21), 'success_time': datetime.datetime(2021, 3, 10, 17, 55, 23), 'modify_time': datetime.datetime(2021, 3, 10, 17, 55, 22)}
2021-03-10 17:55:19,763-INFO-lib.common_biz.fiz_assert-63-trade订单表信息记录正确
2021-03-10 17:55:19,764-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `virtual`.`tb_recharge202103` WHERE ssoid = '2076075925' and rechargeOrder = "KB202103101755212076075925744142"
2021-03-10 17:55:19,767-INFO-lib.common_biz.fiz_assert-83-tb_recharge订单详情：{'id': 30, 'ssoid': '2076075925', 'imei': '', 'rechargeTime': datetime.datetime(2021, 3, 10, 17, 55, 23), 'amount': 1, 'status': 'OK', 'rechargeOrder': 'KB202103101755212076075925744142', 'partnerId': '2031', 'rechargeChannel': '46', 'appPackage': 'com.example.pay_demo', 'model': '', 'clientIp': '', 'source': None, 'updateTime': datetime.datetime(2021, 3, 10, 17, 55, 23)}
2021-03-10 17:55:19,767-INFO-lib.common_biz.fiz_assert-91-tb_recharge订单表信息记录正确
2021-03-10 17:55:19,768-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT app_key FROM `db_platform_gateway`.`server_app_info` WHERE app_id = '100002'
2021-03-10 17:55:19,771-INFO-lib.common_biz.find_key-96-查询到秘钥信息：BB36C34EB6644AB9694315AF7D68E629
2021-03-10 17:55:19,772-INFO-lib.common.session.http.http_json-38-http://pay-gateway.pay-test.wanyol.com/gateway/nearme.account.query
2021-03-10 17:55:19,772-INFO-lib.common.session.http.http_json-39-传入的参数：{'app_id': '100002', 'service': 'nearme.account.query', 'format': 'JSON', 'charset': 'UTF8', 'sign_type': 'MD5', 'sign': '08E83504BAD6822B6A96AA85A388645C', 'timestamp': '2021-03-10 17:55:19', 'version': '1.0', 'bizContent': "{'ssoid': '2076075925'}"}
2021-03-10 17:55:19,794-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'data': {'ssoid': '2076075925', 'timeStamp': 1615370123050, 'useableBalance': 1, 'totalGiveBalance': 0, 'createTime': 1612151249000, 'chargeBalance': 1, 'freezeBalance': 0, 'giveBalance': 0}, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功', 'success': True}
2021-03-10 17:55:19,810-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:55:19,810-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "11526876725330"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "4izn83eLqfJbMVNY9Rw7kmFHEIKCt2lQ"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 17:55:19,880-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "5f3a5eab345f45bb8b54e697e1f11adf"
s_p: "ZUpoc3JiRU5hZDFyWGtBaUJ1TU1ob0lFVHJkNElpWFB4OFpocDlWbmFwd3VBZHVBekRnUFRyODNZRk0yV05BeXJ3WVMxNmk2VUltSWhwYkx1VmJFQ3ppY0s2RThzcHE0SEdiSmZwS2JYaU5iTW4xN1hLRE44ck4wRkd4d1VNYWRBWVhQdFNLaThVRnN0Mk5rTXhRd2ZKVXUweXZpTTFWWVp0UlpUWUZlR3lXTUZRdkphRFJRQTI5Y1lRQWRWYXFXcXJyREZJSW1keUdIdWlZRHNIUWVyVmpTOXJOdFRkMEpZNVltVXk0Q1pXVE4yNHVnTVE5a0kyNTVpOXNIVjk3SW5KZ2k5aGhDNUVNN1RMOTVjOGFDSGdrTXVUVUloQ0lETWdwWlp5ZWhRTFBDZVZ1ckZJTmdZZ3o1c2RzVFZqNFFFWW5rZ2hVd2ZwNmlTRHpJRkVPRHFXQzd1STc0VGZzakJpWVVVbzRqbjJLZHhIdk9DOVI4MjQ2dHc5WVhkRXJLNUhwZFJISDU4ZnVucG5vY1FzaHpVM1lsc2hIQU1FT3BrU1dCeWsxaUhPY3ZhaE4zc2V5WWVTbjc5N1BCak5qbkljSFA2QVJteG1OQ0VoZjlIQndVZzlncWZnU1RNYlR5REtpeHc0NFowcjF1anJROWlBb2lrZmRUVUZnb3JzSHA3OXNicWN4bHI2eFBTUERPOXNBSlZ4amNqYmdCQ0FKaGNzTjJJN2ZjMURScXV4UG03YVdTQ1hSMDFMSUk5YW5zQ3NkdFMyTkhVOUtlZng5QmJNY2Vlb3kwY3BCamJSNkQ3aFF1aFY5WnlmbDU1eFdZemlDYlp3aFNwSW9CZWR1eDVtbXBQeE10eXNVbDZZb3drVFlHcHFhdVRleHkxcm1DR3RSS1NNVjNxRlpBZ1dtRlYyS3RDS1NWSnV1NVVRWlNzRmZBdkVtYk1EckZzMnhhZldvb25EcUlReVFwNWVKNmxJVEdZbGttSmYxZjFrYUZ5RzVWdFRCVFdyOXdiS3pSZkRma2xUUFhLSWpFRHBXc09PdzV6cTZ0WWpOT1JFUzM="
m_p: "O6v1qnjCj4UR77cHX6F8c7k702T8ctb8eg0l62O52OS8mDTa2355H539Xq7MJ7P5"
e_t: "1615478123109"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0.01"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 1001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199706
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199705
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199704
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199703
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199702
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199692
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099683
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099682
    type: 2
    minCousume: 1300
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 11
}
userinfo {
  username: "156******06"
}

2021-03-10 17:55:19,901-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:55:19,901-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "6.0"
  t_p: "5f3a5eab345f45bb8b54e697e1f11adf"
  imei: ""
  model: "PCRM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "bJfpKbXi"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: "42E1F48352C04B80910A7BBB7FDDE8022d5334806a8d9b083e64c9324c08c040"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
price: 1
count: 1
productname: "ONLY_KB_SPEND"
productdesc: "ONLY_KB_SPEND"
partnerid: "2031"
callBackUrl: "http://pay.pay-test.wanyol.com/notify/receiver"
partnerOrder: "DXAgkfuvQCBNnLyOTtlmrM9Ys8iSPGo7"
channelId: ""
ver: "1.1.0"
source: "PaySDK"
attach: ""
sign: "XKGQxU9atP/70gmMde1WS0lekAsIiuM0ta106wM0kLxB5YNF7AYedS42Ot+ua1eznRVcXR+DPFh5KwmtpGC2iOSfjKIY0ZC5CSA75Tsgwfv6pDt14GEycDuJVbUfkIj/RYfiUCWaVmhcHoNlB0THb6bTAmUfTK6lfdbOCipGfUI="
order: "5421950324255"
ip: "120.197.152.211"
factor: ""

2021-03-10 17:55:20,016-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: ""
}
rpay: "0"
gpay: "0"

2021-03-10 17:55:33,633-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.52.44.235', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-03-10 17:55:33,977-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-03-10 17:55:34,020-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]成功
2021-03-10 17:55:34,021-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]
2021-03-10 17:55:34,264-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]成功
2021-03-10 17:55:34,264-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]
2021-03-10 17:55:34,285-INFO-lib.common.db_operation.mysql_operation-118-成功连接到测试专用环境-MYSQL：{'host': '10.52.54.122', 'user': 'opay', 'pwd': '_UI7xHubrhTPIP1J_T4so7SU7ATCrUzm7cAh6TdBLLHWUSQUQqD8p45xVQzV3Czi', 'port': '33066'}
2021-03-10 17:55:34,286-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `test_account`.`account_test_env`
2021-03-10 17:55:34,298-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=0
2021-03-10 17:55:34,301-INFO-lib.common_biz.find_merchant_info-28-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601'}
2021-03-10 17:55:34,302-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-03-10 17:55:34,305-INFO-lib.common_biz.find_key-109-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-03-10 17:55:34,306-INFO-lib.common.db_operation.mysql_operation-37-执行sql语句：SELECT app_id, merchant_no, plan_id FROM `platform_opay`.`partner_map_merchant` WHERE partner_code='2031' AND pay_channel = "wxpay" AND renewal=1
2021-03-10 17:55:34,309-INFO-lib.common_biz.find_merchant_info-41-查询到商户信息：{'app_id': 'wx93eea96ecc33f168', 'merchant_no': '1259634601', 'plan_id': '120877'}
2021-03-10 17:55:34,310-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT md5_key FROM `platform_opay`.`channel_merchant_info` WHERE app_id = 'wx93eea96ecc33f168' AND merchant_no = '1259634601' AND pay_channel = 'wxpay'
2021-03-10 17:55:34,313-INFO-lib.common_biz.find_key-109-查询到秘钥信息：3007b2945cab4fd994341dc6edb65f33
2021-03-10 17:55:34,684-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT app_key FROM `db_platform_gateway`.`server_app_info` WHERE app_id = '100002'
2021-03-10 17:55:34,687-INFO-lib.common_biz.find_key-96-查询到秘钥信息：BB36C34EB6644AB9694315AF7D68E629
2021-03-10 17:55:34,688-INFO-lib.common.session.http.http_json-38-http://pay-gateway.pay-test.wanyol.com/gateway/nearme.account.query
2021-03-10 17:55:34,688-INFO-lib.common.session.http.http_json-39-传入的参数：{'app_id': '100002', 'service': 'nearme.account.query', 'format': 'JSON', 'charset': 'UTF8', 'sign_type': 'MD5', 'sign': 'F8F07045BFE25B7A378FE5FD78291BC3', 'timestamp': '2021-03-10 17:55:34', 'version': '1.0', 'bizContent': "{'ssoid': '2076075925'}"}
2021-03-10 17:55:34,733-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'data': {'ssoid': '2076075925', 'timeStamp': 1615370138038, 'useableBalance': 0, 'totalGiveBalance': 0, 'createTime': 1612151249000, 'chargeBalance': 0, 'freezeBalance': 0, 'giveBalance': 0}, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功', 'success': True}
2021-03-10 17:55:34,747-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:55:34,747-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "05643889974396"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: ""
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 17:55:34,818-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "4b7ef0842b484f27a542fc00918d54be"
s_p: "dUtZOEVTbURtZXNLRGxpVDBRMWFFdnoya2U0MHJaNDA4YmtXMDNndXJieHVmNHY4UjZTOFVkRGpqazM0dEE3ZUp5UW85ZjZwdWRVcFJzQXNwbUVEakFiNklIR2c1cXFHMmljQmk4SmVJN2ppSHlPdFBSVnRscVRQVUhXZVcyc05HRjNmaFUzOUViaWZSVFRPYWpENzR0UHR0VnJZZ2ZlN1hzT0FicFliZFM1R2R4Q0xmR1FyQWgwYUp0UnJoalR4eUZkMk1mZDlpMzJpbkJPQmRyME9LMVlOZ05ESkp0Zm5CQlNmb0ZqMG94bjczTTk1OWxrRWF3YUxSdzZDaVQ2U3FhUUlCVEppbzU1WnA2eUk5dXFYUldSSmFsS3M3WnhWQWxqTGxrRjZIeE9UNUk5YkQ5WWhaeGRCRFFuQzdpYlQxWlBwMXh0bG5BT3ZaYWV5YVk5VTJ3Tm9INE4yS0pnQmRQNWVIWHFqQUtjNUx3cEQ1QnZuSkwzdFRsRHViY0lUN0k4aXNSN3psTlpjY1JHWmpMS2RBZ3hzUVYwNVhMMEVTMDJjWjFxZVdqRk1hUWxlcWVoVUxkMEFoaEkzc1c1MUhvNVE0WVZ1czFrbndGNzYxenA4bWZaMlBYTGNsMzVTQk9pd3hIMUNwN2tqQUtoeEZaOHhXNkpjWFdtcTJhM2ZJQUJXVVlsM0g4U214M21DSHcyaE9uNGhHUFE0cDRvak9VcGRDOFA5eDFONWp2cUtSc2toMFY4S3BtQjdUQXVrMHNLTjhIcVROVjdQRWRia093anZ3M1JYcVhKZ3cwNTBtcHNLNFliaXZYZ21vanhVZ0FQSTBGUlpDbm85Vm53enl0QURNUlFRb3BSYzhUWkxhczZjSzRZaDVzbDI4TTJZUGV4RUpNZHlOQVF2WklFMnhJUDM1dXhFczQ1SjVyUjhIV2hQZ2pMWHhHSnpGS0hiY0NjQWFIbTh2M1doNFdjQTVkcTVwajNXcjVTaFFqMFhtR3g1ajhNNmpsU0RiNmdjMWFya0hJcG1ubE5DSk1MVFJEWEFmNDZuUGVrMjYzNzc="
m_p: "pJ85C2Qb54d6F3rs69gnL63GzZtQys025a3UfW2Qg0YuVEf5wDQ8S0gWs5yFSWl5"
e_t: "1615478138096"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 1001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199706
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199705
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199704
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199703
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199702
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199692
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099683
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099682
    type: 2
    minCousume: 1300
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 11
}
userinfo {
  username: "156******06"
}

2021-03-10 17:55:34,820-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:55:34,820-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "12.0"
  t_p: "4b7ef0842b484f27a542fc00918d54be"
  imei: ""
  model: "PCRM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "OAbpYbdS"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: ""
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
type: "wxpay"
amount: "0.01"
cardno: ""
cardpwd: ""
ext: ""
basepay {
  channelId: ""
  notifyurl: "http://pay.pay-test.wanyol.com/notify/receiver"
  productName: "KB\342\200\224RECHARGE_PAY"
  productDesc: "KB\342\200\224RECHARGE_PAY"
  partnercode: "2031"
  appversion: "1.1.0"
  currencyName: "\345\217\257\345\270\201"
  rate: 1.0
  partnerorder: "null"
}
sign: "BNwMYHA2+f0sJ8NJt7+UrkNYyG9NJDpz2DuRw2tPaytzOJJXy14zlRfXM83bHFOvLSDMBPFgyq8FC0u5f+kP3L9a3p+Hn7QZZ9cwANOZbuy5MShl4iIm/WizvjDUOuqqFuQCND7sr9AIBtkuVnEZ3Yd6HtSG6TPEp3pcMuOCzJkGj5A/1LCD9cpd4PcCnCpQ0yXCnsp+W8XaTe3phzL8NfnflFR3qROKqFf6KvryonbIriTPW3mKvSkDBhxjMA2qMPP+h1xWO2QFa5Ww21B1Kv4UVH1gNCacCX7HBaeXAWhFVC4fDynLD0B7p5nXieiRY8IlMxB9mMQ58bF0j/wyIA=="
ip: "58.252.5.75"
isNeedExpend: "0"
appId: ""
payTypeRMBType: "0"
tradeType: "common"
screenInfo: "FULL"

2021-03-10 17:55:35,169-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "{\"appid\":\"wx93eea96ecc33f168\",\"noncestr\":\"3b1b75537bd74ed48ea4c65082088197\",\"packageNm\":\"Sign=WXPay\",\"partnerid\":\"1259634601\",\"prepayid\":\"wx10175538407492343480f052c1eb580000\",\"sign\":\"53B716A143353A52ECEE6FD77E073345\",\"timestamp\":\"1615370138\"}"
}
payrequestid: "KB202103101755382076075925028022"
model: ""

2021-03-10 17:55:36,166-INFO-wxpay-scarlet-52-回调参数：<xml><transaction_id><![CDATA[4712605314151975522566755849]]></transaction_id>
<nonce_str><![CDATA[y2bX4a0RSedqDI3WMsxvE9cGoBnQFp8u]]></nonce_str>
<bank_type><![CDATA[OTHERS]]></bank_type>
<openid><![CDATA[oCg6Xt8NvRi7jGuap_5B6XdY4oYk]]></openid>
<sign><![CDATA[FB2A50484D83FE107DD7D857A2A40B0C]]></sign>
<fee_type><![CDATA[CNY]]></fee_type>
<mch_id><![CDATA[1259634601]]></mch_id>
<cash_fee><![CDATA[1]]></cash_fee>
<out_trade_no><![CDATA[KB202103101755382076075925028022]]></out_trade_no>
<appid><![CDATA[wx93eea96ecc33f168]]></appid>
<total_fee>1</total_fee>
<trade_type><![CDATA[APP]]></trade_type>
<result_code><![CDATA[SUCCESS]]></result_code>
<attach><![CDATA[TEST]]></attach>
<time_end><![CDATA[20210310175536]]></time_end>
<is_subscribe><![CDATA[N]]></is_subscribe>
<return_code><![CDATA[SUCCESS]]></return_code>
</xml>
2021-03-10 17:55:36,266-INFO-wxpay-scarlet-56-<xml><return_code>SUCCESS</return_code><return_msg>OK</return_msg></xml>
2021-03-10 17:55:36,266-INFO-wxpay-scarlet-58-回调解析成功
2021-03-10 17:55:36,275-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:55:36,275-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "92543032806666"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "9gQvU72Aqi6NLKYBHOrmIoX1tnMTV5ly"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 17:55:36,380-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "714bedfee2e74ad99227f1461029b8ef"
s_p: "TE9pTkZLR29lQmVMQzNmbkpjRzZFTzlIeVBjUklWZTBRc0J2czk3eEVGcmdnbTRxUlJPM0g4bnZPWkRKNmVxSk14aWNkcWhramhGUzhwNkp1TlFqM201bEdXNTZJREo2OVc0SVNQRHdERjNmdTlWaXJmT0hENm1ST3BKbnpvR042ZVNkQk5WemRzSGNMTVFoZFg0Y1BSVm5hSmVZTHZpOWhZOTZ4S1I4MkdsMG5lZmswNFRzSERHQ05SNUprZHFEb045MU95UEdDYzZyN29xdHpTcDNmTWtGYVhnWExDRks4c24wMGcyeGFreXZUcElFRE1HNHpWUzNTSGdkOHZkdUdDTFJzNDRjNWp0eUpmNmllcGFqZ2dzc0J5eG5oR2hUamw2M3E3Q05rWWZ0bE5jdXJ1Zkt3Q1g2OGc1QlZmVUc2SWtqVzF2NFVDU3Zac1REN2c0SUxaUG9xbElFMmkxWGxWQVRscDhzeDZ3aUlpMGg5c0hkeVVRcjlsdThBWUJ0MXBTU1JoWHNmbkxhZHdRRXpKdGVwNTVMYW5zUzFuV3RsRVZNQWhKcGRjczR3VUtnN1FuVU1rSk82VDZtZWlqaDVUSTVIVHRwdzNidFUybG9VZ2FPSWZlVW1IeXFuTXZ1VkhBQ09uZ0s5bWVYd0gzbmt2WlIzbTZCaVlUTmNWSlNPZnZvTkZaZTNvbVFCcm5XYkk4UzdkYlhTRjYwNm5LMGFrY2xRZEJkWXhZeWRIVmlYZDRkUEdFSndWWjdKczBjZkJ0SnlCbEpWSmVPa3BEbGxwSG16cGlRRlpaUWxjNE5iNWtmRzNWSGpWZlA4ZlZGMjhOc2pjRkgxU015R1o5ODZQNzFMVWNYY2p2NTI3cGd2VFBUbVd0d0t6T2xKMVdsc3FIWnBOTFVSQXNjRXYzSmltVUxNMEdWdGp4b0Z5cUJOMUtncFl5NWRkVHhLUlF6aUJTaVhHZGlsNUt0NFM1YVhCRmpBZU13a25TSFQ4eGJtVFl1ZUgzcW5kSDRhWjQyMERSdXVUbEZkaHVQZDBzZlhXaWRwUDZPZmZXYWRiTGU="
m_p: "1pV6N46Y9KWPbipGt7fNYfbJ2QsCY5IDrbDD0oH7RYJM44RBypZ8PD9svJYJ048V"
e_t: "1615478139630"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0.01"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 1001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199706
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199705
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199704
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199703
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199702
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199692
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099683
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099682
    type: 2
    minCousume: 1300
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 11
}
userinfo {
  username: "156******06"
}

2021-03-10 17:55:36,381-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:55:36,381-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "5.0"
  t_p: "714bedfee2e74ad99227f1461029b8ef"
  imei: ""
  model: "PBDM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "9W4ISPDw"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
payrequestid: "KB202103101755382076075925028022"
version: "260"
queryType: "PAY"

2021-03-10 17:55:36,431-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "2002"
  msg: ""
}
successStatus: "1086"
origAmount: "0.01"

2021-03-10 17:55:36,432-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT app_key FROM `db_platform_gateway`.`server_app_info` WHERE app_id = '100002'
2021-03-10 17:55:36,435-INFO-lib.common_biz.find_key-96-查询到秘钥信息：BB36C34EB6644AB9694315AF7D68E629
2021-03-10 17:55:36,435-INFO-lib.common.session.http.http_json-38-http://pay-gateway.pay-test.wanyol.com/gateway/nearme.account.query
2021-03-10 17:55:36,435-INFO-lib.common.session.http.http_json-39-传入的参数：{'app_id': '100002', 'service': 'nearme.account.query', 'format': 'JSON', 'charset': 'UTF8', 'sign_type': 'MD5', 'sign': '7463565AD5DFC6A117A59A5CDD66AAA7', 'timestamp': '2021-03-10 17:55:36', 'version': '1.0', 'bizContent': "{'ssoid': '2076075925'}"}
2021-03-10 17:55:36,459-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'data': {'ssoid': '2076075925', 'timeStamp': 1615370139769, 'useableBalance': 1, 'totalGiveBalance': 0, 'createTime': 1612151249000, 'chargeBalance': 1, 'freezeBalance': 0, 'giveBalance': 0}, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功', 'success': True}
2021-03-10 17:55:36,459-INFO-recharge-52-可币充值成功
2021-03-10 17:55:36,460-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `db_order_4`.`order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "KB202103101755382076075925028022"
2021-03-10 17:55:36,464-INFO-lib.common_biz.fiz_assert-34-订单详情：{'id': 15371, 'pay_req_id': 'KB202103101755382076075925028022', 'notify_id': '4712605314151975522566755849', 'partner_order': 'NV203113782656752021031017553843120391033840393976', 'amount': 1, 'refund': 0, 'contents': 'KB—RECHARGE_PAY', 'products_name': 'KB—RECHARGE_PAY', 'counts': 1, 'ssoid': '2076075925', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': '1259634601', 'ip': '58.252.5.72', 'mac': '', 'model': 'PCRM00', 'app_package': 'com.example.pay_demo', 'app_ver': '1.1.0', 'sdk_ver': '260', 'partner_code': '2031', 'notify_url': 'http://pay.pay-test.wanyol.com/notify/receiver', 'status': 'OK', 'channel_id': '', 'channel_type': 'NATIVE', 'pay_type': 'wxpay', 'direct_pay': 'KEBI', 'game_type': 'WANGYOU', 'present_amount': 0, 'original_amount': 1, 'discount_info': '', 'extra': None, 'remark': 'new way', 'request_time': datetime.datetime(2021, 3, 10, 17, 55, 39), 'success_time': datetime.datetime(2021, 3, 10, 17, 55, 36), 'modify_time': datetime.datetime(2021, 3, 10, 17, 55, 40), 'trade_type': 'CZ', 'kebi_spent': 0, 'voucher_amount': 0, 'voucher_info': None, 'country_code': 'CN', 'currency': 'CNY', 'openid': None, 'brand_type': 'OPPO', 'mobile_os_ver': '17', 'platform': '', 'screen_info': 'FULL', 'voucher_id': None, 'factor': None, 'paid_amount': None, 'paid_usd': None, 'combine_order': 'N'}
2021-03-10 17:55:36,464-INFO-lib.common_biz.fiz_assert-45-订单表信息记录正确
2021-03-10 17:55:36,465-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `pay_tradeorder_4`.`trade_order_info_75` WHERE ssoid = "2076075925" and pay_req_id = "KB202103101755382076075925028022"
2021-03-10 17:55:36,469-INFO-lib.common_biz.fiz_assert-55-trade订单详情：{'id': 8057, 'pay_req_id': 'KB202103101755382076075925028022', 'partner_order': 'NV203113782656752021031017553843120391033840393976', 'partner_code': '2031', 'products_name': 'KB—RECHARGE_PAY', 'ssoid': '2076075925', 'origin_amount': 1, 'amount': 1, 'kb_amount': 0, 'voucher_amount': 0, 'present_amount': 0, 'refund': 0, 'country_code': 'CN', 'currency': 'CNY', 'pay_type': 'wxpay', 'channel_id': '', 'channel_type': 'NATIVE', 'direct_pay': 'KEBI', 'trade_type': 'CZ', 'combine_type': 'PRIMARY', 'status': 'OK', 'notify_url': 'http://pay.pay-test.wanyol.com/notify/receiver', 'attach': '', 'extra_info': '', 'mobile_num': None, 'imei': '', 'imsi': '', 'imsi2': '1259634601', 'ip': '58.252.5.72', 'mac': '', 'openid': None, 'model': 'PCRM00', 'brand_type': 'OPPO', 'app_package': 'com.example.pay_demo', 'app_ver': '1.1.0', 'sdk_ver': '260', 'mobile_os_ver': '17', 'platform': '', 'screen_info': 'FULL', 'remark': None, 'request_time': datetime.datetime(2021, 3, 10, 17, 55, 38), 'success_time': datetime.datetime(2021, 3, 10, 17, 55, 40), 'modify_time': datetime.datetime(2021, 3, 10, 17, 55, 39)}
2021-03-10 17:55:36,469-INFO-lib.common_biz.fiz_assert-63-trade订单表信息记录正确
2021-03-10 17:55:36,470-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `virtual`.`tb_recharge202103` WHERE ssoid = '2076075925' and rechargeOrder = "KB202103101755382076075925028022"
2021-03-10 17:55:36,473-INFO-lib.common_biz.fiz_assert-83-tb_recharge订单详情：{'id': 31, 'ssoid': '2076075925', 'imei': '', 'rechargeTime': datetime.datetime(2021, 3, 10, 17, 55, 40), 'amount': 1, 'status': 'OK', 'rechargeOrder': 'KB202103101755382076075925028022', 'partnerId': '2031', 'rechargeChannel': '46', 'appPackage': 'com.example.pay_demo', 'model': '', 'clientIp': '', 'source': None, 'updateTime': datetime.datetime(2021, 3, 10, 17, 55, 40)}
2021-03-10 17:55:36,474-INFO-lib.common_biz.fiz_assert-91-tb_recharge订单表信息记录正确
2021-03-10 17:55:36,474-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT app_key FROM `db_platform_gateway`.`server_app_info` WHERE app_id = '100002'
2021-03-10 17:55:36,478-INFO-lib.common_biz.find_key-96-查询到秘钥信息：BB36C34EB6644AB9694315AF7D68E629
2021-03-10 17:55:36,478-INFO-lib.common.session.http.http_json-38-http://pay-gateway.pay-test.wanyol.com/gateway/nearme.account.query
2021-03-10 17:55:36,478-INFO-lib.common.session.http.http_json-39-传入的参数：{'app_id': '100002', 'service': 'nearme.account.query', 'format': 'JSON', 'charset': 'UTF8', 'sign_type': 'MD5', 'sign': '7463565AD5DFC6A117A59A5CDD66AAA7', 'timestamp': '2021-03-10 17:55:36', 'version': '1.0', 'bizContent': "{'ssoid': '2076075925'}"}
2021-03-10 17:55:36,500-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'data': {'ssoid': '2076075925', 'timeStamp': 1615370139811, 'useableBalance': 1, 'totalGiveBalance': 0, 'createTime': 1612151249000, 'chargeBalance': 1, 'freezeBalance': 0, 'giveBalance': 0}, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功', 'success': True}
2021-03-10 17:55:36,509-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:55:36,509-INFO-lib.common.session.http.protobuf-41-传入的参数：token: "TOKEN_eyJhbGciOiJFQ0RTQSIsInYiOiIxIn0.eyJleHAiOjE2MTUyNzQ3NDE5MzQsImlkIjoiMjA3NjA3NTkyNSIsImlkYyI6InNob3VtaW5nIiwidGlkIjoiNzZTc0Q3QnI5RzVNTTJ6ckVYYlFxM3hJcHBlcE1UUEV0Uk96K2llVHZQQ05EdEN6OWs2ZGQrcEx6ejM3U2haTERkNURZMWMySUhtdVJiVDhyTXpQbUUzN2FkcHFZUFZZRjl3VTV6S3MxaVE9In0.MEUCIQD2IYKDHG9mwD77tk3ZU8IPNjoRvxqnNGXlYNi5bMH6hQIgEToRmoC23fRVBgACcnr00MPKE21gA81s98S5B9Goprg"
partner: "2031"
package: "com.example.pay_demo"
ext: ""
version: "11.0"
appKey: "1234"
count: 10000
order: "23460817359046"
ip: "121.13.218.236"
type: "0"
sdkVer: "20602"
amount: "100000.0"
gameSdkVer: 0
partnerOrder: "3tK5n2gimvDbGlQkpZMBIfx0hVocueCF"
notifyUrl: "http://pay.pay-test.wanyol.com/notify/notify/receiver"
country: "CN"

2021-03-10 17:55:36,576-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: "success"
}
t_p: "2911b46d73984fe180a7cebeeb3995e6"
s_p: "ZUZQSXVyaVk1NXM3YllQOUxRZmVHMFVIZzl1aDFHallqVjlialV3WEU5c1NqaDFFSjlNeGpOS253VDhjb3UyS3QzMll6VXhOalJrd0RIbVhyb3pkYXp1R2c1Y285aDRQT2cxaXNydEVkME5qMUFqMkJybEdpaEdaa0F6Tmk0U210cXVwZHgwNTNGSFdURjZFR2diVmx0dmdmb21RR2I4aGpUS0M4bWU2QW9aMjB1RDdDZFY3eUo5Q0lVaGptRzBEY09XMzAxS3MxWTJHckpxRzhJVUlhYzI5R21qSG1XMUVkbVM5MTIyaGVjQ0hxcGZpajBac0xSajNVNFJ2VG52TDduVjZmcjFkRWFpNUlZWlBSSHJBMzVMdWVON2FMN1MwWFNLUENYM1NVd05pejFVNHR5Q0tUSk5XZGlDdWtYZ0JXVDdyYmo0R0h6cHRzZGxVWEE3c3pRNm5uQXozQmlkV2x5QnZhMVhaSVN0eTlJTzluVFRqNHlGMThEWlk0YXdESGZkZWM1b1JiV2FzRkdCWDlzV25QTEh3Mkh3UWtuY1k2QTBybTdMT3pEVTd6dG5BNUhEdlBYcjhONXBJSVRFck5sSmZyRWlqdDdzc2ZRTUk2b1dYeEtjYkF1M3BKWlVRSkpvTkpKUXc2MXBscFJLcGdQY1l2WW9paFZzNWtTY2REbnZ5eHNuZUZUd3JzR1ZqcXNHbVNSampQNHZJNWVlbU0yVEJQOWpCd1lxNW1oUHVYN0w0azJsTkJqNWRiQ2N4a1lOQkpselBjZFBZZllSVW9uMDliVlQyTTc4M21Fb2tRWHdNN3d0cjB1SFFsRnVpU3RGdU51cVhON2kxQ293SEJZcG45aWxYTnNCbFliV2VGS2JJYUFCazJIdjlQRHZEdnB1cU1CT1M0YVNlSWM1bkNhODZES2dSYTFNTWREWkdaZnFRa0YyWnRrZmdyYzd6bUQ3SmVxQlNXSVZWSEJHVjF6UkhWa0pnclNkcFVnNFJBbTlvREllcU9WZEo3ejM3dVR1UTN3SVQ4ekl0WkNuTGgzV1k2d3VrRjhZY2YxU2E="
m_p: "eHWRHlLbdMwGKmgq2h9s8IONqy8U2uaN404s4ZmEBU3NbYm0Oy0X99Pn5zZGmT78"
e_t: "1615478139862"
balanceResult {
  baseresult {
    code: "0000"
    msg: "success"
  }
  balance: "0.01"
  vouBalance: "0"
  vouList {
    id: 0
    type: 1
    minCousume: 0
    vouCount: 1001
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199706
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199705
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199704
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199703
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199702
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199692
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099683
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62199691
    type: 2
    minCousume: 1
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouList {
    id: 62099682
    type: 2
    minCousume: 1300
    vouCount: 1
    discount: 0
    maxConsume: 0
    usableAmt: 0
    usable: 1
  }
  vouNum: 11
}
userinfo {
  username: "156******06"
}

2021-03-10 17:55:36,597-DEBUG-lib.common.session.http.protobuf-40-需加入随机字节，标志位：0
2021-03-10 17:55:36,597-INFO-lib.common.session.http.protobuf-41-传入的参数：header {
  version: "6.0"
  t_p: "2911b46d73984fe180a7cebeeb3995e6"
  imei: ""
  model: "PCRM00"
  apntype: "1"
  package: "com.example.pay_demo"
  r_v: "4POg1isr"
  ext: ""
  sdkVer: 260
  country: "CN"
  currency: "CNY"
  openId: "42E1F48352C04B80910A7BBB7FDDE8022d5334806a8d9b083e64c9324c08c040"
  brandType: "OPPO"
  mobileos: "17"
  androidVersion: "29"
}
price: 1
count: 1
productname: "ONLY_KB_SPEND"
productdesc: "ONLY_KB_SPEND"
partnerid: "2031"
callBackUrl: "http://pay.pay-test.wanyol.com/notify/receiver"
partnerOrder: "IRripUz08lwYJWLEZA6HjnabDsBxXgSO"
channelId: ""
ver: "1.1.0"
source: "PaySDK"
attach: ""
sign: "C59sbya8crTFEFOG64VlZ6GbDiJg8kwiiv3Z8WHkbVcL6cm/TZyxQMqzimSxcFvA0VU7jhnYE6c1DZQYY59iIlsr3AyemB0165VRdBocRxKMskFJROMs3I/uPmJpUBNvBVMeh3KE/IsJCUYcmIXFcnhXlBytow2LPygJtXOyygs="
order: "3998466327319"
ip: "120.197.152.211"
factor: ""

2021-03-10 17:55:36,718-INFO-lib.common.session.http.protobuf-58-返回的参数baseresult {
  code: "0000"
  msg: ""
}
rpay: "0"
gpay: "0"

2021-03-10 17:55:36,719-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT app_key FROM `db_platform_gateway`.`server_app_info` WHERE app_id = '100002'
2021-03-10 17:55:36,722-INFO-lib.common_biz.find_key-96-查询到秘钥信息：BB36C34EB6644AB9694315AF7D68E629
2021-03-10 17:55:36,722-INFO-lib.common.session.http.http_json-38-http://pay-gateway.pay-test.wanyol.com/gateway/nearme.account.query
2021-03-10 17:55:36,722-INFO-lib.common.session.http.http_json-39-传入的参数：{'app_id': '100002', 'service': 'nearme.account.query', 'format': 'JSON', 'charset': 'UTF8', 'sign_type': 'MD5', 'sign': '7463565AD5DFC6A117A59A5CDD66AAA7', 'timestamp': '2021-03-10 17:55:36', 'version': '1.0', 'bizContent': "{'ssoid': '2076075925'}"}
2021-03-10 17:55:36,747-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'data': {'ssoid': '2076075925', 'timeStamp': 1615370140059, 'useableBalance': 0, 'totalGiveBalance': 0, 'createTime': 1612151249000, 'chargeBalance': 0, 'freezeBalance': 0, 'giveBalance': 0}, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功', 'success': True}
2021-03-10 21:12:55,190-INFO-lib.common.session.dubbo.dubbo-51-dubbo invoke语句：invoke NearmeAccountOperate.addSubtractOperate({'amountMoney': '10', 'batchId': '36225323659695491531273715014232', 'bizNo': '05CIkN8SeWXHxPcYai3MOVLsRmAft9zU', 'operateType': 'PRESENT', 'requestId': '24125622075840786517766296992199', 'source': 'test', 'ssoid': '2076075925', 'timeStamp': 1615381975181})
2021-03-10 21:12:55,227-DEBUG-lib.common.session.dubbo.dubbo-55-{"data":{"ssoid":"2076075925","timeStamp":0,"amount":10.0,"success":true,"appId":null,"sign":null,"signType":null,"failReason":null,"remark":null,"extraJson":null,"accountOperateType":"PRESENT"},"success":true,"errorDetail":"成功","resCode":"000000","resMsg":"成功"}

2021-03-10 21:12:55,227-INFO-lib.common.session.dubbo.dubbo-57-dubbo回参：{'data': {'ssoid': '2076075925', 'timeStamp': 0, 'amount': 10.0, 'success': True, 'appId': None, 'sign': None, 'signType': None, 'failReason': None, 'remark': None, 'extraJson': None, 'accountOperateType': 'PRESENT'}, 'success': True, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功'}
2021-03-10 21:16:38,286-INFO-lib.common.session.dubbo.dubbo-51-dubbo invoke语句：invoke NearmeAccountOperate.addSubtractOperate({'amountMoney': '10', 'batchId': '52793625433206176699955446276316', 'bizNo': '3XCAQ6sjIZx8bG1vlzkp5wumLWKtHgoh', 'operateType': 'PRESENT', 'requestId': '27494443251172056476557668599783', 'source': 'test', 'ssoid': '2076075925', 'timeStamp': 1615382198283})
2021-03-10 21:16:38,317-DEBUG-lib.common.session.dubbo.dubbo-55-{"data":{"ssoid":"2076075925","timeStamp":0,"amount":10.0,"success":true,"appId":null,"sign":null,"signType":null,"failReason":null,"remark":null,"extraJson":null,"accountOperateType":"PRESENT"},"success":true,"errorDetail":"成功","resCode":"000000","resMsg":"成功"}

2021-03-10 21:16:38,318-INFO-lib.common.session.dubbo.dubbo-57-dubbo回参：{'data': {'ssoid': '2076075925', 'timeStamp': 0, 'amount': 10.0, 'success': True, 'appId': None, 'sign': None, 'signType': None, 'failReason': None, 'remark': None, 'extraJson': None, 'accountOperateType': 'PRESENT'}, 'success': True, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功'}
2021-03-10 21:18:18,545-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.52.44.235', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-03-10 21:18:18,802-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-03-10 21:18:18,857-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]成功
2021-03-10 21:18:18,857-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]
2021-03-10 21:18:19,072-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]成功
2021-03-10 21:18:19,072-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]
2021-03-10 21:18:19,093-INFO-lib.common.db_operation.mysql_operation-118-成功连接到测试专用环境-MYSQL：{'host': '10.52.54.122', 'user': 'opay', 'pwd': '_UI7xHubrhTPIP1J_T4so7SU7ATCrUzm7cAh6TdBLLHWUSQUQqD8p45xVQzV3Czi', 'port': '33066'}
2021-03-10 21:18:19,093-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `test_account`.`account_test_env`
2021-03-10 21:18:19,123-INFO-lib.common.session.dubbo.dubbo-51-dubbo invoke语句：invoke IFacade.simpleRefund({'partnerOrderId': '084b54511a2e462daafd733ab21d339e', 'notifyUrl': 'www.baidu.com', 'partnerCode': '2031', 'refundType': 'APPROVE_PROCESS', 'payReqId': '', 'payType': '', 'refundAmount': '0.01', 'refundId': '', 'class': 'com.keke.dispatcher.inative.entity.SimpleRefundEntity'})
2021-03-10 21:18:25,237-DEBUG-lib.common.session.dubbo.dubbo-55-Failed to invoke method simpleRefund, cause: com.alibaba.dubbo.rpc.RpcException: Failed to invoke the method refund2 in the service com.keke.service.qqpay.IQqpayServiceV2. Tried 2 times of the providers [10.177.42.206:20871, 10.177.42.207:20871] (2/2) from the registry 10.177.121.184:2181 on the consumer 10.177.85.42 using the dubbo version 2.5.3. Last error is: Invoke remote method timeout. method: refund2, provider: dubbo://10.177.42.207:20871/com.keke.service.qqpay.IQqpayServiceV2?actives=200&anyhost=true&application=oppo-paycenter-dispatcher-native&check=false&default.hostpattern=10.*.*.*&delay=-1&dubbo=2.5.4&executes=200&generic=false&interface=com.keke.service.qqpay.IQqpayServiceV2&loadbalance=leastactive&logger=slf4j&methods=payorder,refundQuery,refund2&pid=325452&retries=1&revision=0.0.1-20210205.113810-467&side=consumer&timeout=3000&timestamp=1615373959007, cause: Waiting server-side response timeout by scan timer. start time: 2021-03-10 21:18:25.965, end time: 2021-03-10 21:18:28.971, client 
2021-03-10 21:18:54,670-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.52.44.235', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-03-10 21:18:54,916-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-03-10 21:18:54,959-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]成功
2021-03-10 21:18:54,959-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]
2021-03-10 21:18:55,184-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]成功
2021-03-10 21:18:55,184-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]
2021-03-10 21:18:55,206-INFO-lib.common.db_operation.mysql_operation-118-成功连接到测试专用环境-MYSQL：{'host': '10.52.54.122', 'user': 'opay', 'pwd': '_UI7xHubrhTPIP1J_T4so7SU7ATCrUzm7cAh6TdBLLHWUSQUQqD8p45xVQzV3Czi', 'port': '33066'}
2021-03-10 21:18:55,206-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `test_account`.`account_test_env`
2021-03-10 21:18:55,232-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT merchant_key FROM `db_order_0`.`merchant_info` WHERE merchant_id = '2031'
2021-03-10 21:18:55,235-INFO-lib.common_biz.find_key-39-查询到业务线2031秘钥信息：MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCMVhIN5xQPRdmo1fmm0HBOlRk2XnJsuKgOBi6b1IFAUWtROpm6lRnw45M83a/XiHEZv5FOp+rssGlgwcWeLuexI6kCF5hFT6gsEYy9XRfpSBOUA2UwcajPRsMoEKRmEIm+NpmwnGAeeZK2Y7Xwr3imHdLJ86VgJ5zMedqd4IfXWQIDAQAB
2021-03-10 21:18:55,235-INFO-退款接口-43-Sign加密前原始字符串: notifyUrl=http://pay.pay-test.wanyol.com/notify/notify/receiver&partnerCode=2031&partnerOrder=084b54511a2e462daafd733ab21d339e&refundAmount=0.01&key=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCMVhIN5xQPRdmo1fmm0HBOlRk2XnJsuKgOBi6b1IFAUWtROpm6lRnw45M83a/XiHEZv5FOp+rssGlgwcWeLuexI6kCF5hFT6gsEYy9XRfpSBOUA2UwcajPRsMoEKRmEIm+NpmwnGAeeZK2Y7Xwr3imHdLJ86VgJ5zMedqd4IfXWQIDAQAB
2021-03-10 21:18:55,250-INFO-退款接口-46-{'partnerOrder': '084b54511a2e462daafd733ab21d339e', 'partnerCode': '2031', 'sign': '998fdb7875e80932056decae97256f0f', 'notifyUrl': 'http://pay.pay-test.wanyol.com/notify/notify/receiver', 'payReqId': '', 'refundAmount': 0.01, 'clientIp': ''}
2021-03-10 21:18:55,250-INFO-lib.common.session.http.http_json-38-http://pay.pay-test.wanyol.com/plugin/post/refund
2021-03-10 21:18:55,250-INFO-lib.common.session.http.http_json-39-传入的参数：{'partnerOrder': '084b54511a2e462daafd733ab21d339e', 'partnerCode': '2031', 'sign': '998fdb7875e80932056decae97256f0f', 'notifyUrl': 'http://pay.pay-test.wanyol.com/notify/notify/receiver', 'payReqId': '', 'refundAmount': 0.01, 'clientIp': ''}
2021-03-10 21:18:55,375-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'resCode': '800011', 'resMsg': '退款失败'}
2021-03-10 21:19:38,932-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.52.44.235', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-03-10 21:19:39,172-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-03-10 21:19:39,218-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]成功
2021-03-10 21:19:39,219-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]
2021-03-10 21:19:39,462-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]成功
2021-03-10 21:19:39,462-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]
2021-03-10 21:19:39,476-INFO-lib.common.db_operation.mysql_operation-118-成功连接到测试专用环境-MYSQL：{'host': '10.52.54.122', 'user': 'opay', 'pwd': '_UI7xHubrhTPIP1J_T4so7SU7ATCrUzm7cAh6TdBLLHWUSQUQqD8p45xVQzV3Czi', 'port': '33066'}
2021-03-10 21:19:39,477-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `test_account`.`account_test_env`
2021-03-10 21:19:39,482-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT merchant_key FROM `db_order_0`.`merchant_info` WHERE merchant_id = '2031'
2021-03-10 21:19:39,485-INFO-lib.common_biz.find_key-39-查询到业务线2031秘钥信息：MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCMVhIN5xQPRdmo1fmm0HBOlRk2XnJsuKgOBi6b1IFAUWtROpm6lRnw45M83a/XiHEZv5FOp+rssGlgwcWeLuexI6kCF5hFT6gsEYy9XRfpSBOUA2UwcajPRsMoEKRmEIm+NpmwnGAeeZK2Y7Xwr3imHdLJ86VgJ5zMedqd4IfXWQIDAQAB
2021-03-10 21:19:39,486-INFO-退款接口-43-Sign加密前原始字符串: notifyUrl=http://pay.pay-test.wanyol.com/notify/notify/receiver&partnerCode=2031&partnerOrder=084b54511a2e462daafd733ab21d339e&refundAmount=0.01&key=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCMVhIN5xQPRdmo1fmm0HBOlRk2XnJsuKgOBi6b1IFAUWtROpm6lRnw45M83a/XiHEZv5FOp+rssGlgwcWeLuexI6kCF5hFT6gsEYy9XRfpSBOUA2UwcajPRsMoEKRmEIm+NpmwnGAeeZK2Y7Xwr3imHdLJ86VgJ5zMedqd4IfXWQIDAQAB
2021-03-10 21:19:39,486-INFO-退款接口-46-{'partnerOrder': '084b54511a2e462daafd733ab21d339e', 'partnerCode': '2031', 'sign': '998fdb7875e80932056decae97256f0f', 'notifyUrl': 'http://pay.pay-test.wanyol.com/notify/notify/receiver', 'payReqId': '', 'refundAmount': 0.01, 'clientIp': ''}
2021-03-10 21:19:39,486-INFO-lib.common.session.http.http_json-38-http://pay.pay-test.wanyol.com/plugin/post/refund
2021-03-10 21:19:39,486-INFO-lib.common.session.http.http_json-39-传入的参数：{'partnerOrder': '084b54511a2e462daafd733ab21d339e', 'partnerCode': '2031', 'sign': '998fdb7875e80932056decae97256f0f', 'notifyUrl': 'http://pay.pay-test.wanyol.com/notify/notify/receiver', 'payReqId': '', 'refundAmount': 0.01, 'clientIp': ''}
2021-03-10 21:19:39,551-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'resCode': '800011', 'resMsg': '退款失败'}
2021-03-10 21:20:50,163-INFO-lib.common.session.dubbo.dubbo-51-dubbo invoke语句：invoke com.oppo.voucher.api.CouponBatchGrant.batchGrant({'couponName': 'anto_grant1615382450160', 'useableFromTime': '2020-01-01 00:00:00', 'useableEndTime': '2022-12-31 00:00:00', 'settleType': '1', 'bizNo': '2031', 'scopeId': '7104f7bc23e445daba913a5a96a264ac', 'blackScopeId': '', 'subScopeId': '', 'couponType': 'KB_COUPON', 'couponDiscountType': 'XIAOFEI', 'conditionAmount': '0', 'cutAmount': '10', 'ratio': 0, 'maxCutAmount': '0', 'applyCount': 1, 'ssoidList': ['2076075925'], 'batchId': ''})
2021-03-10 21:20:50,195-DEBUG-lib.common.session.dubbo.dubbo-55-{"data":{"batchVouCreateResList":[{"ssoid":"2076075925","vouId":"62299800"}],"vouIdList":null,"batchId":"804363b0a9814d7a826b07d28b14982c"},"success":true,"errorDetail":"成功","resCode":"000000","resMsg":"成功"}

2021-03-10 21:20:50,195-INFO-lib.common.session.dubbo.dubbo-57-dubbo回参：{'data': {'batchVouCreateResList': [{'ssoid': '2076075925', 'vouId': '62299800'}], 'vouIdList': None, 'batchId': '804363b0a9814d7a826b07d28b14982c'}, 'success': True, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功'}
2021-03-10 21:20:50,213-INFO-lib.common.session.dubbo.dubbo-51-dubbo invoke语句：invoke com.oppo.voucher.api.admin.CouponBatchInfoAdmin.operate({'couponBatchId': '804363b0a9814d7a826b07d28b14982c', 'batchOperateType': 'PASS'})
2021-03-10 21:20:55,245-DEBUG-lib.common.session.dubbo.dubbo-55-{"data":{},"success":true,"errorDetail":"成功","resCode":"000000","resMsg":"成功"}

2021-03-10 21:20:55,245-INFO-lib.common.session.dubbo.dubbo-57-dubbo回参：{'data': {}, 'success': True, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功'}
2021-03-10 21:22:30,327-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.52.44.235', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-03-10 21:22:30,587-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-03-10 21:22:30,653-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]成功
2021-03-10 21:22:30,653-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]
2021-03-10 21:22:30,881-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]成功
2021-03-10 21:22:30,881-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]
2021-03-10 21:22:30,904-INFO-lib.common.db_operation.mysql_operation-118-成功连接到测试专用环境-MYSQL：{'host': '10.52.54.122', 'user': 'opay', 'pwd': '_UI7xHubrhTPIP1J_T4so7SU7ATCrUzm7cAh6TdBLLHWUSQUQqD8p45xVQzV3Czi', 'port': '33066'}
2021-03-10 21:22:30,904-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `test_account`.`account_test_env`
2021-03-10 21:22:30,909-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT merchant_key FROM `db_order_0`.`merchant_info` WHERE merchant_id = '2031'
2021-03-10 21:22:30,912-INFO-lib.common_biz.find_key-39-查询到业务线2031秘钥信息：MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCMVhIN5xQPRdmo1fmm0HBOlRk2XnJsuKgOBi6b1IFAUWtROpm6lRnw45M83a/XiHEZv5FOp+rssGlgwcWeLuexI6kCF5hFT6gsEYy9XRfpSBOUA2UwcajPRsMoEKRmEIm+NpmwnGAeeZK2Y7Xwr3imHdLJ86VgJ5zMedqd4IfXWQIDAQAB
2021-03-10 21:22:30,912-INFO-退款接口-43-Sign加密前原始字符串: notifyUrl=http://pay.pay-test.wanyol.com/notify/notify/receiver&partnerCode=2031&partnerOrder=76a77f14a8ba487898964cc4a4ec30f1&refundAmount=0.01&key=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCMVhIN5xQPRdmo1fmm0HBOlRk2XnJsuKgOBi6b1IFAUWtROpm6lRnw45M83a/XiHEZv5FOp+rssGlgwcWeLuexI6kCF5hFT6gsEYy9XRfpSBOUA2UwcajPRsMoEKRmEIm+NpmwnGAeeZK2Y7Xwr3imHdLJ86VgJ5zMedqd4IfXWQIDAQAB
2021-03-10 21:22:30,912-INFO-退款接口-46-{'partnerOrder': '76a77f14a8ba487898964cc4a4ec30f1', 'partnerCode': '2031', 'sign': 'c1aee05954a51f25628622bee7908d2e', 'notifyUrl': 'http://pay.pay-test.wanyol.com/notify/notify/receiver', 'payReqId': '', 'refundAmount': 0.01, 'clientIp': ''}
2021-03-10 21:22:30,912-INFO-lib.common.session.http.http_json-38-http://pay.pay-test.wanyol.com/plugin/post/refund
2021-03-10 21:22:30,912-INFO-lib.common.session.http.http_json-39-传入的参数：{'partnerOrder': '76a77f14a8ba487898964cc4a4ec30f1', 'partnerCode': '2031', 'sign': 'c1aee05954a51f25628622bee7908d2e', 'notifyUrl': 'http://pay.pay-test.wanyol.com/notify/notify/receiver', 'payReqId': '', 'refundAmount': 0.01, 'clientIp': ''}
2021-03-10 21:22:31,440-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'resCode': '0000', 'resMsg': 'success'}
2021-03-10 21:25:45,688-INFO-lib.common.session.dubbo.dubbo-51-dubbo invoke语句：invoke NearmeAccountOperate.addSubtractOperate({'amountMoney': '10', 'batchId': '63274291849706582362481645828710', 'bizNo': 'zu6M91VWofAxmNDKU8yHgRTbdviCtF7l', 'operateType': 'PRESENT', 'requestId': '21875762777821437954039479253310', 'source': 'test', 'ssoid': '2076075925', 'timeStamp': 1615382745684})
2021-03-10 21:25:45,720-DEBUG-lib.common.session.dubbo.dubbo-55-{"data":{"ssoid":"2076075925","timeStamp":0,"amount":10.0,"success":true,"appId":null,"sign":null,"signType":null,"failReason":null,"remark":null,"extraJson":null,"accountOperateType":"PRESENT"},"success":true,"errorDetail":"成功","resCode":"000000","resMsg":"成功"}

2021-03-10 21:25:45,721-INFO-lib.common.session.dubbo.dubbo-57-dubbo回参：{'data': {'ssoid': '2076075925', 'timeStamp': 0, 'amount': 10.0, 'success': True, 'appId': None, 'sign': None, 'signType': None, 'failReason': None, 'remark': None, 'extraJson': None, 'accountOperateType': 'PRESENT'}, 'success': True, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功'}
2021-03-10 21:25:48,196-INFO-lib.common.session.dubbo.dubbo-51-dubbo invoke语句：invoke com.oppo.voucher.api.CouponBatchGrant.batchGrant({'couponName': 'anto_grant1615382748193', 'useableFromTime': '2020-01-01 00:00:00', 'useableEndTime': '2022-12-31 00:00:00', 'settleType': '1', 'bizNo': '2031', 'scopeId': '7104f7bc23e445daba913a5a96a264ac', 'blackScopeId': '', 'subScopeId': '', 'couponType': 'KB_COUPON', 'couponDiscountType': 'XIAOFEI', 'conditionAmount': '0', 'cutAmount': '10', 'ratio': 0, 'maxCutAmount': '0', 'applyCount': 1, 'ssoidList': ['2076075925'], 'batchId': ''})
2021-03-10 21:25:48,222-DEBUG-lib.common.session.dubbo.dubbo-55-{"data":{"batchVouCreateResList":[{"ssoid":"2076075925","vouId":"62299801"}],"vouIdList":null,"batchId":"0bcfb0998b5a4834a52d769757b935b2"},"success":true,"errorDetail":"成功","resCode":"000000","resMsg":"成功"}

2021-03-10 21:25:48,222-INFO-lib.common.session.dubbo.dubbo-57-dubbo回参：{'data': {'batchVouCreateResList': [{'ssoid': '2076075925', 'vouId': '62299801'}], 'vouIdList': None, 'batchId': '0bcfb0998b5a4834a52d769757b935b2'}, 'success': True, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功'}
2021-03-10 21:25:48,238-INFO-lib.common.session.dubbo.dubbo-51-dubbo invoke语句：invoke com.oppo.voucher.api.admin.CouponBatchInfoAdmin.operate({'couponBatchId': '0bcfb0998b5a4834a52d769757b935b2', 'batchOperateType': 'PASS'})
2021-03-10 21:25:53,274-DEBUG-lib.common.session.dubbo.dubbo-55-{"data":{},"success":true,"errorDetail":"成功","resCode":"000000","resMsg":"成功"}

2021-03-10 21:25:53,274-INFO-lib.common.session.dubbo.dubbo-57-dubbo回参：{'data': {}, 'success': True, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功'}
2021-03-10 21:27:10,425-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.52.44.235', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-03-10 21:27:10,717-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-03-10 21:27:10,762-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]成功
2021-03-10 21:27:10,762-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]
2021-03-10 21:27:10,995-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]成功
2021-03-10 21:27:10,996-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]
2021-03-10 21:27:11,018-INFO-lib.common.db_operation.mysql_operation-118-成功连接到测试专用环境-MYSQL：{'host': '10.52.54.122', 'user': 'opay', 'pwd': '_UI7xHubrhTPIP1J_T4so7SU7ATCrUzm7cAh6TdBLLHWUSQUQqD8p45xVQzV3Czi', 'port': '33066'}
2021-03-10 21:27:11,018-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `test_account`.`account_test_env`
2021-03-10 21:27:11,023-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT merchant_key FROM `db_order_0`.`merchant_info` WHERE merchant_id = '2031'
2021-03-10 21:27:11,026-INFO-lib.common_biz.find_key-39-查询到业务线2031秘钥信息：MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCMVhIN5xQPRdmo1fmm0HBOlRk2XnJsuKgOBi6b1IFAUWtROpm6lRnw45M83a/XiHEZv5FOp+rssGlgwcWeLuexI6kCF5hFT6gsEYy9XRfpSBOUA2UwcajPRsMoEKRmEIm+NpmwnGAeeZK2Y7Xwr3imHdLJ86VgJ5zMedqd4IfXWQIDAQAB
2021-03-10 21:27:11,026-INFO-退款接口-43-Sign加密前原始字符串: notifyUrl=http://pay.pay-test.wanyol.com/notify/notify/receiver&partnerCode=2031&partnerOrder=39edebce87dd41d7a867cdea048d51c2&refundAmount=0.01&key=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCMVhIN5xQPRdmo1fmm0HBOlRk2XnJsuKgOBi6b1IFAUWtROpm6lRnw45M83a/XiHEZv5FOp+rssGlgwcWeLuexI6kCF5hFT6gsEYy9XRfpSBOUA2UwcajPRsMoEKRmEIm+NpmwnGAeeZK2Y7Xwr3imHdLJ86VgJ5zMedqd4IfXWQIDAQAB
2021-03-10 21:27:11,026-INFO-退款接口-46-{'partnerOrder': '39edebce87dd41d7a867cdea048d51c2', 'partnerCode': '2031', 'sign': '2f16ff785fb9717af4700ad60a8bdab5', 'notifyUrl': 'http://pay.pay-test.wanyol.com/notify/notify/receiver', 'payReqId': '', 'refundAmount': 0.01, 'clientIp': ''}
2021-03-10 21:27:11,026-INFO-lib.common.session.http.http_json-38-http://pay.pay-test.wanyol.com/plugin/post/refund
2021-03-10 21:27:11,026-INFO-lib.common.session.http.http_json-39-传入的参数：{'partnerOrder': '39edebce87dd41d7a867cdea048d51c2', 'partnerCode': '2031', 'sign': '2f16ff785fb9717af4700ad60a8bdab5', 'notifyUrl': 'http://pay.pay-test.wanyol.com/notify/notify/receiver', 'payReqId': '', 'refundAmount': 0.01, 'clientIp': ''}
2021-03-10 21:27:11,105-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'resCode': '800011', 'resMsg': '订单{payReqId:KB202103102125572076075925854052,partnerOrder:39edebce87dd41d7a867cdea048d51c2},包含可币消费,需要人工处理!'}
2021-03-10 21:28:21,546-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.52.44.235', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-03-10 21:28:21,797-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-03-10 21:28:21,856-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]成功
2021-03-10 21:28:21,856-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]
2021-03-10 21:28:22,090-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]成功
2021-03-10 21:28:22,091-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]
2021-03-10 21:28:22,107-INFO-lib.common.db_operation.mysql_operation-118-成功连接到测试专用环境-MYSQL：{'host': '10.52.54.122', 'user': 'opay', 'pwd': '_UI7xHubrhTPIP1J_T4so7SU7ATCrUzm7cAh6TdBLLHWUSQUQqD8p45xVQzV3Czi', 'port': '33066'}
2021-03-10 21:28:22,108-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `test_account`.`account_test_env`
2021-03-10 21:28:22,113-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT merchant_key FROM `db_order_0`.`merchant_info` WHERE merchant_id = '2031'
2021-03-10 21:28:22,116-INFO-lib.common_biz.find_key-39-查询到业务线2031秘钥信息：MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCMVhIN5xQPRdmo1fmm0HBOlRk2XnJsuKgOBi6b1IFAUWtROpm6lRnw45M83a/XiHEZv5FOp+rssGlgwcWeLuexI6kCF5hFT6gsEYy9XRfpSBOUA2UwcajPRsMoEKRmEIm+NpmwnGAeeZK2Y7Xwr3imHdLJ86VgJ5zMedqd4IfXWQIDAQAB
2021-03-10 21:28:22,116-INFO-退款接口-43-Sign加密前原始字符串: notifyUrl=http://pay.pay-test.wanyol.com/notify/notify/receiver&partnerCode=2031&partnerOrder=39edebce87dd41d7a867cdea048d51c2&refundAmount=0.01&key=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCMVhIN5xQPRdmo1fmm0HBOlRk2XnJsuKgOBi6b1IFAUWtROpm6lRnw45M83a/XiHEZv5FOp+rssGlgwcWeLuexI6kCF5hFT6gsEYy9XRfpSBOUA2UwcajPRsMoEKRmEIm+NpmwnGAeeZK2Y7Xwr3imHdLJ86VgJ5zMedqd4IfXWQIDAQAB
2021-03-10 21:28:22,116-INFO-退款接口-46-{'partnerOrder': '39edebce87dd41d7a867cdea048d51c2', 'partnerCode': '2031', 'sign': '2f16ff785fb9717af4700ad60a8bdab5', 'notifyUrl': 'http://pay.pay-test.wanyol.com/notify/notify/receiver', 'payReqId': '', 'refundAmount': 0.01, 'clientIp': ''}
2021-03-10 21:28:22,116-INFO-lib.common.session.http.http_json-38-http://pay.pay-test.wanyol.com/plugin/post/refund
2021-03-10 21:28:22,117-INFO-lib.common.session.http.http_json-39-传入的参数：{'partnerOrder': '39edebce87dd41d7a867cdea048d51c2', 'partnerCode': '2031', 'sign': '2f16ff785fb9717af4700ad60a8bdab5', 'notifyUrl': 'http://pay.pay-test.wanyol.com/notify/notify/receiver', 'payReqId': '', 'refundAmount': 0.01, 'clientIp': ''}
2021-03-10 21:28:22,189-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'resCode': '800011', 'resMsg': '订单{payReqId:KB202103102125572076075925854052,partnerOrder:39edebce87dd41d7a867cdea048d51c2},包含可币消费,需要人工处理!'}
2021-03-10 21:32:48,352-INFO-lib.common.session.dubbo.dubbo-51-dubbo invoke语句：invoke com.oppo.voucher.api.CouponBatchGrant.batchGrant({'couponName': 'anto_grant1615383168350', 'useableFromTime': '2020-01-01 00:00:00', 'useableEndTime': '2022-12-31 00:00:00', 'settleType': '1', 'bizNo': '2031', 'scopeId': '7104f7bc23e445daba913a5a96a264ac', 'blackScopeId': '', 'subScopeId': '', 'couponType': 'KB_COUPON', 'couponDiscountType': 'XIAOFEI', 'conditionAmount': '0', 'cutAmount': '10', 'ratio': 0, 'maxCutAmount': '0', 'applyCount': 1, 'ssoidList': ['2076075925'], 'batchId': ''})
2021-03-10 21:32:48,379-DEBUG-lib.common.session.dubbo.dubbo-55-{"data":{"batchVouCreateResList":[{"ssoid":"2076075925","vouId":"62299802"}],"vouIdList":null,"batchId":"aa2974efcb074656b4f1a35739a7951d"},"success":true,"errorDetail":"成功","resCode":"000000","resMsg":"成功"}

2021-03-10 21:32:48,379-INFO-lib.common.session.dubbo.dubbo-57-dubbo回参：{'data': {'batchVouCreateResList': [{'ssoid': '2076075925', 'vouId': '62299802'}], 'vouIdList': None, 'batchId': 'aa2974efcb074656b4f1a35739a7951d'}, 'success': True, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功'}
2021-03-10 21:32:48,396-INFO-lib.common.session.dubbo.dubbo-51-dubbo invoke语句：invoke com.oppo.voucher.api.admin.CouponBatchInfoAdmin.operate({'couponBatchId': 'aa2974efcb074656b4f1a35739a7951d', 'batchOperateType': 'PASS'})
2021-03-10 21:32:53,442-DEBUG-lib.common.session.dubbo.dubbo-55-{"data":{},"success":true,"errorDetail":"成功","resCode":"000000","resMsg":"成功"}

2021-03-10 21:32:53,443-INFO-lib.common.session.dubbo.dubbo-57-dubbo回参：{'data': {}, 'success': True, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功'}
2021-03-10 21:37:47,874-INFO-lib.common.session.dubbo.dubbo-51-dubbo invoke语句：invoke com.oppo.voucher.api.CouponBatchGrant.batchGrant({'couponName': 'anto_grant1615383467871', 'useableFromTime': '2020-01-01 00:00:00', 'useableEndTime': '2022-12-31 00:00:00', 'settleType': '1', 'bizNo': '2031', 'scopeId': '7104f7bc23e445daba913a5a96a264ac', 'blackScopeId': '', 'subScopeId': '', 'couponType': 'KB_COUPON', 'couponDiscountType': 'XIAOFEI', 'conditionAmount': '0', 'cutAmount': '10', 'ratio': 0, 'maxCutAmount': '0', 'applyCount': 1, 'ssoidList': ['2076075925'], 'batchId': ''})
2021-03-10 21:37:47,900-DEBUG-lib.common.session.dubbo.dubbo-55-{"data":{"batchVouCreateResList":[{"ssoid":"2076075925","vouId":"62299803"}],"vouIdList":null,"batchId":"c5e6153b2ab142ab88377407a07bbcaf"},"success":true,"errorDetail":"成功","resCode":"000000","resMsg":"成功"}

2021-03-10 21:37:47,900-INFO-lib.common.session.dubbo.dubbo-57-dubbo回参：{'data': {'batchVouCreateResList': [{'ssoid': '2076075925', 'vouId': '62299803'}], 'vouIdList': None, 'batchId': 'c5e6153b2ab142ab88377407a07bbcaf'}, 'success': True, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功'}
2021-03-10 21:37:47,915-INFO-lib.common.session.dubbo.dubbo-51-dubbo invoke语句：invoke com.oppo.voucher.api.admin.CouponBatchInfoAdmin.operate({'couponBatchId': 'c5e6153b2ab142ab88377407a07bbcaf', 'batchOperateType': 'PASS'})
2021-03-10 21:37:52,959-DEBUG-lib.common.session.dubbo.dubbo-55-{"data":{},"success":true,"errorDetail":"成功","resCode":"000000","resMsg":"成功"}

2021-03-10 21:37:52,959-INFO-lib.common.session.dubbo.dubbo-57-dubbo回参：{'data': {}, 'success': True, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功'}
2021-03-10 21:38:50,435-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.52.44.235', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-03-10 21:38:50,679-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-03-10 21:38:50,725-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]成功
2021-03-10 21:38:50,725-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]
2021-03-10 21:38:50,953-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]成功
2021-03-10 21:38:50,954-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]
2021-03-10 21:38:50,975-INFO-lib.common.db_operation.mysql_operation-118-成功连接到测试专用环境-MYSQL：{'host': '10.52.54.122', 'user': 'opay', 'pwd': '_UI7xHubrhTPIP1J_T4so7SU7ATCrUzm7cAh6TdBLLHWUSQUQqD8p45xVQzV3Czi', 'port': '33066'}
2021-03-10 21:38:50,976-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `test_account`.`account_test_env`
2021-03-10 21:38:51,117-INFO-qq-scarlet-60-<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8" isELIgnored="false"%>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>
<body>
	<h2>404! 您试图访问的页面未找到.</h2>
</body>
</html>

2021-03-10 21:39:18,656-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.52.44.235', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-03-10 21:39:18,901-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-03-10 21:39:19,005-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]成功
2021-03-10 21:39:19,005-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]
2021-03-10 21:39:19,248-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]成功
2021-03-10 21:39:19,248-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]
2021-03-10 21:39:19,269-INFO-lib.common.db_operation.mysql_operation-118-成功连接到测试专用环境-MYSQL：{'host': '10.52.54.122', 'user': 'opay', 'pwd': '_UI7xHubrhTPIP1J_T4so7SU7ATCrUzm7cAh6TdBLLHWUSQUQqD8p45xVQzV3Czi', 'port': '33066'}
2021-03-10 21:39:19,269-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `test_account`.`account_test_env`
2021-03-10 21:39:19,392-INFO-qq-scarlet-60-<xml><return_code>SUCCESS</return_code></xml>
2021-03-10 21:39:19,392-INFO-qq-scarlet-62-回调解析成功
2021-03-10 21:40:52,167-INFO-lib.common.session.dubbo.dubbo-51-dubbo invoke语句：invoke com.oppo.voucher.api.CouponBatchGrant.batchGrant({'couponName': 'anto_grant1615383652165', 'useableFromTime': '2020-01-01 00:00:00', 'useableEndTime': '2022-12-31 00:00:00', 'settleType': '1', 'bizNo': '2031', 'scopeId': '7104f7bc23e445daba913a5a96a264ac', 'blackScopeId': '', 'subScopeId': '', 'couponType': 'KB_COUPON', 'couponDiscountType': 'XIAOFEI', 'conditionAmount': '0', 'cutAmount': '10', 'ratio': 0, 'maxCutAmount': '0', 'applyCount': 1, 'ssoidList': ['2076075925'], 'batchId': ''})
2021-03-10 21:40:52,193-DEBUG-lib.common.session.dubbo.dubbo-55-{"data":{"batchVouCreateResList":[{"ssoid":"2076075925","vouId":"62299804"}],"vouIdList":null,"batchId":"35e3259ddd0d4385abd8383208d652f3"},"success":true,"errorDetail":"成功","resCode":"000000","resMsg":"成功"}

2021-03-10 21:40:52,193-INFO-lib.common.session.dubbo.dubbo-57-dubbo回参：{'data': {'batchVouCreateResList': [{'ssoid': '2076075925', 'vouId': '62299804'}], 'vouIdList': None, 'batchId': '35e3259ddd0d4385abd8383208d652f3'}, 'success': True, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功'}
2021-03-10 21:40:52,208-INFO-lib.common.session.dubbo.dubbo-51-dubbo invoke语句：invoke com.oppo.voucher.api.admin.CouponBatchInfoAdmin.operate({'couponBatchId': '35e3259ddd0d4385abd8383208d652f3', 'batchOperateType': 'PASS'})
2021-03-10 21:40:54,200-INFO-lib.common.session.dubbo.dubbo-51-dubbo invoke语句：invoke NearmeAccountOperate.addSubtractOperate({'amountMoney': '10', 'batchId': '33396801755246263224436239219902', 'bizNo': 'Bg06XsnPmxrcqHeZ1jvIOJ89Tuzk42MQ', 'operateType': 'PRESENT', 'requestId': '84321796738603103881316752694509', 'source': 'test', 'ssoid': '2076075925', 'timeStamp': 1615383654191})
2021-03-10 21:40:54,238-DEBUG-lib.common.session.dubbo.dubbo-55-{"data":{"ssoid":"2076075925","timeStamp":0,"amount":10.0,"success":true,"appId":null,"sign":null,"signType":null,"failReason":null,"remark":null,"extraJson":null,"accountOperateType":"PRESENT"},"success":true,"errorDetail":"成功","resCode":"000000","resMsg":"成功"}

2021-03-10 21:40:54,239-INFO-lib.common.session.dubbo.dubbo-57-dubbo回参：{'data': {'ssoid': '2076075925', 'timeStamp': 0, 'amount': 10.0, 'success': True, 'appId': None, 'sign': None, 'signType': None, 'failReason': None, 'remark': None, 'extraJson': None, 'accountOperateType': 'PRESENT'}, 'success': True, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功'}
2021-03-10 21:40:57,248-DEBUG-lib.common.session.dubbo.dubbo-55-{"data":{},"success":true,"errorDetail":"成功","resCode":"000000","resMsg":"成功"}

2021-03-10 21:40:57,248-INFO-lib.common.session.dubbo.dubbo-57-dubbo回参：{'data': {}, 'success': True, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功'}
2021-03-10 21:41:26,862-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.52.44.235', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-03-10 21:41:27,147-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-03-10 21:41:27,192-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]成功
2021-03-10 21:41:27,192-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]
2021-03-10 21:41:27,415-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]成功
2021-03-10 21:41:27,415-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]
2021-03-10 21:41:27,429-INFO-lib.common.db_operation.mysql_operation-118-成功连接到测试专用环境-MYSQL：{'host': '10.52.54.122', 'user': 'opay', 'pwd': '_UI7xHubrhTPIP1J_T4so7SU7ATCrUzm7cAh6TdBLLHWUSQUQqD8p45xVQzV3Czi', 'port': '33066'}
2021-03-10 21:41:27,430-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `test_account`.`account_test_env`
2021-03-10 21:41:27,671-INFO-qq-scarlet-60-<xml><return_code>SUCCESS</return_code></xml>
2021-03-10 21:41:27,671-INFO-qq-scarlet-62-回调解析成功
2021-03-10 21:51:55,396-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.52.44.235', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-03-10 21:51:55,728-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-03-10 21:51:55,820-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]成功
2021-03-10 21:51:55,821-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]
2021-03-10 21:51:56,062-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]成功
2021-03-10 21:51:56,062-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]
2021-03-10 21:51:56,077-INFO-lib.common.db_operation.mysql_operation-118-成功连接到测试专用环境-MYSQL：{'host': '10.52.54.122', 'user': 'opay', 'pwd': '_UI7xHubrhTPIP1J_T4so7SU7ATCrUzm7cAh6TdBLLHWUSQUQqD8p45xVQzV3Czi', 'port': '33066'}
2021-03-10 21:51:56,077-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `test_account`.`account_test_env`
2021-03-10 21:51:56,082-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT merchant_key FROM `db_order_0`.`merchant_info` WHERE merchant_id = '2031'
2021-03-10 21:51:56,101-INFO-lib.common_biz.find_key-39-查询到业务线2031秘钥信息：MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCMVhIN5xQPRdmo1fmm0HBOlRk2XnJsuKgOBi6b1IFAUWtROpm6lRnw45M83a/XiHEZv5FOp+rssGlgwcWeLuexI6kCF5hFT6gsEYy9XRfpSBOUA2UwcajPRsMoEKRmEIm+NpmwnGAeeZK2Y7Xwr3imHdLJ86VgJ5zMedqd4IfXWQIDAQAB
2021-03-10 21:51:56,101-INFO-退款接口-43-Sign加密前原始字符串: notifyUrl=http://pay.pay-test.wanyol.com/notify/notify/receiver&partnerCode=2031&partnerOrder=5fc69de40cb0452e98750d2d77084657&refundAmount=0.01&key=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCMVhIN5xQPRdmo1fmm0HBOlRk2XnJsuKgOBi6b1IFAUWtROpm6lRnw45M83a/XiHEZv5FOp+rssGlgwcWeLuexI6kCF5hFT6gsEYy9XRfpSBOUA2UwcajPRsMoEKRmEIm+NpmwnGAeeZK2Y7Xwr3imHdLJ86VgJ5zMedqd4IfXWQIDAQAB
2021-03-10 21:51:56,102-INFO-退款接口-46-{'partnerOrder': '5fc69de40cb0452e98750d2d77084657', 'partnerCode': '2031', 'sign': 'edaf5795511e38a5f1bd1a875f0b0fee', 'notifyUrl': 'http://pay.pay-test.wanyol.com/notify/notify/receiver', 'payReqId': '', 'refundAmount': 0.01, 'clientIp': ''}
2021-03-10 21:51:56,102-INFO-lib.common.session.http.http_json-38-http://pay.pay-test.wanyol.com/plugin/post/refund
2021-03-10 21:51:56,102-INFO-lib.common.session.http.http_json-39-传入的参数：{'partnerOrder': '5fc69de40cb0452e98750d2d77084657', 'partnerCode': '2031', 'sign': 'edaf5795511e38a5f1bd1a875f0b0fee', 'notifyUrl': 'http://pay.pay-test.wanyol.com/notify/notify/receiver', 'payReqId': '', 'refundAmount': 0.01, 'clientIp': ''}
2021-03-10 21:51:56,502-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'resCode': '0000', 'resMsg': 'success'}
2021-03-10 21:55:09,003-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.52.44.235', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-03-10 21:55:09,248-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-03-10 21:55:09,292-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]成功
2021-03-10 21:55:09,292-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]
2021-03-10 21:55:09,509-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]成功
2021-03-10 21:55:09,509-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]
2021-03-10 21:55:09,532-INFO-lib.common.db_operation.mysql_operation-118-成功连接到测试专用环境-MYSQL：{'host': '10.52.54.122', 'user': 'opay', 'pwd': '_UI7xHubrhTPIP1J_T4so7SU7ATCrUzm7cAh6TdBLLHWUSQUQqD8p45xVQzV3Czi', 'port': '33066'}
2021-03-10 21:55:09,532-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `test_account`.`account_test_env`
2021-03-10 21:55:09,537-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT merchant_key FROM `db_order_0`.`merchant_info` WHERE merchant_id = '2031'
2021-03-10 21:55:09,540-INFO-lib.common_biz.find_key-39-查询到业务线2031秘钥信息：MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCMVhIN5xQPRdmo1fmm0HBOlRk2XnJsuKgOBi6b1IFAUWtROpm6lRnw45M83a/XiHEZv5FOp+rssGlgwcWeLuexI6kCF5hFT6gsEYy9XRfpSBOUA2UwcajPRsMoEKRmEIm+NpmwnGAeeZK2Y7Xwr3imHdLJ86VgJ5zMedqd4IfXWQIDAQAB
2021-03-10 21:55:09,540-INFO-退款接口-43-Sign加密前原始字符串: notifyUrl=http://pay.pay-test.wanyol.com/notify/notify/receiver&partnerCode=2031&partnerOrder=0f4ff46680ce400684c31b10f988366c&refundAmount=0.01&key=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCMVhIN5xQPRdmo1fmm0HBOlRk2XnJsuKgOBi6b1IFAUWtROpm6lRnw45M83a/XiHEZv5FOp+rssGlgwcWeLuexI6kCF5hFT6gsEYy9XRfpSBOUA2UwcajPRsMoEKRmEIm+NpmwnGAeeZK2Y7Xwr3imHdLJ86VgJ5zMedqd4IfXWQIDAQAB
2021-03-10 21:55:09,540-INFO-退款接口-46-{'partnerOrder': '0f4ff46680ce400684c31b10f988366c', 'partnerCode': '2031', 'sign': '41b05faf1fb97b2dcc0cbd4597e837b0', 'notifyUrl': 'http://pay.pay-test.wanyol.com/notify/notify/receiver', 'payReqId': '', 'refundAmount': 0.01, 'clientIp': ''}
2021-03-10 21:55:09,540-INFO-lib.common.session.http.http_json-38-http://pay.pay-test.wanyol.com/plugin/post/refund
2021-03-10 21:55:09,541-INFO-lib.common.session.http.http_json-39-传入的参数：{'partnerOrder': '0f4ff46680ce400684c31b10f988366c', 'partnerCode': '2031', 'sign': '41b05faf1fb97b2dcc0cbd4597e837b0', 'notifyUrl': 'http://pay.pay-test.wanyol.com/notify/notify/receiver', 'payReqId': '', 'refundAmount': 0.01, 'clientIp': ''}
2021-03-10 21:55:10,428-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'resCode': '0000', 'resMsg': 'success'}
2021-03-10 21:58:01,511-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.52.44.235', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-03-10 21:58:01,875-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-03-10 21:58:01,923-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]成功
2021-03-10 21:58:01,923-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]
2021-03-10 21:58:02,154-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]成功
2021-03-10 21:58:02,154-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]
2021-03-10 21:58:02,176-INFO-lib.common.db_operation.mysql_operation-118-成功连接到测试专用环境-MYSQL：{'host': '10.52.54.122', 'user': 'opay', 'pwd': '_UI7xHubrhTPIP1J_T4so7SU7ATCrUzm7cAh6TdBLLHWUSQUQqD8p45xVQzV3Czi', 'port': '33066'}
2021-03-10 21:58:02,176-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `test_account`.`account_test_env`
2021-03-10 21:58:02,181-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT merchant_key FROM `db_order_0`.`merchant_info` WHERE merchant_id = '2031'
2021-03-10 21:58:02,184-INFO-lib.common_biz.find_key-39-查询到业务线2031秘钥信息：MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCMVhIN5xQPRdmo1fmm0HBOlRk2XnJsuKgOBi6b1IFAUWtROpm6lRnw45M83a/XiHEZv5FOp+rssGlgwcWeLuexI6kCF5hFT6gsEYy9XRfpSBOUA2UwcajPRsMoEKRmEIm+NpmwnGAeeZK2Y7Xwr3imHdLJ86VgJ5zMedqd4IfXWQIDAQAB
2021-03-10 21:58:02,184-INFO-退款接口-43-Sign加密前原始字符串: notifyUrl=http://pay.pay-test.wanyol.com/notify/notify/receiver&partnerCode=2031&partnerOrder=0743f78204ce4dec96b21ab5635ab1ca&refundAmount=0.01&key=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCMVhIN5xQPRdmo1fmm0HBOlRk2XnJsuKgOBi6b1IFAUWtROpm6lRnw45M83a/XiHEZv5FOp+rssGlgwcWeLuexI6kCF5hFT6gsEYy9XRfpSBOUA2UwcajPRsMoEKRmEIm+NpmwnGAeeZK2Y7Xwr3imHdLJ86VgJ5zMedqd4IfXWQIDAQAB
2021-03-10 21:58:02,184-INFO-退款接口-46-{'partnerOrder': '0743f78204ce4dec96b21ab5635ab1ca', 'partnerCode': '2031', 'sign': '98f7ad8f2b4f128f76e89cae5c08691b', 'notifyUrl': 'http://pay.pay-test.wanyol.com/notify/notify/receiver', 'payReqId': '', 'refundAmount': 0.01, 'clientIp': ''}
2021-03-10 21:58:02,184-INFO-lib.common.session.http.http_json-38-http://pay.pay-test.wanyol.com/plugin/post/refund
2021-03-10 21:58:02,184-INFO-lib.common.session.http.http_json-39-传入的参数：{'partnerOrder': '0743f78204ce4dec96b21ab5635ab1ca', 'partnerCode': '2031', 'sign': '98f7ad8f2b4f128f76e89cae5c08691b', 'notifyUrl': 'http://pay.pay-test.wanyol.com/notify/notify/receiver', 'payReqId': '', 'refundAmount': 0.01, 'clientIp': ''}
2021-03-10 21:58:03,102-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'resCode': '0000', 'resMsg': 'success'}
2021-03-10 21:58:48,920-INFO-lib.common.session.dubbo.dubbo-51-dubbo invoke语句：invoke NearmeAccountOperate.addSubtractOperate({'amountMoney': '10', 'batchId': '98408125467261780808830668384857', 'bizNo': 'ECnqX5v4DT9NSrZWUuK1Aeda806tHcOV', 'operateType': 'PRESENT', 'requestId': '49266984964239967865073082816679', 'source': 'test', 'ssoid': '2076075925', 'timeStamp': 1615384728917})
2021-03-10 21:58:48,969-DEBUG-lib.common.session.dubbo.dubbo-55-{"data":{"ssoid":"2076075925","timeStamp":0,"amount":10.0,"success":true,"appId":null,"sign":null,"signType":null,"failReason":null,"remark":null,"extraJson":null,"accountOperateType":"PRESENT"},"success":true,"errorDetail":"成功","resCode":"000000","resMsg":"成功"}

2021-03-10 21:58:48,970-INFO-lib.common.session.dubbo.dubbo-57-dubbo回参：{'data': {'ssoid': '2076075925', 'timeStamp': 0, 'amount': 10.0, 'success': True, 'appId': None, 'sign': None, 'signType': None, 'failReason': None, 'remark': None, 'extraJson': None, 'accountOperateType': 'PRESENT'}, 'success': True, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功'}
2021-03-10 21:59:50,068-INFO-lib.common.session.dubbo.dubbo-51-dubbo invoke语句：invoke com.oppo.voucher.api.CouponBatchGrant.batchGrant({'couponName': 'anto_grant1615384790065', 'useableFromTime': '2020-01-01 00:00:00', 'useableEndTime': '2022-12-31 00:00:00', 'settleType': '1', 'bizNo': '2031', 'scopeId': '7104f7bc23e445daba913a5a96a264ac', 'blackScopeId': '', 'subScopeId': '', 'couponType': 'KB_COUPON', 'couponDiscountType': 'XIAOFEI', 'conditionAmount': '0', 'cutAmount': '10', 'ratio': 0, 'maxCutAmount': '0', 'applyCount': 1, 'ssoidList': ['2076075925'], 'batchId': ''})
2021-03-10 21:59:50,095-DEBUG-lib.common.session.dubbo.dubbo-55-{"data":{"batchVouCreateResList":[{"ssoid":"2076075925","vouId":"62299805"}],"vouIdList":null,"batchId":"236f06604b344a12a47e259ffda579c5"},"success":true,"errorDetail":"成功","resCode":"000000","resMsg":"成功"}

2021-03-10 21:59:50,095-INFO-lib.common.session.dubbo.dubbo-57-dubbo回参：{'data': {'batchVouCreateResList': [{'ssoid': '2076075925', 'vouId': '62299805'}], 'vouIdList': None, 'batchId': '236f06604b344a12a47e259ffda579c5'}, 'success': True, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功'}
2021-03-10 21:59:50,111-INFO-lib.common.session.dubbo.dubbo-51-dubbo invoke语句：invoke com.oppo.voucher.api.admin.CouponBatchInfoAdmin.operate({'couponBatchId': '236f06604b344a12a47e259ffda579c5', 'batchOperateType': 'PASS'})
2021-03-10 21:59:55,151-DEBUG-lib.common.session.dubbo.dubbo-55-{"data":{},"success":true,"errorDetail":"成功","resCode":"000000","resMsg":"成功"}

2021-03-10 21:59:55,152-INFO-lib.common.session.dubbo.dubbo-57-dubbo回参：{'data': {}, 'success': True, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功'}
2021-03-10 22:00:35,055-INFO-lib.common.session.dubbo.dubbo-51-dubbo invoke语句：invoke com.oppo.voucher.api.CouponBatchGrant.batchGrant({'couponName': 'anto_grant1615384835053', 'useableFromTime': '2020-01-01 00:00:00', 'useableEndTime': '2022-12-31 00:00:00', 'settleType': '1', 'bizNo': '2031', 'scopeId': '7104f7bc23e445daba913a5a96a264ac', 'blackScopeId': '', 'subScopeId': '', 'couponType': 'KB_COUPON', 'couponDiscountType': 'XIAOFEI', 'conditionAmount': '0', 'cutAmount': '10', 'ratio': 0, 'maxCutAmount': '0', 'applyCount': 1, 'ssoidList': ['2076075925'], 'batchId': ''})
2021-03-10 22:00:35,078-DEBUG-lib.common.session.dubbo.dubbo-55-{"data":{"batchVouCreateResList":[{"ssoid":"2076075925","vouId":"62299806"}],"vouIdList":null,"batchId":"a483c30110074542974f0089980cbc08"},"success":true,"errorDetail":"成功","resCode":"000000","resMsg":"成功"}

2021-03-10 22:00:35,078-INFO-lib.common.session.dubbo.dubbo-57-dubbo回参：{'data': {'batchVouCreateResList': [{'ssoid': '2076075925', 'vouId': '62299806'}], 'vouIdList': None, 'batchId': 'a483c30110074542974f0089980cbc08'}, 'success': True, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功'}
2021-03-10 22:00:35,094-INFO-lib.common.session.dubbo.dubbo-51-dubbo invoke语句：invoke com.oppo.voucher.api.admin.CouponBatchInfoAdmin.operate({'couponBatchId': 'a483c30110074542974f0089980cbc08', 'batchOperateType': 'PASS'})
2021-03-10 22:00:36,979-INFO-lib.common.session.dubbo.dubbo-51-dubbo invoke语句：invoke NearmeAccountOperate.addSubtractOperate({'amountMoney': '10', 'batchId': '65086729026251897391604571329487', 'bizNo': '80gkvR7hxj5mBZHyOoPDXEpFAe6bTlQ2', 'operateType': 'PRESENT', 'requestId': '51795772595460231428457890797468', 'source': 'test', 'ssoid': '2076075925', 'timeStamp': 1615384836977})
2021-03-10 22:00:37,003-DEBUG-lib.common.session.dubbo.dubbo-55-{"data":{"ssoid":"2076075925","timeStamp":0,"amount":10.0,"success":true,"appId":null,"sign":null,"signType":null,"failReason":null,"remark":null,"extraJson":null,"accountOperateType":"PRESENT"},"success":true,"errorDetail":"成功","resCode":"000000","resMsg":"成功"}

2021-03-10 22:00:37,003-INFO-lib.common.session.dubbo.dubbo-57-dubbo回参：{'data': {'ssoid': '2076075925', 'timeStamp': 0, 'amount': 10.0, 'success': True, 'appId': None, 'sign': None, 'signType': None, 'failReason': None, 'remark': None, 'extraJson': None, 'accountOperateType': 'PRESENT'}, 'success': True, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功'}
2021-03-10 22:00:40,135-DEBUG-lib.common.session.dubbo.dubbo-55-{"data":{},"success":true,"errorDetail":"成功","resCode":"000000","resMsg":"成功"}

2021-03-10 22:00:40,135-INFO-lib.common.session.dubbo.dubbo-57-dubbo回参：{'data': {}, 'success': True, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功'}
2021-03-10 22:01:29,370-INFO-lib.common.session.dubbo.dubbo-51-dubbo invoke语句：invoke NearmeAccountOperate.addSubtractOperate({'amountMoney': '10', 'batchId': '32176299817248596289307575450654', 'bizNo': 'o65SiOTvKjIE0cwPUx7VkQZHXCe1slrA', 'operateType': 'PRESENT', 'requestId': '88884289294588646665214343552715', 'source': 'test', 'ssoid': '2076075925', 'timeStamp': 1615384889367})
2021-03-10 22:01:29,394-DEBUG-lib.common.session.dubbo.dubbo-55-{"data":{"ssoid":"2076075925","timeStamp":0,"amount":10.0,"success":true,"appId":null,"sign":null,"signType":null,"failReason":null,"remark":null,"extraJson":null,"accountOperateType":"PRESENT"},"success":true,"errorDetail":"成功","resCode":"000000","resMsg":"成功"}

2021-03-10 22:01:29,394-INFO-lib.common.session.dubbo.dubbo-57-dubbo回参：{'data': {'ssoid': '2076075925', 'timeStamp': 0, 'amount': 10.0, 'success': True, 'appId': None, 'sign': None, 'signType': None, 'failReason': None, 'remark': None, 'extraJson': None, 'accountOperateType': 'PRESENT'}, 'success': True, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功'}
2021-03-10 22:06:38,636-INFO-lib.common.session.dubbo.dubbo-51-dubbo invoke语句：invoke com.oppo.voucher.api.CouponBatchGrant.batchGrant({'couponName': 'anto_grant1615385198634', 'useableFromTime': '2020-01-01 00:00:00', 'useableEndTime': '2022-12-31 00:00:00', 'settleType': '1', 'bizNo': '2031', 'scopeId': '7104f7bc23e445daba913a5a96a264ac', 'blackScopeId': '', 'subScopeId': '', 'couponType': 'KB_COUPON', 'couponDiscountType': 'XIAOFEI', 'conditionAmount': '0', 'cutAmount': '10', 'ratio': 0, 'maxCutAmount': '0', 'applyCount': 1, 'ssoidList': ['2076075925'], 'batchId': ''})
2021-03-10 22:06:38,670-DEBUG-lib.common.session.dubbo.dubbo-55-{"data":{"batchVouCreateResList":[{"ssoid":"2076075925","vouId":"62299807"}],"vouIdList":null,"batchId":"11a2d4c7e2d7485ab475da81d8d8524b"},"success":true,"errorDetail":"成功","resCode":"000000","resMsg":"成功"}

2021-03-10 22:06:38,671-INFO-lib.common.session.dubbo.dubbo-57-dubbo回参：{'data': {'batchVouCreateResList': [{'ssoid': '2076075925', 'vouId': '62299807'}], 'vouIdList': None, 'batchId': '11a2d4c7e2d7485ab475da81d8d8524b'}, 'success': True, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功'}
2021-03-10 22:06:38,686-INFO-lib.common.session.dubbo.dubbo-51-dubbo invoke语句：invoke com.oppo.voucher.api.admin.CouponBatchInfoAdmin.operate({'couponBatchId': '11a2d4c7e2d7485ab475da81d8d8524b', 'batchOperateType': 'PASS'})
2021-03-10 22:06:43,727-DEBUG-lib.common.session.dubbo.dubbo-55-{"data":{},"success":true,"errorDetail":"成功","resCode":"000000","resMsg":"成功"}

2021-03-10 22:06:43,727-INFO-lib.common.session.dubbo.dubbo-57-dubbo回参：{'data': {}, 'success': True, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功'}
2021-03-10 22:07:58,379-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.52.44.235', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-03-10 22:07:58,647-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-03-10 22:07:58,692-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]成功
2021-03-10 22:07:58,692-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]
2021-03-10 22:07:58,920-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]成功
2021-03-10 22:07:58,920-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]
2021-03-10 22:07:58,942-INFO-lib.common.db_operation.mysql_operation-118-成功连接到测试专用环境-MYSQL：{'host': '10.52.54.122', 'user': 'opay', 'pwd': '_UI7xHubrhTPIP1J_T4so7SU7ATCrUzm7cAh6TdBLLHWUSQUQqD8p45xVQzV3Czi', 'port': '33066'}
2021-03-10 22:07:58,943-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `test_account`.`account_test_env`
2021-03-10 22:07:58,947-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT merchant_key FROM `db_order_0`.`merchant_info` WHERE merchant_id = '2031'
2021-03-10 22:07:58,951-INFO-lib.common_biz.find_key-39-查询到业务线2031秘钥信息：MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCMVhIN5xQPRdmo1fmm0HBOlRk2XnJsuKgOBi6b1IFAUWtROpm6lRnw45M83a/XiHEZv5FOp+rssGlgwcWeLuexI6kCF5hFT6gsEYy9XRfpSBOUA2UwcajPRsMoEKRmEIm+NpmwnGAeeZK2Y7Xwr3imHdLJ86VgJ5zMedqd4IfXWQIDAQAB
2021-03-10 22:07:58,951-INFO-退款接口-43-Sign加密前原始字符串: notifyUrl=http://pay.pay-test.wanyol.com/notify/notify/receiver&partnerCode=2031&partnerOrder=922342c835074742af597e456b2d248b&refundAmount=0.01&key=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCMVhIN5xQPRdmo1fmm0HBOlRk2XnJsuKgOBi6b1IFAUWtROpm6lRnw45M83a/XiHEZv5FOp+rssGlgwcWeLuexI6kCF5hFT6gsEYy9XRfpSBOUA2UwcajPRsMoEKRmEIm+NpmwnGAeeZK2Y7Xwr3imHdLJ86VgJ5zMedqd4IfXWQIDAQAB
2021-03-10 22:07:58,951-INFO-退款接口-46-{'partnerOrder': '922342c835074742af597e456b2d248b', 'partnerCode': '2031', 'sign': '0594a6a0679f0663c96c12d63ed89cb3', 'notifyUrl': 'http://pay.pay-test.wanyol.com/notify/notify/receiver', 'payReqId': '', 'refundAmount': 0.01, 'clientIp': ''}
2021-03-10 22:07:58,951-INFO-lib.common.session.http.http_json-38-http://pay.pay-test.wanyol.com/plugin/post/refund
2021-03-10 22:07:58,951-INFO-lib.common.session.http.http_json-39-传入的参数：{'partnerOrder': '922342c835074742af597e456b2d248b', 'partnerCode': '2031', 'sign': '0594a6a0679f0663c96c12d63ed89cb3', 'notifyUrl': 'http://pay.pay-test.wanyol.com/notify/notify/receiver', 'payReqId': '', 'refundAmount': 0.01, 'clientIp': ''}
2021-03-10 22:07:59,487-INFO-lib.common.session.http.http_json-41-返回状态码200, 返回结果：{'resCode': '0000', 'resMsg': 'success'}
2021-03-10 22:08:45,515-INFO-lib.common.session.dubbo.dubbo-51-dubbo invoke语句：invoke NearmeAccountOperate.addSubtractOperate({'amountMoney': '10', 'batchId': '78418018309511030852019869164789', 'bizNo': 'HlVnDm0eB9UPTb3tO4dJjI8h726oGzYA', 'operateType': 'PRESENT', 'requestId': '66139353333763061951687482041284', 'source': 'test', 'ssoid': '2076075925', 'timeStamp': 1615385325512})
2021-03-10 22:08:45,580-DEBUG-lib.common.session.dubbo.dubbo-55-{"data":{"ssoid":"2076075925","timeStamp":0,"amount":10.0,"success":true,"appId":null,"sign":null,"signType":null,"failReason":null,"remark":null,"extraJson":null,"accountOperateType":"PRESENT"},"success":true,"errorDetail":"成功","resCode":"000000","resMsg":"成功"}

2021-03-10 22:08:45,580-INFO-lib.common.session.dubbo.dubbo-57-dubbo回参：{'data': {'ssoid': '2076075925', 'timeStamp': 0, 'amount': 10.0, 'success': True, 'appId': None, 'sign': None, 'signType': None, 'failReason': None, 'remark': None, 'extraJson': None, 'accountOperateType': 'PRESENT'}, 'success': True, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功'}
2021-03-10 22:08:47,057-INFO-lib.common.session.dubbo.dubbo-51-dubbo invoke语句：invoke com.oppo.voucher.api.CouponBatchGrant.batchGrant({'couponName': 'anto_grant1615385327055', 'useableFromTime': '2020-01-01 00:00:00', 'useableEndTime': '2022-12-31 00:00:00', 'settleType': '1', 'bizNo': '2031', 'scopeId': '7104f7bc23e445daba913a5a96a264ac', 'blackScopeId': '', 'subScopeId': '', 'couponType': 'KB_COUPON', 'couponDiscountType': 'XIAOFEI', 'conditionAmount': '0', 'cutAmount': '10', 'ratio': 0, 'maxCutAmount': '0', 'applyCount': 1, 'ssoidList': ['2076075925'], 'batchId': ''})
2021-03-10 22:08:47,096-DEBUG-lib.common.session.dubbo.dubbo-55-{"data":{"batchVouCreateResList":[{"ssoid":"2076075925","vouId":"62299808"}],"vouIdList":null,"batchId":"3ebf220346844b3d8978d431fdb88475"},"success":true,"errorDetail":"成功","resCode":"000000","resMsg":"成功"}

2021-03-10 22:08:47,096-INFO-lib.common.session.dubbo.dubbo-57-dubbo回参：{'data': {'batchVouCreateResList': [{'ssoid': '2076075925', 'vouId': '62299808'}], 'vouIdList': None, 'batchId': '3ebf220346844b3d8978d431fdb88475'}, 'success': True, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功'}
2021-03-10 22:08:47,111-INFO-lib.common.session.dubbo.dubbo-51-dubbo invoke语句：invoke com.oppo.voucher.api.admin.CouponBatchInfoAdmin.operate({'couponBatchId': '3ebf220346844b3d8978d431fdb88475', 'batchOperateType': 'PASS'})
2021-03-10 22:08:52,153-DEBUG-lib.common.session.dubbo.dubbo-55-{"data":{},"success":true,"errorDetail":"成功","resCode":"000000","resMsg":"成功"}

2021-03-10 22:08:52,153-INFO-lib.common.session.dubbo.dubbo-57-dubbo回参：{'data': {}, 'success': True, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功'}
2021-03-10 22:15:16,820-INFO-lib.common.session.dubbo.dubbo-51-dubbo invoke语句：invoke com.oppo.voucher.api.CouponBatchGrant.batchGrant({'couponName': 'anto_grant1615385716818', 'useableFromTime': '2020-01-01 00:00:00', 'useableEndTime': '2022-12-31 00:00:00', 'settleType': '1', 'bizNo': '2031', 'scopeId': '7104f7bc23e445daba913a5a96a264ac', 'blackScopeId': '', 'subScopeId': '', 'couponType': 'KB_COUPON', 'couponDiscountType': 'XIAOFEI', 'conditionAmount': '0', 'cutAmount': '10', 'ratio': 0, 'maxCutAmount': '0', 'applyCount': 1, 'ssoidList': ['2076075925'], 'batchId': ''})
2021-03-10 22:15:16,849-DEBUG-lib.common.session.dubbo.dubbo-55-{"data":{"batchVouCreateResList":[{"ssoid":"2076075925","vouId":"62299809"}],"vouIdList":null,"batchId":"4a273c8c810c4c58b041418615f171ed"},"success":true,"errorDetail":"成功","resCode":"000000","resMsg":"成功"}

2021-03-10 22:15:16,849-INFO-lib.common.session.dubbo.dubbo-57-dubbo回参：{'data': {'batchVouCreateResList': [{'ssoid': '2076075925', 'vouId': '62299809'}], 'vouIdList': None, 'batchId': '4a273c8c810c4c58b041418615f171ed'}, 'success': True, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功'}
2021-03-10 22:15:16,865-INFO-lib.common.session.dubbo.dubbo-51-dubbo invoke语句：invoke com.oppo.voucher.api.admin.CouponBatchInfoAdmin.operate({'couponBatchId': '4a273c8c810c4c58b041418615f171ed', 'batchOperateType': 'PASS'})
2021-03-10 22:15:21,910-DEBUG-lib.common.session.dubbo.dubbo-55-{"data":{},"success":true,"errorDetail":"成功","resCode":"000000","resMsg":"成功"}

2021-03-10 22:15:21,911-INFO-lib.common.session.dubbo.dubbo-57-dubbo回参：{'data': {}, 'success': True, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功'}
2021-03-10 22:17:40,283-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.52.44.235', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-03-10 22:17:40,579-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-03-10 22:17:40,653-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]成功
2021-03-10 22:17:40,654-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]
2021-03-10 22:17:40,870-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]成功
2021-03-10 22:17:40,870-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]
2021-03-10 22:17:40,893-INFO-lib.common.db_operation.mysql_operation-118-成功连接到测试专用环境-MYSQL：{'host': '10.52.54.122', 'user': 'opay', 'pwd': '_UI7xHubrhTPIP1J_T4so7SU7ATCrUzm7cAh6TdBLLHWUSQUQqD8p45xVQzV3Czi', 'port': '33066'}
2021-03-10 22:17:40,893-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `test_account`.`account_test_env`
2021-03-10 22:17:41,018-INFO-qq-scarlet-60-<xml><return_code>SUCCESS</return_code></xml>
2021-03-10 22:17:41,018-INFO-qq-scarlet-62-回调解析成功
2021-03-10 22:17:51,682-INFO-lib.common.session.dubbo.dubbo-51-dubbo invoke语句：invoke NearmeAccountOperate.addSubtractOperate({'amountMoney': '10', 'batchId': '23143848281682553362679233653844', 'bizNo': 'xGXtcKYeEy98DV0FsniQUmWb13v7Lo6P', 'operateType': 'PRESENT', 'requestId': '52824479328412005129129233158994', 'source': 'test', 'ssoid': '2076075925', 'timeStamp': 1615385871679})
2021-03-10 22:17:51,709-DEBUG-lib.common.session.dubbo.dubbo-55-{"data":{"ssoid":"2076075925","timeStamp":0,"amount":10.0,"success":true,"appId":null,"sign":null,"signType":null,"failReason":null,"remark":null,"extraJson":null,"accountOperateType":"PRESENT"},"success":true,"errorDetail":"成功","resCode":"000000","resMsg":"成功"}

2021-03-10 22:17:51,709-INFO-lib.common.session.dubbo.dubbo-57-dubbo回参：{'data': {'ssoid': '2076075925', 'timeStamp': 0, 'amount': 10.0, 'success': True, 'appId': None, 'sign': None, 'signType': None, 'failReason': None, 'remark': None, 'extraJson': None, 'accountOperateType': 'PRESENT'}, 'success': True, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功'}
2021-03-10 22:17:54,696-INFO-lib.common.session.dubbo.dubbo-51-dubbo invoke语句：invoke com.oppo.voucher.api.CouponBatchGrant.batchGrant({'couponName': 'anto_grant1615385874693', 'useableFromTime': '2020-01-01 00:00:00', 'useableEndTime': '2022-12-31 00:00:00', 'settleType': '1', 'bizNo': '2031', 'scopeId': '7104f7bc23e445daba913a5a96a264ac', 'blackScopeId': '', 'subScopeId': '', 'couponType': 'KB_COUPON', 'couponDiscountType': 'XIAOFEI', 'conditionAmount': '0', 'cutAmount': '10', 'ratio': 0, 'maxCutAmount': '0', 'applyCount': 1, 'ssoidList': ['2076075925'], 'batchId': ''})
2021-03-10 22:17:54,728-DEBUG-lib.common.session.dubbo.dubbo-55-{"data":{"batchVouCreateResList":[{"ssoid":"2076075925","vouId":"62299810"}],"vouIdList":null,"batchId":"88947fb47e434b54942a3d68f2a3d6d7"},"success":true,"errorDetail":"成功","resCode":"000000","resMsg":"成功"}

2021-03-10 22:17:54,728-INFO-lib.common.session.dubbo.dubbo-57-dubbo回参：{'data': {'batchVouCreateResList': [{'ssoid': '2076075925', 'vouId': '62299810'}], 'vouIdList': None, 'batchId': '88947fb47e434b54942a3d68f2a3d6d7'}, 'success': True, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功'}
2021-03-10 22:17:54,744-INFO-lib.common.session.dubbo.dubbo-51-dubbo invoke语句：invoke com.oppo.voucher.api.admin.CouponBatchInfoAdmin.operate({'couponBatchId': '88947fb47e434b54942a3d68f2a3d6d7', 'batchOperateType': 'PASS'})
2021-03-10 22:17:59,783-DEBUG-lib.common.session.dubbo.dubbo-55-{"data":{},"success":true,"errorDetail":"成功","resCode":"000000","resMsg":"成功"}

2021-03-10 22:17:59,783-INFO-lib.common.session.dubbo.dubbo-57-dubbo回参：{'data': {}, 'success': True, 'errorDetail': '成功', 'resCode': '000000', 'resMsg': '成功'}
2021-03-10 22:18:21,919-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.52.44.235', 'user': 'opay', 'pwd': 'opay_test@2020', 'port': '33066'}
2021-03-10 22:18:22,254-INFO-lib.common.db_operation.mysql_operation-99-成功连接到测试环境1-MYSQL：{'host': '10.3.1.240', 'user': 'opay', 'pwd': 'opay_test@2019', 'port': '3306'}
2021-03-10 22:18:22,297-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]成功
2021-03-10 22:18:22,297-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.177.85.94', 'port': '6379', 'name': '10.177.85.94:6379'}, {'host': '10.177.85.93', 'port': '6379', 'name': '10.177.85.93:6379'}, {'host': '10.177.85.96', 'port': '6379', 'name': '10.177.85.96:6379'}]
2021-03-10 22:18:22,525-INFO-lib.common.db_operation.redis_operation-35-连接redis集群[{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]成功
2021-03-10 22:18:22,525-INFO-lib.common.db_operation.redis_operation-77-connection list: [{'host': '10.3.1.44', 'port': '6400', 'name': '10.3.1.44:6400'}, {'host': '10.3.1.189', 'port': '6400', 'name': '10.3.1.189:6400'}, {'host': '10.3.1.79', 'port': '6400', 'name': '10.3.1.79:6400'}]
2021-03-10 22:18:22,548-INFO-lib.common.db_operation.mysql_operation-118-成功连接到测试专用环境-MYSQL：{'host': '10.52.54.122', 'user': 'opay', 'pwd': '_UI7xHubrhTPIP1J_T4so7SU7ATCrUzm7cAh6TdBLLHWUSQUQqD8p45xVQzV3Czi', 'port': '33066'}
2021-03-10 22:18:22,548-INFO-lib.common.db_operation.mysql_operation-47-执行sql语句：SELECT * FROM `test_account`.`account_test_env`
2021-03-10 22:18:22,675-INFO-qq-scarlet-60-<xml><return_code>SUCCESS</return_code></xml>
2021-03-10 22:18:22,675-INFO-qq-scarlet-62-回调解析成功
